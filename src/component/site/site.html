<!-- Site title with number-->
<div class="col-md-12">
    <div ui-view="siteNo"></div>
</div>
<div class="col-md-8">
    <div ui-view="aMap"></div>
</div>
<!-- Site with map above it -->
<div class="col-md-8">
    <div ui-view="aSite"></div>
</div>

<!-- if there's a site, show the OP, Sensor, HWM, Files, and Peaks -->
<div ng-if="siteID > 0">
    <div class="col-md-4">
        <div ui-view="op"></div>
        <div ui-view="sensor"></div>
        <div ui-view="hwm"></div>
        <div ui-view="peak"></div>
        <div ui-view="file"></div>
    </div>
</div>

<!-- Style for 'graying' out proposed sensor parts -->
<style type="text/css">
    .tooltip-wide {
        width: 100% !important;
    }

    .darkClass {
        filter: alpha(opacity=50); /* IE */
        opacity: 0.5; /* Safari, Opera */
        -moz-opacity: 0.50; /* FireFox */
        z-index: 20;
        background-repeat: no-repeat;
        background-position: center;
    }

    .redText {
        color: red;
    }

    .custom-file-input::-webkit-file-upload-button, .custom-file-inputChange::-webkit-file-upload-button {
        visibility: hidden;
    }

    .custom-file-input::before {
        content: 'Re-Upload File';
        display: inline-block;
        background: -webkit-linear-gradient(top, #f9f9f9, #e3e3e3);
        border: 1px solid #999;
        border-radius: 3px;
        padding: 5px 8px;
        outline: none;
        white-space: nowrap;
        -webkit-user-select: none;
        cursor: pointer;
        text-shadow: 1px 1px #fff;
        font-weight: 700;
        font-size: 10pt;
    }

    .custom-file-inputChange::before {
        content: 'Replace Associated File';
        display: inline-block;
        background: -webkit-linear-gradient(top, #f9f9f9, #e3e3e3);
        border: 1px solid #999;
        border-radius: 3px;
        padding: 5px 8px;
        outline: none;
        white-space: nowrap;
        -webkit-user-select: none;
        cursor: pointer;
        text-shadow: 1px 1px #fff;
        font-weight: 700;
        font-size: 10pt;
    }

    .custom-file-input:hover::before, .custom-file-inputChange::before {
        border-color: black;
    }

    .custom-file-input:active::before, .custom-file-inputChange::before {
        background: -webkit-linear-gradient(top, #e3e3e3, #f9f9f9);
    }

    .multiSelect .checkBoxContainer {
        overflow-y: auto !important;
    }
</style>

<!-- MODAL for Site Create/edit-->
<script type="text/ng-template" id="SITEmodal.html">
    <div class="modal-header">
        <h3 class="modal-title">Site<button class="close" type="button" ng-click="cancel()" aria-hidden="true" style="color:gray;">&times;</button></h3>
    </div>
    <div class="modal-body">
        <uib-accordion close-others="false">
            <!--SITE Part-->
            <uib-accordion-group is-open="s.sOpen">
                <uib-accordion-heading>
                    <i style="margin-right:10px" class="pull-left glyphicon" ng-class="{'glyphicon-chevron-down': s.sOpen, 'glyphicon-chevron-right': !s.sOpen}"></i>
                    <span>Site Information</span>
                </uib-accordion-heading>
                <form class="form-horizontal" name="siteForm">
                    <fieldset>
                        <!--Site Description*-->
                        <div class="form-group">
                            <label class="col-md-4 control-label req" for="site_description">
                                <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                                    <span class="glyphicon glyphicon-eye-open"></span>
                                </button> Site Description:
                                <button type="button" class="help-btn" tooltip-placement="right" tooltip-append-to-body="false" uib-tooltip="Brief description of the site area. Displayed publicly.">
                                    <span class="glyphicon glyphicon-question-sign"></span>
                                </button>
                                <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Required">
                                    <span class="glyphicon glyphicon-asterisk" style="color:#d00;font-size:xx-small;"></span>
                                </button>
                            </label>
                            <div class="col-md-7">
                                <textarea class="form-control" id="site_description" type="text" rows="3" placeholder="Site Description" ng-model="aSite.site_description" required />
                            </div>

                        </div>
                        <!--Internal Notes-->
                        <div class="form-group">
                            <label class="col-md-4 control-label" for="site_notes">Internal Notes:</label>
                            <div class="col-md-7">
                                <textarea class="form-control" id="site_notes" type="text" rows="3" placeholder="Internal Notes" ng-model="aSite.site_notes" />
                            </div>
                        </div>
                        <!-- dec deg or dms: -->
                        <div>
                            <label class="col-md-4 control-label"></label>
                            <div class="col-md-7">
                                <span class="radio-inline">
                                    <input type="radio" name="decDegORdms" ng-model="aSite.decDegORdms" ng-change="latLongChange()" value="dd" /> Dec Deg
                                </span>
                                <span class="radio-inline">
                                    <input type="radio" name="decDegORdms" ng-model="aSite.decDegORdms" ng-change="latLongChange()" value="dms" /> DMS
                                </span>
                            </div>
                        </div>
                        <!--Latitude*-->
                        <div class="form-group" ng-class="{'has-error':siteForm.latitude_dd.$invalid && siteForm.latitude_dd.$dirty}">
                            <label class="col-md-4 control-label req" for="latitude_dd">
                                <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                                    <span class="glyphicon glyphicon-eye-open"></span>
                                </button> Latitude:
                                <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Required">
                                    <span class="glyphicon glyphicon-asterisk" style="color:#d00;font-size:xx-small;"></span>
                                </button>
                            </label>
                            <div class="col-md-7" ng-if="aSite.decDegORdms == 'dd'">
                                <input class="form-control" ng-keypress="isNum($event)" name="latitude_dd" id="latitude_dd" ng-model="aSite.latitude_dd"
                                       ng-model-options="{ updateOn: 'blur' }" ng-change="checkValue('dd','lat')" type="text" placeholder="Latitude" ng-required="aSite.decDegORdms == 'dd'" />
                            </div>
                            <div class="col-md-7" ng-if="aSite.decDegORdms == 'dms'">
                                <table>
                                    <tr>
                                        <td><input class="form-control" ng-keypress="isNum($event)" ng-model-options="{ updateOn: 'blur' }" ng-change="checkValue('dms','lat')" id="LaDeg" name="Deg" ng-model="DMS.LADeg" type="text" ng-required="aSite.decDegORdms == 'dms'" /></td>
                                        <td>°</td>
                                        <td><input class="form-control" ng-keypress="isNum($event)" ng-model-options="{ updateOn: 'blur' }" ng-change="checkValue('dms','lat')" name="Min" ng-model="DMS.LAMin" type="text" ng-required="aSite.decDegORdms == 'dms'" /></td>
                                        <td>′</td>
                                        <td><input class="form-control" ng-keypress="isNum($event)" ng-model-options="{ updateOn: 'blur' }" ng-change="checkValue('dms','lat')" name="Sec" ng-model="DMS.LASec" type="text" ng-required="aSite.decDegORdms == 'dms'" /></td>
                                        <td>″</td>
                                    </tr>
                                </table>
                            </div>
                        </div>
                        <!--Longitude*-->
                        <div class="form-group" ng-class="{'has-error':siteForm.longitude_dd.$invalid && siteForm.longitude_dd.$dirty}">
                            <label class="col-md-4 control-label req" for="longitude_dd">
                                <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                                    <span class="glyphicon glyphicon-eye-open"></span>
                                </button> Longitude:
                                <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Required">
                                    <span class="glyphicon glyphicon-asterisk" style="color:#d00;font-size:xx-small;"></span>
                                </button>
                            </label>
                            <div class="col-md-7" ng-if="aSite.decDegORdms == 'dd'">
                                <input class="form-control" ng-keypress="isNum($event)" ng-enter="getAddress()" id="longitude_dd" name="longitude_dd" ng-model="aSite.longitude_dd"
                                       ng-model-options="{ updateOn: 'blur' }" ng-change="checkValue('dd', 'long')" type="text" placeholder="Longitude" ng-required="aSite.decDegORdms == 'dd'" />
                            </div>
                            <div class="col-md-7" ng-if="aSite.decDegORdms == 'dms'">
                                <table>
                                    <tr>
                                        <td><input class="form-control" ng-keypress="isNum($event)" ng-model-options="{ updateOn: 'blur' }" ng-change="checkValue('dms', 'long')" id="LoDeg" name="Deg" ng-model="DMS.LODeg" type="text" ng-required="aSite.decDegORdms == 'dms'" /></td>
                                        <td>°</td>
                                        <td><input class="form-control" ng-keypress="isNum($event)" ng-model-options="{ updateOn: 'blur' }" ng-change="checkValue('dms', 'long')" name="Min" ng-model="DMS.LOMin" type="text" ng-required="aSite.decDegORdms == 'dms'" /></td>
                                        <td>′</td>
                                        <td><input class="form-control" ng-keypress="isNum($event)" ng-model-options="{ updateOn: 'blur' }" ng-change="checkValue('dms', 'long')" name="Sec" ng-model="DMS.LOSec" type="text" ng-required="aSite.decDegORdms == 'dms'" /></td>
                                        <td>″</td>
                                    </tr>
                                </table>
                            </div>
                        </div>
                        <!--Horizontal Datum*-->
                        <div class="form-group" ng-class="{'has-error':siteForm.hdatum_id.$invalid && siteForm.hdatum_id.$dirty}">
                            <label class="col-md-4 control-label req" for="hdatum_id">
                                <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                                    <span class="glyphicon glyphicon-eye-open"></span>
                                </button> Horizontal Datum:
                                <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Required">
                                    <span class="glyphicon glyphicon-asterisk" style="color:#d00;font-size:xx-small;"></span>
                                </button>
                            </label>
                            <div class="col-md-7">
                                <select class="form-control" name="hdatum_id" ng-model="aSite.hdatum_id"
                                        ng-options="hd.datum_id as hd.datum_name for hd in HorizontalDatumList" required>
                                    <option value=""></option>
                                </select>
                            </div>
                        </div>
                        <!--Horizontal Collection Method*-->
                        <div class="form-group" ng-class="{'has-error':siteForm.hcollect_method_id.$invalid && siteForm.hcollect_method_id.$dirty}">
                            <label class="col-md-4 control-label req" for="hcollect_method_id">
                                <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                                    <span class="glyphicon glyphicon-eye-open"></span>
                                </button> Horizontal Collection Method:
                                <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Required">
                                    <span class="glyphicon glyphicon-asterisk" style="color:#d00;font-size:xx-small;"></span>
                                </button>
                            </label>
                            <div class="col-md-7">
                                <select class="form-control" name="hcollect_method_id" ng-model="aSite.hcollect_method_id"
                                        ng-options="hc.hcollect_method_id as hc.hcollect_method for hc in HorCollMethodList" required>
                                    <option value=""></option>
                                </select>
                            </div>
                        </div>
                        <!--populate button*-->
                        <div class="form-group">
                            <div class="panel panel-default site-panel">
                                <div class="panel-heading">
                                    <h3 class="panel-title">
                                        Location Information
                                        <button type="button" class="col-md-1 borderLess pull-right" tooltip-placement="right" tooltip-append-to-body="false" uib-tooltip="Also checks for nearby sites within x ft, and populates 5 fields below.">
                                            <span class="glyphicon glyphicon-question-sign"></span>
                                        </button>
                                    </h3>
                                </div>
                                <div class="panel-body">
                                    <div class="form-group" ng-if="aSite.site_id == undefined">
                                        <label class="col-md-4 control-label" for="POPULATEBTN">
                                            Click here to populate location fields:
                                            <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Required">
                                                <span class="glyphicon glyphicon-asterisk" style="color:#d00;font-size:xx-small;"></span>
                                            </button>
                                        </label>
                                        <div class="col-md-7">
                                            <button type="button" ng-click="getAddress()" class="btn-wim btn-inline btn-md btn-blue">Verify Location</button>
                                        </div>
                                    </div>

                                    <!-- map showing lat/long location-->
                                    <div class="col-md-7 col-md-offset-3" style="height:300px;display:table;" ng-show="showMap">
                                        <div><label>There are: {{closeSites.length}} sites nearby.</label></div>
                                        <p ng-if="closeSites.length > 0">
                                            To use one of these sites (shown as blue dot) instead, click on the site name.
                                            <ul style="max-height:50px;overflow:auto;">
                                                <li ng-repeat="s in closeSites" style="list-style:none">
                                                    <a ui-sref="site.dashboard({id: s.site_id})" ng-click="$dismiss()">{{s.site_no}}</a>
                                                </li>
                                            </ul>
                                        </p>
                                        <p>Click and drag the point to relocate this site (all related fields will update).</p>
                                        <div class="panel panel-primary" style="height:inherit">
                                            <leaflet lf-center="mapCenter" width="100%" height="100%" markers="mapMarkers"></leaflet>
                                        </div>
                                    </div>
                                    <br clear="all" />
                                    <!--Address-->
                                    <div class="form-group">
                                        <label class="col-md-4 control-label" for="address">
                                            <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                                                <span class="glyphicon glyphicon-eye-open"></span>
                                            </button> Address:
                                        </label>
                                        <div class="col-md-7">
                                            <input class="form-control" name="address" ng-model="aSite.address" type="text" />
                                        </div>
                                    </div>
                                    <!--City-->
                                    <div class="form-group">
                                        <label class="col-md-4 control-label" for="city">
                                            <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                                                <span class="glyphicon glyphicon-eye-open"></span>
                                            </button> City:
                                        </label>
                                        <div class="col-md-7">
                                            <input class="form-control" name="city" ng-model="aSite.city" type="text" />
                                        </div>
                                    </div>
                                    <!--State*-->
                                    <div class="form-group" ng-class="{'has-error':siteForm.state.$invalid && siteForm.state.$dirty}">
                                        <label class="col-md-4 control-label req" for="state">
                                            <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                                                <span class="glyphicon glyphicon-eye-open"></span>
                                            </button> State:
                                            <button type="button" class="help-btn" tooltip-placement="right" tooltip-append-to-body="false" uib-tooltip="Used to autogenerate the Site Number.">
                                                <span class="glyphicon glyphicon-question-sign"></span>
                                            </button>
                                            <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Required">
                                                <span class="glyphicon glyphicon-asterisk" style="color:#d00;font-size:xx-small;"></span>
                                            </button>
                                        </label>
                                        <div class="col-md-7">
                                            <select class="form-control" name="state" ng-model="aSite.state" ng-change="updateCountyList(aSite.state)"
                                                    ng-options="state.state_abbrev as state.state_name for state in StateList" required>
                                                <option value=""></option>
                                            </select>
                                        </div>

                                    </div>

                                    <!--Zip-->
                                    <div class="form-group">
                                        <label class="col-md-4 control-label" for="zip">
                                            <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                                                <span class="glyphicon glyphicon-eye-open"></span>
                                            </button> Zip:
                                        </label>
                                        <div class="col-md-7">
                                            <input class="form-control" name="zip" ng-model="aSite.zip" type="text" ui-mask="{{'99999'}}" />
                                        </div>
                                    </div>

                                    <!--County*-->
                                    <div class="form-group" ng-class="{'has-error':siteForm.county.$invalid && siteForm.county.$dirty}">
                                        <label class="col-md-4 control-label req" for="county">
                                            <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                                                <span class="glyphicon glyphicon-eye-open"></span>
                                            </button> County:
                                            <button type="button" class="help-btn" tooltip-placement="right" tooltip-append-to-body="false" uib-tooltip="Used to autogenerate the Site Number. Use the verify location to populate.">
                                                <span class="glyphicon glyphicon-question-sign"></span>
                                            </button>
                                            <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Required">
                                                <span class="glyphicon glyphicon-asterisk" style="color:#d00;font-size:xx-small;"></span>
                                            </button>
                                        </label>
                                        <div class="col-md-7">
                                            <select class="form-control" name="county" ng-model="aSite.county" ng-options="c.county_name as c.county_name for c in stateCountyList" required>
                                                <option value=""></option>
                                            </select>
                                        </div>

                                    </div>
                                </div>
                            </div>
                        </div>
                        <!--Waterbody*-->
                        <div class="form-group" ng-class="{'has-error':siteForm.waterbody.$invalid && siteForm.waterbody.$dirty}">
                            <label class="col-md-4 control-label req" for="waterbody">
                                <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                                    <span class="glyphicon glyphicon-eye-open"></span>
                                </button> Waterbody:
                                <button type="button" class="help-btn" tooltip-placement="right" tooltip-append-to-body="false" uib-tooltip-html="htmlDescriptionTip">
                                    <span class="glyphicon glyphicon-question-sign"></span>
                                </button>
                                <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Required">
                                    <span class="glyphicon glyphicon-asterisk" style="color:#d00;font-size:xx-small;"></span>
                                </button>
                            </label>
                            <div class="col-md-7">
                                <input class="form-control" name="waterbody" ng-model="aSite.waterbody" type="text" required />
                            </div>

                        </div>
                        <!--Drainage Area-->
                        <div class="form-group">
                            <label class="col-md-4 control-label" for="drainage_area_sqmi">
                                <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                                    <span class="glyphicon glyphicon-eye-open"></span>
                                </button> Drainage Area (sq mi):
                            </label>
                            <div class="col-md-7">
                                <input class="form-control" name="drainage_area_sqmi" ng-model="aSite.drainage_area_sqmi" type="text" />
                            </div>
                        </div>
                        <!--Station ID for USGS gage-->
                        <div class="form-group">
                            <label class="col-md-4 control-label" for="usgs_sid">
                                <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                                    <span class="glyphicon glyphicon-eye-open"></span>
                                </button> Station ID for USGS gage:
                            </label>
                            <div class="col-md-7">
                                <input class="form-control" name="usgs_sid" ng-model="aSite.usgs_sid" type="text" />
                            </div>
                        </div>
                        <!--Station ID for NOAA gage-->
                        <div class="form-group">
                            <label class="col-md-4 control-label" for="noaa_sid">
                                <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                                    <span class="glyphicon glyphicon-eye-open"></span>
                                </button> Station ID for NOAA gage:
                            </label>
                            <div class="col-md-7">
                                <input class="form-control" name="noaa_sid" ng-model="aSite.noaa_sid" type="text" />
                            </div>
                        </div>
                        <!--Other Station ID-->
                        <div class="form-group">
                            <label class="col-md-4 control-label" for="other_sid">
                                <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                                    <span class="glyphicon glyphicon-eye-open"></span>
                                </button> Other Station ID:
                            </label>
                            <div class="col-md-7">
                                <input class="form-control" name="other_sid" placeholder="Please add details in the Site Description" ng-model="aSite.other_sid" type="text" />
                            </div>
                        </div>
                        <!--Safety Notes-->
                        <div class="form-group">
                            <label class="col-md-4 control-label" for="safety_notes">Safety Notes:</label>
                            <div class="col-md-7">
                                <textarea class="form-control" type="text" rows="3" ng-model="aSite.safety_notes" />
                            </div>
                        </div>
                        <hr />
                        <!--Site Housing section-->
                        <div class="form-group">
                            <div style="padding:0" class="panel panel-default site-panel">
                                <div class="panel-heading">
                                    <h3 class="panel-title">
                                        <span>Site Housing</span>
                                        <button type="button" class="col-md-1 borderLess pull-right" tooltip-placement="left" tooltip-append-to-body="false" uib-tooltip="Housing needed at this site. Think about what it would take to pack your truck.">
                                            <span class="glyphicon glyphicon-question-sign"></span>
                                        </button>
                                    </h3>

                                </div>
                                <div class="panel-body">
                                    <label class="col-md-4 control-label" for="HOUSING_TYPE">Site Housing(s):</label>
                                    <div class="col-md-7">
                                        <div isteven-multi-select
                                             input-model="allHousingTypeList"
                                             output-model="houseType.value"
                                             button-label="type_name"
                                             item-label="type_name"
                                             max-height="300px"
                                             on-item-click="HouseTypeClick(data)"
                                             tick-property="selected"
                                             helper-elements="filter">
                                        </div>
                                    </div>
                                    <br clear="all" />
                                    <div ng-show="siteHouseTypesTable.length > 0">
                                        <table class="table">
                                            <thead>
                                                <tr>
                                                    <th class="col-sm-3">House Type</th>
                                                    <th class="col-sm-1">Housing Length (ft)</th>
                                                    <th class="col-sm-3">Housing Material</th>
                                                    <th class="col-sm-3">Housing Notes</th>
                                                    <th class="col-sm-1">Amount</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr ng-repeat="house in siteHouseTypesTable" class="whitebginput">
                                                    <td>{{house.type_name}}<input type="hidden" ng-model="house.housing_type_id" /><input type="hidden" ng-model="house.site_housing_id" /></td>
                                                    <td><input style="width:70%" ng-keypress="isNum($event)" ng-model="house.length" /></td>
                                                    <td><input ng-model="house.material" /></td>
                                                    <td><input ng-model="house.notes" /></td>
                                                    <td><input style="width:70%" ng-keypress="isNum($event)" ng-model="house.amount" /></td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div><!-- end panel-body-->
                            </div>
                        </div>
                        <!--Priority-->
                        <div class="form-group">
                            <label class="col-md-4 control-label" for="priority_id">Priority:</label>
                            <div class="col-md-7">
                                <select class="form-control" name="priority_id" ng-model="aSite.priority_id" ng-options="p.priority_id as p.priority_name for p in DepPriorityList">
                                    <option value=""></option>
                                </select>
                            </div>
                        </div>
                        <!--Network Type-->
                        <div class="form-group">
                            <label class="col-md-4 control-label" for="NETWORK_TYPE">Site Location Type in the Network:</label>
                            <div class="col-md-7">
                                <ul style="padding-left:0">
                                    <li style="list-style:none;" ng-repeat="nt in NetTypeList">
                                        <input type="checkbox" class="site-chx" ng-model="nt.selected" ng-change="netTypeChg(nt)" />
                                        <label class="site-chx-label">{{nt.network_type_name}}</label>
                                    </li>
                                </ul>
                            </div>
                        </div>
                        <!--Network NAME-->
                        <div class="form-group">
                            <label class="col-md-4 control-label" for="NETWORK_NAME">Network Name:</label>
                            <div class="col-md-7">
                                <ul style="padding-left:0">
                                    <li style="list-style:none;" ng-repeat="nn in NetNameList">
                                        <input type="checkbox" class="site-chx" ng-model="nn.selected" ng-change="whichOne(nn)" ng-disabled="(checked == checkedName) && (nn.name != checkedName)" />
                                        <label class="site-chx-label">{{nn.name}}</label>
                                    </li>
                                </ul>
                            </div>
                        </div>
                        <!--Zone-->
                        <div class="form-group">
                            <label class="col-md-4 control-label" for="zone">
                                Zone:
                                <button type="button" class="help-btn" tooltip-placement="right" tooltip-append-to-body="false" uib-tooltip="For Water Science Center specific planning.">
                                    <span class="glyphicon glyphicon-question-sign"></span>
                                </button>
                            </label>

                            <div class="col-md-7">
                                <input class="form-control" name="zone" ng-model="aSite.zone" type="text" />
                            </div>

                        </div>
                        <!--Sensor Not Appropriate-->
                        <div class="form-group">
                            <label class="col-md-4 control-label" for="sensor_not_appropriate">
                                Check if Sensor is not appropriate here:
                                <button type="button" class="help-btn" tooltip-placement="right" tooltip-append-to-body="false" uib-tooltip="Only HWMs can be flagged at this site. Sensors can not be or do not have permission to be deployed.">
                                    <span class="glyphicon glyphicon-question-sign"></span>
                                </button>
                            </label>
                            <div class="col-md-7">
                                <ul style="padding-left:0">
                                    <li style="list-style:none; box-sizing: border-box; padding-top: 8px;">
                                        <input type="checkbox" name="sensor_not_appropriate" ng-click="dimAction()" ng-model="aSite.sensor_not_appropriate" ng-true-value="1" ng-false-value="0" />
                                    </li>
                                </ul>
                            </div>

                        </div>
                        <!--Permanent Sensor Housing?-->
                        <div class="form-group sensorInfo" ng-class="{darkClass:disableSensorParts}">
                            <label class="col-md-4 control-label" for="is_permanent_housing_installed">Permanent Sensor Housing Installed?</label>
                            <div class="col-md-7">
                                <span class="radio-inline">
                                    <input ng-disabled="disableSensorParts" type="radio" name="is_permanent_housing_installed" ng-model="aSite.is_permanent_housing_installed" value="Yes"> Yes
                                </span>
                                <span class="radio-inline">
                                    <input ng-disabled="disableSensorParts" type="radio" name="is_permanent_housing_installed" ng-model="aSite.is_permanent_housing_installed" value="No"> No
                                </span>
                            </div>
                        </div>
                        <!--Add Proposed Sensor-->
                        <div class="form-group sensorInfo" ng-class="{darkClass:disableSensorParts}" ng-show="aSite.site_id == undefined">
                            <label class="col-md-4 control-label" for="PROPOSED_SENSOR">
                                Add Proposed Sensor:
                                <button type="button" class="help-btn" tooltip-placement="right" tooltip-append-to-body="false" uib-tooltip="Sensors desired or appropriate for this site should be targeted in the next deployment.">
                                    <span class="glyphicon glyphicon-question-sign"></span>
                                </button>
                            </label>
                            <div class="col-md-7">
                                <ul style="padding-left:0">
                                    <li style="list-style:none;" ng-repeat="ps in ProposedSens">
                                        <input ng-disabled="disableSensorParts" class="site-chx" type="checkbox" ng-model="ps.selected" ng-value="{{ps.selected}}" />
                                        <label class="site-chx-label">{{ps.method}}</label>
                                    </li>
                                </ul>
                            </div>

                        </div>
                        <!--Site creator-->
                        <div class="form-group">
                            <label class="col-md-4 control-label" for="member_id">Site Creator:</label>
                            <div class="col-md-7">{{aSite.Creator}}</div>
                        </div>
                        <!--Add Landowner button-->
                        <div class="form-group" ng-show="aSite.landownercontact_id == null">
                            <label class="col-md-4 control-label" for="LANDOWNERBTN">
                                Landowner Contact:
                                <button type="button" class="help-btn" tooltip-placement="right" tooltip-append-to-body="false" uib-tooltip="Do not record information that private citizens have a reasonable expectation of privacy about. No names or phone numbers of private citizens. Business contact information is acceptable.">
                                    <span class="glyphicon glyphicon-question-sign"></span>
                                </button>
                            </label>
                            <div class="col-md-7">
                                <button type="button" ng-click="showLandOwnerPart()" class="btn-wim btn-blue btn-inline btn-md">Add Landowner</button>
                            </div>

                        </div>
                        <!--start Landowner contact area -->
                        <div ng-show="addLandowner">
                            <div class="col-md-9 col-md-offset-1" style="border:solid 1px red">Do not record information that private citizens have a reasonable expectation of privacy about. No names or phone numbers of private citizens. Business contact information is acceptable.</div>
                            <div class="panel panel-default site-panel col-md-9 col-md-offset-1" style="padding:0">
                                <div class="panel-heading">
                                    <h3 class="panel-title">Land Owner Information</h3>
                                </div>
                                <div class="panel-body">
                                    <!--First Name:-->
                                    <div class="form-group">
                                        <label class="col-md-4 control-label" ng-class="{'req': addLandownder}" for="fname">
                                            First Name:
                                            <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Required">
                                                <span class="glyphicon glyphicon-asterisk" style="color:#d00;font-size:xx-small;"></span>
                                            </button>
                                        </label>
                                        <div class="col-md-7">
                                            <input class="form-control" id="LOfname" name="fname" ng-model="landowner.fname" type="text" ng-required="addLandowner" />
                                        </div>
                                    </div>
                                    <!--Last Name:-->
                                    <div class="form-group">
                                        <label class="col-md-4 control-label" for="lname">Last Name:</label>
                                        <div class="col-md-7">
                                            <input class="form-control" id="LOlname" name="lname" ng-model="landowner.lname" type="text" />
                                        </div>
                                    </div>
                                    <!--Affiliation/Title:-->
                                    <div class="form-group">
                                        <label class="col-md-4 control-label" for="title">Affiliation/Title:</label>
                                        <div class="col-md-7">
                                            <input class="form-control" id="LOtitle" name="title" ng-model="landowner.title" type="text" />
                                        </div>
                                    </div>

                                    <div>
                                        <label class="col-md-4 control-label"></label>
                                        <div class="col-md-7">
                                            <input type="checkbox" class="site-chx" ng-model="useSiteAddress" ng-click="useAddressforLO()" /><label class="site-chx-label">Address same as Site address</label>
                                        </div>
                                    </div>
                                    <!--Address:-->
                                    <div class="form-group">
                                        <label class="col-md-4 control-label" for="address">Address:</label>
                                        <div class="col-md-7">
                                            <input class="form-control" id="LOaddress" name="address" ng-model="landowner.address" type="text" />
                                        </div>
                                    </div>
                                    <!--City:-->
                                    <div class="form-group">
                                        <label class="col-md-4 control-label" for="city">City:</label>
                                        <div class="col-md-7">
                                            <input class="form-control" id="LOcity" name="city" ng-model="landowner.city" type="text" />
                                        </div>
                                    </div>
                                    <!--State-->
                                    <div class="form-group">
                                        <label class="col-md-4 control-label" for="state">State:</label>
                                        <div class="col-md-7">
                                            <select class="form-control" id="LOstate" name="state" ng-model="landowner.state" ng-options="state.state_abbrev as state.state_name for state in StateList">
                                                <option value=""></option>
                                            </select>
                                        </div>
                                    </div>
                                    <!--Zip:-->
                                    <div class="form-group">
                                        <label class="col-md-4 control-label" for="zip">Zip:</label>
                                        <div class="col-md-7">
                                            <input class="form-control" id="LOzip" name="zip" ng-model="landowner.zip" type="text" ui-mask="{{'99999'}}" />
                                        </div>
                                    </div>
                                    <!--Primary Phone:-->
                                    <div class="form-group">
                                        <label class="col-md-4 control-label" for="primaryphone">Primary Phone:</label>
                                        <div class="col-md-7">
                                            <input class="form-control" id="LOprimaryphone" name="primaryphone"
                                                   type="text" my-input-mask="{mask: '(999) 999-9999[ x99999]', greedy: false}"
                                                   ng-model="landowner.primaryphone" />
                                        </div>
                                    </div>
                                    <!--Secondary Phone:-->
                                    <div class="form-group">
                                        <label class="col-md-4 control-label" for="secondaryphone">Secondary Phone:</label>
                                        <div class="col-md-7">
                                            <input class="form-control" id="LOsecondaryphone" name="secondaryphone"
                                                   type="text" my-input-mask="{mask: '(999) 999-9999[ x99999]', greedy:false}"
                                                   ng-model="landowner.secondaryphone" />
                                        </div>
                                    </div>
                                    <!--Email:-->
                                    <div class="form-group">
                                        <label class="col-md-4 control-label" for="email">Email:</label>
                                        <div class="col-md-7">
                                            <input class="form-control" id="LOemail" name="email" ng-model="landowner.email" type="email" />
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <br clear="all" />
                        <!--end Landowner contact area-->
                        <!--Access Permission Granted-->
                        <div class="form-group">
                            <label class="col-md-4 control-label" for="access_granted">Access Permission Granted:</label>
                            <div class="col-md-7">
                                <span class="radio-inline">
                                    <input type="radio" name="access_granted" ng-model="aSite.access_granted" value="Yes"> Yes
                                </span>
                                <span class="radio-inline">
                                    <input type="radio" name="access_granted" ng-model="aSite.access_granted" value="No"> No
                                </span>
                                <span class="radio-inline">
                                    <input type="radio" name="access_granted" ng-model="aSite.access_granted" value="Not Needed"> Not Needed
                                </span>
                            </div>
                        </div>
                        <br clear="all" />
                        <!--submit and cancel buttons-->
                        <div class="form-group">
                            <div style="display: block; text-align: center;">
                                <button ng-show="aSite.site_id == undefined" class="btn-wim btn-blue btn-inline btn-lg" ng-click="create(siteForm.$valid)">Create</button>
                                <button ng-show="aSite.site_id != undefined" class="btn-wim btn-green btn-inline btn-lg" ng-click="save(siteForm.$valid)">Save</button>
                                <span ng-if="userRole == 'Admin'">
                                    <button ng-show="aSite.site_id != undefined" class="btn-wim btn-red btn-inline btn-lg" ng-click="deleteSite()">Delete</button>
                                </span>
                                <button type="button" class="btn-wim btn-orange btn-inline btn-lg" ng-click="cancel()">Cancel</button>
                            </div>
                        </div>
                    </fieldset>
                </form>
            </uib-accordion-group>
            <!-- SITE FILES SECTION -->
            <div ng-if="aSite.site_id !== undefined">
                <!--SITE File Part-->
                <uib-accordion-group is-open="s.sFileOpen">
                    <uib-accordion-heading>
                        <i style="margin-right:10px" class="pull-left glyphicon" ng-class="{'glyphicon-chevron-down': s.sFileOpen, 'glyphicon-chevron-right': !s.sFileOpen}"></i>
                        <span ng-class="{'redText':showFileForm}">Site Files</span>
                        <button type="button" class="col-md-1 borderLess pull-right" tooltip-placement="left" tooltip-append-to-body="false" uib-tooltip="For general site files only. Please add event-specific files (e.g. HWM photos, field sheets, sensor data files, etc.) by editing the Sensor or HWM sections within this site and uploading files from there .">
                            <span class="glyphicon glyphicon-question-sign"></span>
                        </button>
                    </uib-accordion-heading>
                    <div class="col-md-12">
                        <div class="col-md-12" ng-if="!showFileForm">
                            <div class="col-md-4"><h3>Add File</h3></div>
                            <div class="col-md-6" style="margin-top:5px">
                                <button type="button" class="borderLess" ng-click="showFile(0)" tooltip-placement="right" uib-tooltip="Upload a new File to this Site">
                                    <span class="glyphicon glyphicon-plus"></span>
                                </button>
                            </div>
                        </div>
                        <br clear="all" />
                        <!-- list of existing files for this hwm -->
                        <div class="col-md-6" ng-if="SITEFiles.length > 0">
                            <ul style="padding-left: 0">
                                <li ng-repeat="f in SITEFiles" style="list-style:none;padding-bottom: 15px;">
                                    <span class="col-sm-9 borderLess" style="padding:0">
                                        <a class="btn borderLess" style="padding:0" title="{{f.file_date | date: 'MM/dd/yyyy'}} ({{f.name || f.file_id}})" ng-click="showFile(f)">{{f.file_date | date: 'MM/dd/yyyy'}} ({{f.name || f.file_id}})</a>
                                    </span>
                                </li>
                            </ul>
                        </div>
                        <!-- carousel of photo files -->
                        <div class="col-md-6" ng-if="siteImageFiles.length > 0" style="height:120px;">
                            <uib-carousel interval="4000">
                                <uib-slide ng-repeat="f in siteImageFiles">
                                    <img ng-click="showImageModal(f.file_id)" ng-src="{{serverURL}}/Files/{{f.file_id}}/Item{{stamp}}" />
                                    <div class="carousel-caption">
                                        <p>{{f.name || f.file_id}}</p>
                                    </div>
                                </uib-slide>
                            </uib-carousel>
                        </div>
                        <br clear="all" />

                        <div ng-if="showFileForm">
                            <hr />
                            <form class="form-horizontal" name="SITEFILEForm">
                                <fieldset>
                                    <!-- File Type* -->
                                    <div class="form-group" ng-class="{'has-error':SITEFILEForm.filetype_id.$invalid && SITEFILEForm.filetype_id.$dirty}" style="margin:0;padding:0">
                                        <label class="col-md-4 control-label req" for="filetype_id">
                                            File Type:
                                            <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Required">
                                                <span class="glyphicon glyphicon-asterisk" style="color:#d00;font-size:xx-small;"></span>
                                            </button>
                                        </label>
                                        <div class="col-md-6" ng-if="aFile.file_id == undefined">
                                            <select class="form-control" name="filetype_id" ng-model="aFile.filetype_id" ng-change="updateAgencyForCaption()" ng-options="ft.filetype_id as ft.filetype for ft in fileTypes" required>
                                                <option value=""></option>
                                            </select>
                                        </div>
                                        <div class="col-md-6" ng-if="aFile.file_id != undefined">{{aFile.fileType}}</div>
                                    </div>

                                    <!--Upload Single Image with validations*-->
                                    <div ng-if="aFile.file_id === undefined && aFile.filetype_id !== 8" class="form-group" style="margin:0;padding:0">
                                        <label class="col-md-4 control-label" for="FILE">
                                            Upload File:
                                            <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Required">
                                                <span class="glyphicon glyphicon-asterisk" style="color:#d00;font-size:xx-small;"></span>
                                            </button>
                                        </label>
                                        <div class="col-md-7">
                                            <input type="file" max="500000" file-model="aFile.File" />
                                            <img ngf-thumbnail="aFile.File" style="height:60px" class="thumbnail">
                                        </div>
                                    </div>
                                    <br clear="all" />

                                    <!--File URL (LINK file)-->
                                    <div ng-if="aFile.filetype_id === 8" class="form-group" style="margin:0;padding:0">
                                        <label class="col-md-4 control-label" for="name">File URL:</label>
                                        <div class="col-md-6">
                                            <input class="form-control" name="name" ng-model="aFile.name" type="text" />
                                        </div>
                                        <button type="button" class="col-md-1 borderLess pull-left" tooltip-placement="bottom" tooltip-append-to-body="false" uib-tooltip="Please link to persistent URLs or digital object identifier (doi) urls.">
                                            <span class="glyphicon glyphicon-question-sign"></span>
                                        </button>
                                    </div>

                                    <!--Source Name (photo)-->
                                    <div class="form-group" ng-if="aFile.filetype_id === 1" ng-class="{'has-error':SITEFILEForm.FULLname.$invalid && SITEFILEForm.FULLname.$dirty}" style="margin:0;padding:0">
                                        <label class="col-md-4 control-label req" for="source_id">
                                            Source Photographer:
                                            <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Required">
                                                <span class="glyphicon glyphicon-asterisk" style="color:#d00;font-size:xx-small;"></span>
                                            </button>
                                        </label>
                                        <div class="col-md-6">
                                            <input class="form-control" name="FULLname" ng-model="aSource.FULLname" type="text" required />
                                        </div>
                                    </div>

                                    <!--Source Name (all other)-->
                                    <div class="form-group" ng-if="aFile.filetype_id  > 2" ng-class="{'has-error':SITEFILEForm.FULLname.$invalid && SITEFILEForm.FULLname.$dirty}" style="margin:0;padding:0">
                                        <label class="col-md-4 control-label req" for="source_id">
                                            Source Name:
                                            <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Required">
                                                <span class="glyphicon glyphicon-asterisk" style="color:#d00;font-size:xx-small;"></span>
                                            </button>
                                        </label>
                                        <div class="col-md-6">
                                            <input class="form-control" name="FULLname" ng-model="aSource.FULLname" type="text" required />
                                        </div>
                                    </div>

                                    <!--Source Agency* (photo, allOther)-->
                                    <div ng-if="aFile.filetype_id === 1 || aFile.filetype_id > 2" class="form-group" ng-class="{'has-error':SITEFILEForm.agency_id.$invalid && SITEFILEForm.agency_id.$dirty}" style="margin:0;padding:0">
                                        <label class="col-md-4 control-label req" for="agency_id">
                                            Source Agency:
                                            <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Required">
                                                <span class="glyphicon glyphicon-asterisk" style="color:#d00;font-size:xx-small;"></span>
                                            </button>
                                        </label>
                                        <div class="col-md-6">
                                            <select class="form-control" name="agency_id" ng-model="aSource.agency_id" ng-change="updateAgencyForCaption()"
                                                    ng-options="a.agency_id as a.agency_name for a in agencies" required>
                                                <option value=""></option>
                                            </select>
                                        </div>
                                    </div>

                                    <!-- Photo Date* (photo) -->
                                    <div ng-if="aFile.filetype_id === 1" class="form-group" ng-class="{'has-error':SITEFILEForm.photo_date.$invalid && SITEFILEForm.photo_date.$dirty}" style="margin:0;padding:0">
                                        <label class="col-md-4 control-label req" for="photo_date">
                                            Photo Date:
                                            <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Required">
                                                <span class="glyphicon glyphicon-asterisk" style="color:#d00;font-size:xx-small;"></span>
                                            </button>
                                        </label>
                                        <div class="col-md-4 input-group" style="padding-right:14px;padding-left:14px">
                                            <input class="form-control dateInputStyle" type="date" name="sd" uib-datepicker-popup="MM/dd/yyyy" show-weeks="false" is-open="datepickrs.sd" ng-model="aFile.photo_date" required />
                                            <span class="input-group-btn">
                                                <button type="button" class="btn btn-default" ng-click="open($event, 'sd')">
                                                    <i class="glyphicon glyphicon-calendar" />
                                                </button>
                                            </span>
                                        </div>
                                    </div>

                                    <!-- Date Uploaded* (photo, data, allother) -->
                                    <div ng-if="aFile.filetype_id > 0" class="form-group" ng-class="{'has-error':SITEFILEForm.file_date.$invalid && SITEFILEForm.file_date.$dirty}" style="margin:0;padding:0">
                                        <label class="col-md-4 control-label req" for="file_date">
                                            Date Uploaded:
                                            <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Required">
                                                <span class="glyphicon glyphicon-asterisk" style="color:#d00;font-size:xx-small;"></span>
                                            </button>
                                        </label>
                                        <div class="col-md-4 input-group" style="padding-right:14px;padding-left:14px">
                                            <input class="form-control dateInputStyle" type="date" name="fd" uib-datepicker-popup="MM/dd/yyyy" show-weeks="false" is-open="datepickrs.fd" ng-model="aFile.file_date" required />
                                            <span class="input-group-btn">
                                                <button type="button" class="btn btn-default" ng-click="open($event, 'fd')">
                                                    <i class="glyphicon glyphicon-calendar" />
                                                </button>
                                            </span>
                                        </div>
                                    </div>

                                    <!--Description*(photo, data, allother)-->
                                    <div ng-if="aFile.filetype_id > 0" class="form-group" ng-class="{'has-error':SITEFILEForm.description.$invalid && SITEFILEForm.description.$dirty}" style="margin:0;padding:0">
                                        <label class="col-md-4 control-label req" for="description">
                                            Description:
                                            <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Required">
                                                <span class="glyphicon glyphicon-asterisk" style="color:#d00;font-size:xx-small;"></span>
                                            </button>
                                        </label>
                                        <div class="col-md-6">
                                            <textarea class="form-control" id="description" type="text" rows="3" placeholder="Description" ng-model="aFile.description" required />
                                        </div>
                                        <button type="button" ng-show="aFile.filetype_id == 1" class="col-md-1 borderLess pull-left" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Populates in Photo caption below. If a person or people appear in photo include name(s). If non-USGS personnel, ensure consent to publish name in caption is given.">
                                            <span class="glyphicon glyphicon-question-sign"></span>
                                        </button>
                                    </div>

                                    <!-- This is where Other ends, rest is for Photo -->
                                    <!--Photo Direction (photo)-->
                                    <div ng-if="aFile.filetype_id === 1" class="form-group" style="margin:0;padding:0;padding-top:5px;">
                                        <label class="col-md-4 control-label" for="photo_direction">Photo Direction:</label>
                                        <div class="col-md-6">
                                            <input class="form-control" id="photo_direction" name="photo_direction" ng-model="aFile.photo_direction" type="text" />
                                        </div>
                                    </div>

                                    <!-- Photo Latitude (photo)-->
                                    <div ng-if="aFile.filetype_id === 1" class="form-group" style="margin:0;padding:0">
                                        <label class="col-md-4 control-label" for="latitude_dd">Photo Latitude <br /> (if different):</label>
                                        <div class="col-md-6">
                                            <input class="form-control" ng-keypress="isNum($event)" name="latitude_dd" id="latitude_dd" ng-model="aFile.latitude_dd"
                                                   type="text" />
                                        </div>
                                    </div>

                                    <!--Photo Longitude (photo)-->
                                    <div ng-if="aFile.filetype_id === 1" class="form-group" style="margin:0;padding:0">
                                        <label class="col-md-4 control-label" for="longitude_dd">Photo Longitude <br /> (if different):</label>
                                        <div class="col-md-6">
                                            <input class="form-control" ng-keypress="isNum($event)" id="longitude_dd" name="longitude_dd" ng-model="aFile.longitude_dd"
                                                   type="text" />
                                        </div>
                                    </div>

                                    <div ng-if="aFile.filetype_id === 1" class="form-group" style="margin:0;padding:0">
                                        <label class="col-md-4 control-label" for="Caption">Preview Caption:</button></label>
                                        <div class="col-md-6">
                                            <span>
                                                Photo of {{aFile.description || ' (Description HERE) '}} at {{aSite.site_description}}, {{aSite.county}}, {{aSite.state}}, {{aFile.photo_date | date: 'MM/dd/yyyy' || ' Date taken HERE '}}. Photograph by {{aSource.FULLname || ' Source Name HERE ' }}, {{agencyNameForCap || ' Agency HERE '}}.
                                            </span>
                                        </div>
                                    </div>

                                    <!-- associated files (HWM FILES)-->
                                    <div ng-if="aFile.file_id !== undefined && aFile.filetype_id !== 8" class="form-group" style="margin:0;padding:0;padding-top:12px;">
                                        <label class="col-md-4 control-label">Associated File:</label>
                                        <div class="col-md-6">
                                            <span ng-if="fileItemExists">
                                                <a target="_blank" title="Download File" ng-href="{{serverURL}}/Files/{{aFile.file_id}}/Item">{{aFile.name}}</a>
                                                <br />
                                                <img ng-if="isPhoto" style="height:80px;" ng-src="{{src}}" />
                                            </span>
                                            <span ng-if="!fileItemExists">-- Missing --</span>
                                            <!--ReUpload Single Image with validations*-->
                                            <div ng-if="!fileItemExists" class="form-group">
                                                <div class="col-md-7">
                                                    <label class="custom-file-input" for="Upload" />
                                                    <input id="Upload" type="file" max="500000" file-model="aFile.File" style="visibility: hidden">
                                                    <div class="col-md-7 pull-left" ng-if="aFile.File.type == 'image/png' || aFile.File.type == 'image/jpeg' || aFile.File.type == 'image/gif'"><img ngf-thumbnail="aFile.File" style="height:60px" class="thumbnail"></div>
                                                    <div class="col-md-7 pull-left" ng-if="aFile.File.type !== 'image/png' && aFile.File.type !== 'image/jpeg' && aFile.File.type !== 'image/gif'" style="overflow:auto">{{aFile.File.name}}</div>
                                                    <div class="col-md-5">
                                                        <span ng-if="aFile.File">
                                                            Correct File?
                                                            <button ng-if="aFile.File" type="button" ng-click="saveFileUpload()">Upload</button>
                                                        </span>
                                                    </div>
                                                </div>
                                            </div>
                                            <!-- change out the existing fileItem with a different one-->
                                            <div ng-if="fileItemExists" class="form-group">
                                                <div class="col-md-9">
                                                    <label class="custom-file-inputChange" for="Upload" />
                                                    <input id="Upload" type="file" max="500000" file-model="aFile.File1" style="visibility: hidden">
                                                    <div class="col-md-7 pull-left" ng-if="aFile.File1.type == 'image/png' || aFile.File1.type == 'image/jpeg' || aFile.File1.type == 'image/gif'">
                                                        <img ngf-thumbnail="afile.file1" style="height:60px" class="thumbnail">
                                                    </div>
                                                    <div class="col-md-7 pull-left" ng-if="aFile.File1.type !== 'image/png' && aFile.File1.type !== 'image/jpeg' && aFile.File1.type !== 'image/gif'" style="overflow:auto">
                                                        {{aFile.File1.name}}
                                                    </div>
                                                    <div class="col-md-5">
                                                        <span ng-if="aFile.File1">
                                                            Correct File?
                                                            <button ng-if="aFile.File1" type="button" ng-click="saveFileUpload()">Replace</button>
                                                        </span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div ng-show="!SITEfileIsUploading">
                                        <button class="btn btn-primary" ng-if="aFile.file_id != undefined" ng-click="saveFile(SITEFILEForm.$valid)">Save File</button>
                                        <button type="button" class="btn btn-danger" ng-if="aFile.file_id != undefined" ng-click="deleteFile()">Delete File</button>
                                        <button class="btn btn-primary" ng-if="aFile.file_id == undefined" ng-click="createFile(SITEFILEForm.$valid)">Create File</button>
                                        <button type="button" class="btn btn-warning" ng-click="cancelFile()">Close/Cancel File</button>
                                    </div>
                                    <div ng-show="SITEfileIsUploading"><img src="images/fileUpload.gif" /></div>
                                </fieldset>
                            </form>
                        </div>
                    </div>
                </uib-accordion-group>
            </div>
        </uib-accordion>
    </div><!--end modal-body -->
</script>

<!-- MODAL for Objective Point -->
<script type="text/ng-template" id="OPmodal.html">
    <div class="modal-header">
        <h3 class="modal-title">Datum Location<button class="close" type="button" ng-click="cancel()" aria-hidden="true" style="color:gray;">&times;</button></h3>
    </div>
    <div class="modal-body">
        <div ng-if="createOReditOP == 'create'">
            <form class="form-horizontal" name="OPForm">
                <fieldset>
                    <!-- Type: -->
                    <div class="form-group" ng-class="{'has-error':OPForm.op_type_id.$invalid && OPForm.op_type_id.$dirty}">
                        <label class="col-md-4 control-label req" for="op_type_id">
                            Type:
                            <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Required">
                                <span class="glyphicon glyphicon-asterisk" style="color:#d00;font-size:xx-small;"></span>
                            </button>
                        </label>
                        <div class="col-md-6">
                            <select class="form-control" name="op_type_id" ng-model="OP.op_type_id"
                                    ng-options="opt.objective_point_type_id as opt.op_type for opt in OPTypeList" required>
                                <option value=""></option>
                            </select>
                        </div>
                    </div>

                    <!-- Name: -->
                    <div class="form-group" ng-class="{'has-error':OPForm.name.$invalid && OPForm.name.$dirty}">
                        <label class="col-md-4 control-label req" for="name">
                            Name:
                            <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Required">
                                <span class="glyphicon glyphicon-asterisk" style="color:#d00;font-size:xx-small;"></span>
                            </button>
                        </label>
                        <div class="col-md-6">
                            <input class="form-control" name="name" ng-model="OP.name" type="text" required />
                        </div>
                    </div>

                    <!-- Description: -->
                    <div class="form-group" ng-class="{'has-error':OPForm.description.$invalid && OPForm.description.$dirty}">
                        <label class="col-md-4 control-label req" for="description">
                            Description:
                            <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Required">
                                <span class="glyphicon glyphicon-asterisk" style="color:#d00;font-size:xx-small;"></span>
                            </button>
                        </label>
                        <div class="col-md-6">
                            <textarea class="form-control" name="description" type="text" rows="3" ng-model="OP.description" required />
                        </div>
                        <button type="button" class="col-md-1 borderLess pull-left" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip-html="htmlDescriptionTip">
                            <span class="glyphicon glyphicon-question-sign"></span>
                        </button>
                    </div>

                    <!-- Control Identifier add button -->
                    <div class="form-group">
                        <label class="col-md-4 control-label" for="CONTROL">Control Identifier:</label>
                        <div class="col-md-6">
                            <button type="button" class="btn btn-default" ng-click="addNewIdentifier()">Add New Identifier</button>
                        </div>
                        <button type="button" class="col-md-1 borderLess pull-left" tooltip-placement="bottom" tooltip-append-to-body="false" uib-tooltip="National Geodetic Survey permanent identifier. See: ngs.noaa.gov/NGSDataExplorer/ for more information.">
                            <span class="glyphicon glyphicon-question-sign"></span>
                        </button>
                    </div>

                    <!-- Control Identifier input: -->
                    <div class="form-group" ng-show="showControlIDinput">
                        <label class="col-md-4 control-label"></label>
                        <div class="col-md-6">
                            <div ng-repeat="id in addedIdentifiers">
                                <div class="col-md-12" style="margin-bottom:5px">
                                    <div class="col-md-7"><input class="form-control" name="OPControl" ng-model="id.identifier" type="text" /></div>
                                    <input type="hidden" name="op_control_identifier_id" ng-model="id.op_control_identifier_id" />
                                    <input type="hidden" name="objective_point_id" ng-model="id.objective_point_id" />

                                    <span class="radio-inline">
                                        <input type="radio" name="identifier_type{{$index}}" ng-model="id.identifier_type" value="PID" /> PID
                                    </span>
                                    <span class="radio-inline">
                                        <input type="radio" name="identifier_type{{$index}}" ng-model="id.identifier_type" value="Other" /> Other
                                    </span>
                                    <div class="buttons pull-right">
                                        <button class="btn borderLess" ng-click="RemoveID(id)" type="button">
                                            <i class="glyphicon glyphicon-remove"></i>
                                        </button>
                                    </div>
                                </div><br />
                            </div>
                        </div>
                    </div>

                    <!-- dec deg or dms: -->
                    <div>
                        <label class="col-md-4 control-label"></label>
                        <div class="col-md-6">
                            <span class="radio-inline">
                                <input type="radio" name="decDegORdms" ng-change="latLongChange()" ng-model="OP.decDegORdms" value="dd" /> Dec Deg
                            </span>
                            <span class="radio-inline">
                                <input type="radio" name="decDegORdms" ng-change="latLongChange()" ng-model="OP.decDegORdms" value="dms" /> DMS
                            </span>
                        </div>
                    </div>
                    <!-- Latitude: -->
                    <div class="form-group">
                        <label class="col-md-4 control-label" for="latitude_dd">Latitude:</label>
                        <div class="col-md-6" ng-if="OP.decDegORdms == 'dd'">
                            <input class="form-control" ng-keypress="isNum($event)" name="latitude_dd" id="latitude_dd" ng-model="OP.latitude_dd"
                                   ng-model-options="{ updateOn: 'blur' }" ng-change="checkValue('dd')" type="text" />
                        </div>
                        <div class="col-md-6" ng-if="OP.decDegORdms == 'dms'">
                            <table>
                                <tr>
                                    <td><input class="form-control" ng-keypress="isNum($event)" ng-model-options="{ updateOn: 'blur' }" ng-change="checkValue('dms')" id="LaDeg" name="Deg" ng-model="DMS.LADeg" type="text" /></td>
                                    <td>°</td>
                                    <td><input class="form-control" ng-keypress="isNum($event)" ng-model-options="{ updateOn: 'blur' }" ng-change="checkValue('dms')" name="Min" ng-model="DMS.LAMin" type="text" /></td>
                                    <td>′</td>
                                    <td><input class="form-control" ng-keypress="isNum($event)" ng-model-options="{ updateOn: 'blur' }" ng-change="checkValue('dms')" name="Sec" ng-model="DMS.LASec" type="text" /></td>
                                    <td>″</td>
                                </tr>
                            </table>
                        </div>
                    </div>

                    <!-- Longitude: -->
                    <div class="form-group">
                        <label class="col-md-4 control-label" for="longitude_dd">Longitude:</label>
                        <div class="col-md-6" ng-if="OP.decDegORdms == 'dd'">
                            <input class="form-control" ng-keypress="isNum($event)" id="longitude_dd" name="longitude_dd" ng-model="OP.longitude_dd"
                                   ng-model-options="{ updateOn: 'blur' }" ng-change="checkValue('dd')" type="text" />
                        </div>
                        <div class="col-md-6" ng-if="OP.decDegORdms == 'dms'">
                            <table>
                                <tr>
                                    <td><input class="form-control" ng-keypress="isNum($event)" ng-model-options="{ updateOn: 'blur' }" ng-change="checkValue('dms')" id="LoDeg" name="Deg" ng-model="DMS.LODeg" type="text" /></td>
                                    <td>°</td>
                                    <td><input class="form-control" ng-keypress="isNum($event)" ng-model-options="{ updateOn: 'blur' }" ng-change="checkValue('dms')" name="Min" ng-model="DMS.LOMin" type="text" /></td>
                                    <td>′</td>
                                    <td><input class="form-control" ng-keypress="isNum($event)" ng-model-options="{ updateOn: 'blur' }" ng-change="checkValue('dms')" name="Sec" ng-model="DMS.LOSec" type="text" /></td>
                                    <td>″</td>
                                </tr>
                            </table>
                        </div>
                    </div>

                    <!-- Horizontal Datum: -->
                    <div class="form-group">
                        <label class="col-md-4 control-label" for="hdatum_id">Horizontal Datum:</label>
                        <div class="col-md-6">
                            <select class="form-control" name="hdatum_id" ng-model="OP.hdatum_id"
                                    ng-options="hd.datum_id as hd.datum_name for hd in HDList">
                                <option value=""></option>
                            </select>
                        </div>
                    </div>

                    <!-- Horizontal Collection Method: -->
                    <div class="form-group">
                        <label class="col-md-4 control-label" for="hcollect_method_id">Horizontal Collection Method:</label>
                        <div class="col-md-6">
                            <select class="form-control" name="hcollect_method_id" ng-model="OP.hcollect_method_id"
                                    ng-options="hcm.hcollect_method_id as hcm.hcollect_method for hcm in HCollectMethodList">
                                <option value=""></option>
                            </select>
                        </div>
                    </div>

                    <!-- Ft or Meter radios: -->
                    <div>
                        <label class="col-md-4 control-label"></label>
                        <div class="col-md-6">
                            <span class="radio-inline">
                                <input type="radio" name="FTorMETER" ng-model="OP.FTorMETER" value="ft" /> ft
                            </span>
                            <span class="radio-inline">
                                <input type="radio" name="FTorMETER" ng-model="OP.FTorMETER" value="meter" /> meter
                            </span>
                        </div>
                    </div>
                    <!-- Elevation: -->
                    <div class="form-group">
                        <label class="col-md-4 control-label" for="elev_ft">Elevation:</label>
                        <div class="col-md-6">
                            <input class="form-control" ng-keypress="isNum($event)" name="elev_ft" ng-model="OP.elev_ft" type="text" />
                        </div>
                    </div>

                    <!--  Vertical Datum: -->
                    <div class="form-group" ng-class="{'has-error':OPForm.vdatum_id.$invalid && OPForm.vdatum_id.$dirty}">
                        <label class="col-md-4 control-label req" for="vdatum_id">
                            Vertical Datum:
                            <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Required">
                                <span class="glyphicon glyphicon-asterisk" style="color:#d00;font-size:xx-small;"></span>
                            </button>
                        </label>
                        <div class="col-md-6">
                            <select class="form-control" name="vdatum_id" ng-model="OP.vdatum_id"
                                    ng-options="vd.datum_id as vd.datum_abbreviation for vd in VDatumList" required>
                                <option value=""></option>
                            </select>
                        </div>
                    </div>

                    <!-- Vertical Collection Method: -->
                    <div class="form-group">
                        <label class="col-md-4 control-label" for="vcollect_method_id">Vertical Collection Method:</label>
                        <div class="col-md-6">
                            <select class="form-control" name="vcollect_method_id" ng-model="OP.vcollect_method_id"
                                    ng-options="vcm.vcollect_method_id as vcm.vcollect_method for vcm in VCollectMethodList">
                                <option value=""></option>
                            </select>
                        </div>
                    </div>

                    <!-- Ft or CM radios: -->
                    <div>
                        <label class="col-md-4 control-label"></label>
                        <div class="col-md-6">
                            <span class="radio-inline">
                                <input type="radio" name="FTorCM" ng-model="OP.FTorCM" value="ft" /> +/- ft
                            </span>
                            <span class="radio-inline">
                                <input type="radio" name="FTorCM" ng-model="OP.FTorCM" value="cm" /> +/- cm
                            </span>
                        </div>
                    </div>
                    <!-- Uncertainty: -->
                    <div class="form-group">
                        <label class="col-md-4 control-label" for="uncertainty">Uncertainty:</label>
                        <div class="col-md-6">
                            <div class="col-md-12" style="margin-bottom:5px;padding-left:0">
                                <div class="col-md-3" style="padding-left: 0;"><input class="form-control" ng-disabled="OP.unquantified==1" ng-keypress="isNum($event)" ng-model="OP.uncertainty" type="text" /></div>
                                <div class="col-md-2" style="text-decoration:underline">OR</span></div>
                                <div class="col-md-5">
                                    <input type="checkbox" ng-model="OP.unquantified" ng-checked="OP.unquantified==1" ng-true-value="1" ng-false-value="0" ng-click="UnquantChecked()" />
                                    <span style="margin-left:10px">Unquantified</span>
                                </div>
                                <button type="button" class="col-md-1 borderLess pull-left" tooltip-placement="bottom" tooltip-append-to-body="false" uib-tooltip="From GNSS or OPUS solution.">
                                    <span class="glyphicon glyphicon-question-sign"></span>
                                </button>
                                <br />
                            </div>
                        </div>
                    </div>

                    <!-- Quality: -->
                    <div class="form-group">
                        <label class="col-md-4 control-label" for="op_quality_id">Quality:</label>
                        <div class="col-md-6">
                            <select class="form-control" name="op_quality_id" ng-model="OP.op_quality_id"
                                    ng-options="opq.op_quality_id as opq.quality for opq in OPQualityList">
                                <option value=""></option>
                            </select>
                        </div>
                    </div>

                    <!-- Objective Point Notes: -->
                    <div class="form-group">
                        <label class="col-md-4 control-label" for="op_notes">Datum Location Notes:</label>
                        <div class="col-md-6">
                            <textarea class="form-control" type="text" rows="3" ng-model="OP.op_notes" />
                        </div>
                    </div>

                    <!-- Date Established: -->
                    <div class="form-group" ng-class="{'has-error':OPForm.date_established.$invalid && OPForm.date_established.$dirty}">
                        <label class="col-md-4 control-label req" for="date_established">
                            Date Established:
                            <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Required">
                                <span class="glyphicon glyphicon-asterisk" style="color:#d00;font-size:xx-small;"></span>
                            </button>
                        </label>
                        <div class="col-md-6">
                            <div class="col-md-6 input-group">
                                <input class="form-control dateInputStyle" type="date" name="de" uib-datepicker-popup="MM/dd/yyyy" show-weeks="false" is-open="datepickrs.de" ng-model="OP.date_established" required />
                                <span class="input-group-btn">
                                    <button type="button" class="btn btn-default" ng-click="open($event, 'de')">
                                        <i class="glyphicon glyphicon-calendar" />
                                    </button>
                                </span>
                            </div>
                        </div>
                    </div>

                    <!-- Date Recovered: -->
                    <div class="form-group">
                        <label class="col-md-4 control-label" for="date_recovered">Date Recovered:</label>
                        <div class="col-md-6">
                            <div class="col-md-6 input-group">
                                <input show-weeks="false" class="form-control dateInputStyle" type="date" name="dr" uib-datepicker-popup="MM/dd/yyyy" is-open="datepickrs.dr" ng-model="OP.date_recovered" />
                                <span class="input-group-btn">
                                    <button type="button" class="btn btn-default" ng-click="open($event, 'dr')">
                                        <i class="glyphicon glyphicon-calendar" />
                                    </button>
                                </span>
                            </div>
                        </div>
                        <button type="button" class="col-md-1 borderLess pull-left" tooltip-placement="bottom" tooltip-append-to-body="false" uib-tooltip="Enter the date the location was recently found in good condition.">
                            <span class="glyphicon glyphicon-question-sign"></span>
                        </button>
                    </div>
                    <!--create button-->
                    <div class="form-group">
                        <div class="col-md-12 text-center">
                            <button class="btn btn-primary" ng-click="create(OPForm.$valid)">Create</button>
                        </div>
                    </div>
                </fieldset>
            </form>
        </div> <!-- end create -->

        <div ng-if="createOReditOP == 'edit'">
            <uib-accordion close-others="false">
                <!--Datum Location Part-->
                <uib-accordion-group is-open="dl.dlOpen" panel-class="{{getPanelClass()}}">
                    <uib-accordion-heading>
                        <i style="margin-right:10px" class="pull-left glyphicon" ng-class="{'glyphicon-chevron-down': dl.dlOpen, 'glyphicon-chevron-right': !dl.dlOpen}"></i>
                        <span ng-class="{'redText':view.OPval == 'edit'}">{{opModalHeader}}</span>
                    </uib-accordion-heading>
                    <form class="form-horizontal" name="OPEditForm">
                        <fieldset>
                            <!-- Type: (Detail) -->
                            <div ng-if="view.OPval == 'detail'" class="col-md-12">
                                <div class="col-md-4"><label>Type:</label></div>
                                <div class="col-md-6">{{OP.opType || '---'}}</div>
                            </div>
                            <!-- Type: (Edit)-->
                            <div ng-if="view.OPval == 'edit'" class="form-group" ng-class="{'has-error':OPEditForm.op_type_id.$invalid && OPEditForm.op_type_id.$dirty && view.OPval =='edit'}">
                                <label class="col-md-4 control-label req" for="op_type_id">
                                    Type:
                                    <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Required">
                                        <span class="glyphicon glyphicon-asterisk" style="color:#d00;font-size:xx-small;"></span>
                                    </button>
                                </label>
                                <div class="col-md-6">
                                    <select ng-show="view.OPval == 'edit'" class="form-control" name="op_type_id" ng-model="opCopy.op_type_id"
                                            ng-options="opt.objective_point_type_id as opt.op_type for opt in OPTypeList" required>
                                        <option value=""></option>
                                    </select>
                                </div>
                            </div>

                            <!-- Name: (Detail) -->
                            <div ng-if="view.OPval == 'detail'" class="col-md-12">
                                <div class="col-md-4"><label>Name:</label></div>
                                <div class="col-md-6">{{OP.name || '---'}}</div>
                            </div>
                            <!-- Name: (Edit)-->
                            <div ng-if="view.OPval == 'edit'" class="form-group" ng-class="{'has-error':OPEditForm.name.$invalid && OPEditForm.name.$dirty && view.OPval =='edit'}">
                                <label class="col-md-4 control-label req" for="name">
                                    Name:
                                    <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Required">
                                        <span class="glyphicon glyphicon-asterisk" style="color:#d00;font-size:xx-small;"></span>
                                    </button>
                                </label>
                                <div class="col-md-6">
                                    <input ng-show="view.OPval == 'edit'" class="form-control" name="name" ng-model="opCopy.name" type="text" required />
                                </div>
                            </div>

                            <!-- Description: (Detail) -->
                            <div ng-if="view.OPval == 'detail'" class="col-md-12">
                                <div class="col-md-4"><label>Description:</label></div>
                                <div class="col-md-6">{{OP.description || '---'}}</div>
                            </div>
                            <!-- Description: (Edit) -->
                            <div ng-if="view.OPval == 'edit'" class="form-group" ng-class="{'has-error':OPEditForm.description.$invalid && OPEditForm.description.$dirty && view.OPval =='edit'}">
                                <label class="col-md-4 control-label req" for="description">
                                    Description:
                                    <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Required">
                                        <span class="glyphicon glyphicon-asterisk" style="color:#d00;font-size:xx-small;"></span>
                                    </button>
                                </label>
                                <div class="col-md-6">
                                    <textarea class="form-control" name="description" type="text" rows="3" ng-model="opCopy.description" required />
                                </div>
                                <button type="button" class="col-md-1 borderLess pull-left" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip-html="htmlDescriptionTip">
                                    <span class="glyphicon glyphicon-question-sign"></span>
                                </button>
                            </div>

                            <!-- Control Identifier input: (Details) -->
                            <div class="col-md-12" ng-if="showControlIDinput && view.OPval == 'detail'">
                                <div class="col-md-4"><label>Control Identifier:</label></div>
                                <div class="col-md-6">
                                    <div ng-repeat="id in addedIdentifiers">
                                        <div style="margin-bottom:5px">
                                            <div class="col-md-7"><span>-- {{id.identifier}}, {{id.identifier_type}}</span></div>
                                        </div><br />
                                    </div>
                                </div>
                            </div>
                            <!-- Control Identifier input: (Edit) -->
                            <!-- Control Identifier add button -->
                            <div ng-if="view.OPval == 'edit'" class="form-group">
                                <label class="col-md-4 control-label" for="CONTROL">Control Identifier:</label>
                                <div class="col-md-6">
                                    <button type="button" class="btn btn-default" ng-click="addNewIdentifier()">Add New Identifier</button>
                                </div>
                                <button type="button" class="col-md-1 borderLess pull-left" tooltip-placement="bottom" tooltip-append-to-body="false" uib-tooltip="National Geodetic Survey permanent identifier. See: ngs.noaa.gov/NGSDataExplorer/ for more information.">
                                    <span class="glyphicon glyphicon-question-sign"></span>
                                </button>
                            </div>
                            <div class="form-group" ng-if="showControlIDinput && view.OPval == 'edit'">
                                <label class="col-md-4 control-label"></label>
                                <div class="col-md-6">
                                    <div>
                                        <div ng-repeat="idC in addedIdentifiersCopy">
                                            <div class="col-md-12" style="margin-bottom:5px">
                                                <div class="col-md-6"><input class="form-control" name="OPControl" ng-model="idC.identifier" type="text" /></div>
                                                <input type="hidden" name="op_control_identifier_id" ng-model="idC.op_control_identifier_id" />
                                                <input type="hidden" name="objective_point_id" ng-model="idC.objective_point_id" />

                                                <span class="radio-inline">
                                                    <input type="radio" name="identifier_type{{$index}}" ng-model="idC.identifier_type" value="PID" /> PID
                                                </span>
                                                <span class="radio-inline">
                                                    <input type="radio" name="identifier_type{{$index}}" ng-model="idC.identifier_type" value="Other" /> Other
                                                </span>
                                                <div class="buttons pull-right">
                                                    <button type="button" class="btn borderLess" ng-click="RemoveID(idC)">
                                                        <i class="glyphicon glyphicon-remove"></i>
                                                    </button>
                                                </div>
                                            </div><br />
                                        </div> <!-- end repeat -->
                                    </div>
                                </div>
                            </div>

                            <!-- dec deg or dms: -->
                            <div ng-if="view.OPval == 'edit'">
                                <label class="col-md-4 control-label"></label>
                                <div class="col-md-6">
                                    <span class="radio-inline">
                                        <input type="radio" name="decDegORdms" ng-change="latLongChange()" ng-model="opCopy.decDegORdms" value="dd" /> Dec Deg
                                    </span>
                                    <span class="radio-inline">
                                        <input type="radio" name="decDegORdms" ng-change="latLongChange()" ng-model="opCopy.decDegORdms" value="dms" /> DMS
                                    </span>
                                </div>
                            </div>
                            <!-- Latitude: (Details) -->
                            <div ng-if="view.OPval == 'detail'" class="col-md-12">
                                <div class="col-md-4"><label>Latitude:</label></div>
                                <div class="col-md-6">{{OP.latitude_dd}}</div>

                            </div>
                            <!-- Latitude: (edit) -->
                            <div ng-if="view.OPval == 'edit'" class="form-group">
                                <label class="col-md-4 control-label" for="latitude_dd">Latitude:</label>
                                <div class="col-md-6" ng-if="opCopy.decDegORdms == 'dd'">
                                    <input class="form-control" ng-keypress="isNum($event)" name="latitude_dd" id="latitude_dd" ng-model="opCopy.latitude_dd"
                                           ng-model-options="{ updateOn: 'blur' }" ng-change="checkValue('dd')" type="text" />
                                </div>
                                <div class="col-md-6" ng-if="opCopy.decDegORdms == 'dms'">
                                    <table>
                                        <tr>
                                            <td><input class="form-control" ng-keypress="isNum($event)" ng-model-options="{ updateOn: 'blur' }" ng-change="checkValue('dms')" id="LaDeg" name="Deg" ng-model="DMS.LADeg" type="text" /></td>
                                            <td>°</td>
                                            <td><input class="form-control" ng-keypress="isNum($event)" ng-model-options="{ updateOn: 'blur' }" ng-change="checkValue('dms')" name="Min" ng-model="DMS.LAMin" type="text" /></td>
                                            <td>′</td>
                                            <td><input class="form-control" ng-keypress="isNum($event)" ng-model-options="{ updateOn: 'blur' }" ng-change="checkValue('dms')" name="Sec" ng-model="DMS.LASec" type="text" /></td>
                                            <td>″</td>
                                        </tr>
                                    </table>
                                </div>
                            </div>

                            <!-- Longitude: (Details) -->
                            <div ng-if="view.OPval == 'detail'" class="col-md-12">
                                <div class="col-md-4"><label>Longitude:</label></div>
                                <div class="col-md-6">{{OP.longitude_dd}}</div>
                            </div>
                            <!-- Longitude: (Edit) -->
                            <div ng-if="view.OPval == 'edit'" class="form-group">
                                <label class="col-md-4 control-label" for="longitude_dd">Longitude:</label>
                                <div class="col-md-6" ng-if="opCopy.decDegORdms == 'dd'">
                                    <input class="form-control" ng-keypress="isNum($event)" id="longitude_dd" name="longitude_dd" ng-model="opCopy.longitude_dd"
                                           ng-model-options="{ updateOn: 'blur' }" ng-change="checkValue('dd')" type="text" />
                                </div>
                                <div class="col-md-6" ng-if="opCopy.decDegORdms == 'dms'">
                                    <table>
                                        <tr>
                                            <td><input class="form-control" ng-keypress="isNum($event)" ng-model-options="{ updateOn: 'blur' }" ng-change="checkValue('dms')" id="LoDeg" name="Deg" ng-model="DMS.LODeg" type="text" /></td>
                                            <td>°</td>
                                            <td><input class="form-control" ng-keypress="isNum($event)" ng-model-options="{ updateOn: 'blur' }" ng-change="checkValue('dms')" name="Min" ng-model="DMS.LOMin" type="text" /></td>
                                            <td>′</td>
                                            <td><input class="form-control" ng-keypress="isNum($event)" ng-model-options="{ updateOn: 'blur' }" ng-change="checkValue('dms')" name="Sec" ng-model="DMS.LOSec" type="text" /></td>
                                            <td>″</td>
                                        </tr>
                                    </table>
                                </div>
                            </div>

                            <!-- Horizontal Datum: (Details) -->
                            <div ng-if="view.OPval == 'detail'" class="col-md-12">
                                <div class="col-md-4"><label>Horizontal Datum:</label></div>
                                <div class="col-md-6">{{OP.hdatum || '---'}}</div>
                            </div>
                            <!-- Horizontal Datum: (edit) -->
                            <div class="form-group" ng-if="view.OPval == 'edit'">
                                <label class="col-md-4 control-label" for="hdatum_id">Horizontal Datum:</label>
                                <div class="col-md-6">
                                    <select class="form-control" name="hdatum_id" ng-model="opCopy.hdatum_id"
                                            ng-options="hd.datum_id as hd.datum_name for hd in HDList">
                                        <option value=""></option>
                                    </select>
                                </div>
                            </div>

                            <!-- Horizontal Collection Method: (Details) -->
                            <div ng-if="view.OPval == 'detail'" class="col-md-12">
                                <div class="col-md-4"><label>Horizontal Collection Method:</label></div>
                                <div class="col-md-6">{{OP.hCollectMethod || '---'}}</div>
                            </div>
                            <!-- Horizontal Collection Method: (edit) -->
                            <div ng-if="view.OPval == 'edit'" class="form-group">
                                <label class="col-md-4 control-label" for="hcollect_method_id">Horizontal Collection Method:</label>
                                <div class="col-md-6">
                                    <select class="form-control" name="hcollect_method_id" ng-model="opCopy.hcollect_method_id"
                                            ng-options="hcm.hcollect_method_id as hcm.hcollect_method for hcm in HCollectMethodList">
                                        <option value=""></option>
                                    </select>
                                </div>
                            </div>

                            <!-- Ft or Meter radios: -->
                            <div ng-show="view.OPval == 'edit'">
                                <label class="col-md-4 control-label"></label>
                                <div class="col-md-6">
                                    <span class="radio-inline">
                                        <input type="radio" name="FTorMETER" ng-model="opCopy.FTorMETER" value="ft" /> ft
                                    </span>
                                    <span class="radio-inline">
                                        <input type="radio" name="FTorMETER" ng-model="opCopy.FTorMETER" value="meter" /> meter
                                    </span>
                                </div>
                            </div>

                            <!-- Elevation: (Details) -->
                            <div class="col-md-12" ng-if="view.OPval == 'detail'">
                                <div class="col-md-4"><label>Elevation:</label></div>
                                <div class="col-md-6">{{OP.elev_ft || '---'}}<span ng-if="OP.elev_ft"> ft.</span></div>
                            </div>
                            <!-- Elevation: (edit)-->
                            <div class="form-group" ng-if="view.OPval == 'edit'">
                                <label class="col-md-4 control-label" for="elev_ft">Elevation:</label>
                                <div class="col-md-6">
                                    <input ng-show="view.OPval == 'edit'" class="form-control" ng-keypress="isNum($event)" name="elev_ft" ng-model="opCopy.elev_ft" type="text" />
                                </div>
                            </div>

                            <!--  Vertical Datum:(Details) -->
                            <div class="col-md-12" ng-if="view.OPval == 'detail'">
                                <div class="col-md-4"><label>Vertical Datum:</label></div>
                                <div class="col-md-6">{{OP.vDatum || '---'}}</div>
                            </div>
                            <!--  Vertical Datum:(edit) -->
                            <div ng-if="view.OPval == 'edit'" class="form-group" ng-class="{'has-error':OPEditForm.vdatum_id.$invalid && OPEditForm.vdatum_id.$dirty && view.OPval =='edit'}">
                                <label class="col-md-4 control-label req" for="vdatum_id">
                                    Vertical Datum:
                                    <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Required">
                                        <span class="glyphicon glyphicon-asterisk" style="color:#d00;font-size:xx-small;"></span>
                                    </button>
                                </label>
                                <div class="col-md-6">
                                    <select class="form-control" name="vdatum_id" ng-model="opCopy.vdatum_id"
                                            ng-options="vd.datum_id as vd.datum_name for vd in VDatumList" required>
                                        <option value=""></option>
                                    </select>
                                </div>
                            </div>

                            <!-- Vertical Collection Method: (details) -->
                            <div class="col-md-12" ng-if="view.OPval == 'detail'">
                                <div class="col-md-4"><label>Vertical Collection Method:</label></div>
                                <div class="col-md-6">{{OP.vCollectMethod || '---'}}</div>
                            </div>
                            <!-- Vertical Collection Method: (edit) -->
                            <div ng-if="view.OPval == 'edit'" class="form-group">
                                <label class="col-md-4 control-label" for="vcollect_method_id">Vertical Collection Method:</label>
                                <div class="col-md-6">
                                    <select class="form-control" name="vcollect_method_id" ng-model="opCopy.vcollect_method_id"
                                            ng-options="vcm.vcollect_method_id as vcm.vcollect_method for vcm in VCollectMethodList">
                                        <option value=""></option>
                                    </select>
                                </div>
                            </div>

                            <!-- Ft or CM radios: -->
                            <div ng-show="view.OPval == 'edit'">
                                <label class="col-md-4 control-label"></label>
                                <div class="col-md-6">
                                    <span class="radio-inline">
                                        <input type="radio" name="FTorCM" ng-model="opCopy.FTorCM" value="ft" /> +/- ft
                                    </span>
                                    <span class="radio-inline">
                                        <input type="radio" name="FTorCM" ng-model="opCopy.FTorCM" value="cm" /> +/- cm
                                    </span>
                                </div>
                            </div>

                            <!-- Uncertainty: (details) -->
                            <div class="col-md-12" ng-if="view.OPval == 'detail'">
                                <div class="col-md-4"><label>Uncertainty:</label></div>
                                <div class="col-md-6">
                                    <div>{{OP.unquantified == '1' ? 'Unquantified' : OP.uncertainty}}<span ng-show="OP.uncertainty"> ft.</span></div>
                                </div>
                            </div>
                            <!-- Uncertainty: (edit) -->
                            <div class="form-group" ng-if="view.OPval == 'edit'">
                                <label class="col-md-4 control-label" for="uncertainty">Uncertainty:</label>
                                <div class="col-md-6">
                                    <div class="col-md-12" style="margin-bottom:5px;padding-left:0">
                                        <div class="col-md-5" style="padding-left: 0;"><input class="form-control" ng-disabled="opCopy.unquantified==1" ng-keypress="isNum($event)" ng-model="opCopy.uncertainty" type="text" /></div>
                                        <div class="col-md-1" style="text-decoration:underline;padding:0">OR</span></div>
                                        <div class="col-md-5">
                                            <input type="checkbox" ng-model="opCopy.unquantified" ng-checked="opCopy.unquantified=='1'" ng-true-value="'1'" ng-false-value="'0'" ng-click="UnquantChecked()" />
                                            <span style="margin-left:10px">Unquantified</span>
                                        </div>
                                    </div>
                                </div>
                                <button type="button" class="col-md-1 borderLess pull-left" tooltip-placement="bottom" tooltip-append-to-body="false" uib-tooltip="From GNSS or OPUS solution.">
                                    <span class="glyphicon glyphicon-question-sign"></span>
                                </button>
                            </div>

                            <!-- Quality: (detail) -->
                            <div class="col-md-12" ng-if="view.OPval == 'detail'">
                                <div class="col-md-4"><label>Quality:</label></div>
                                <div class="col-md-6">{{OP.quality || '---'}}</div>
                            </div>

                            <!-- Quality: (edit)-->
                            <div class="form-group" ng-if="view.OPval == 'edit'">
                                <label class="col-md-4 control-label" for="op_quality_id">Quality:</label>
                                <div class="col-md-6">
                                    <select class="form-control" name="op_quality_id" ng-model="opCopy.op_quality_id"
                                            ng-options="opq.op_quality_id as opq.quality for opq in OPQualityList">
                                        <option value=""></option>
                                    </select>
                                </div>
                            </div>

                            <!-- Objective Point Notes: (detail) -->
                            <div ng-if="view.OPval == 'detail'" class="col-md-12">
                                <div class="col-md-4"><label>Datum Location Notes:</label></div>
                                <div class="col-md-6">{{OP.op_notes || '---'}}</div>
                            </div>
                            <!-- Objective Point Notes: (edit) -->
                            <div ng-if="view.OPval == 'edit'" class="form-group">
                                <label class="col-md-4 control-label" for="op_notes">Datum Location Notes:</label>
                                <div class="col-md-6">
                                    <textarea class="form-control" type="text" rows="3" ng-model="opCopy.op_notes" />
                                </div>
                            </div>

                            <!-- Date Established: (detail) -->
                            <div ng-if="view.OPval == 'detail'" class="col-md-12">
                                <div class="col-md-4"><label>Date Established:</label></div>
                                <div class="col-md-6">
                                    <div class="col-md-6 input-group">{{OP.date_established | date: 'MM/dd/yyyy' || '---'}}</div>
                                </div>
                            </div>
                            <!-- Date Established: (edit) -->
                            <div ng-if="view.OPval == 'edit'" class="form-group" ng-class="{'has-error':OPEditForm.date_established.$invalid && OPEditForm.date_established.$dirty && view.OPval =='edit'}">
                                <label class="col-md-4 control-label req" for="date_established">
                                    Date Established:
                                    <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Required">
                                        <span class="glyphicon glyphicon-asterisk" style="color:#d00;font-size:xx-small;"></span>
                                    </button>
                                </label>
                                <div class="col-md-6">
                                    <div class="col-md-6 input-group">
                                        <input class="form-control dateInputStyle" type="date" name="de" uib-datepicker-popup="MM/dd/yyyy" show-weeks="false" is-open="datepickrs.de" ng-model="opCopy.date_established" required />
                                        <span class="input-group-btn">
                                            <button type="button" class="btn btn-default" ng-click="open($event, 'de')">
                                                <i class="glyphicon glyphicon-calendar" />
                                            </button>
                                        </span>
                                    </div>
                                </div>
                            </div>

                            <!-- Date Recovered: (detail) -->
                            <div ng-if="view.OPval == 'detail'" class="col-md-12">
                                <div class="col-md-4"><label>Date Recovered:</label></div>
                                <div class="col-md-6">
                                    <div class="col-md-6 input-group">{{OP.date_recovered | date: 'MM/dd/yyyy' || '---'}}</div>
                                </div>
                            </div>
                            <!-- Date Recovered: (edit) -->
                            <div ng-if="view.OPval == 'edit'" class="form-group">
                                <label class="col-md-4 control-label" for="date_recovered">Date Recovered:</label>
                                <div class="col-md-6">
                                    <div class="col-md-6 input-group">
                                        <input show-weeks="false" class="form-control dateInputStyle" type="date" name="dr" uib-datepicker-popup="MM/dd/yyyy" is-open="datepickrs.dr" ng-model="opCopy.date_recovered" />
                                        <span class="input-group-btn">
                                            <button type="button" class="btn btn-default" ng-click="open($event, 'dr')">
                                                <i class="glyphicon glyphicon-calendar" />
                                            </button>
                                        </span>
                                    </div>
                                </div>
                                <button type="button" class="col-md-1 borderLess pull-left" tooltip-placement="bottom" tooltip-append-to-body="false" uib-tooltip="Enter the date the location was recently found in good condition.">
                                    <span class="glyphicon glyphicon-question-sign"></span>
                                </button>
                            </div>

                            <!--edit button-->
                            <div class="form-group">
                                <div class="col-md-12">
                                    <button ng-show="view.OPval == 'detail'" type="button" class="btn btn-primary" ng-click="wannaEditOP()">Edit Datum Location</button>
                                    <button ng-show="view.OPval == 'edit'" class="btn btn-primary" ng-click="save(OPEditForm.$valid); reloadPage();">Save</button>
                                    <button ng-show="view.OPval == 'edit'" type="button" class="btn btn-warning" ng-click="cancelOPEdit()">Cancel Edit</button>
                                </div>
                            </div>

                        </fieldset>
                    </form>
                </uib-accordion-group>

                <!-- OBJECTIVE POINT FILES SECTION -->
                <div ng-if="OP.objective_point_id !== undefinfed">
                    <!--OP File Part-->
                    <uib-accordion-group is-open="dl.dlFileOpen">
                        <uib-accordion-heading>
                            <i style="margin-right:10px" class="pull-left glyphicon" ng-class="{'glyphicon-chevron-down': dl.dlFileOpen, 'glyphicon-chevron-right': !dl.dlFileOpen}"></i>
                            <span ng-class="{'redText':showFileForm}">Datum Location File Information</span>
                            <button type="button" class="col-md-1 borderLess pull-right" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Files uploaded to Datum Location are not tied to an event. To associate a file with an event, please upload through a sensor or hwm instead of here.">
                                <span class="glyphicon glyphicon-question-sign"></span>
                            </button>
                        </uib-accordion-heading>
                        <div class="col-md-12">
                            <div class="col-md-5"><h3>Datum Location Files</h3></div>
                            <div class="col-md-6" ng-if="!showFileForm" style="margin-top:14px">
                                <button type="button" class="borderLess" ng-click="showFile(0)" tooltip-placement="right" uib-tooltip="Upload a new File to this OP">
                                    <span class="glyphicon glyphicon-plus"></span>
                                </button>
                            </div>
                            <br clear="all" />
                            <!-- list of existing files for this op -->
                            <div class="col-md-6" ng-if="OPFiles.length > 0">
                                <ul style="padding-left: 0">
                                    <li ng-repeat="f in OPFiles" style="list-style:none;padding-bottom: 15px;">
                                        <span class="col-sm-9 borderLess" style="padding:0">
                                            <a class="btn borderLess" style="padding:0" title="{{f.file_date | date: 'MM/dd/yyyy'}} ({{f.name || f.file_id}})" ng-click="showFile(f)">{{f.file_date | date: 'MM/dd/yyyy'}} ({{f.name || f.file_id}})</a>
                                        </span>
                                    </li>
                                </ul>
                            </div>
                            <!-- carousel of photo files -->
                            <div class="col-md-6" ng-if="opImageFiles.length > 0" style="height:120px;">
                                <uib-carousel interval="4000">
                                    <uib-slide ng-repeat="f in opImageFiles">
                                        <img ng-click="showImageModal(f.file_id)" ng-src="{{serverURL}}/Files/{{f.file_id}}/Item{{stamp}}" />
                                        <div class="carousel-caption">
                                            <p>{{f.name || f.file_id}}</p>
                                        </div>
                                    </uib-slide>
                                </uib-carousel>
                            </div>
                            <br clear="all" />

                            <div ng-if="showFileForm">
                                <hr />
                                <form class="form-horizontal" name="OPFILEForm">
                                    <fieldset>
                                        <!--Upload Single Image with validations*-->
                                        <div ng-if="aFile.file_id === undefined" class="form-group" style="margin:0;padding:0">
                                            <label class="col-md-4 control-label" for="FILE">
                                                Upload File:
                                                <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Required">
                                                    <span class="glyphicon glyphicon-asterisk" style="color:#d00;font-size:xx-small;"></span>
                                                </button>
                                            </label>
                                            <div class="col-md-7">
                                                <input type="file" max="500000" file-model="aFile.File" />
                                                <img ngf-thumbnail="aFile.File" style="height:60px" class="thumbnail">
                                            </div>
                                        </div>
                                        <!-- File Type* -->
                                        <div class="form-group" ng-class="{'has-error':OPFILEForm.filetype_id.$invalid && OPFILEForm.filetype_id.$dirty}" style="margin:0;padding:0">
                                            <label class="col-md-4 control-label req" for="filetype_id">
                                                File Type:
                                                <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Required">
                                                    <span class="glyphicon glyphicon-asterisk" style="color:#d00;font-size:xx-small;"></span>
                                                </button>
                                            </label>
                                            <div class="col-md-6" ng-if="aFile.file_id == undefined">
                                                <select class="form-control" name="filetype_id" ng-model="aFile.filetype_id" ng-change="updateAgencyForCaption()"
                                                        ng-options="ft.filetype_id as ft.filetype for ft in fileTypes" required>
                                                    <option value=""></option>
                                                </select>
                                            </div>
                                            <div class="col-md-6" ng-if="aFile.file_id != undefined">{{aFile.fileType}}</div>
                                        </div>

                                        <br clear="all" />

                                        <!-- photo file fileType==1-->  <!-- all other file fileType > 2-->    <!--data file fileType==2 -->
                                        <!--File URL (Link file only)-->
                                        <div ng-if="aFile.filetype_id === 8" class="form-group" style="margin:0;padding:0">
                                            <label class="col-md-4 control-label" for="name">File URL:</label>
                                            <div class="col-md-6">
                                                <input class="form-control" name="name" ng-model="aFile.name" type="text" />
                                            </div>
                                            <button type="button" class="col-md-1 borderLess pull-left" tooltip-placement="bottom" tooltip-append-to-body="false" uib-tooltip="Please link to persistent URLs or digital object identifier (doi) urls.">
                                                <span class="glyphicon glyphicon-question-sign"></span>
                                            </button>
                                        </div>

                                        <!--Source Name (photo)-->
                                        <div class="form-group" ng-if="aFile.filetype_id === 1" ng-class="{'has-error':OPFILEForm.FULLname.$invalid && OPFILEForm.FULLname.$dirty}" style="margin:0;padding:0">
                                            <label class="col-md-4 control-label req" for="source_id">
                                                Source Photographer:
                                                <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Required">
                                                    <span class="glyphicon glyphicon-asterisk" style="color:#d00;font-size:xx-small;"></span>
                                                </button>
                                            </label>
                                            <div class="col-md-6">
                                                <input class="form-control" name="FULLname" ng-model="aSource.FULLname" type="text" required />
                                            </div>
                                        </div>

                                        <!--Source Name (all other)-->
                                        <div class="form-group" ng-if="aFile.filetype_id  > 2" ng-class="{'has-error':OPFILEForm.FULLname.$invalid && OPFILEForm.FULLname.$dirty}" style="margin:0;padding:0">
                                            <label class="col-md-4 control-label req" for="source_id">
                                                Source Name:
                                                <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Required">
                                                    <span class="glyphicon glyphicon-asterisk" style="color:#d00;font-size:xx-small;"></span>
                                                </button>
                                            </label>
                                            <div class="col-md-6">
                                                <input class="form-control" name="FULLname" ng-model="aSource.FULLname" type="text" required />
                                            </div>
                                        </div>

                                        <!--Source Agency* (photo, allOther)-->
                                        <div ng-if="aFile.filetype_id === 1 || aFile.filetype_id > 2" class="form-group" ng-class="{'has-error':OPFILEForm.agency_id.$invalid && OPFILEForm.agency_id.$dirty}" style="margin:0;padding:0">
                                            <label class="col-md-4 control-label req" for="agency_id">
                                                Source Agency:
                                                <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Required">
                                                    <span class="glyphicon glyphicon-asterisk" style="color:#d00;font-size:xx-small;"></span>
                                                </button>
                                            </label>
                                            <div class="col-md-6">
                                                <select class="form-control" name="agency_id" ng-model="aSource.agency_id" ng-change="updateAgencyForCaption()"
                                                        ng-options="a.agency_id as a.agency_name for a in agencies" required>
                                                    <option value=""></option>
                                                </select>
                                            </div>
                                        </div>

                                        <!-- Photo Date* (photo) -->
                                        <div ng-if="aFile.filetype_id === 1" class="form-group" ng-class="{'has-error':OPFILEForm.photo_date.$invalid && OPFILEForm.photo_date.$dirty}" style="margin:0;padding:0">
                                            <label class="col-md-4 control-label req" for="photo_date">
                                                Photo Date:
                                                <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Required">
                                                    <span class="glyphicon glyphicon-asterisk" style="color:#d00;font-size:xx-small;"></span>
                                                </button>
                                            </label>
                                            <div class="col-md-4 input-group" style="padding-right:14px;padding-left:14px">
                                                <input class="form-control dateInputStyle" type="date" name="sd" uib-datepicker-popup="MM/dd/yyyy" show-weeks="false" is-open="datepickrs.sd" ng-model="aFile.photo_date" required />
                                                <span class="input-group-btn">
                                                    <button type="button" class="btn btn-default" ng-click="open($event, 'sd')">
                                                        <i class="glyphicon glyphicon-calendar" />
                                                    </button>
                                                </span>
                                            </div>
                                        </div>

                                        <!-- Date Uploaded* (photo, data, allother) -->
                                        <div ng-if="aFile.filetype_id > 0" class="form-group" ng-class="{'has-error':OPFILEForm.file_date.$invalid && OPFILEForm.file_date.$dirty}" style="margin:0;padding:0">
                                            <label class="col-md-4 control-label req" for="file_date">
                                                Date Uploaded:
                                                <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Required">
                                                    <span class="glyphicon glyphicon-asterisk" style="color:#d00;font-size:xx-small;"></span>
                                                </button>
                                            </label>
                                            <div class="col-md-4 input-group" style="padding-right:14px;padding-left:14px">
                                                <input class="form-control dateInputStyle" type="date" name="fd" uib-datepicker-popup="MM/dd/yyyy" show-weeks="false" is-open="datepickrs.fd" ng-model="aFile.file_date" required />
                                                <span class="input-group-btn">
                                                    <button type="button" class="btn btn-default" ng-click="open($event, 'fd')">
                                                        <i class="glyphicon glyphicon-calendar" />
                                                    </button>
                                                </span>
                                            </div>
                                        </div>

                                        <!--Description*(photo, data, allother)-->
                                        <div ng-if="aFile.filetype_id > 0" class="form-group" ng-class="{'has-error':OPFILEForm.description.$invalid && OPFILEForm.description.$dirty}" style="margin:0;padding:0">
                                            <label class="col-md-4 control-label req" for="description">
                                                Description:
                                                <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Required">
                                                    <span class="glyphicon glyphicon-asterisk" style="color:#d00;font-size:xx-small;"></span>
                                                </button>
                                            </label>
                                            <div class="col-md-6">
                                                <textarea class="form-control" id="description" type="text" rows="3" placeholder="Description" ng-model="aFile.description" required />
                                            </div>
                                            <button ng-show="aFile.filetype_id == 1" type="button" class="col-md-1 borderLess pull-left" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Populates in Photo caption below. If a person or people appear in photo include name(s). If non-USGS personnel, ensure consent to publish name in caption is given.">
                                                <span class="glyphicon glyphicon-question-sign"></span>
                                            </button>
                                        </div>

                                        <!-- This is where Other ends, rest is for Photo -->
                                        <!--Photo Direction (photo)-->
                                        <div ng-if="aFile.filetype_id === 1" class="form-group" style="margin:0;padding:0;padding-top:5px;">
                                            <label class="col-md-4 control-label" for="photo_direction">Photo Direction:</label>
                                            <div class="col-md-6">
                                                <input class="form-control" id="photo_direction" name="photo_direction" ng-model="aFile.photo_direction" type="text" />
                                            </div>
                                        </div>

                                        <!-- Photo Latitude (photo)-->
                                        <div ng-if="aFile.filetype_id === 1" class="form-group" style="margin:0;padding:0">
                                            <label class="col-md-4 control-label" for="latitude_dd">Photo Latitude <br /> (if different):</label>
                                            <div class="col-md-6">
                                                <input class="form-control" ng-keypress="isNum($event)" name="latitude_dd" id="latitude_dd" ng-model="aFile.latitude_dd"
                                                       type="text" />
                                            </div>
                                        </div>

                                        <!--Photo Longitude (photo)-->
                                        <div ng-if="aFile.filetype_id === 1" class="form-group" style="margin:0;padding:0">
                                            <label class="col-md-4 control-label" for="longitude_dd">Photo Longitude <br /> (if different):</label>
                                            <div class="col-md-6">
                                                <input class="form-control" ng-keypress="isNum($event)" id="longitude_dd" name="longitude_dd" ng-model="aFile.longitude_dd"
                                                       type="text" />
                                            </div>
                                        </div>

                                        <div ng-if="aFile.filetype_id === 1" class="form-group" style="margin:0;padding:0">
                                            <label class="col-md-4 control-label" for="Caption">Preview Caption:</button></label>
                                            <div class="col-md-6">
                                                <span>
                                                    Photo of {{aFile.description || ' (Description HERE) '}} at {{thisOPsite.site_description}}, {{thisOPsite.county}}, {{thisOPsite.state}}, {{aFile.photo_date | date: 'MM/dd/yyyy' || ' Date taken HERE '}}. Photograph by {{aSource.FULLname || ' Source Name HERE ' }}, {{agencyNameForCap || ' Agency HERE '}}.
                                                </span>
                                            </div>
                                        </div>

                                        <!-- associated files (OBJECTIVE POINT FILES)-->
                                        <div ng-show="aFile.file_id !== undefined && aFile.filetype_id !== 8" class="form-group" style="margin:0;padding:0;padding-top:12px;">
                                            <label class="col-md-4 control-label">Associated File:</label>
                                            <div class="col-md-6">
                                                <span ng-if="fileItemExists">
                                                    <a target="_blank" title="Download File" ng-href="{{serverURL}}/Files/{{aFile.file_id}}/Item">{{aFile.name}}</a>
                                                    <br />
                                                    <img ng-if="isPhoto" style="height:80px;" ng-src="{{src}}" />
                                                </span>
                                                <span ng-if="!fileItemExists">-- Missing --</span>
                                                <!--ReUpload Single Image with validations -->
                                                <div ng-if="!fileItemExists" class="form-group">
                                                    <div class="col-md-7">
                                                        <label class="custom-file-input" for="Upload" />
                                                        <input id="Upload" type="file" max="500000" file-model="aFile.File" style="visibility: hidden">
                                                        <div class="col-md-7 pull-left" ng-if="aFile.File.type == 'image/png' || aFile.File.type == 'image/jpeg' || aFile.File.type == 'image/gif'"><img ngf-thumbnail="aFile.File" style="height:60px" class="thumbnail"></div>
                                                        <div class="col-md-7 pull-left" ng-if="aFile.File.type !== 'image/png' && aFile.File.type !== 'image/jpeg' && aFile.File.type !== 'image/gif'" style="overflow:auto">{{aFile.File.name}}</div>
                                                        <div class="col-md-5">
                                                            <span ng-if="aFile.File">
                                                                Correct File?
                                                                <button ng-if="aFile.File" type="button" ng-click="saveFileUpload()">Upload</button>
                                                            </span>
                                                        </div>
                                                    </div>
                                                </div>
                                                <!-- change out the existing fileItem with a different one-->
                                                <div ng-if="fileItemExists" class="form-group">
                                                    <div class="col-md-9">
                                                        <label class="custom-file-inputChange" for="Upload" />
                                                        <input id="Upload" type="file" max="500000" file-model="aFile.File1" style="visibility: hidden">
                                                        <div class="col-md-7 pull-left" ng-if="aFile.File1.type == 'image/png' || aFile.File1.type == 'image/jpeg' || aFile.File1.type == 'image/gif'"><img ngf-thumbnail="aFile.File1" style="height:60px" class="thumbnail"></div>
                                                        <div class="col-md-7 pull-left" ng-if="aFile.File1.type !== 'image/png' && aFile.File1.type !== 'image/jpeg' && aFile.File1.type !== 'image/gif'" style="overflow:auto">{{aFile.File1.name}}</div>
                                                        <div class="col-md-5">
                                                            <span ng-if="aFile.File1">
                                                                Correct File?
                                                                <button ng-if="aFile.File1" type="button" ng-click="saveFileUpload()">Replace</button>
                                                            </span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <div ng-show="!fileIsUploading">
                                            <button class="btn btn-primary" ng-if="aFile.file_id != undefined" ng-click="saveFile(OPFILEForm.$valid)">Save File</button>
                                            <button type="button" class="btn btn-danger" ng-if="aFile.file_id != undefined" ng-click="deleteFile()">Delete File</button>
                                            <button class="btn btn-primary" ng-if="aFile.file_id == undefined" ng-click="createFile(OPFILEForm.$valid)">Create File</button>
                                            <button type="button" class="btn btn-warning" ng-click="cancelFile()">Close/Cancel File</button>
                                        </div>
                                        <div ng-show="fileIsUploading"><img src="images/fileUpload.gif" /></div>

                                    </fieldset>
                                </form>
                            </div>
                        </div>
                    </uib-accordion-group>
                </div>
            </uib-accordion>
        </div><!-- end edit view -->
    </div> <!-- end modal-body -->
    <br clear="all" />
    <div class="modal-footer">
        <div class="form-group">
            <div class="col-md-12">
                <button ng-disabled="showFileForm" type="button" ng-show="OP.objective_point_id !== undefined" class="btn btn-danger" ng-click="deleteOP(OPEditForm.$valid)">Delete Datum Location</button>
                <button type="button" class="btn btn-warning" ng-disabled="showFileForm" ng-click="cancel()">Cancel/Close</button>
            </div>
        </div>
    </div> <!-- end modal-footer -->
</script>

<!-- MODAL for HWM-->
<script type="text/ng-template" id="HWMmodal.html">
    <div class="modal-header">
        <h3 class="modal-title">HWM<button class="close" type="button" ng-click="cancel()" aria-hidden="true" style="color:gray;">&times;</button></h3>
    </div>

    <div class="modal-body">
        <div ng-if="createOReditHWM == 'create'">
            <form class="form-horizontal" name="HWMForm">
                <fieldset>
                    <!-- Waterbody: -->
                    <div class="form-group">
                        <label class="col-md-4 control-label" for="waterbody">
                            <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                                <span class="glyphicon glyphicon-eye-open"></span>
                            </button> Waterbody:
                        </label>
                        <div class="col-md-6">
                            <input class="form-control" name="waterbody" ng-model="aHWM.waterbody" type="text" />
                        </div>
                    </div>

                    <!-- Event: -->
                    <div class="form-group">
                        <label class="col-md-4 control-label" for="event_id">
                            <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                                <span class="glyphicon glyphicon-eye-open"></span>
                            </button> Event:
                        </label>
                        <div class="col-md-6">
                            <div class="col-md-8">{{EventName}}</div>
                            <div class="col-md-3" ng-show="userRole == 'Admin' && aHWM.hwm_id != undefined">
                                <button type="button" ng-click="showChangeEventDD()" class="btn btn-primary">Change Event</button>
                            </div>
                        </div>
                    </div>

                    <!--Event dropdown for admin -->
                    <div ng-show="showEventDD">
                        <div class="form-group">
                            <label class="col-md-4 control-label">
                                <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                                    <span class="glyphicon glyphicon-eye-open"></span>
                                </button> Events:
                            </label>
                            <div class="col-md-6">
                                <select class="form-control" name="event_id" ng-model="adminChanged.event_id" ng-change="ChangeEvent()"
                                        ng-options="e.event_id as (e.event_name + ' --- ' + (e.event_start_date | date: 'MM/dd/yyyy') + ' to ' + ((e.event_end_date || '-Not Set-') | date: 'MM/dd/yyyy'))  for e in eventList | orderBy: '-event_start_date'"
                                <option value=""></option>
                            </select>
                            </div>
                        </div>
                    </div>

                    <!-- HWM Type:* -->
                    <div class="form-group" ng-class="{'has-error':HWMForm.hwm_type_id.$invalid && HWMForm.hwm_type_id.$dirty}">
                        <label class="col-md-4 control-label req" for="hwm_type_id">
                            <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                                <span class="glyphicon glyphicon-eye-open"></span>
                            </button> HWM Type:
                            <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Required">
                                <span class="glyphicon glyphicon-asterisk" style="color:#d00;font-size:xx-small;"></span>
                            </button>
                        </label>
                        <div class="col-md-6">
                            <select class="form-control" name="hwm_type_id" ng-model="aHWM.hwm_type_id"
                                    ng-options="htype.hwm_type_id as htype.hwm_type for htype in hwmTypeList" required>
                                <option value=""></option>
                            </select>
                        </div>
                    </div>

                    <!-- Marker: -->
                    <div class="form-group">
                        <label class="col-md-4 control-label" for="marker_id">
                            <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                                <span class="glyphicon glyphicon-eye-open"></span>
                            </button> Marker:
                        </label>
                        <div class="col-md-6">
                            <select class="form-control" name="marker_id" ng-model="aHWM.marker_id" ng-options="vd.marker_id as vd.marker1 for vd in markerList">
                                <option value=""></option>
                            </select>
                        </div>
                    </div>

                    <!-- Label*: ng-change="ensurehwmLabelUnique()"  ng-model-options="{ updateOn: 'blur' }"-->
                    <div class="form-group">
                        <label class="col-md-4 control-label req" for="hwm_label">
                            <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                                <span class="glyphicon glyphicon-eye-open"></span>
                            </button> label:
                            <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Required">
                                <span class="glyphicon glyphicon-asterisk" style="color:#d00;font-size:xx-small;"></span>
                            </button>
                        </label>
                        <div class="col-md-6">
                            <input class="form-control" name="hwm_label" ng-model="aHWM.hwm_label" type="text" label-limit-length="12" required />
                        </div>
                        <button type="button" class="col-md-1 borderLess pull-left" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Label for distinguishing hwm from other hwms at this site-event. Limited to 12 characters.">
                            <span class="glyphicon glyphicon-question-sign"></span>
                        </button>
                    </div>

                    <!-- HWM Environment:* -->
                    <div class="form-group" ng-class="{'has-error':HWMForm.hwm_environment.$invalid && HWMForm.hwm_environment.$dirty}">
                        <label class="col-md-4 control-label req">
                            <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                                <span class="glyphicon glyphicon-eye-open"></span>
                            </button> HWM Environment:
                            <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Required">
                                <span class="glyphicon glyphicon-asterisk" style="color:#d00;font-size:xx-small;"></span>
                            </button>
                        </label>
                        <div class="col-md-6">
                            <span class="radio-inline">
                                <input type="radio" name="hwm_environment" ng-model="aHWM.hwm_environment" value="Coastal" />Coastal
                            </span>
                            <span class="radio-inline">
                                <input type="radio" name="hwm_environment" ng-model="aHWM.hwm_environment" value="Riverine" />Riverine
                            </span>
                        </div>
                    </div>

                    <!-- uncertainty: -->
                    <div class="form-group">
                        <label class="col-md-4 control-label">
                            <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                                <span class="glyphicon glyphicon-eye-open"></span>
                            </button> HWM Uncertainty:
                        </label>
                        <div class="col-md-6">
                            <div class="col-md-8 input-group">
                                <span class="input-group-addon">&#177;</span>
                                <input class="form-control" ng-keypress="isNum($event)" name="hwm_uncertainty" id="hwm_uncertainty" ng-model="aHWM.hwm_uncertainty"
                                       ng-model-options="{ updateOn: 'blur' }" ng-change="chooseQuality()" type="text" />
                                <span class="input-group-addon"> ft</span>
                            </div>
                        </div>
                        <button type="button" class="col-md-1 borderLess pull-left" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="A numeric uncertainty entered here is the preferred method of recording uncertainty and represents the vertical range of peak surfaces that could be described by the HWM evidence (see TM3-A24, p.27).  Do not include any survey uncertainty, which is entered further below.">
                            <span class="glyphicon glyphicon-question-sign"></span>
                        </button>
                    </div>
                    <!-- HWM Quality:* -->
                    <div class="form-group" ng-class="{'has-error':HWMForm.hwm_quality_id.$invalid && HWMForm.hwm_quality_id.$dirty}">
                        <label class="col-md-4 control-label req">
                            <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                                <span class="glyphicon glyphicon-eye-open"></span>
                            </button> HWM Quality:
                            <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Required">
                                <span class="glyphicon glyphicon-asterisk" style="color:#d00;font-size:xx-small;"></span>
                            </button>
                        </label>
                        <div class="col-md-6">
                            <div>
                                <select class="form-control" name="hwm_quality_id" ng-model="aHWM.hwm_quality_id" ng-change="compareToUncertainty()"
                                        ng-options="hqual.hwm_quality_id as hqual.hwm_quality for hqual in hwmQualList" required>
                                    <option value=""></option>
                                </select>
                            </div>
                        </div>
                        <button type="button" class="col-md-1 borderLess pull-left" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="For continuity with older data, a shorthand quality is auto-populated here based on a numeric uncertainty entered above. In addition, three qualities with undefined uncertainties are available.">
                            <span class="glyphicon glyphicon-question-sign"></span>
                        </button>
                    </div>

                    <!-- Bank: -->
                    <div class="form-group">
                        <label class="col-md-4 control-label">
                            <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                                <span class="glyphicon glyphicon-eye-open"></span>
                            </button> Bank:
                        </label>
                        <div class="col-md-6">
                            <span class="radio-inline">
                                <input type="radio" name="bank" ng-model="aHWM.bank" value="Left" />Left
                            </span>
                            <span class="radio-inline">
                                <input type="radio" name="bank" ng-model="aHWM.bank" value="Right" />Right
                            </span>
                            <span class="radio-inline">
                                <input type="radio" name="bank" ng-model="aHWM.bank" value="N/A" />N/A
                            </span>
                        </div>
                    </div>

                    <!-- Location Description: -->
                    <div class="form-group">
                        <label class="col-md-4 control-label" for="hwm_locationdescription">
                            <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                                <span class="glyphicon glyphicon-eye-open"></span>
                            </button> Location Description:
                        </label>
                        <div class="col-md-6">
                            <textarea class="form-control" name="hwm_locationdescription" type="text" rows="3" ng-model="aHWM.hwm_locationdescription" />
                        </div>
                        <button type="button" class="col-md-1 borderLess pull-left" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Please be specific so someone else can find this sensor later. This field is public.">
                            <span class="glyphicon glyphicon-question-sign"></span>
                        </button>
                    </div>

                    <!-- dec deg or dms: -->
                    <div>
                        <label class="col-md-4 control-label"></label>
                        <div class="col-md-6">
                            <span class="radio-inline">
                                <input type="radio" name="decDegORdms" ng-change="latLongChange()" ng-model="aHWM.decDegORdms" value="dd" /> Dec Deg
                            </span>
                            <span class="radio-inline">
                                <input type="radio" name="decDegORdms" ng-change="latLongChange()" ng-model="aHWM.decDegORdms" value="dms" /> DMS
                            </span>
                        </div>
                    </div>

                    <!-- Latitude: -->
                    <div class="form-group" ng-class="{'has-error':HWMForm.latitude_dd.$invalid && HWMForm.latitude_dd.$dirty}">
                        <label class="col-md-4 control-label req" for="latitude_dd">
                            <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                                <span class="glyphicon glyphicon-eye-open"></span>
                            </button> Latitude:
                            <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Required">
                                <span class="glyphicon glyphicon-asterisk" style="color:#d00;font-size:xx-small;"></span>
                            </button>
                        </label>
                        <div class="col-md-6" ng-if="aHWM.decDegORdms == 'dd'">
                            <input class="form-control" ng-keypress="isNum($event)" name="latitude_dd" id="latitude_dd" ng-model="aHWM.latitude_dd"
                                   ng-model-options="{ updateOn: 'blur' }" ng-change="checkValue('dd')" type="text" ng-required="aHWM.decDegORdms == 'dd'" />
                        </div>
                        <div class="col-md-6" ng-if="aHWM.decDegORdms == 'dms'">
                            <table>
                                <tr>
                                    <td><input class="form-control" ng-keypress="isNum($event)" ng-model-options="{ updateOn: 'blur' }" ng-change="checkValue('dms')" id="LaDeg" name="Deg" ng-model="DMS.LADeg" type="text" ng-required="aHWM.decDegORdms == 'dms'" /></td>
                                    <td>°</td>
                                    <td><input class="form-control" ng-keypress="isNum($event)" ng-model-options="{ updateOn: 'blur' }" ng-change="checkValue('dms')" name="Min" ng-model="DMS.LAMin" type="text" ng-required="aHWM.decDegORdms == 'dms'" /></td>
                                    <td>′</td>
                                    <td><input class="form-control" ng-keypress="isNum($event)" ng-model-options="{ updateOn: 'blur' }" ng-change="checkValue('dms')" name="Sec" ng-model="DMS.LASec" type="text" ng-required="aHWM.decDegORdms == 'dms'" /></td>
                                    <td>″</td>
                                </tr>
                            </table>
                        </div>
                    </div>

                    <!-- Longitude: -->
                    <div class="form-group" ng-class="{'has-error':HWMForm.longitude_dd.$invalid && HWMForm.longitude_dd.$dirty}">
                        <label class="col-md-4 control-label req" for="longitude_dd">
                            <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                                <span class="glyphicon glyphicon-eye-open"></span>
                            </button> Longitude:
                            <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Required">
                                <span class="glyphicon glyphicon-asterisk" style="color:#d00;font-size:xx-small;"></span>
                            </button>
                        </label>
                        <div class="col-md-6" ng-if="aHWM.decDegORdms == 'dd'">
                            <input class="form-control" ng-keypress="isNum($event)" id="longitude_dd" name="longitude_dd" ng-model="aHWM.longitude_dd"
                                   ng-model-options="{ updateOn: 'blur' }" ng-change="checkValue('dd')" type="text" ng-required="aHWM.decDegORdms == 'dd'" />
                        </div>
                        <div class="col-md-6" ng-if="aHWM.decDegORdms == 'dms'">
                            <table>
                                <tr>
                                    <td><input class="form-control" ng-keypress="isNum($event)" name="Deg" ng-model-options="{ updateOn: 'blur' }" ng-change="checkValue('dms')" id="LoDeg" ng-model="DMS.LODeg" type="text" ng-required="aHWM.decDegORdms == 'dms'" /></td>
                                    <td>°</td>
                                    <td><input class="form-control" ng-keypress="isNum($event)" name="Min" ng-model-options="{ updateOn: 'blur' }" ng-change="checkValue('dms')" ng-model="DMS.LOMin" type="text" ng-required="aHWM.decDegORdms == 'dms'" /></td>
                                    <td>′</td>
                                    <td><input class="form-control" ng-keypress="isNum($event)" name="Sec" ng-model-options="{ updateOn: 'blur' }" ng-change="checkValue('dms')" ng-model="DMS.LOSec" type="text" ng-required="aHWM.decDegORdms == 'dms'" /></td>
                                    <td>″</td>
                                </tr>
                            </table>
                        </div>
                    </div>

                    <!-- Horizontal Datum:* -->
                    <div class="form-group" ng-class="{'has-error':HWMForm.hdatum_id.$invalid && HWMForm.hdatum_id.$dirty}">
                        <label class="col-md-4 control-label req">
                            <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                                <span class="glyphicon glyphicon-eye-open"></span>
                            </button> Horizontal Datum:
                            <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Required">
                                <span class="glyphicon glyphicon-asterisk" style="color:#d00;font-size:xx-small;"></span>
                            </button>
                        </label>
                        <div class="col-md-6">
                            <select class="form-control" name="hdatum_id" ng-model="aHWM.hdatum_id"
                                    ng-options="hd.datum_id as hd.datum_name for hd in HDatumsList" required>
                                <option value=""></option>
                            </select>
                        </div>
                    </div>

                    <!-- Horizontal Collection Method: * -->
                    <div class="form-group" ng-class="{'has-error':HWMForm.hcollect_method_id.$invalid && HWMForm.hcollect_method_id.$dirty}">
                        <label class="col-md-4 control-label req">
                            <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                                <span class="glyphicon glyphicon-eye-open"></span>
                            </button> Horizontal Collection Method:
                            <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Required">
                                <span class="glyphicon glyphicon-asterisk" style="color:#d00;font-size:xx-small;"></span>
                            </button>
                        </label>
                        <div class="col-md-6">
                            <select class="form-control" name="hcollect_method_id" ng-model="aHWM.hcollect_method_id"
                                    ng-options="hcm.hcollect_method_id as hcm.hcollect_method for hcm in hCollMList" required>
                                <option value=""></option>
                            </select>
                        </div>
                    </div>

                    <!-- Height above ground (ft): -->
                    <div class="form-group">
                        <label class="col-md-4 control-label" for="height_above_gnd">
                            <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                                <span class="glyphicon glyphicon-eye-open"></span>
                            </button> Height above ground (ft):
                        </label>
                        <div class="col-md-6">
                            <input class="form-control" ng-keypress="isNum($event)" name="height_above_gnd" ng-model="aHWM.height_above_gnd" type="text" />
                        </div>
                    </div>

                    <!-- Tranquil/Stillwater HWM -->
                    <div class="form-group">
                        <label class="col-md-4 control-label">
                            <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                                <span class="glyphicon glyphicon-eye-open"></span>
                            </button> Tranquil/Stillwater HWM:
                        </label>
                        <div class="col-md-6">
                            <span class="radio-inline">
                                <input type="radio" name="stillwater" ng-model="aHWM.stillwater" value="1" />Yes
                            </span>
                            <span class="radio-inline">
                                <input type="radio" name="stillwater" ng-model="aHWM.stillwater" value="0" />No
                            </span>
                        </div>
                        <button type="button" class="col-md-1 borderLess pull-left" tooltip-placement="bottom" tooltip-append-to-body="false" uib-tooltip="For modelling purposes, all high-water marks are assumed to be rapid-water high-water marks unless the user is confident that the mark being entered here was formed in tranquil water. See TM3-A24 for a discussion on rapid versus tranquil high-water marks.">
                            <span class="glyphicon glyphicon-question-sign"></span>
                        </button>
                    </div>

                    <!-- Flag/Found Date: * -->
                    <div class="form-group" ng-class="{'has-error':HWMForm.flag_date.$invalid && HWMForm.flag_date.$dirty}">
                        <label class="col-md-4 control-label req" for="flag_date">
                            <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                                <span class="glyphicon glyphicon-eye-open"></span>
                            </button> Flag/Found Date:
                            <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Required">
                                <span class="glyphicon glyphicon-asterisk" style="color:#d00;font-size:xx-small;"></span>
                            </button>
                        </label>
                        <div class="col-md-5 input-group" style="padding-right:14px;padding-left:14px">
                            <input show-weeks="false" class="form-control dateInputStyle" type="date" id="flag_date" name="fd" uib-datepicker-popup="MM/dd/yyyy" is-open="datepickrs.fd" ng-model="aHWM.flag_date" required />
                            <span class="input-group-btn">
                                <button type="button" class="btn btn-default" ng-click="open($event, 'fd')">
                                    <i class="glyphicon glyphicon-calendar" />
                                </button>
                            </span>
                        </div>
                    </div>
                    <br clear="all" /><hr />
                    <!-- Surveyed Date: -->
                    <div class="form-group">
                        <label class="col-md-4 control-label" for="survey_date">
                            <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                                <span class="glyphicon glyphicon-eye-open"></span>
                            </button> Surveyed Date:
                        </label>
                        <div class="col-md-5">
                            <div class="col-md-12 input-group">
                                <input show-weeks="false" class="form-control dateInputStyle" type="date" id="survey_date" name="sd" uib-datepicker-popup="MM/dd/yyyy" is-open="datepickrs.sd" ng-model="aHWM.survey_date" />
                                <span class="input-group-btn">
                                    <button type="button" class="btn btn-default" ng-click="open($event, 'sd')">
                                        <i class="glyphicon glyphicon-calendar" />
                                    </button>
                                </span>
                            </div>
                        </div>
                        <button type="button" class="col-md-3 borderLess pull-right" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Elevation required below if survey date is populated.">
                            <span class="glyphicon glyphicon-question-sign"></span>
                        </button>
                    </div>

                    <!-- Surveyed Elevation (ft): ng-class="{'required': aHWM.survey_date}"  ng-class="{'req': aHWM.survey_date}" ng-required="aHWM.survey_date"-->
                    <div class="form-group">
                        <label class="col-md-4 control-label" for="elev_ft">
                            <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                                <span class="glyphicon glyphicon-eye-open"></span>
                            </button> Surveyed Elevation (ft):
                        </label>
                        <div class="col-md-6">
                            <input class="form-control" ng-keypress="isNum($event)" name="elev_ft" ng-model="aHWM.elev_ft" type="text" />
                        </div>
                    </div>

                    <!-- Vertical Datum: -->
                    <div class="form-group">
                        <label class="col-md-4 control-label" for="vdatum_id">
                            <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                                <span class="glyphicon glyphicon-eye-open"></span>
                            </button> Vertical Datum:
                        </label>
                        <div class="col-md-6">
                            <select class="form-control" name="vdatum_id" ng-model="aHWM.vdatum_id"
                                    ng-options="vd.datum_id as vd.datum_name for vd in VDatumsList">
                                <option value=""></option>
                            </select>
                        </div>
                    </div>

                    <!-- Vertical Collection Method: -->
                    <div class="form-group">
                        <label class="col-md-4 control-label" for="vdatum_id">
                            <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                                <span class="glyphicon glyphicon-eye-open"></span>
                            </button> Vertical Collection Method:
                        </label>
                        <div class="col-md-6">
                            <select class="form-control" name="vcollect_method_id" ng-model="aHWM.vcollect_method_id"
                                    ng-options="vcm.vcollect_method_id as vcm.vcollect_method for vcm in vCollMList">
                                <option value=""></option>
                            </select>
                        </div>
                    </div>

                    <!-- Ft or CM radios: -->
                    <div>
                        <label class="col-md-4 control-label"></label>
                        <div class="col-md-6">
                            <span class="radio-inline">
                                <input type="radio" name="FTorCM" ng-model="aHWM.FTorCM" value="ft" /> +/- ft
                            </span>
                            <span class="radio-inline">
                                <input type="radio" name="FTorCM" ng-model="aHWM.FTorCM" value="cm" /> +/- cm
                            </span>
                        </div>
                    </div>

                    <!-- Uncertainty: -->
                    <div class="form-group">
                        <label class="col-md-4 control-label" for="uncertainty">
                            <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                                <span class="glyphicon glyphicon-eye-open"></span>
                            </button> Survey Uncertainty:
                        </label>
                        <div class="col-md-6">
                            <input class="form-control" ng-keypress="isNum($event)" ng-model="aHWM.uncertainty" type="text" />
                        </div>
                    </div>

                    <!-- Notes: -->
                    <div class="form-group">
                        <label class="col-md-4 control-label" for="hwm_notes">
                            <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                                <span class="glyphicon glyphicon-eye-open"></span>
                            </button> Notes:
                        </label>
                        <div class="col-md-6">
                            <textarea class="form-control" name="hwm_notes" type="text" rows="3" ng-model="aHWM.hwm_notes" />
                        </div>
                    </div>

                    <!-- Flagging Member: -->
                    <div class="form-group">
                        <label class="col-md-4 control-label" for="flag_member_id">
                            <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                                <span class="glyphicon glyphicon-eye-open"></span>
                            </button> Flagging Member:
                        </label>
                        <div class="col-md-6">
                            <span>{{FlagMember.fname}} {{FlagMember.lname}}</span>
                        </div>
                    </div>

                    <!-- Survey Member: -->
                    <div class="form-group" ng-show="aHWM.survey_member_id">
                        <label class="col-md-4 control-label" for="survey_member_id">
                            <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                                <span class="glyphicon glyphicon-eye-open"></span>
                            </button> Survey Member:
                        </label>
                        <div class="col-md-6">
                            <span>{{SurveyMember.fname}} {{SurveyMember.lname}}</span>
                        </div>
                    </div>


                    <!-- form submit button -->
                    <div class="form-group">
                        <div class="col-md-12 text-center">
                            <button class="btn btn-primary" ng-click="create(HWMForm.$valid)">Create</button>
                        </div>
                    </div>
                </fieldset>
            </form>
        </div> <!-- end if create hwm -->

        <div ng-if="createOReditHWM == 'edit'">
            <uib-accordion close-others="false">
                <!--HWM Part-->
                <uib-accordion-group is-open="h.hOpen">
                    <uib-accordion-heading>
                        <i style="margin-right:10px" class="pull-left glyphicon" ng-class="{'glyphicon-chevron-down': h.hOpen, 'glyphicon-chevron-right': !h.hOpen}"></i>
                        <span ng-class="{'redText':view.HWMval == 'edit'}">{{hwmModalHeader}}</span>
                    </uib-accordion-heading>
                    <form class="form-horizontal" name="HWMEditForm">
                        <fieldset>
                            <!-- Waterbody: (details) -->
                            <div class="col-md-12" ng-if="view.HWMval== 'detail'">
                                <div class="col-md-4"><label>Waterbody:</label></div>
                                <div class="col-md-6">{{aHWM.waterbody || '---'}}</div>
                            </div>
                            <!-- Waterbody: (edit) -->
                            <div class="form-group" ng-if="view.HWMval== 'edit'">
                                <label class="col-md-4 control-label" for="waterbody">
                                    <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                                        <span class="glyphicon glyphicon-eye-open"></span>
                                    </button> Waterbody:
                                </label>
                                <div class="col-md-6">
                                    <input class="form-control" name="waterbody" ng-model="hwmCopy.waterbody" type="text" />
                                </div>
                            </div>

                            <!-- Event:  (details)-->
                            <div class="col-md-12" ng-if="view.HWMval== 'detail'">
                                <div class="col-md-4"><label>Event:</label></div>
                                <div class="col-md-6">{{EventName}}</div>
                            </div>
                            <!-- Event: (edit) -->
                            <div class="form-group" ng-if="view.HWMval== 'edit'" ng-class="{'has-error':HWMEditForm.event_id.$invalid && HWMEditForm.event_id.$dirty}">
                                <label class="col-md-4 control-label">
                                    <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                                        <span class="glyphicon glyphicon-eye-open"></span>
                                    </button> Event:
                                </label>
                                <div class="col-md-6">
                                    <div class="col-md-8">{{EventName}}</div>
                                    <div class="col-md-3" ng-show="userRole == 'Admin'">
                                        <button type="button" ng-click="showChangeEventDD()" class="btn btn-primary">Change Event</button>
                                    </div>
                                </div>
                            </div>

                            <!--Event dropdown for admin -->
                            <div ng-show="showEventDD && view.HWMval == 'edit'">
                                <div class="form-group">
                                    <label class="col-md-4 control-label" for="event_id">
                                        <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                                            <span class="glyphicon glyphicon-eye-open"></span>
                                        </button> Events:
                                    </label>
                                    <div class="col-md-6">
                                        <select class="form-control" name="event_id" ng-model="adminChanged.event_id" ng-change="ChangeEvent()"
                                                ng-options="e.event_id as (e.event_name + ' --- ' + (e.event_start_date | date: 'MM/dd/yyyy') + ' to ' + ((e.event_end_date || '-Not Set-') | date: 'MM/dd/yyyy'))  for e in eventList | orderBy: '-event_start_date'"
                                            <option value=""></option>
                                        </select>
                                    </div>
                                </div>
                            </div>

                            <!-- HWM Type:*  (details)-->
                            <div class="col-md-12" ng-if="view.HWMval== 'detail'">
                                <div class="col-md-4"><label>HWM Type:</label></div>
                                <div class="col-md-6">{{aHWM.hwm_type || '---'}}</div>
                            </div>
                            <!-- HWM Type:* (edit) -->
                            <div class="form-group" ng-if="view.HWMval== 'edit'" ng-class="{'has-error':HWMEditForm.hwm_type_id.$invalid && HWMEditForm.hwm_type_id.$dirty}">
                                <label class="col-md-4 control-label req" for="hwm_type_id">
                                    <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                                        <span class="glyphicon glyphicon-eye-open"></span>
                                    </button> HWM Type:
                                    <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Required">
                                        <span class="glyphicon glyphicon-asterisk" style="color:#d00;font-size:xx-small;"></span>
                                    </button>
                                </label>
                                <div class="col-md-6">
                                    <select class="form-control" name="hwm_type_id" ng-model="hwmCopy.hwm_type_id" ng-options="htype.hwm_type_id as htype.hwm_type for htype in hwmTypeList" required>
                                        <option value=""></option>
                                    </select>
                                </div>
                            </div>

                            <!-- Marker: (details) -->
                            <div class="col-md-12" ng-if="view.HWMval== 'detail'">
                                <div class="col-md-4"><label>Marker:</label></div>
                                <div class="col-md-6">{{aHWM.Marker || '---'}}</div>
                            </div>
                            <!-- Marker: (edit) -->
                            <div class="form-group" ng-if="view.HWMval== 'edit'">
                                <label class="col-md-4 control-label" for="marker_id">
                                    <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                                        <span class="glyphicon glyphicon-eye-open"></span>
                                    </button> Marker:
                                </label>
                                <div class="col-md-6">
                                    <select class="form-control" name="marker_id" ng-model="hwmCopy.marker_id"
                                            ng-options="vd.marker_id as vd.marker1 for vd in markerList">
                                        <option value=""></option>
                                    </select>
                                </div>
                            </div>

                            <!-- Label*:  (details)-->
                            <div class="col-md-12" ng-if="view.HWMval== 'detail'">
                                <div class="col-md-4"><label>Label:</label></div>
                                <div class="col-md-6">{{aHWM.hwm_label}}</div>
                            </div>
                            <!-- Label: (edit)  ng-model-options="{ updateOn: 'blur' }" ng-change="ensurehwmLabelUnique()"-->
                            <div class="form-group" ng-if="view.HWMval== 'edit'">
                                <label class="col-md-4 control-label req" for="hwm_label">
                                    <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly." required>
                                        <span class="glyphicon glyphicon-eye-open"></span>
                                    </button> Label:
                                    <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Required">
                                        <span class="glyphicon glyphicon-asterisk" style="color:#d00;font-size:xx-small;"></span>
                                    </button>
                                </label>
                                <div class="col-md-6">
                                    <input type="text" class="form-control" ng-model="hwmCopy.hwm_label" label-limit-length="12" />
                                </div>
                                <button type="button" class="col-md-1 borderLess pull-left" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Label for distinguishing hwm from other hwms at this site-event. Limited to 12 characters.">
                                    <span class="glyphicon glyphicon-question-sign"></span>
                                </button>
                            </div>

                            <!-- HWM Environment:* (details) -->
                            <div class="col-md-12" ng-if="view.HWMval== 'detail'">
                                <div class="col-md-4"><label>HWM Environment:</label></div>
                                <div class="col-md-6">{{aHWM.hwm_environment || '---'}}</div>
                            </div>
                            <!-- HWM Environment:* (edit) -->
                            <div class="form-group" ng-class="{'has-error':HWMEditForm.hwm_environment.$invalid && HWMEditForm.hwm_environment.$dirty}" ng-if="view.HWMval== 'edit'">
                                <label class="col-md-4 control-label req">
                                    <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                                        <span class="glyphicon glyphicon-eye-open"></span>
                                    </button> HWM Environment:
                                    <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Required">
                                        <span class="glyphicon glyphicon-asterisk" style="color:#d00;font-size:xx-small;"></span>
                                    </button>
                                </label>
                                <div class="col-md-6">
                                    <span class="radio-inline">
                                        <input type="radio" name="hwm_environment" ng-model="hwmCopy.hwm_environment" value="Coastal" />Coastal
                                    </span>
                                    <span class="radio-inline">
                                        <input type="radio" name="hwm_environment" ng-model="hwmCopy.hwm_environment" value="Riverine" />Riverine
                                    </span>
                                </div>
                            </div>

                            <!-- hwm_uncertainty: (details) -->
                            <div class="col-md-12" ng-if="view.HWMval== 'detail'">
                                <div class="col-md-4"><label>HWM Uncertainty:</label></div>
                                <div class="col-md-6">{{aHWM.hwm_uncertainty || '---'}}</div>
                            </div>
                            <!-- hwm_uncertainty: (edit) -->
                            <div class="form-group" ng-if="view.HWMval== 'edit'">
                                <label class="col-md-4 control-label">
                                    <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                                        <span class="glyphicon glyphicon-eye-open"></span>
                                    </button> HWM Uncertainty:
                                </label>
                                <div class="col-md-6">
                                    <div class="col-md-8 input-group">
                                        <span class="input-group-addon">&#177;</span>
                                        <input class="form-control" ng-keypress="isNum($event)" name="hwm_uncertainty" id="hwm_uncertainty" ng-model="hwmCopy.hwm_uncertainty"
                                               ng-model-options="{ updateOn: 'blur' }" ng-change="chooseQuality()" type="text" />
                                        <span class="input-group-addon"> ft</span>
                                    </div>
                                </div>
                                <button type="button" class="col-md-1 borderLess pull-left" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="A numeric uncertainty entered here is the preferred method of recording uncertainty and represents the vertical range of peak surfaces that could be described by the HWM evidence (see TM3-A24, p.27).  Do not include any survey uncertainty, which is entered further below.">
                                    <span class="glyphicon glyphicon-question-sign"></span>
                                </button>
                            </div>
                            <!-- HWM Quality:* (details) -->
                            <div class="col-md-12" ng-if="view.HWMval== 'detail'">
                                <div class="col-md-4"><label>HWM Quality:</label></div>
                                <div class="col-md-6">{{aHWM.Quality || '---'}}</div>
                            </div>
                            <!-- HWM Quality:* (edit) -->
                            <div class="form-group" ng-class="{'has-error':HWMEditForm.hwm_quality_id.$invalid && HWMEditForm.hwm_quality_id.$dirty}" ng-if="view.HWMval== 'edit'">
                                <label class="col-md-4 control-label req">
                                    <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                                        <span class="glyphicon glyphicon-eye-open"></span>
                                    </button> HWM Quality:
                                    <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Required">
                                        <span class="glyphicon glyphicon-asterisk" style="color:#d00;font-size:xx-small;"></span>
                                    </button>
                                </label>
                                <div class="col-md-6">
                                    <div>
                                        <select class="form-control" name="hwm_quality_id" ng-model="hwmCopy.hwm_quality_id" ng-change="compareToUncertainty()"
                                                ng-options="hqual.hwm_quality_id as hqual.hwm_quality for hqual in hwmQualList" required>
                                            <option value=""></option>
                                        </select>
                                    </div>
                                </div>
                                <button type="button" class="col-md-1 borderLess pull-left" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="For continuity with older data, a shorthand quality is auto-populated here based on a numeric uncertainty entered above. In addition, three qualities with undefined uncertainties are available.">
                                    <span class="glyphicon glyphicon-question-sign"></span>
                                </button>
                            </div>

                            <!-- Bank: (details) -->
                            <div class="col-md-12" ng-if="view.HWMval== 'detail'">
                                <div class="col-md-4"><label>Bank:</label></div>
                                <div class="col-md-6">{{aHWM.bank || '---'}}</div>
                            </div>
                            <!-- Bank: (edit) -->
                            <div class="form-group" ng-if="view.HWMval== 'edit'">
                                <label class="col-md-4 control-label">
                                    <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                                        <span class="glyphicon glyphicon-eye-open"></span>
                                    </button> Bank:
                                </label>
                                <div class="col-md-6">
                                    <span class="radio-inline">
                                        <input type="radio" name="bank" ng-model="hwmCopy.bank" value="Left" />Left
                                    </span>
                                    <span class="radio-inline">
                                        <input type="radio" name="bank" ng-model="hwmCopy.bank" value="Right" />Right
                                    </span>
                                    <span class="radio-inline">
                                        <input type="radio" name="bank" ng-model="hwmCopy.bank" value="N/A" />N/A
                                    </span>
                                </div>
                            </div>

                            <!-- Location Description: (details) -->
                            <div class="col-md-12" ng-if="view.HWMval== 'detail'">
                                <div class="col-md-4"><label>Location Description:</label></div>
                                <div class="col-md-6">{{aHWM.hwm_locationdescription || '---'}}</div>
                            </div>
                            <!-- Location Description: (edit) -->
                            <div class="form-group" ng-if="view.HWMval== 'edit'">
                                <label class="col-md-4 control-label" for="hwm_locationdescription">
                                    <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                                        <span class="glyphicon glyphicon-eye-open"></span>
                                    </button> Location Description:
                                </label>
                                <div class="col-md-6">
                                    <textarea class="form-control" name="hwm_locationdescription" type="text" rows="3" ng-model="hwmCopy.hwm_locationdescription" />
                                </div>
                                <button type="button" class="col-md-1 borderLess pull-left" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Please be specific so someone else can find this sensor later. This field is public.">
                                    <span class="glyphicon glyphicon-question-sign"></span>
                                </button>
                            </div>

                            <!-- dec deg or dms: -->
                            <div ng-show="view.HWMval == 'edit'">
                                <label class="col-md-4 control-label"></label>
                                <div class="col-md-6">
                                    <span class="radio-inline">
                                        <input type="radio" name="decDegORdms" ng-change="latLongChange()" ng-model="hwmCopy.decDegORdms" value="dd" /> Dec Deg
                                    </span>
                                    <span class="radio-inline">
                                        <input type="radio" name="decDegORdms" ng-change="latLongChange()" ng-model="hwmCopy.decDegORdms" value="dms" /> DMS
                                    </span>
                                </div>
                            </div>

                            <!-- Latitude: (details) -->
                            <div class="col-md-12" ng-if="view.HWMval== 'detail'">
                                <div class="col-md-4"><label>Latitude:</label></div>
                                <div class="col-md-6">{{aHWM.latitude_dd}}</div>
                            </div>
                            <!-- Latitude: (edit) -->
                            <div class="form-group" ng-if="view.HWMval=='edit'">
                                <label class="col-md-4 control-label req" for="latitude_dd">
                                    <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                                        <span class="glyphicon glyphicon-eye-open"></span>
                                    </button> Latitude:
                                    <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Required">
                                        <span class="glyphicon glyphicon-asterisk" style="color:#d00;font-size:xx-small;"></span>
                                    </button>
                                </label>
                                <div class="col-md-6" ng-if="hwmCopy.decDegORdms == 'dd'">
                                    <input class="form-control" ng-keypress="isNum($event)" name="latitude_dd" id="latitude_dd" ng-model="hwmCopy.latitude_dd"
                                           ng-model-options="{ updateOn: 'blur' }" ng-change="checkValue('dd')" type="text" ng-required="hwmCopy.decDegORdms == 'dd' && view.HWMval=='edit'" />
                                </div>
                                <div class="col-md-6" ng-if="hwmCopy.decDegORdms == 'dms'">
                                    <table>
                                        <tr>
                                            <td><input class="form-control" ng-keypress="isNum($event)" ng-model-options="{ updateOn: 'blur' }" ng-change="checkValue('dms')" id="LaDeg" name="Deg" ng-model="DMS.LADeg" type="text" ng-required="hwmCopy.decDegORdms == 'dms' && view.HWMval=='edit'" /></td>
                                            <td>°</td>
                                            <td><input class="form-control" ng-keypress="isNum($event)" ng-model-options="{ updateOn: 'blur' }" ng-change="checkValue('dms')" name="Min" ng-model="DMS.LAMin" type="text" ng-required="hwmCopy.decDegORdms == 'dms' && view.HWMval=='edit'" /></td>
                                            <td>′</td>
                                            <td><input class="form-control" ng-keypress="isNum($event)" ng-model-options="{ updateOn: 'blur' }" ng-change="checkValue('dms')" name="Sec" ng-model="DMS.LASec" type="text" ng-required="hwmCopy.decDegORdms == 'dms' && view.HWMval=='edit'" /></td>
                                            <td>″</td>
                                        </tr>
                                    </table>
                                </div>
                            </div>

                            <!-- Longitude: (details) -->
                            <div class="col-md-12" ng-if="view.HWMval== 'detail'">
                                <div class="col-md-4"><label>Longitude:</label></div>
                                <div class="col-md-6">{{aHWM.longitude_dd}}</div>
                            </div>
                            <!-- Longitude:  (edit)-->
                            <div class="form-group" ng-if="view.HWMval=='edit'">
                                <label class="col-md-4 control-label req" for="longitude_dd">
                                    <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                                        <span class="glyphicon glyphicon-eye-open"></span>
                                    </button> Longitude:
                                    <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Required">
                                        <span class="glyphicon glyphicon-asterisk" style="color:#d00;font-size:xx-small;"></span>
                                    </button>
                                </label>
                                <div class="col-md-6" ng-if="hwmCopy.decDegORdms == 'dd'">
                                    <input class="form-control" ng-keypress="isNum($event)" id="longitude_dd" name="longitude_dd" ng-model="hwmCopy.longitude_dd"
                                           ng-model-options="{ updateOn: 'blur' }" ng-change="checkValue('dd')" type="text" ng-required="hwmCopy.decDegORdms == 'dd' && view.HWMval=='edit'" />
                                </div>
                                <div class="col-md-6" ng-if="hwmCopy.decDegORdms == 'dms'">
                                    <table>
                                        <tr>
                                            <td><input class="form-control" ng-keypress="isNum($event)" ng-model-options="{ updateOn: 'blur' }" ng-change="checkValue('dms')" id="LoDeg" name="Deg" ng-model="DMS.LODeg" type="text" ng-required="hwmCopy.decDegORdms == 'dms' && view.HWMval=='edit'" /></td>
                                            <td>°</td>
                                            <td><input class="form-control" ng-keypress="isNum($event)" ng-model-options="{ updateOn: 'blur' }" ng-change="checkValue('dms')" name="Min" ng-model="DMS.LOMin" type="text" ng-required="hwmCopy.decDegORdms == 'dms' && view.HWMval=='edit'" /></td>
                                            <td>′</td>
                                            <td><input class="form-control" ng-keypress="isNum($event)" ng-model-options="{ updateOn: 'blur' }" ng-change="checkValue('dms')" name="Sec" ng-model="DMS.LOSec" type="text" ng-required="hwmCopy.decDegORdms == 'dms' && view.HWMval=='edit'" /></td>
                                            <td>″</td>
                                        </tr>
                                    </table>
                                </div>
                            </div>

                            <!-- Horizontal Datum:* (details) -->
                            <div class="col-md-12" ng-if="view.HWMval== 'detail'">
                                <div class="col-md-4"><label>Horizontal Datum:</label></div>
                                <div class="col-md-6">{{aHWM.hdatum || '---'}}</div>
                            </div>
                            <!-- Horizontal Datum:*  (edit)-->
                            <div class="form-group" ng-class="{'has-error':HWMEditForm.hdatum_id.$invalid && HWMEditForm.hdatum_id.$dirty}" ng-if="view.HWMval== 'edit'">
                                <label class="col-md-4 control-label req">
                                    <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                                        <span class="glyphicon glyphicon-eye-open"></span>
                                    </button> Horizontal Datum:
                                    <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Required">
                                        <span class="glyphicon glyphicon-asterisk" style="color:#d00;font-size:xx-small;"></span>
                                    </button>
                                </label>
                                <div class="col-md-6">
                                    <select class="form-control" name="hdatum_id" ng-model="hwmCopy.hdatum_id" ng-options="hd.datum_id as hd.datum_name for hd in HDatumsList" required>
                                        <option value=""></option>
                                    </select>
                                </div>
                            </div>

                            <!-- Horizontal Collection Method: * (details) -->
                            <div class="col-md-12" ng-if="view.HWMval== 'detail'">
                                <div class="col-md-4"><label>Horizontal Collection Method:</label></div>
                                <div class="col-md-6">{{aHWM.hCollectMethod || '---'}}</div>
                            </div>
                            <!-- Horizontal Collection Method: * (edit) -->
                            <div class="form-group" ng-class="{'has-error':HWMEditForm.hcollect_method_id.$invalid && HWMEditForm.hcollect_method_id.$dirty}" ng-if="view.HWMval== 'edit'">
                                <label class="col-md-4 control-label req">
                                    <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                                        <span class="glyphicon glyphicon-eye-open"></span>
                                    </button> Horizontal Collection Method:
                                    <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Required">
                                        <span class="glyphicon glyphicon-asterisk" style="color:#d00;font-size:xx-small;"></span>
                                    </button>
                                </label>
                                <div class="col-md-6">
                                    <select class="form-control" name="hcollect_method_id" ng-model="hwmCopy.hcollect_method_id" ng-options="hcm.hcollect_method_id as hcm.hcollect_method for hcm in hCollMList" required>
                                        <option value=""></option>
                                    </select>
                                </div>
                            </div>

                            <!-- Height above ground (ft):  (details)-->
                            <div class="col-md-12" ng-if="view.HWMval== 'detail'">
                                <div class="col-md-4"><label>Height above ground (ft):</label></div>
                                <div class="col-md-6">{{aHWM.height_above_gnd == '0' ? '0.00' : aHWM.height_above_gnd}}</div>
                            </div>
                            <!-- Height above ground (ft): (edit) -->
                            <div class="form-group" ng-if="view.HWMval== 'edit'">
                                <label class="col-md-4 control-label" for="height_above_gnd">
                                    <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                                        <span class="glyphicon glyphicon-eye-open"></span>
                                    </button> Height above ground (ft):
                                </label>
                                <div class="col-md-6">
                                    <input class="form-control" ng-keypress="isNum($event)" name="height_above_gnd" ng-model="hwmCopy.height_above_gnd" type="text" />
                                </div>
                            </div>

                            <!-- Tranquil/Stillwater HWM (details) -->
                            <div class="col-md-12" ng-if="view.HWMval== 'detail'">
                                <div class="col-md-4"><label>Tranquil/Stillwater HWM:</label></div>
                                <div class="col-md-6">{{aHWM.Tranquil || '---'}}</div>
                            </div>
                            <!-- Tranquil/Stillwater HWM (edit) -->
                            <div class="form-group" ng-if="view.HWMval== 'edit'">
                                <label class="col-md-4 control-label">
                                    <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                                        <span class="glyphicon glyphicon-eye-open"></span>
                                    </button> Tranquil/Stillwater HWM:
                                </label>
                                <div class="col-md-6">
                                    <span class="radio-inline">
                                        <input type="radio" name="stillwater" ng-model="hwmCopy.stillwater" value="1" />Yes
                                    </span>
                                    <span class="radio-inline">
                                        <input type="radio" name="stillwater" ng-model="hwmCopy.stillwater" value="0" />No
                                    </span>
                                </div>
                                <button type="button" class="col-md-1 borderLess pull-left" tooltip-placement="bottom" tooltip-append-to-body="false" uib-tooltip="For modelling purposes, all high-water marks are assumed to be rapid-water high-water marks unless the user is confident that the mark being entered here was formed in tranquil water. See TM3-A24 for a discussion on rapid versus tranquil high-water marks.">
                                    <span class="glyphicon glyphicon-question-sign"></span>
                                </button>
                            </div>

                            <!-- Flag/Found Date: * (details) -->
                            <div class="col-md-12" ng-if="view.HWMval== 'detail'">
                                <div class="col-md-4"><label>Flag/Found Date:</label></div>
                                <div class="col-md-4 input-group" style="padding-right:14px;padding-left:14px">{{aHWM.flag_date | date: 'MM/dd/yyyy'}}</div>
                            </div>
                            <!-- Flag/Found Date: * (edit) -->
                            <div class="form-group" ng-class="{'has-error':HWMEditForm.flag_date.$invalid && HWMEditForm.flag_date.$dirty}" ng-if="view.HWMval== 'edit'">
                                <label class="col-md-4 control-label req" for="flag_date">
                                    <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                                        <span class="glyphicon glyphicon-eye-open"></span>
                                    </button> Flag/Found Date:
                                    <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Required">
                                        <span class="glyphicon glyphicon-asterisk" style="color:#d00;font-size:xx-small;"></span>
                                    </button>
                                </label>
                                <div class="col-md-4 input-group" style="padding-right:14px;padding-left:14px">
                                    <input show-weeks="false" class="form-control dateInputStyle" type="date" id="flag_date" name="fd" uib-datepicker-popup="MM/dd/yyyy"
                                           is-open="datepickrs.fd" ng-model="hwmCopy.flag_date" required />
                                    <span class="input-group-btn">
                                        <button class="btn btn-default" ng-click="open($event, 'fd')" type="button">
                                            <i class="glyphicon glyphicon-calendar" />
                                        </button>
                                    </span>
                                </div>
                            </div>
                            <!-- Flagging Member: (detail) -->
                            <div class="col-md-12" ng-if="view.HWMval== 'detail'">
                                <div class="col-md-4"><label>Flagging Member:</label></div>
                                <div class="col-md-6"><span>{{FlagMember.fname}} {{FlagMember.lname}}</span></div>
                            </div>
                            <!-- Flagging Member: (edit) -->
                            <div class="form-group" ng-if="view.HWMval== 'edit'">
                                <label class="col-md-4 control-label" for="flag_member_id">
                                    <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                                        <span class="glyphicon glyphicon-eye-open"></span>
                                    </button> Flagging Member:
                                </label>
                                <div class="col-md-6"><span>{{FlagMember.fname}} {{FlagMember.lname}}</span></div>
                            </div>

                            <br clear="all" /><hr />

                            <!-- Surveyed Date: (details) -->
                            <div class="col-md-12" ng-if="view.HWMval== 'detail'">
                                <div class="col-md-4"><label>Surveyed Date:</label></div>
                                <div class="col-md-4">{{aHWM.survey_date || '---' | date: 'MM/dd/yyyy' }}</div>
                            </div>
                            <!-- Surveyed Date: (edit) -->
                            <div class="form-group" ng-class="{'has-error':HWMEditForm.survey_date.$invalid && HWMEditForm.survey_date.$dirty}" ng-if="view.HWMval== 'edit'">
                                <label class="col-md-4 control-label" for="survey_date">
                                    <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                                        <span class="glyphicon glyphicon-eye-open"></span>
                                    </button> Surveyed Date:
                                </label>
                                <div class="col-md-4 input-group" style="padding-right:14px;padding-left:14px">
                                    <input show-weeks="false" class="form-control dateInputStyle" type="date" id="survey_date" name="sd" uib-datepicker-popup="MM/dd/yyyy" is-open="datepickrs.sd" ng-model="hwmCopy.survey_date" />
                                    <span class="input-group-btn">
                                        <button class="btn btn-default" ng-click="open($event, 'sd')" type="button">
                                            <i class="glyphicon glyphicon-calendar" />
                                        </button>
                                    </span>
                                </div>
                                <button type="button" class="col-md-2 borderLess pull-right" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Elevation required below if survey date is populated.">
                                    <span class="glyphicon glyphicon-question-sign"></span>
                                </button>
                            </div>

                            <!-- Survey Member: (detail)-->
                            <div class="col-md-12" ng-if="SurveyMember && view.HWMval == 'detail'">
                                <div class="col-md-4"><label>Survey Member:</label></div>
                                <div class="col-md-6"><span>{{SurveyMember.fname}} {{SurveyMember.lname}}</span></div>
                            </div>
                            <!-- Survey Member: (edit) -->
                            <div class="form-group" ng-if="SurveyMember && view.HWMval == 'edit'">
                                <label class="col-md-4 control-label" for="survey_member_id">
                                    <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                                        <span class="glyphicon glyphicon-eye-open"></span>
                                    </button> Survey Member:
                                </label>
                                <div class="col-md-6">
                                    <span>{{SurveyMember.fname}} {{SurveyMember.lname}}</span>
                                </div>
                            </div>

                            <!-- Surveyed Elevation (ft): (details) -->
                            <div class="col-md-12" ng-if="view.HWMval== 'detail'">
                                <div class="col-md-4"><label>Surveyed Elevation (ft):</label></div>
                                <div class="col-md-6">{{aHWM.elev_ft || '---'}}</div>
                            </div>
                            <!-- Surveyed Elevation (ft): (edit)  ng-class="{'required': hwmCopy.survey_date}"ng-class="{'req': hwmCopy.survey_date}"ng-required='hwmCopy.survey_date'-->
                            <div class="form-group" ng-if="view.HWMval== 'edit'">
                                <label class="col-md-4 control-label" for="elev_ft">
                                    <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                                        <span class="glyphicon glyphicon-eye-open"></span>
                                    </button> Surveyed Elevation (ft):
                                </label>
                                <div class="col-md-6">
                                    <input class="form-control" ng-keypress="isNum($event)" name="elev_ft" ng-model="hwmCopy.elev_ft" type="text" />
                                </div>
                                <button ng-show="hwmCopy.survey_date" type="button" class="col-md-2 borderLess" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Elevation required if survey date is populated.">
                                    <span class="glyphicon glyphicon-question-sign"></span>
                                </button>
                            </div>

                            <!-- Vertical Datum: (details) -->
                            <div class="col-md-12" ng-if="view.HWMval== 'detail'">
                                <div class="col-md-4"><label>Vertical Datum:</label></div>
                                <div class="col-md-6">{{aHWM.vDatum || '---'}}</div>
                            </div>
                            <!-- Vertical Datum: (edit) -->
                            <div class="form-group" ng-if="view.HWMval== 'edit'">
                                <label class="col-md-4 control-label" for="vdatum_id">
                                    <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                                        <span class="glyphicon glyphicon-eye-open"></span>
                                    </button> Vertical Datum:
                                </label>
                                <div class="col-md-6">
                                    <select class="form-control" name="vdatum_id" ng-model="hwmCopy.vdatum_id" ng-options="vd.datum_id as vd.datum_name for vd in VDatumsList">
                                        <option value=""></option>
                                    </select>
                                </div>
                            </div>

                            <!-- Vertical Collection Method: (details) -->
                            <div class="col-md-12" ng-if="view.HWMval== 'detail'">
                                <div class="col-md-4"><label>Vertical Collection Method:</label></div>
                                <div class="col-md-6">{{aHWM.vCollectMethod || '---'}}</div>
                            </div>
                            <!-- Vertical Collection Method: (edit) -->
                            <div class="form-group" ng-if="view.HWMval== 'edit'">
                                <label class="col-md-4 control-label" for="vdatum_id">
                                    <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                                        <span class="glyphicon glyphicon-eye-open"></span>
                                    </button> Vertical Collection Method:
                                </label>
                                <div class="col-md-6">
                                    <select class="form-control" name="vcollect_method_id" ng-model="hwmCopy.vcollect_method_id" ng-options="vcm.vcollect_method_id as vcm.vcollect_method for vcm in vCollMList">
                                        <option value=""></option>
                                    </select>
                                </div>
                            </div>

                            <!-- Ft or CM radios: -->
                            <div ng-show="view.HWMval == 'edit'">
                                <label class="col-md-4 control-label"></label>
                                <div class="col-md-6">
                                    <span class="radio-inline">
                                        <input type="radio" name="FTorCM" ng-model="hwmCopy.FTorCM" value="ft" /> +/- ft
                                    </span>
                                    <span class="radio-inline">
                                        <input type="radio" name="FTorCM" ng-model="hwmCopy.FTorCM" value="cm" /> +/- cm
                                    </span>
                                </div>
                            </div>

                            <!-- Uncertainty: (details) -->
                            <div class="col-md-12" ng-if="view.HWMval== 'detail'">
                                <div class="col-md-4"><label>Survey Uncertainty:</label></div>
                                <div class="col-md-6">{{aHWM.uncertainty || '---'}}<span ng-show="aHWM.uncertainty"> ft.</span></div>
                            </div>
                            <!-- Uncertainty: (edit) -->
                            <div class="form-group" ng-if="view.HWMval== 'edit'">
                                <label class="col-md-4 control-label" for="uncertainty">
                                    <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                                        <span class="glyphicon glyphicon-eye-open"></span>
                                    </button> Survey Uncertainty:
                                </label>
                                <div class="col-md-6">
                                    <input class="form-control" ng-keypress="isNum($event)" ng-model="hwmCopy.uncertainty" type="text" />
                                </div>
                            </div>

                            <!-- Notes: (details) -->
                            <div class="col-md-12" ng-if="view.HWMval== 'detail'">
                                <div class="col-md-4"><label>Notes:</label></div>
                                <div class="col-md-6">{{aHWM.hwm_notes || '---'}}</div>
                            </div>
                            <!-- Notes: (edit) -->
                            <div class="form-group" ng-if="view.HWMval== 'edit'">
                                <label class="col-md-4 control-label" for="hwm_notes">
                                    <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                                        <span class="glyphicon glyphicon-eye-open"></span>
                                    </button> Notes:
                                </label>
                                <div class="col-md-6">
                                    <textarea class="form-control" name="hwm_notes" type="text" rows="3" ng-model="hwmCopy.hwm_notes" />
                                </div>
                            </div>


                            <!-- Approval info (detail) -->
                            <div class="form-group" ng-show="ApprovalInfo.Member !==undefined">
                                <label class="col-md-4 control-label" for="approval_id">
                                    <span ng-if="view.HWMval == 'edit'">
                                        <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                                            <span class="glyphicon glyphicon-eye-open"></span>
                                        </button>
                                    </span> Approval Info:
                                </label>
                                <div class="col-md-6">
                                    Approved By:<span ng-if="ApprovalInfo.Member"> {{ApprovalInfo.Member.fname || '---'}} {{ApprovalInfo.Member.lname || '---'}}</span><br />
                                    On:<span ng-if="ApprovalInfo.approvalDate"> {{ApprovalInfo.approvalDate | date: 'MM/dd/yyyy hh:mm a' || '---'}}</span>
                                    <button ng-if="ApprovalInfo.approvalDate" type="button" class="borderLess" tooltip-placement="right" uib-tooltip="Time displayed as local, stored in UTC.">
                                        <span class="glyphicon glyphicon-question-sign"></span>
                                    </button>
                                </div>
                            </div>

                            <!-- edit button -->
                            <div class="form-group">
                                <div class="col-md-12">
                                    <button type="button" ng-show="view.HWMval == 'detail'" class="btn btn-primary" ng-click="wannaEditHWM()">Edit HWM</button>
                                    <button ng-show="view.HWMval == 'edit'" class="btn btn-primary" ng-click="save(HWMEditForm.$valid)">Save</button>
                                    <button type="button" ng-show="view.HWMval == 'edit'" class="btn btn-warning" ng-click="cancelHWMEdit()">Cancel Edit</button>
                                    <button type="button" ng-show="((ApprovalInfo.approvalDate == undefined && view.HWMval == 'detail') && (userRole == 'Admin' || userRole == 'Manager'))" class="btn btn-primary" ng-click="approveHWM()">Approve</button>
                                    <button type="button" ng-show="((ApprovalInfo.approvalDate != undefined && view.HWMval == 'detail') && (userRole == 'Admin' || userRole == 'Manager'))" class="btn btn-primary" ng-click="unApproveHWM()">UnApprove</button>
                                </div>
                            </div>

                        </fieldset>
                    </form>
                </uib-accordion-group>
                <!-- HWM FILES SECTION -->
                <div ng-if="aHWM.hwm_id !== undefined">
                    <!--HWM File Part-->
                    <uib-accordion-group is-open="h.hFileOpen">
                        <uib-accordion-heading>
                            <i style="margin-right:10px" class="pull-left glyphicon" ng-class="{'glyphicon-chevron-down': h.hFileOpen, 'glyphicon-chevron-right': !h.hFileOpen}"></i>
                            <span ng-class="{'redText':showFileForm}">HWM File Information</span>
                        </uib-accordion-heading>
                        <div class="col-md-12">
                            <div class="col-md-4"><h3>HWM Files</h3></div>
                            <div class="col-md-6" ng-if="!showFileForm" style="margin-top:14px">
                                <button type="button" class="borderLess" ng-click="showFile(0)" tooltip-placement="right" uib-tooltip="Upload a new File to this HWM">
                                    <span class="glyphicon glyphicon-plus"></span>
                                </button>
                            </div>
                            <br clear="all" />
                            <!-- list of existing files for this hwm -->
                            <div class="col-md-6" ng-if="HWMFiles.length > 0">
                                <ul style="padding-left: 0">
                                    <li ng-repeat="f in HWMFiles" style="list-style:none;padding-bottom: 15px;">
                                        <span class="col-sm-9 borderLess" style="padding:0">
                                            <a class="btn borderLess" style="padding:0" title="{{f.file_date | date: 'MM/dd/yyyy'}} ({{f.name || f.file_id}})" ng-click="showFile(f)">{{f.file_date | date: 'MM/dd/yyyy'}} ({{f.name || f.file_id}})</a>
                                        </span>
                                    </li>
                                </ul>
                            </div>
                            <!-- carousel of photo files -->
                            <div class="col-md-6" ng-if="hwmImageFiles.length > 0" style="height:120px;">
                                <uib-carousel interval="4000">
                                    <uib-slide ng-repeat="f in hwmImageFiles">
                                        <img ng-click="showImageModal(f.file_id)" ng-src="{{serverURL}}/Files/{{f.file_id}}/Item{{stamp}}" />
                                        <div class="carousel-caption">
                                            <p>{{f.name || f.file_id}}</p>
                                        </div>
                                    </uib-slide>
                                </uib-carousel>
                            </div>
                            <br clear="all" />

                            <div ng-if="showFileForm">
                                <hr />
                                <form class="form-horizontal" name="HWMFILEForm">
                                    <fieldset>
                                        <!-- File Type* -->
                                        <div class="form-group" ng-class="{'has-error':HWMFILEForm.filetype_id.$invalid && HWMFILEForm.filetype_id.$dirty}" style="margin:0;padding:0">
                                            <label class="col-md-3 control-label req" for="filetype_id">
                                                File Type:
                                                <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Required">
                                                    <span class="glyphicon glyphicon-asterisk" style="color:#d00;font-size:xx-small;"></span>
                                                </button>
                                            </label>
                                            <div class="col-md-6" ng-if="aFile.file_id == undefined">
                                                <select class="form-control" name="filetype_id" ng-model="aFile.filetype_id" ng-change="updateAgencyForCaption()" ng-options="ft.filetype_id as ft.filetype for ft in fileTypes" required>
                                                    <option value=""></option>
                                                </select>
                                            </div>
                                            <div class="col-md-6" ng-if="aFile.file_id != undefined">{{aFile.fileType}}</div>
                                        </div>

                                        <!--Upload Single Image with validations*-->
                                        <div ng-if="aFile.file_id === undefined && aFile.filetype_id !== 8" class="form-group" style="margin:0;padding:0">
                                            <label class="col-md-3 control-label" for="FILE">
                                                Upload File:
                                                <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Required">
                                                    <span class="glyphicon glyphicon-asterisk" style="color:#d00;font-size:xx-small;"></span>
                                                </button>
                                            </label>
                                            <div class="col-md-9">
                                                <input type="file" max="500000" file-model="aFile.File" />
                                                <img ngf-thumbnail="aFile.File" style="height:60px" class="thumbnail">
                                            </div>
                                        </div>
                                        <br clear="all" />

                                        <!--File URL (LINK file)-->
                                        <div ng-if="aFile.filetype_id === 8" class="form-group" style="margin:0;padding:0">
                                            <label class="col-md-3 control-label" for="name">File URL:</label>
                                            <div class="col-md-6">
                                                <input class="form-control" name="name" ng-model="aFile.name" type="text" />
                                            </div>
                                            <button type="button" class="col-md-1 borderLess pull-left" tooltip-placement="bottom" tooltip-append-to-body="false" uib-tooltip="Please link to persistent URLs or digital object identifier (doi) urls.">
                                                <span class="glyphicon glyphicon-question-sign"></span>
                                            </button>
                                        </div>

                                        <!--Source Name (photo)-->
                                        <div class="form-group" ng-if="aFile.filetype_id === 1" ng-class="{'has-error':HWMFILEForm.FULLname.$invalid && HWMFILEForm.FULLname.$dirty}" style="margin:0;padding:0">
                                            <label class="col-md-3 control-label req" for="source_id">
                                                Source Photographer:
                                                <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Required">
                                                    <span class="glyphicon glyphicon-asterisk" style="color:#d00;font-size:xx-small;"></span>
                                                </button>
                                            </label>
                                            <div class="col-md-6">
                                                <input class="form-control" name="FULLname" ng-model="aSource.FULLname" type="text" required />
                                            </div>
                                        </div>

                                        <!--Source Name (all other)-->
                                        <div class="form-group" ng-if="aFile.filetype_id  > 2" ng-class="{'has-error':HWMFILEForm.FULLname.$invalid && HWMFILEForm.FULLname.$dirty}" style="margin:0;padding:0">
                                            <label class="col-md-3 control-label req" for="source_id">
                                                Source Name:
                                                <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Required">
                                                    <span class="glyphicon glyphicon-asterisk" style="color:#d00;font-size:xx-small;"></span>
                                                </button>
                                            </label>
                                            <div class="col-md-6">
                                                <input class="form-control" name="FULLname" ng-model="aSource.FULLname" type="text" required />
                                            </div>
                                        </div>

                                        <!--Source Agency* (photo, allOther)-->
                                        <div ng-if="aFile.filetype_id === 1 || aFile.filetype_id > 2" class="form-group" ng-class="{'has-error':HWMFILEForm.agency_id.$invalid && HWMFILEForm.agency_id.$dirty}" style="margin:0;padding:0">
                                            <label class="col-md-3 control-label req" for="agency_id">
                                                Source Agency:
                                                <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Required">
                                                    <span class="glyphicon glyphicon-asterisk" style="color:#d00;font-size:xx-small;"></span>
                                                </button>
                                            </label>
                                            <div class="col-md-6">
                                                <select class="form-control" name="agency_id" ng-model="aSource.agency_id" ng-change="updateAgencyForCaption()"
                                                        ng-options="a.agency_id as a.agency_name for a in agencies" required>
                                                    <option value=""></option>
                                                </select>
                                            </div>
                                        </div>

                                        <!-- Photo Date* (photo) -->
                                        <div ng-if="aFile.filetype_id === 1" class="form-group" ng-class="{'has-error':HWMFILEForm.photo_date.$invalid && HWMFILEForm.photo_date.$dirty}" style="margin:0;padding:0">
                                            <label class="col-md-3 control-label req" for="photo_date">
                                                Photo Date:
                                                <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Required">
                                                    <span class="glyphicon glyphicon-asterisk" style="color:#d00;font-size:xx-small;"></span>
                                                </button>
                                            </label>
                                            <div class="col-md-4 input-group" style="padding-right:14px;padding-left:14px">
                                                <input class="form-control dateInputStyle" type="date" name="sd" uib-datepicker-popup="MM/dd/yyyy" show-weeks="false" is-open="datepickrs.sd" ng-model="aFile.photo_date" required />
                                                <span class="input-group-btn">
                                                    <button type="button" class="btn btn-default" ng-click="open($event, 'sd')">
                                                        <i class="glyphicon glyphicon-calendar" />
                                                    </button>
                                                </span>
                                            </div>
                                        </div>

                                        <!-- Date Uploaded* (photo, data, allother) -->
                                        <div ng-if="aFile.filetype_id > 0" class="form-group" ng-class="{'has-error':HWMFILEForm.file_date.$invalid && HWMFILEForm.file_date.$dirty}" style="margin:0;padding:0">
                                            <label class="col-md-3 control-label req" for="file_date">
                                                Date Uploaded:
                                                <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Required">
                                                    <span class="glyphicon glyphicon-asterisk" style="color:#d00;font-size:xx-small;"></span>
                                                </button>
                                            </label>
                                            <div class="col-md-4 input-group" style="padding-right:14px;padding-left:14px">
                                                <input class="form-control dateInputStyle" type="date" name="fd" uib-datepicker-popup="MM/dd/yyyy" show-weeks="false" is-open="datepickrs.fd" ng-model="aFile.file_date" required />
                                                <span class="input-group-btn">
                                                    <button type="button" class="btn btn-default" ng-click="open($event, 'fd')">
                                                        <i class="glyphicon glyphicon-calendar" />
                                                    </button>
                                                </span>
                                            </div>
                                        </div>

                                        <!--Description*(photo, data, allother)-->
                                        <div ng-if="aFile.filetype_id > 0" class="form-group" ng-class="{'has-error':HWMFILEForm.description.$invalid && HWMFILEForm.description.$dirty}" style="margin:0;padding:0">
                                            <label class="col-md-3 control-label req" for="description">
                                                Description:
                                                <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Required">
                                                    <span class="glyphicon glyphicon-asterisk" style="color:#d00;font-size:xx-small;"></span>
                                                </button>
                                            </label>
                                            <div class="col-md-6">
                                                <textarea class="form-control" id="description" type="text" rows="3" placeholder="Description" ng-model="aFile.description" required />
                                            </div>
                                            <button type="button" ng-show="aFile.filetype_id == 1" class="col-md-1 borderLess pull-left" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Populates in Photo caption below. If a person or people appear in photo include name(s). If non-USGS personnel, ensure consent to publish name in caption is given.">
                                                <span class="glyphicon glyphicon-question-sign"></span>
                                            </button>
                                        </div>

                                        <!-- This is where Other ends, rest is for Photo -->
                                        <!--Photo Direction (photo)-->
                                        <div ng-if="aFile.filetype_id === 1" class="form-group" style="margin:0;padding:0;padding-top:5px;">
                                            <label class="col-md-3 control-label" for="photo_direction">Photo Direction:</label>
                                            <div class="col-md-6">
                                                <input class="form-control" id="photo_direction" name="photo_direction" ng-model="aFile.photo_direction" type="text" />
                                            </div>
                                        </div>

                                        <!-- Photo Latitude (photo)-->
                                        <div ng-if="aFile.filetype_id === 1" class="form-group" style="margin:0;padding:0">
                                            <label class="col-md-3 control-label" for="latitude_dd">Photo Latitude <br /> (if different):</label>
                                            <div class="col-md-6">
                                                <input class="form-control" ng-keypress="isNum($event)" name="latitude_dd" id="latitude_dd" ng-model="aFile.latitude_dd"
                                                       type="text" />
                                            </div>
                                        </div>

                                        <!--Photo Longitude (photo)-->
                                        <div ng-if="aFile.filetype_id === 1" class="form-group" style="margin:0;padding:0">
                                            <label class="col-md-3 control-label" for="longitude_dd">Photo Longitude <br /> (if different):</label>
                                            <div class="col-md-6">
                                                <input class="form-control" ng-keypress="isNum($event)" id="longitude_dd" name="longitude_dd" ng-model="aFile.longitude_dd"
                                                       type="text" />
                                            </div>
                                        </div>

                                        <div ng-if="aFile.filetype_id === 1" class="form-group" style="margin:0;padding:0">
                                            <label class="col-md-3 control-label" for="Caption">Preview Caption:</button></label>
                                            <div class="col-md-6">
                                                <span>
                                                    Photo of {{aFile.description || ' (Description HERE) '}} at {{thisHWMsite.site_description}}, {{thisHWMsite.county}}, {{thisHWMsite.state}}, {{aFile.photo_date | date: 'MM/dd/yyyy' || ' Date taken HERE '}}. Photograph by {{aSource.FULLname || ' Source Name HERE ' }}, {{agencyNameForCap || ' Agency HERE '}}.
                                                </span>
                                            </div>
                                        </div>

                                        <!-- associated files (HWM FILES)-->
                                        <div ng-if="aFile.file_id !== undefined && aFile.filetype_id !== 8" class="form-group" style="margin:0;padding:0;padding-top:12px;">
                                            <label class="col-md-3 control-label">Associated File:</label>
                                            <div class="col-md-6">
                                                <span ng-if="fileItemExists">
                                                    <a target="_blank" title="Download File" ng-href="{{serverURL}}/Files/{{aFile.file_id}}/Item">{{aFile.name}}</a>
                                                    <br />
                                                    <img ng-if="isPhoto" style="height:80px;" ng-src="{{src}}" />
                                                </span>
                                                <span ng-if="!fileItemExists">-- Missing --</span>
                                                <!--ReUpload Single Image with validations*-->
                                                <div ng-if="!fileItemExists" class="form-group">
                                                    <div class="col-md-7">
                                                        <label class="custom-file-input" for="Upload" />
                                                        <input id="Upload" type="file" max="500000" file-model="aFile.File" style="visibility: hidden">
                                                        <div class="col-md-7 pull-left" ng-if="aFile.File.type == 'image/png' || aFile.File.type == 'image/jpeg' || aFile.File.type == 'image/gif'"><img ngf-thumbnail="aFile.File" style="height:60px" class="thumbnail"></div>
                                                        <div class="col-md-7 pull-left" ng-if="aFile.File.type !== 'image/png' && aFile.File.type !== 'image/jpeg' && aFile.File.type !== 'image/gif'" style="overflow:auto">{{aFile.File.name}}</div>
                                                        <div class="col-md-5">
                                                            <span ng-if="aFile.File">
                                                                Correct File?
                                                                <button ng-if="aFile.File" type="button" ng-click="saveFileUpload()">Upload</button>
                                                            </span>
                                                        </div>
                                                    </div>
                                                </div>
                                                <!-- change out the existing fileItem with a different one-->
                                                <div ng-if="fileItemExists" class="form-group">
                                                    <div class="col-md-9">
                                                        <label class="custom-file-inputChange" for="Upload" />
                                                        <input id="Upload" type="file" max="500000" file-model="aFile.File1" style="visibility: hidden">
                                                        <div class="col-md-7 pull-left" ng-if="aFile.File1.type == 'image/png' || aFile.File1.type == 'image/jpeg' || aFile.File1.type == 'image/gif'">
                                                            <img ngf-thumbnail="afile.file1" style="height:60px" class="thumbnail">
                                                        </div>
                                                        <div class="col-md-7 pull-left" ng-if="aFile.File1.type !== 'image/png' && aFile.File1.type !== 'image/jpeg' && aFile.File1.type !== 'image/gif'" style="overflow:auto">
                                                            {{aFile.File1.name}}
                                                        </div>
                                                        <div class="col-md-5">
                                                            <span ng-if="aFile.File1">
                                                                Correct File?
                                                                <button ng-if="aFile.File1" type="button" ng-click="saveFileUpload()">Replace</button>
                                                            </span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div ng-show="!HWMfileIsUploading">
                                            <button class="btn btn-primary" ng-if="aFile.file_id != undefined" ng-click="saveFile(HWMFILEForm.$valid)">Save File</button>
                                            <button type="button" class="btn btn-danger" ng-if="aFile.file_id != undefined" ng-click="deleteFile()">Delete File</button>
                                            <button class="btn btn-primary" ng-if="aFile.file_id == undefined" ng-click="createFile(HWMFILEForm.$valid)">Create File</button>
                                            <button type="button" class="btn btn-warning" ng-click="cancelFile()">Close/Cancel File</button>
                                        </div>
                                        <div ng-show="HWMfileIsUploading"><img src="images/fileUpload.gif" /></div>
                                    </fieldset>
                                </form>
                            </div>
                        </div>
                    </uib-accordion-group>
                </div>
            </uib-accordion>
        </div> <!-- end hwm edit -->
    </div> <!-- end modal-body -->
    <br clear="all" />

    <div class="modal-footer">
        <div class="form-group">
            <div class="col-md-12">
                <button type="button" ng-show="aHWM.hwm_id !== undefined" ng-disabled="showFileForm" class="btn btn-danger" ng-click="deleteHWM(HWMEditForm.$valid)">Delete HWM</button>
                <button type="button" class="btn btn-warning" ng-disabled="showFileForm" ng-click="cancel()">Cancel/Close</button>
            </div>
        </div>
    </div> <!-- end modal-footer -->
</script>

<!-- MODAL for viewing proposed sensor-->
<script type="text/ng-template" id="ProposedSensor.html">
    <div class="modal-header">
        <h3 class="modal-title">Proposed Sensor<button class="close" type="button" ng-click="cancel()" aria-hidden="true" style="color:gray;">&times;</button></h3>
    </div>
    <form class="form-horizontal">
        <fieldset>
            <div class="modal-body">
                <!--Sensor Type-->
                <div class="col-md-12">
                    <div class="col-md-4"><label>Sensor Type:</label></div>
                    <div class="col-md-7">{{thisProposedSensor.sensorType}}</div>
                </div>

                <!--Deployment Type-->
                <div class="col-md-12">
                    <div class="col-md-4"><label>Deployment Type:</label></div>
                    <div class="col-md-7">{{thisProposedSensor.deploymentType || ' '}}</div>
                </div>
                <br clear="all" />
            </div><!-- end modal-body -->

            <div class="modal-footer">
                <div class="form-group">
                    <div class="col-md-12">
                        <button type="button" class="btn btn-primary" ng-click="cancel()">Close</button>
                        <button type="button" class="btn btn-warning" ng-click="deleteProposed()">Delete Proposed Sensor</button>
                    </div>
                </div>
            </div>
        </fieldset>
    </form>
</script>

<!-- MODAL for Deploying Sensor-->
<script type="text/ng-template" id="Sensormodal.html">
    <div class="modal-header">
        <h3 class="modal-title">Deploy Sensor<button class="close" type="button" ng-click="cancel()" aria-hidden="true" style="color:gray;">&times;</button></h3>
    </div>
    <div class="modal-body">
        <form class="form-horizontal" name="SensorForm">
            <fieldset>
                <!-- Event: -->
                <div class="form-group">
                    <label class="col-md-4 control-label" for="event_id">
                        <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                            <span class="glyphicon glyphicon-eye-open"></span>
                        </button> Event:
                    </label>
                    <div class="col-md-6">
                        <div class="col-md-8">
                            {{EventName}}
                        </div>
                        <div class="col-md-4" ng-show="userRole == 'Admin' && whichButton == 'edit'">
                            <button type="button" ng-click="showChangeEventDD()" class="btn btn-primary">Change Event</button>
                        </div>
                    </div>
                </div>

                <!--Event dropdown for admin -->
                <div ng-show="showEventDD">
                    <div class="form-group">
                        <label class="col-md-4 control-label" for="event_id">
                            <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                                <span class="glyphicon glyphicon-eye-open"></span>
                            </button> Events:
                        </label>
                        <div class="col-md-6">
                            <select class="form-control" id="event_id" name="event_id" ng-model="adminChanged.event_id" ng-change="ChangeEvent()">
                                ng-options="e.event_id as (e.event_name + ' --- ' + (e.event_start_date | date: 'MM/dd/yyyy') + ' to ' + ((e.event_end_date || '-Not Set-') | date: 'MM/dd/yyyy'))  for e in eventList | orderBy: '-event_start_date'"
                                <option value=""></option>
                            </select>
                        </div>
                    </div>
                </div>

                <!-- Sensor Type:* -->
                <div class="form-group" ng-class="{'has-error':SensorForm.sensor_type_id.$invalid && SensorForm.sensor_type_id.$dirty}">
                    <label class="col-md-4 control-label req" for="sensor_type_id">
                        <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                            <span class="glyphicon glyphicon-eye-open"></span>
                        </button> Sensor Type:
                        <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Required">
                            <span class="glyphicon glyphicon-asterisk" style="color:#d00;font-size:xx-small;"></span>
                        </button>
                    </label>
                    <div class="col-md-6">
                        <select class="form-control" id="sensor_type_id" name="sensor_type_id" ng-model="aSensor.sensor_type_id"
                                ng-options="s.sensor_type_id as s.sensor for s in sensorTypeList" ng-change="getDepTypes()" required>
                            <option value=""></option>
                        </select>
                    </div>
                </div>

                <!-- Sensor Brand:* -->
                <div class="form-group" ng-class="{'has-error':SensorForm.sensor_brand_id.$invalid && SensorForm.sensor_brand_id.$dirty}">
                    <label class="col-md-4 control-label req" for="sensor_brand_id">
                        <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                            <span class="glyphicon glyphicon-eye-open"></span>
                        </button> Sensor Brand:
                        <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Required">
                            <span class="glyphicon glyphicon-asterisk" style="color:#d00;font-size:xx-small;"></span>
                        </button>
                    </label>
                    <div class="col-md-6">
                        <select class="form-control" id="sensor_brand_id" name="sensor_brand_id" ng-model="aSensor.sensor_brand_id"
                                ng-options="sb.sensor_brand_id as sb.brand_name for sb in sensorBrandList" required>
                            <option value=""></option>
                        </select>
                    </div>
                </div>

                <!-- Serial Number:* -->
                <div class="form-group" ng-class="{'has-error':SensorForm.serial_number.$invalid && SensorForm.serial_number.$dirty}">
                    <label class="col-md-4 control-label req" for="serial_number">
                        <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                            <span class="glyphicon glyphicon-eye-open"></span>
                        </button> Serial Number:
                        <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Required">
                            <span class="glyphicon glyphicon-asterisk" style="color:#d00;font-size:xx-small;"></span>
                        </button>
                    </label>
                    <div class="col-md-6">
                        <input class="form-control" name="serial_number" ng-model="aSensor.serial_number" type="text" required />
                    </div>
                    <button type="button" class="col-md-1 borderLess pull-left" tooltip-placement="right" tooltip-append-to-body="false" uib-tooltip="Will be used in netCDF metadata.">
                        <span class="glyphicon glyphicon-question-sign"></span>
                    </button>
                </div>

                <!-- Housing Serial Number: -->
                <div class="form-group">
                    <label class="col-md-4 control-label" for="housing_serial_number">
                        <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                            <span class="glyphicon glyphicon-eye-open"></span>
                        </button> Housing Serial Number:
                    </label>
                    <div class="col-md-6">
                        <input class="form-control" name="housing_serial_number" ng-model="aSensor.housing_serial_number" type="text" />
                    </div>
                    <button type="button" class="col-md-1 borderLess pull-left" tooltip-placement="right" tooltip-append-to-body="false" uib-tooltip="Required for DOI WATCH OFFICE 800 number.">
                        <span class="glyphicon glyphicon-question-sign"></span>
                    </button>
                </div>

                <!-- Housing Types: -->
                <div class="form-group">
                    <label class="col-md-4 control-label" for="housing_type_id">Housing Types:</label>
                    <div class="col-md-6">
                        <select class="form-control" id="housing_type_id" name="housing_type_id" ng-model="aSensor.housing_type_id"
                                ng-options="ht.housing_type_id as ht.type_name for ht in houseTypeList">
                            <option value=""></option>
                        </select>
                    </div>
                </div>

                <!-- -------------------------- START TAPEDOWN SECTION --------------------------------  -->
                <uib-accordion close-others="false">
                    <uib-accordion-group is-open="tapedownOpen">
                        <uib-accordion-heading>
                            <i style="margin-right:10px" class="pull-left glyphicon" ng-class="{'glyphicon-chevron-down': tapedownOpen, 'glyphicon-chevron-right': !tapedownOpen}"></i>
                            Tape Down Information
                            <button type="button" class="col-md-1 borderLess pull-right" tooltip-placement="left" tooltip-append-to-body="false" uib-tooltip="These elevations and tape down data are used for both field activities and final products. Please pay attention to how your data is entered.">
                                <span class="glyphicon glyphicon-question-sign"></span>
                            </button>
                        </uib-accordion-heading>
                        <!--Add Tapedown button-->
                        <div ng-if="OPsPresent" class="form-group">
                            <div class="form-group">
                                <label class="col-md-3 control-label">Datum Location(s):</label>
                                <div class="col-md-6">
                                    <div isteven-multi-select
                                         input-model="OPsForTapeDown"
                                         output-model="OPMeasure"
                                         button-label="name"
                                         item-label="name"
                                         on-item-click="OPchosen(data)"
                                         tick-property="selected"
                                         helper-elements="filter">
                                    </div>
                                </div>
                            </div>
                        </div><!-- end if OPsArePresent-->
                        <div ng-if="!OPsPresent" class="form-group">
                            <label class="col-md-3 control-label" for="TAPEDOWNBTN">Tape Down:</label>
                            <div class="col-md-6">
                                No Datum Locations have been added to this site yet to use for a tape down
                            </div>
                        </div>

                        <!--start add tapedown area -->
                        <br clear="all" />
                        <div ng-show="tapeDownTable.length > 0">
                            <div class="pull-right col-md-6"><em>Note: these are not used for any calculations but are to facilitate field activities</em></div>
                            <table class="table table-condensed">
                                <thead>
                                    <tr>
                                        <th>
                                            <label>
                                                <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                                                    <span class="glyphicon glyphicon-eye-open"></span>
                                                </button> Datum Location
                                            </label>
                                        </th>
                                        <th>
                                            <label>
                                                <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                                                    <span class="glyphicon glyphicon-eye-open"></span>
                                                </button> Elevation
                                            </label>
                                        </th>
                                        <th class="col-md-2">
                                            <label>
                                                <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                                                    <span class="glyphicon glyphicon-eye-open"></span>
                                                </button> Offset
                                                <button type="button" class="borderLess" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="From the datum location to the sensor orifice.">
                                                    <span class="glyphicon glyphicon-question-sign"></span>
                                                </button><br />
                                                Correction
                                            </label>
                                        </th>
                                        <th class="col-md-2">
                                            <label>
                                                <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                                                    <span class="glyphicon glyphicon-eye-open"></span>
                                                </button> Water
                                                <br />
                                                Surface
                                                <button type="button" class="borderLess" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="From the datum location to the water surface.">
                                                    <span class="glyphicon glyphicon-question-sign"></span>
                                                </button>
                                            </label>
                                        </th>
                                        <th class="col-md-2">
                                            <label>
                                                <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                                                    <span class="glyphicon glyphicon-eye-open"></span>
                                                </button> Ground
                                                <br />
                                                Surface
                                                <button type="button" class="borderLess" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="From the datum location to the ground surface.">
                                                    <span class="glyphicon glyphicon-question-sign"></span>
                                                </button>
                                            </label>
                                        </th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr ng-repeat="t in tapeDownTable">
                                        <td>{{t.op_name}}<input type="hidden" ng-model="t.objective_type_id" /><input type="hidden" ng-model="t.op_measurements_id" /></td>
                                        <td>
                                            {{t.elevation}} {{t.Vdatum}}
                                        </td>
                                        <td><input class="form-control" ng-keypress="isNum($event)" ng-model="t.offset_correction" /></td>
                                        <td><input class="form-control" ng-keypress="isNum($event)" ng-model="t.water_surface" /></td>
                                        <td><input class="form-control" ng-keypress="isnum($event)" ng-model="t.ground_surface" /></td>
                                    </tr>
                                </tbody>
                            </table>
                            <!-- Sensor status fields for tapedown -->
                            <div class="col-md-10">
                                <div class="form-group" style="margin-bottom:0">
                                    <label class="col-md-5 control-label" for="sensor_elevation">
                                        <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                                            <span class="glyphicon glyphicon-eye-open"></span>
                                        </button> Sensor Elevation:
                                    </label>
                                    <div class="col-md-5">
                                        <input class="form-control" ng-keypress="isNum($event)" name="sensor_elevation" ng-model="aSensStatus.sensor_elevation" type="text" />
                                    </div>
                                    <button type="button" class="col-md-1 borderLess pull-left" tooltip-placement="right-top" tooltip-append-to-body="false" uib-tooltip="Using the offset correction, elevation of the sensor orifice." tooltip-class="tooltip-wide">
                                        <span class="glyphicon glyphicon-question-sign"></span>
                                    </button>
                                </div>

                                <div class="form-group" style="margin-bottom:0">
                                    <label class="col-md-5 control-label" for="ws_elevation">
                                        <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                                            <span class="glyphicon glyphicon-eye-open"></span>
                                        </button> Water Surface Elevation:
                                    </label>
                                    <div class="col-md-5">
                                        <input class="form-control" ng-keypress="isNum($event)" name="ws_elevation" ng-model="aSensStatus.ws_elevation" type="text" />
                                    </div>
                                    <button type="button" class="col-md-1 borderLess pull-left" tooltip-placement="right-top" tooltip-append-to-body="false" uib-tooltip="Using the water surface tape down, elevation of the water surface." tooltip-class="tooltip-wide">
                                        <span class="glyphicon glyphicon-question-sign"></span>
                                    </button>
                                </div>

                                <div class="form-group" style="margin-bottom:0">
                                    <label class="col-md-5 control-label" for="gs_elevation">
                                        <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                                            <span class="glyphicon glyphicon-eye-open"></span>
                                        </button> Ground Elevation:
                                    </label>
                                    <div class="col-md-5">
                                        <input class="form-control" ng-keypress="isNum($event)" name="gs_elevation" ng-model="aSensStatus.gs_elevation" type="text" />
                                    </div>
                                    <button type="button" class="col-md-1 borderLess pull-left" tooltip-placement="right-top" tooltip-append-to-body="false" uib-tooltip="Using the ground surface tape down, elevation of the ground surface." tooltip-class="tooltip-wide">
                                        <span class="glyphicon glyphicon-question-sign"></span>
                                    </button>
                                </div>

                                <div class="form-group">
                                    <label class="col-md-5 control-label req" for="vdatum_id">
                                        <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                                            <span class="glyphicon glyphicon-eye-open"></span>
                                        </button> In feet above:
                                    </label>
                                    <div class="col-md-5">
                                        <select class="form-control" id="vdatum_id" name="vdatum_id" ng-model="aSensStatus.vdatum_id"
                                                ng-options="vd.datum_id as vd.datum_abbreviation for vd in vertDatumList">
                                            <option value=""></option>
                                        </select>
                                    </div>
                                </div>
                                <div class="pull-left col-md-12"><em>Note: these elevations are used in the sensor processing and the final products</em></div>
                            </div>

                            <!-- area for D3 vertical ruler
                            <div class="col-md-6">
                                <bars-chart elevation-data="myData"></bars-chart>
                            </div> -->
                        </div>
                        <br clear="all" />
                    </uib-accordion-group>
                </uib-accordion>

                <!-- -------------------------- END TAPEDOWN SECTION --------------------------------  -->
                <!-- Vented (only if Sensor Type is Pressure Transducer)-->
                <div ng-show="aSensor.sensor_type_id == 1">
                    <div class="form-group">
                        <label class="col-md-4 control-label">
                            <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                                <span class="glyphicon glyphicon-eye-open"></span>
                            </button> Vented:
                        </label>
                        <div class="col-md-6">
                            <span class="radio-inline">
                                <input type="radio" name="vented" ng-model="aSensor.vented" value="Yes" />Yes
                            </span>
                            <span class="radio-inline">
                                <input type="radio" name="vented" ng-model="aSensor.vented" value="No" />No
                            </span>
                        </div>
                    </div>
                </div>

                <!-- Deployment Type: -->
                <div class="form-group">
                    <label class="col-md-4 control-label req" for="deployment_type_id">
                        <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                            <span class="glyphicon glyphicon-eye-open"></span>
                        </button> Deployment Type:
                    </label>
                    <div class="col-md-6">
                        <select class="form-control" id="deployment_type_id" name="deployment_type_id" ng-model="aSensor.deployment_type_id"
                                ng-options="dt.deployment_type_id as dt.method for dt in filteredDeploymentTypes">
                            <option value=""></option>
                        </select>
                    </div>
                </div>

                <!-- Location Description: -->
                <div class="form-group" ng-class="{'has-error':SensorForm.location_description.$invalid && SensorForm.location_description.$dirty}">
                    <label class="col-md-4 control-label" for="location_description">
                        <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                            <span class="glyphicon glyphicon-eye-open"></span>
                        </button> Location Description:
                    </label>
                    <div class="col-md-6">
                        <textarea class="form-control" name="location_description" type="text" rows="3" ng-model="aSensor.location_description" />
                    </div>
                    <button type="button" class="col-md-1 borderLess pull-left" tooltip-placement="bottom" tooltip-append-to-body="false" uib-tooltip="Please be specific so someone else can find this sensor later. This field is public.">
                        <span class="glyphicon glyphicon-question-sign"></span>
                    </button>
                </div>

                <!-- Interval: -->
                <div>
                    <label class="col-md-4 control-label"></label>
                    <div class="col-md-6">
                        <span class="radio-inline">
                            <input type="radio" name="intervalType" ng-model="IntervalType.type" value="Minutes" />Minutes
                        </span>
                        <span class="radio-inline">
                            <input type="radio" name="intervalType" ng-model="IntervalType.type" value="Seconds" />Seconds
                        </span>
                    </div>
                </div><br clear="all" />
                <div class="form-group">
                    <label class="col-md-4 control-label" for="interval">
                        <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                            <span class="glyphicon glyphicon-eye-open"></span>
                        </button> Interval:
                    </label>
                    <div class="col-md-6">
                        <input class="form-control" ng-keypress="isNum($event)" name="interval" ng-model="aSensor.interval" type="text" />
                    </div>
                </div>


                <!-- Deploy Time: * -->
                <div class="form-group" ng-class="{'has-error':SensorForm.time_stamp.$invalid && SensorForm.time_stamp.$dirty}">
                    <label class="col-md-4 control-label req" style="margin-top:3%" for="time_stamp">
                        <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                            <span class="glyphicon glyphicon-eye-open"></span>
                        </button> Deploy Time:
                        <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Required">
                            <span class="glyphicon glyphicon-asterisk" style="color:#d00;font-size:xx-small;"></span>
                        </button>
                    </label>
                    <div class="col-md-6">
                        <datetimepicker hour-step="1" minute-step="1" ng-model="aSensStatus.time_stamp" show-meridian="true"
                                        date-format="MM/dd/yyyy" readonly-date="false" readonly-time="false" date-options="dateOptions"
                                        hidden-time="false" hidden-date="false" show-spinners="true" required>
                        </datetimepicker>
                    </div>
                </div>

                <!-- Time Zone:* -->
                <div class="form-group">
                    <label class="col-md-4 control-label" for="time_zone">
                        <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                            <span class="glyphicon glyphicon-eye-open"></span>
                        </button> Time Zone:
                        <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Required">
                            <span class="glyphicon glyphicon-asterisk" style="color:#d00;font-size:xx-small;"></span>
                        </button>
                    </label>
                    <div class="col-md-6">
                        <select class="form-control" name="time_zone" ng-model="aSensStatus.time_zone"
                                ng-options="vcm for vcm in timeZoneList" required>
                            <option value=""></option>
                        </select>
                    </div>
                    <button type="button" class="borderLess" tooltip-placement="right" tooltip-append-to-body="false" uib-tooltip="Date/Time will be stored in UTC.">
                        <span class="glyphicon glyphicon-question-sign"></span>
                    </button>
                </div>

                <!-- Note: -->
                <div class="form-group">
                    <label class="col-md-4 control-label" for="notes">
                        <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                            <span class="glyphicon glyphicon-eye-open"></span>
                        </button> Note:
                    </label>
                    <div class="col-md-6">
                        <textarea class="form-control" name="notes" type="text" rows="3" ng-model="aSensStatus.notes" elastic />
                    </div>
                </div>

                <!-- Collection Member: -->
                <div class="form-group">
                    <label class="col-md-4 control-label">
                        <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                            <span class="glyphicon glyphicon-eye-open"></span>
                        </button> Deploy Member:
                    </label>
                    <div class="col-md-6">
                        <input type="hidden" name="member_id" ng-model="aSensStatus.member_id" />
                        <span>{{Deployer.fname}} {{Deployer.lname}}</span>
                    </div>
                </div>

                <div class="form-group">
                    <div class="col-md-12">
                        <button ng-if="whichButton == 'deploy' || whichButton == 'deployP'" class="btn btn-primary" ng-click="deploy(SensorForm.$valid)">Deploy</button>
                        <button type="button" class="btn btn-warning" ng-disabled="showFileForm" ng-click="cancel()">Cancel/Close</button>
                    </div>
                </div>
            </fieldset>
        </form>
    </div> <!-- end modal-body -->
    <br clear="all" />

    <div class="modal-footer">

    </div><!-- end modal-footer -->

</script>

<!-- MODAL for Deployed Sensor editing (deployed and files)-->
<script type="text/ng-template" id="DepSensormodal.html">
    <div class="modal-header">
        <h3 class="modal-title">Deployed Sensor<button class="close" type="button" ng-click="cancel()" aria-hidden="true" style="color:gray;">&times;</button></h3>
    </div>
    <div class="modal-body">
        <!--Deployed Sensor Part-->
        <uib-accordion close-others="false">
            <!--Deployed Sensor Part-->
            <uib-accordion-group is-open="s.depOpen">
                <uib-accordion-heading>
                    <i style="margin-right:10px" class="pull-left glyphicon" ng-class="{'glyphicon-chevron-down': s.depOpen, 'glyphicon-chevron-right': !s.depOpen}"></i>
                    <span ng-class="{'redText':view.DEPval == 'edit'}">Deployed Sensor Information</span>
                </uib-accordion-heading>
                <form name="editDeployedForm">
                    <fieldset>
                        <!-- Event: (detail) -->
                        <div class="col-md-12" ng-if="view.DEPval == 'detail'">
                            <div class="col-md-3 col-md-offset-1"><label>Event:</label></div>
                            <div class="col-md-6">{{EventName}}</div>
                        </div>
                        <!-- Event: -->
                        <div class="form-group" ng-if="view.DEPval == 'edit'">
                            <label class="col-md-4 control-label">
                                <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                                    <span class="glyphicon glyphicon-eye-open"></span>
                                </button> Event:
                            </label>
                            <div class="col-md-6">{{EventName}}</div>
                            <div class="col-md-2" ng-show="userRole == 'Admin' && view.DEPval == 'edit'">
                                <button type="button" ng-click="showChangeEventDD()" class="btn btn-primary">Change Event</button>
                            </div>
                        </div>

                        <!--Event dropdown for admin -->
                        <div ng-show="showEventDD && view.DEPval == 'edit'">
                            <div class="form-group">
                                <label class="col-md-4 control-label" for="event_id">
                                    <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                                        <span class="glyphicon glyphicon-eye-open"></span>
                                    </button> Events:
                                </label>
                                <div class="col-md-6">
                                    <select class="form-control" id="event_id" name="event_id" ng-model="adminChanged.event_id" ng-change="ChangeEvent()"
                                            ng-options="e.event_id as (e.event_name + ' --- ' + (e.event_start_date | date: 'MM/dd/yyyy') + ' to ' + ((e.event_end_date || '-Not Set-') | date: 'MM/dd/yyyy'))  for e in eventList | orderBy: '-event_start_date'"
                                        <option value=""></option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <!-- Sensor Type*:(detail) -->
                        <div class="col-md-12" ng-if="view.DEPval == 'detail'">
                            <div class="col-md-3 col-md-offset-1"><label>Sensor Type:</label></div>
                            <div class="col-md-6">{{aSensor.sensorType || '---'}}</div>
                        </div>
                        <!-- Sensor Type*:(edit) -->
                        <div class="form-group" ng-class="{'has-error':editDeployedForm.sensor_type_id.$invalid && editDeployedForm.sensor_type_id.$dirty}" ng-if="view.DEPval == 'edit'">
                            <label class="col-md-4 req control-label">
                                <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                                    <span class="glyphicon glyphicon-eye-open"></span>
                                </button> Sensor Type:
                                <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Required">
                                    <span class="glyphicon glyphicon-asterisk" style="color:#d00;font-size:xx-small;"></span>
                                </button>
                            </label>
                            <div class="col-md-6">
                                <select class="form-control" name="sensor_type_id" ng-model="depStuffCopy[0].sensor_type_id"
                                        ng-options="s.sensor_type_id as s.sensor for s in sensorTypeList" ng-change="getDepTypes()" required>
                                    <option value=""></option>
                                </select>
                            </div>
                        </div>

                        <!-- Sensor Brand*:(detail) -->
                        <div class="col-md-12" ng-if="view.DEPval == 'detail'">
                            <div class="col-md-3 col-md-offset-1"><label>Sensor Brand:</label></div>
                            <div class="col-md-6">{{aSensor.sensorBrand || '---'}}</div>
                        </div>
                        <!-- Sensor Brand*:(edit) -->
                        <div class="form-group" ng-class="{'has-error':editDeployedForm.sensor_brand_id.$invalid && editDeployedForm.sensor_brand_id.$dirty}" ng-if="view.DEPval == 'edit'">
                            <label class="col-md-4 req control-label">
                                <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                                    <span class="glyphicon glyphicon-eye-open"></span>
                                </button> Sensor Brand:
                                <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Required">
                                    <span class="glyphicon glyphicon-asterisk" style="color:#d00;font-size:xx-small;"></span>
                                </button>
                            </label>
                            <div class="col-md-6">
                                <select class="form-control" name="sensor_brand_id" ng-model="depStuffCopy[0].sensor_brand_id"
                                        ng-options="sb.sensor_brand_id as sb.brand_name for sb in sensorBrandList" required>
                                    <option value=""></option>
                                </select>
                            </div>
                        </div>

                        <!-- Serial Number*: (detail)-->
                        <div class="col-md-12" ng-if="view.DEPval == 'detail'">
                            <div class="col-md-3 col-md-offset-1"><label>Serial Number:</label></div>
                            <div class="col-md-6">{{aSensor.serial_number || '---'}}</div>
                        </div>
                        <!-- Serial Number*:(edit) -->
                        <div class="form-group" ng-class="{'has-error':editDeployedForm.serial_number.$invalid && editDeployedForm.serial_number.$dirty}" ng-if="view.DEPval == 'edit'">
                            <label class="col-md-4 req control-label">
                                <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                                    <span class="glyphicon glyphicon-eye-open"></span>
                                </button> Serial Number:
                                <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Required">
                                    <span class="glyphicon glyphicon-asterisk" style="color:#d00;font-size:xx-small;"></span>
                                </button>
                            </label>
                            <div class="col-md-6">
                                <input class="form-control" name="serial_number" ng-model="depStuffCopy[0].serial_number" type="text" required />
                            </div>
                            <button type="button" class="col-md-1 borderLess pull-left" tooltip-placement="right" tooltip-append-to-body="false" uib-tooltip="Will be used in netCDF metadata.">
                                <span class="glyphicon glyphicon-question-sign"></span>
                            </button>
                        </div>

                        <!-- Housing Serial Number:(detail) -->
                        <div class="col-md-12" ng-if="view.DEPval == 'detail'">
                            <div class="col-md-3 col-md-offset-1"><label>Housing Serial Number:</label></div>
                            <div class="col-md-6">{{aSensor.housing_serial_number || '---'}}</div>
                        </div>
                        <!-- Housing Serial Number:(edit) -->
                        <div class="form-group" ng-if="view.DEPval == 'edit'">
                            <label class="col-md-4 control-label">
                                <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                                    <span class="glyphicon glyphicon-eye-open"></span>
                                </button> Housing Serial Number:
                            </label>
                            <div class="col-md-6">
                                <input class="form-control" name="housing_serial_number" ng-model="depStuffCopy[0].housing_serial_number" type="text" />
                            </div>
                            <button type="button" class="col-md-1 borderLess pull-left" tooltip-placement="right" tooltip-append-to-body="false" uib-tooltip="Required for DOI WATCH OFFICE 800 number.">
                                <span class="glyphicon glyphicon-question-sign"></span>
                            </button>
                        </div>

                        <!-- Housing Types: (detail) -->
                        <div class="col-md-12" ng-if="view.DEPval == 'detail'">
                            <div class="col-md-3 col-md-offset-1"><label>Housing Types:</label></div>
                            <div class="col-md-6">{{aSensor.housingType || '---'}}</div>
                        </div>
                        <!-- Housing Types: (edit) -->
                        <div class="form-group" ng-if="view.DEPval == 'edit'">
                            <label class="col-md-4 control-label">
                                <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                                    <span class="glyphicon glyphicon-eye-open"></span>
                                </button> Housing Types:
                            </label>
                            <div class="col-md-6">
                                <select class="form-control" id="housing_type_id" name="housing_type_id" ng-model="depStuffCopy[0].housing_type_id"
                                        ng-options="ht.housing_type_id as ht.type_name for ht in houseTypeList">
                                    <option value=""></option>
                                </select>
                            </div>
                        </div>
                        <br clear="all" /><hr />

                        <div class="col-md-12" ng-if="view.DEPval == 'detail'">
                            <div class="col-md-3 col-md-offset-1"><label>Tapedowns:</label></div>
                            <div class="col-md-6">
                                <div ng-show="tapeDownTable.length > 0">
                                    <div class="col-md-8">
                                        <table class="table table-condensed">
                                            <thead>
                                                <tr>
                                                    <th style="text-align:center">Datum Location</th>
                                                    <th style="text-align:center">Elevation</th>
                                                    <th style="text-align:center">Offset Correction</th>
                                                    <th style="text-align:center">Water Surface</th>
                                                    <th style="text-align:center">Ground Surface</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr ng-repeat="dt in tapeDownTable">
                                                    <td>{{dt.op_name}}</td>
                                                    <td style="text-align:center">{{dt.elevation}} {{dt.Vdatum}}</td>
                                                    <td style="text-align:center">{{dt.offset_correction}}</td>
                                                    <td style="text-align:center">{{dt.water_surface}}</td>
                                                    <td style="text-align:center">{{dt.ground_surface}}</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                                <div ng-show="tapeDownTable.length == 0">None chosen</div>
                            </div>
                        </div><!--end details for Tapedowns-->
                        <div class="form-group" ng-if="view.DEPval == 'edit'">
                            <label class="col-md-4 control-label">Tapedowns:</label>
                            <div class="col-md-6"></div>
                            <button type="button" class="col-md-1 borderLess pull-left" tooltip-placement="left" tooltip-append-to-body="false" uib-tooltip="These elevations and tape down data are used for both field activities and final products. Please pay attention to how your data is entered.">
                                <span class="glyphicon glyphicon-question-sign"></span>
                            </button>
                            <div class="col-md-12">
                                <!--start add tapedown area -->
                                <div ng-if="OPsPresent" class="col-md-9 pull-right">
                                    <label class="col-md-4 control-label">Datum Locations:</label>
                                    <div class="col-md-6">
                                        <div isteven-multi-select
                                             input-model="OPsForTapeDown"
                                             output-model="OPMeasure"
                                             button-label="name"
                                             item-label="name"
                                             on-item-click="OPchosen(data)"
                                             tick-property="selected"
                                             helper-elements="">
                                        </div>
                                    </div>
                                </div>
                                <div ng-if="!OPsPresent">No Datum Locations added to this site for tapedown</div>
                                <br clear="all" />
                                <div ng-if="OPsPresent" class="pull-right"><em>Note: these are not used for any calculations but are to facilitate field activities</em></div>
                                <div ng-show="depTapeCopy.length > 0">
                                    <table class="table">
                                        <thead>
                                            <tr>
                                                <th>
                                                    <label>
                                                        <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                                                            <span class="glyphicon glyphicon-eye-open"></span>
                                                        </button> Datum Location
                                                    </label>
                                                </th>
                                                <th>
                                                    <label>
                                                        <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                                                            <span class="glyphicon glyphicon-eye-open"></span>
                                                        </button> Elevation
                                                    </label>
                                                </th>
                                                <th class="col-sm-2">
                                                    <label>
                                                        <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                                                            <span class="glyphicon glyphicon-eye-open"></span>
                                                        </button> Offset
                                                        <button type="button" class="borderLess" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="From the datum location to the sensor orifice.">
                                                            <span class="glyphicon glyphicon-question-sign"></span>
                                                        </button>
                                                        <br />Correction
                                                    </label>
                                                </th>
                                                <th class="col-sm-2">
                                                    <label>
                                                        <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                                                            <span class="glyphicon glyphicon-eye-open"></span>
                                                        </button> Water
                                                        <br />Surface
                                                        <button type="button" class="borderLess" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="From the datum location to the water surface.">
                                                            <span class="glyphicon glyphicon-question-sign"></span>
                                                        </button>
                                                    </label>
                                                </th>
                                                <th class="col-sm-2">
                                                    <label>
                                                        <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                                                            <span class="glyphicon glyphicon-eye-open"></span>
                                                        </button> Ground
                                                        <br />Surface
                                                        <button type="button" class="borderLess" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="From the datum location to the ground surface.">
                                                            <span class="glyphicon glyphicon-question-sign"></span>
                                                        </button>
                                                    </label>
                                                </th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr ng-repeat="t in depTapeCopy">
                                                <td>{{t.op_name}}<input type="hidden" ng-model="t.objective_type_id" /><input type="hidden" ng-model="t.op_measurements_id" /></td>
                                                <td>
                                                    {{t.elevation}} {{t.Vdatum}}
                                                </td>
                                                <td><input class="form-control" ng-keypress="isNum($event)" ng-model="t.offset_correction" /></td>
                                                <td><input class="form-control" ng-keypress="isNum($event)" ng-model="t.water_surface" /></td>
                                                <td><input class="form-control" ng-keypress="isNum($event)" ng-model="t.ground_surface" /></td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div><!--end formgroup for Tapedowns-->

                        <br clear="all" />

                        <!--sensor stat tapedown parts-->
                        <!--sensor elevation (details)-->
                        <div ng-if="OPsPresent && view.DEPval == 'detail'" class="col-md-12">
                            <div class="col-md-4 col-md-offset-1"><label>Sensor Elevation:</label></div>
                            <div class="col-md-4">{{aSensStatus.sensor_elevation || '--'}}</div>
                        </div>
                        <!--sensor elevation (edit)-->
                        <div class="form-group" ng-if="OPsPresent && view.DEPval == 'edit'">
                            <label class="col-md-4 col-md-offset-1 control-label">
                                <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                                    <span class="glyphicon glyphicon-eye-open"></span>
                                </button> Sensor Elevation:
                            </label>
                            <div class="col-md-4">
                                <input class="form-control" ng-keypress="isNum($event)" name="sensor_elevation" ng-model="depStuffCopy[1].sensor_elevation" type="text" />
                            </div>
                            <button type="button" class="col-md-1 borderLess pull-left" tooltip-placement="right" tooltip-append-to-body="false" uib-tooltip="Using the offset correction, elevation of the sensor orifice.">
                                <span class="glyphicon glyphicon-question-sign"></span>
                            </button>
                        </div>

                        <!--Water Surface Elevation (details)-->
                        <div ng-if="OPsPresent && view.DEPval == 'detail'" class="col-md-12">
                            <div class="col-md-4 col-md-offset-1"><label>Water Surface Elevation:</label></div>
                            <div class="col-md-4">{{aSensStatus.ws_elevation || '--'}}</div>
                        </div>
                        <!--Water Surface Elevation (edit)-->
                        <div ng-if="OPsPresent && view.DEPval == 'edit'" class="form-group">
                            <label class="col-md-4 col-md-offset-1 control-label">
                                <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                                    <span class="glyphicon glyphicon-eye-open"></span>
                                </button> Water Surface Elevation:
                            </label>
                            <div class="col-md-4">
                                <input class="form-control" ng-keypress="isNum($event)" name="ws_elevation" ng-model="depStuffCopy[1].ws_elevation" type="text" />
                            </div>
                            <button type="button" class="col-md-1 borderLess pull-left" tooltip-placement="right" tooltip-append-to-body="false" uib-tooltip="Using the water surface tape down, elevation of the water surface.">
                                <span class="glyphicon glyphicon-question-sign"></span>
                            </button>
                        </div>

                        <!--Ground Elevation (details)-->
                        <div ng-if="OPsPresent && view.DEPval == 'detail'" class="col-md-12">
                            <div class="col-md-4 col-md-offset-1"><label>Ground Elevation:</label></div>
                            <div class="col-md-4">{{aSensStatus.gs_elevation || '--'}}</div>
                        </div>
                        <!--Ground Elevation (edit)-->
                        <div ng-if="OPsPresent && view.DEPval == 'edit'" class="form-group">
                            <label class="col-md-4 col-md-offset-1 control-label">
                                <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                                    <span class="glyphicon glyphicon-eye-open"></span>
                                </button> Ground Elevation:
                            </label>
                            <div class="col-md-4">
                                <input class="form-control" ng-keypress="isNum($event)" name="gs_elevation" ng-model="depStuffCopy[1].gs_elevation" type="text" />
                            </div>
                            <button type="button" class="col-md-1 borderLess pull-left" tooltip-placement="right-top" tooltip-append-to-body="false" uib-tooltip="Using the ground surface tape down, elevation of the ground surface.">
                                <span class="glyphicon glyphicon-question-sign"></span>
                            </button>
                        </div>

                        <!--In feet above(details)-->
                        <div ng-if="OPsPresent && view.DEPval == 'detail'" class="col-md-12">
                            <div class="col-md-4 col-md-offset-1"><label>In feet above:</label></div>
                            <div class="col-md-4">{{aSensStatus.vdatum}}</div>
                        </div>
                        <!--In feet above(edit)-->
                        <div ng-if="OPsPresent && view.DEPval == 'edit'" class="form-group">
                            <label class="col-md-4 col-md-offset-1 control-label">
                                <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                                    <span class="glyphicon glyphicon-eye-open"></span>
                                </button> In feet above:
                            </label>
                            <div class="col-md-4">
                                <select class="form-control" id="vdatum_id" name="vdatum_id" ng-model="depStuffCopy[1].vdatum_id"
                                        ng-options="vd.datum_id as vd.datum_abbreviation for vd in vertDatumList">
                                    <option value=""></option>
                                </select>
                            </div>
                        </div>
                        <div ng-if="OPsPresent && view.DEPval == 'edit'" class="col-md-12"><em>Note: these elevations are used in the sensor processing and the final products</em></div>
                        <br clear="all" /><hr />

                        <!-- Vented (only if Sensor Type is Pressure Transducer) (detail)-->
                        <div ng-show="(aSensor.sensor_type_id == 1 || depStuffCopy[0].sensor_type_id == 1) && view.DEPval == 'detail'">
                            <div class="col-md-12">
                                <div class="col-md-3 col-md-offset-1"><label>Vented:</label></div>
                                <div class="col-md-6">{{aSensor.vented || '---'}}</div>
                            </div>
                        </div>
                        <!-- Vented (only if Sensor Type is Pressure Transducer) (edit)-->
                        <div ng-show="(aSensor.sensor_type_id == 1 || depStuffCopy[0].sensor_type_id == 1) && view.DEPval == 'edit'">
                            <div class="form-group">
                                <label class="col-md-4 control-label">
                                    <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                                        <span class="glyphicon glyphicon-eye-open"></span>
                                    </button> Vented:
                                </label>
                                <div class="col-md-6">
                                    <span class="radio-inline">
                                        <input type="radio" name="vented" ng-model="depStuffCopy[0].vented" value="Yes" />Yes
                                    </span>
                                    <span class="radio-inline">
                                        <input type="radio" name="vented" ng-model="depStuffCopy[0].vented" value="No" />No
                                    </span>
                                </div>
                            </div>
                        </div>

                        <!-- Deployment Type: (detail) -->
                        <div class="col-md-12" ng-if="view.DEPval == 'detail'">
                            <div class="col-md-3 col-md-offset-1"><label>Deployment Type:</label></div>
                            <div class="col-md-6">{{aSensor.deploymentType || '---'}}</div>
                        </div>
                        <!-- Deployment Type: (edit) -->
                        <div class="form-group" ng-if="view.DEPval == 'edit'">
                            <label class="col-md-4 control-label">
                                <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                                    <span class="glyphicon glyphicon-eye-open"></span>
                                </button> Deployment Type:
                            </label>
                            <div class="col-md-6">
                                <select class="form-control" id="deployment_type_id" name="deployment_type_id" ng-model="depStuffCopy[0].deployment_type_id"
                                        ng-options="dt.deployment_type_id as dt.method for dt in filteredDeploymentTypes">
                                    <option value=""></option>
                                </select>
                            </div>
                        </div>

                        <!-- Location Description: (detail) -->
                        <div class="col-md-12" ng-if="view.DEPval == 'detail'">
                            <div class="col-md-3 col-md-offset-1"><label>Location Description:</label></div>
                            <div class="col-md-6">{{aSensor.location_description || '---'}}</div>
                        </div>
                        <!-- Location Description: (edit) -->
                        <div class="form-group" ng-if="view.DEPval == 'edit'" ng-class="{'has-error':editDeployedForm.location_description.$invalid && editDeployedForm.location_description.$dirty}">
                            <label class="col-md-4 control-label">
                                <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                                    <span class="glyphicon glyphicon-eye-open"></span>
                                </button> Location Description:
                            </label>
                            <div class="col-md-6">
                                <textarea class="form-control" name="location_description" type="text" rows="3" ng-model="depStuffCopy[0].location_description" />
                            </div>
                            <button type="button" class="col-md-1 borderLess pull-left" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Please be specific so someone else can find this sensor later. This field is public.">
                                <span class="glyphicon glyphicon-question-sign"></span>
                            </button>
                        </div>

                        <!-- Interval: -->
                        <div class="form-group" ng-show="view.DEPval == 'edit'">
                            <label class="col-md-4"></label>
                            <div class="col-md-6 col-md-offset-1" style="padding-top:5px;">
                                <span class="radio-inline">
                                    <input type="radio" name="intervalType" ng-model="IntervalType.type" value="Minutes" />Minutes
                                </span>
                                <span class="radio-inline">
                                    <input type="radio" name="intervalType" ng-model="IntervalType.type" value="Seconds" />Seconds
                                </span>
                            </div>
                        </div>
                        <!--Interval (detail)-->
                        <div class="col-md-12" ng-if="view.DEPval == 'detail'">
                            <div class="col-md-3 col-md-offset-1"><label>Interval:</label></div>
                            <div class="col-md-6"><span>{{aSensor.interval || '---'}} <span ng-if='sensor.interval'>seconds</span></span></div>
                        </div>
                        <!--Interval (edit)-->
                        <div class="form-group" ng-if="view.DEPval == 'edit'">
                            <label class="col-md-4 control-label">
                                <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                                    <span class="glyphicon glyphicon-eye-open"></span>
                                </button> Interval:
                            </label>
                            <div class="col-md-6">
                                <input class="form-control" ng-keypress="isNum($event)" name="interval" ng-model="depStuffCopy[0].interval" type="text" />
                            </div>
                        </div>

                        <!-- Deploy Date*: (detail) -->
                        <div class="col-md-12" ng-if="view.DEPval == 'detail'">
                            <div class="col-md-3 col-md-offset-1"><label>Deploy Date:</label></div>
                            <div class="col-md-6">{{aSensStatus.time_stamp | date: 'MM/dd/yyyy hh:mm a'}}</div>
                        </div>
                        <!-- Deploy Date*: (edit) -->
                        <div class="form-group" ng-class="{'has-error':editDeployedForm.time_stamp.$invalid && editDeployedForm.time_stamp.$dirty}" ng-if="view.DEPval == 'edit'">
                            <label class="col-md-4 control-label topPad">
                                <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                                    <span class="glyphicon glyphicon-eye-open"></span>
                                </button> Deploy Date:
                                <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Required">
                                    <span class="glyphicon glyphicon-asterisk" style="color:#d00;font-size:xx-small;"></span>
                                </button>
                            </label>
                            <div class="col-md-6">
                                <datetimepicker hour-step="1" minute-step="1" ng-model="depStuffCopy[1].time_stamp" show-meridian="true"
                                                date-format="MM/dd/yyyy" readonly-date="false" readonly-time="false" date-options="dateOptions"
                                                hidden-time="false" hidden-date="false" show-spinners="true" required>
                                </datetimepicker>
                            </div>
                        </div>

                        <!-- Deploy timezone*: (detail)-->
                        <div class="col-md-12" ng-if="view.DEPval == 'detail'">
                            <div class="col-md-3 col-md-offset-1"><label>Time Zone:</label></div>
                            <div class="col-md-6">{{aSensStatus.time_zone}}</div>
                        </div>
                        <!-- Deploy timezone*: (edit)-->
                        <div class="form-group" ng-if="view.DEPval == 'edit'">
                            <label class="col-md-4 req control-label">
                                <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                                    <span class="glyphicon glyphicon-eye-open"></span>
                                </button> Time Zone:
                                <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Required">
                                    <span class="glyphicon glyphicon-asterisk" style="color:#d00;font-size:xx-small;"></span>
                                </button>
                            </label>
                            <div class="col-md-6">
                                <select class="form-control" name="time_zone" ng-model="depStuffCopy[1].time_zone" ng-options="vcm for vcm in timeZoneList" required>
                                    <option value=""></option>
                                </select>
                            </div>
                            <button type="button" class="borderLess pull-left" tooltip-placement="right" tooltip-append-to-body="false" uib-tooltip="Date/Time will be stored in UTC.">
                                <span class="glyphicon glyphicon-question-sign"></span>
                            </button>
                        </div>

                        <!-- Note: (detail)-->
                        <div class="col-md-12" ng-if="view.DEPval == 'detail'">
                            <div class="col-md-3 col-md-offset-1"><label>Note:</label></div>
                            <div class="col-md-6">{{aSensStatus.notes || '---'}}</div>
                        </div>
                        <!-- Note: (edit)-->
                        <div class="form-group" ng-if="view.DEPval == 'edit'">
                            <label class="col-md-4 control-label">
                                <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                                    <span class="glyphicon glyphicon-eye-open"></span>
                                </button> Note:
                            </label>
                            <div class="col-md-6">
                                <textarea class="form-control" name="notes" type="text" rows="3" ng-model="depStuffCopy[1].notes" />
                            </div>
                        </div>

                        <!-- Deploy Member: (detail) -->
                        <div class="col-md-12" ng-if="view.DEPval == 'detail'">
                            <div class="col-md-3 col-md-offset-1"><label>Deploy Member:</label></div>
                            <div class="col-md-6"><span>{{Deployer.fname}} {{Deployer.lname}}</span></div>
                        </div>
                        <!-- Deploy Member: (edit) -->
                        <div class="form-group" ng-if="view.DEPval == 'edit'">
                            <label class="col-md-4 control-label">
                                <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                                    <span class="glyphicon glyphicon-eye-open"></span>
                                </button> Deploy Member:
                            </label>
                            <div class="col-md-6">
                                <input type="hidden" name="member_id" ng-model="aSensStatus.member_id" />
                                <span>{{Deployer.fname}} {{Deployer.lname}}</span>
                            </div>
                        </div>

                        <!--edit button-->
                        <div class="form-group">
                            <div class="col-md-12">
                                <button ng-show="view.DEPval == 'detail'" type="button" class="btn btn-primary" ng-click="wannaEditDep()">Edit Sensor</button>
                                <button ng-show="view.DEPval == 'edit'" class="btn btn-primary" ng-click="save(editDeployedForm.$valid)">Save</button>
                                <button ng-show="view.DEPval == 'edit'" type="button" class="btn btn-warning" ng-click="cancelDepEdit()">Cancel Edit</button>
                            </div>
                        </div>
                        <br />
                    </fieldset>
                </form>
            </uib-accordion-group>

            <!--Sensor File Part-->
            <uib-accordion-group is-open="s.sFileOpen">
                <uib-accordion-heading>
                    <i style="margin-right:10px" class="pull-left glyphicon" ng-class="{'glyphicon-chevron-down': s.sFileOpen, 'glyphicon-chevron-right': !s.sFileOpen}"></i>
                    <span ng-class="{'redText':showFileForm}">Sensor Files Informations</span>
                </uib-accordion-heading>
                <div class="col-md-12">
                    <div class="col-md-5"><h4>Sensor Files</h4></div>
                    <div class="col-md-6" ng-if="!showFileForm" style="margin-top:14px">
                        <button type="button" class="borderLess" ng-click="showFile(0)" tooltip-placement="right" uib-tooltip="Upload a new File to this Sensor">
                            <span class="glyphicon glyphicon-plus"></span>
                        </button>
                    </div>
                    <br clear="all" />
                    <!-- list of existing files for this sensor -->
                    <div class="col-md-6" ng-if="DepSensorFiles.length > 0">
                        <ul style="padding-left: 0">
                            <li ng-repeat="f in DepSensorFiles" style="list-style:none;padding-bottom: 15px;">
                                <span class="col-sm-9 borderLess" style="padding:0">
                                    <a class="btn borderLess" style="padding:0" title="{{f.file_date | date: 'MM/dd/yyyy'}} ({{f.name || f.file_id}})" ng-click="showFile(f)">{{f.file_date | date: 'MM/dd/yyyy'}} ({{f.name || f.file_id}})</a>
                                </span>
                            </li>
                        </ul>
                    </div>
                    <!-- carousel of photo files -->
                    <div class="col-md-6" ng-if="depSensImageFiles.length > 0" style="height:120px;">
                        <uib-carousel interval="4000">
                            <uib-slide ng-repeat="f in depSensImageFiles">
                                <img ng-click="showImageModal(f.file_id)" ng-src="{{serverURL}}/Files/{{f.file_id}}/Item{{stamp}}" />
                                <div class="carousel-caption">
                                    <p>{{f.name || f.file_id}}</p>
                                </div>
                            </uib-slide>
                        </uib-carousel>
                    </div>
                    <br clear="all" />

                    <div ng-if="showFileForm">
                        <br clear="all" />
                        <hr />
                        <form class="form-horizontal" name="DepSenFILEForm">
                            <fieldset>
                                <!-- File Type* -->
                                <div class="form-group" ng-class="{'has-error':DepSenFILEForm.filetype_id.$invalid && DepSenFILEForm.filetype_id.$dirty}" style="margin:0;padding:0;padding-top:5px;">
                                    <label class="col-md-4 control-label req" for="filetype_id">
                                        File Type:
                                        <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Required">
                                            <span class="glyphicon glyphicon-asterisk" style="color:#d00;font-size:xx-small;"></span>
                                        </button>
                                    </label>
                                    <div class="col-md-6" ng-if="aFile.file_id == undefined">
                                        <select class="form-control" name="filetype_id" ng-model="aFile.filetype_id" ng-change="updateAgencyForCaption()" ng-options="ft.filetype_id as ft.filetype for ft in fileTypes" required>
                                            <option value=""></option>
                                        </select>
                                    </div>
                                    <div class="col-md-6">{{aFile.fileType}}</div>
                                </div>

                                <!--Upload Single Image with validations*-->
                                <div ng-if="aFile.file_id === undefined && aFile.filetype_id !== 8" class="form-group" style="margin:0;padding:0;padding-top:5px;">
                                    <label class="col-md-4 control-label" for="FILE">
                                        Upload File:
                                        <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Required">
                                            <span class="glyphicon glyphicon-asterisk" style="color:#d00;font-size:xx-small;"></span>
                                        </button>
                                    </label>
                                    <div class="col-md-8">
                                        <input type="file" max="500000" file-model="aFile.File" />
                                        <img ngf-thumbnail="aFile.File" style="height:60px" class="thumbnail">
                                    </div>
                                </div>
                                <br clear="all" />

                                <!--File URL (LINK file)-->
                                <div ng-if="aFile.filetype_id === 8" class="form-group" style="margin:0;padding:0;padding-top:5px;">
                                    <label class="col-md-4 control-label" for="name">File URL:</label>
                                    <div class="col-md-6">
                                        <input class="form-control" name="name" ng-model="aFile.name" type="text" />
                                    </div>
                                    <button type="button" class="col-md-1 borderLess pull-left" tooltip-placement="bottom" tooltip-append-to-body="false" uib-tooltip="Please link to persistent URLs or digital object identifier (doi) urls.">
                                        <span class="glyphicon glyphicon-question-sign"></span>
                                    </button>
                                </div>

                                <!--Data Processed by (Data) -->
                                <div ng-if="aFile.filetype_id === 2" class="form-group" style="margin:0;padding:0;padding-top:5px;">
                                    <label class="col-md-4 control-label" for="processor_id">Data Process By:</label>
                                    <div class="col-md-6">
                                        <span>{{processor.fname}} {{processor.lname}}</span>
                                    </div>
                                </div>
                                <!-- Date Collected/Processed* (data)-->
                                <div ng-if="aFile.filetype_id === 2" class="form-group" ng-class="{'has-error':DepSenFILEForm.collect_date.$invalid && DepSenFILEForm.collect_date.$dirty}" style="margin:0;padding:0;padding-top:5px;">
                                    <label class="col-md-4 control-label req" for="collect_date">
                                        Date Collected/Processed:
                                        <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Required">
                                            <span class="glyphicon glyphicon-asterisk" style="color:#d00;font-size:xx-small;"></span>
                                        </button>
                                    </label>
                                    <div class="col-md-4 input-group" style="padding-right:14px;padding-left:14px">
                                        <input class="form-control dateInputStyle" type="date" name="dfcd" uib-datepicker-popup="MM/dd/yyyy" show-weeks="false" is-open="datepickrs.dfcd" ng-model="datafile.collect_date" required />
                                        <span class="input-group-btn">
                                            <button class="btn btn-default" type="button" ng-click="open($event, 'dfcd')">
                                                <i class="glyphicon glyphicon-calendar" />
                                            </button>
                                        </span>
                                    </div>
                                </div>

                                <!--Source Name (photo)-->
                                <div class="form-group" ng-if="aFile.filetype_id === 1" ng-class="{'has-error':DepSenFILEForm.FULLname.$invalid && DepSenFILEForm.FULLname.$dirty}" style="margin:0;padding:0;padding-top:5px;">
                                    <label class="col-md-4 control-label req" for="source_id">
                                        Source Photographer:
                                        <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Required">
                                            <span class="glyphicon glyphicon-asterisk" style="color:#d00;font-size:xx-small;"></span>
                                        </button>
                                    </label>
                                    <div class="col-md-6">
                                        <input class="form-control" name="FULLname" ng-model="aSource.FULLname" type="text" required />
                                    </div>
                                </div>

                                <!--Source Name (all other)-->
                                <div class="form-group" ng-if="aFile.filetype_id  > 2" ng-class="{'has-error':DepSenFILEForm.FULLname.$invalid && DepSenFILEForm.FULLname.$dirty}" style="margin:0;padding:0;padding-top:5px;">
                                    <label class="col-md-4 control-label req" for="source_id">
                                        Source Name:
                                        <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Required">
                                            <span class="glyphicon glyphicon-asterisk" style="color:#d00;font-size:xx-small;"></span>
                                        </button>
                                    </label>
                                    <div class="col-md-6">
                                        <input class="form-control" name="FULLname" ng-model="aSource.FULLname" type="text" required />
                                    </div>
                                </div>

                                <!--Source Agency* (photo, allOther)-->
                                <div ng-if="aFile.filetype_id === 1 || aFile.filetype_id > 2" class="form-group" ng-class="{'has-error':DepSenFILEForm.agency_id.$invalid && DepSenFILEForm.agency_id.$dirty}" style="margin:0;padding:0;padding-top:5px;">
                                    <label class="col-md-4 control-label req" for="agency_id">
                                        Source Agency:
                                        <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Required">
                                            <span class="glyphicon glyphicon-asterisk" style="color:#d00;font-size:xx-small;"></span>
                                        </button>
                                    </label>
                                    <div class="col-md-6">
                                        <select class="form-control" name="agency_id" ng-model="aSource.agency_id" ng-change="updateAgencyForCaption()"
                                                ng-options="a.agency_id as a.agency_name for a in agencies" required>
                                            <option value=""></option>
                                        </select>
                                    </div>
                                </div>

                                <!-- Photo Date * (photo) -->
                                <div ng-if="aFile.filetype_id === 1" class="form-group" ng-class="{'has-error':DepSenFILEForm.photo_date.$invalid && DepSenFILEForm.photo_date.$dirty}" style="margin:0;padding:0;padding-top:5px;">
                                    <label class="col-md-4 control-label req" for="photo_date">
                                        Photo Date:
                                        <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Required">
                                            <span class="glyphicon glyphicon-asterisk" style="color:#d00;font-size:xx-small;"></span>
                                        </button>
                                    </label>
                                    <div class="col-md-4 input-group" style="padding-right:14px;padding-left:14px">
                                        <input class="form-control dateInputStyle" type="date" name="sd" uib-datepicker-popup="MM/dd/yyyy" show-weeks="false" is-open="datepickrs.sd" ng-model="aFile.photo_date" required />
                                        <span class="input-group-btn">
                                            <button class="btn btn-default" type="button" ng-click="open($event, 'sd')">
                                                <i class="glyphicon glyphicon-calendar" />
                                            </button>
                                        </span>
                                    </div>
                                </div>

                                <!-- Date Uploaded* (photo, data, allother) -->
                                <div ng-if="aFile.filetype_id > 0" class="form-group" ng-class="{'has-error':DepSenFILEForm.file_date.$invalid && DepSenFILEForm.file_date.$dirty}" style="margin:0;padding:0;padding-top:5px;">
                                    <label class="col-md-4 control-label req" for="file_date">
                                        Date Uploaded:
                                        <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Required">
                                            <span class="glyphicon glyphicon-asterisk" style="color:#d00;font-size:xx-small;"></span>
                                        </button>
                                    </label>
                                    <div class="col-md-4 input-group" style="padding-right:14px;padding-left:14px">
                                        <input class="form-control dateInputStyle" type="date" name="fd" uib-datepicker-popup="MM/dd/yyyy" show-weeks="false" is-open="datepickrs.fd" ng-model="aFile.file_date" required />
                                        <span class="input-group-btn">
                                            <button class="btn btn-default" type="button" ng-click="open($event, 'fd')">
                                                <i class="glyphicon glyphicon-calendar" />
                                            </button>
                                        </span>
                                    </div>
                                </div>

                                <!--Description*(photo, data, allother)-->
                                <div ng-if="aFile.filetype_id > 0" class="form-group" ng-class="{'has-error':DepSenFILEForm.description.$invalid && DepSenFILEForm.description.$dirty}" style="margin:0;padding:0;padding-top:5px;">
                                    <label class="col-md-4 control-label req" for="description">
                                        Description:
                                        <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Required">
                                            <span class="glyphicon glyphicon-asterisk" style="color:#d00;font-size:xx-small;"></span>
                                        </button>
                                    </label>
                                    <div class="col-md-6">
                                        <textarea class="form-control" id="description" type="text" rows="3" placeholder="Description" ng-model="aFile.description" required />
                                    </div>
                                    <button ng-show="aFile.filetype_id == 1" type="button" class="col-md-1 borderLess pull-left" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Populates in Photo caption below. If a person or people appear in photo include name(s). If non-USGS personnel, ensure consent to publish name in caption is given.">
                                        <span class="glyphicon glyphicon-question-sign"></span>
                                    </button>
                                </div>

                                <!-- show button for Chopper if  and file is present  ng-if="aFile.filetype_id === 2 && (sensor.sensor_type_id == 1 && (sensor.deployment_type_id == 1 || sensor.deployment_type_id == 2 || sensor.deployment_type_id == 3))"-->
                                <div class="form_group" ng-if="aFile.file_id == undefined && aFile.filetype_id == 2 && aSensor.sensor_type_id == 1 && aSensor.deployment_type_id < 4" style="padding-top: 10px;padding-bottom: 10px;">
                                    <label class="col-md-4 control-label"></label>
                                    <div class="col-md-9 col-md-offset-4 input-group" style="padding-right:14px;padding-left:14px">
                                        <!-- <label class="col-md-5" style="margin-top: 10px;"><input style="margin:0!important;" type="checkbox" class="col-md-1" name="daylightSavingsChop" ng-model="daylightSavingsChop.selected" ng-true-value="'true'" ng-false-value="'false'" /> &nbsp;&nbsp;Daylight Savings?</label> -->
                                        <button type="button" class="btn btn-primary pull-left" ng-click="runChopper()">Preview Data</button>
                                        <button type="button" style="float: inherit; margin-left: 15px;" class="col-md-1 borderLess" tooltip-placement="right-top" tooltip-append-to-body="false" tooltip-class="tooltip-wide"
                                                uib-tooltip="Upload a csv file outputted by HoboWare or TruWare software. (These refer to the specific csv files that the script will ingest for Hobo and TruBlue respectively). Depending on the size of the csv, this process can take up to a few minutes to run. Ensure the sensor has all required fields populated first."> <!--  Check Daylight Savings if data was recorded in Daylight Savings. -->
                                            <span class="glyphicon glyphicon-question-sign"></span>
                                        </button>
                                        <div ng-show="smlallLoaderGo"><img src="images/loading1.gif" /></div>
                                    </div>
                                </div>

                                <div ng-if="chopperResponse1 && aFile.file_id == undefined">
                                    <!-- highchart goes here -->
                                    <hc-chart id="chopperChart1" options="chartOptions1"></hc-chart>
                                </div>
                                <!-- Good Data Start Time* (data) -->
                                <div ng-if="aFile.filetype_id === 2" class="form-group" ng-class="{'has-error':DepSenFILEForm.good_start.$invalid && DepSenFILEForm.good_start.$dirty}" style="margin:0;padding:0;padding-top:5px;">
                                    <label class="col-md-4 control-label req" for="good_start" style="margin-top:4%">
                                        Good Data Start Time:
                                        <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Required">
                                            <span class="glyphicon glyphicon-asterisk" style="color:#d00;font-size:xx-small;"></span>
                                        </button>
                                    </label>
                                    <div class="col-md-6">
                                        <datetimepicker ng-model="datafile.good_start" show-meridian="true" date-format="MM/dd/yyyy" readonly-date="false" date-options="dateOptions"
                                                        hidden-time="false" hidden-date="false" show-spinners="true" date-opened="datepickrs.dfgs" date-ng-click="open($event, 'dfgs')" required>
                                        </datetimepicker>
                                    </div>
                                    <button style="margin-top:4%" type="button" class="col-md-1 borderLess pull-left" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Used by the processing scripts to clip irrelavent data.">
                                        <span class="glyphicon glyphicon-question-sign"></span>
                                    </button>
                                </div>

                                <!-- Good Data End Time* (data)-->
                                <div ng-if="aFile.filetype_id === 2" class="form-group" ng-class="{'has-error':DepSenFILEForm.good_end.$invalid && DepSenFILEForm.good_end.$dirty}" style="margin:0;padding:0;padding-top:5px;">
                                    <label class="col-md-4 control-label req" for="good_end" style="margin-top:4%">
                                        Good Data End Time:
                                        <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Required">
                                            <span class="glyphicon glyphicon-asterisk" style="color:#d00;font-size:xx-small;"></span>
                                        </button>
                                    </label>
                                    <div class="col-md-6">
                                        <datetimepicker ng-model="datafile.good_end" show-meridian="true" date-format="MM/dd/yyyy" readonly-date="false" date-options="dateOptions"
                                                        hidden-time="false" hidden-date="false" show-spinners="true" date-opened="datepickrs.dfge" date-ng-click="open($event, 'dfge')" required>
                                        </datetimepicker>

                                    </div>
                                    <button style="margin-top:4%" type="button" class="col-md-1 borderLess pull-left" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Used by the processing scripts to clip irrelavent data.">
                                        <span class="glyphicon glyphicon-question-sign"></span>
                                    </button>
                                </div>
                                <span class="error" ng-show="DepSenFILEForm.good_end.$error.higherThan">Max cannot be lower than min.</span>

                                <!-- Timezone*: -->
                                <div ng-if="aFile.filetype_id === 2" class="form-group" style="margin:0;padding:0;padding-top:5px;">
                                    <label class="col-md-4 control-label req">
                                        Time Zone:
                                        <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Required">
                                            <span class="glyphicon glyphicon-asterisk" style="color:#d00;font-size:xx-small;"></span>
                                        </button>
                                    </label>
                                    <div class="col-md-6">
                                        <select class="form-control" name="time_zone" ng-model="datafile.time_zone" ng-options="vcm for vcm in timeZoneList" required>
                                            <option value=""></option>
                                        </select>
                                    </div>
                                    <button type="button" class="col-md-1 borderLess pull-left" tooltip-placement="right" tooltip-append-to-body="false" uib-tooltip="Date/Time will be stored in UTC.">
                                        <span class="glyphicon glyphicon-question-sign"></span>
                                    </button>
                                </div>

                                <!-- Elevation -->
                                <div ng-if="aFile.filetype_id === 2" class="form-group" style="margin:0;padding:0;padding-top:5px;">
                                    <label class="col-md-4 control-label">Elevation:</label>
                                    <div class="col-md-6">
                                        <span class="radio-inline">
                                            <input type="radio" name="elevation_status" ng-model="datafile.elevation_status" value="Final" />Final
                                        </span>
                                        <span class="radio-inline">
                                            <input type="radio" name="elevation_status" ng-model="datafile.elevation_status" value="Arbitrary" />Arbitrary
                                        </span>
                                    </div>
                                </div>

                                <!--Photo Direction (photo)-->
                                <div ng-if="aFile.filetype_id === 1" class="form-group" style="margin:0;padding:0;padding-top:5px;">
                                    <label class="col-md-4 control-label" for="photo_direction">Photo Direction:</label>
                                    <div class="col-md-6">
                                        <input class="form-control" id="photo_direction" name="photo_direction" ng-model="aFile.photo_direction" type="text" />
                                    </div>
                                </div>

                                <!-- Photo Latitude (photo)-->
                                <div ng-if="aFile.filetype_id === 1" class="form-group" style="margin:0;padding:0;padding-top:5px;">
                                    <label class="col-md-4 control-label" for="latitude_dd">Photo Latitude <br /> (if different):</label>
                                    <div class="col-md-6">
                                        <input class="form-control" ng-keypress="isNum($event)" name="latitude_dd" id="latitude_dd" ng-model="aFile.latitude_dd"
                                               type="text" />
                                    </div>
                                </div>

                                <!--Photo Longitude (photo)-->
                                <div ng-if="aFile.filetype_id === 1" class="form-group" style="margin:0;padding:0;padding-top:5px;">
                                    <label class="col-md-4 control-label" for="longitude_dd">Photo Longitude <br /> (if different):</label>
                                    <div class="col-md-6">
                                        <input class="form-control" ng-keypress="isNum($event)" id="longitude_dd" name="longitude_dd" ng-model="aFile.longitude_dd"
                                               type="text" />
                                    </div>
                                </div>

                                <div ng-if="aFile.filetype_id === 1" class="form-group" style="margin:0;padding:0;padding-top:5px;">
                                    <label class="col-md-4 control-label" for="Caption">Preview Caption:</label>
                                    <div class="col-md-6">
                                        <span>
                                            Photo of {{aFile.description || ' (Description HERE) '}} at {{thisSensorSite.site_description}}, {{thisSensorSite.county}}, {{thisSensorSite.state}}, {{aFile.photo_date | date: 'MM/dd/yyyy' || ' Date taken HERE '}}. Photograph by {{aSource.FULLname || ' Source Name HERE ' }}, {{agencyNameForCap || ' Agency HERE '}}.
                                        </span>
                                    </div>
                                </div>

                                <!-- associated file (Deployed Sensor edit)-->
                                <div ng-if="aFile.file_id !== undefined && aFile.filetype_id !== 8" class="form-group" style="margin:0;padding:0;padding-top:12px;">
                                    <label class="col-md-4 control-label">Associated File:</label>
                                    <div class="col-md-6" style="padding-top: 12px;">
                                        <span ng-if="fileItemExists">
                                            <a target="_blank" title="Download file" ng-href="{{serverURL}}/Files/{{aFile.file_id}}/Item">{{aFile.name}}</a>
                                            <br />
                                            <img ng-if="isPhoto" style="height:80px;" ng-src="{{src}}" />
                                        </span>
                                        <span ng-if="!fileItemExists">-- Missing --</span>
                                        <!--ReUpload Single Image with validations*-->
                                        <div ng-if="!fileItemExists" class="form-group">
                                            <div class="col-md-7">
                                                <label class="custom-file-input" for="Upload" />
                                                <input id="Upload" type="file" max="500000" file-model="aFile.File" style="visibility: hidden">
                                                <div class="col-md-7 pull-left" ng-if="aFile.File.type == 'image/png' || aFile.File.type == 'image/jpeg' || aFile.File.type == 'image/gif'"><img ngf-thumbnail="aFile.File" style="height:60px" class="thumbnail"></div>
                                                <div class="col-md-7 pull-left" ng-if="aFile.File.type !== 'image/png' && aFile.File.type !== 'image/jpeg' && aFile.File.type !== 'image/gif'" style="overflow:auto">{{aFile.File.name}}</div>
                                                <div class="col-md-5">
                                                    <span ng-if="aFile.File">
                                                        Correct File?
                                                        <button ng-if="aFile.File" type="button" ng-click="saveFileUpload()">Upload</button>
                                                    </span>
                                                </div>
                                            </div>
                                        </div>
                                        <!-- change out the existing fileItem with a different one-->
                                        <div ng-if="fileItemExists" class="form-group">
                                            <div class="col-md-9">
                                                <label class="custom-file-inputChange" for="Upload" />
                                                <input id="Upload" type="file" max="500000" file-model="aFile.File1" style="visibility: hidden">
                                                <div class="col-md-7 pull-left" ng-if="aFile.File1.type == 'image/png' || aFile.File1.type == 'image/jpeg' || aFile.File1.type == 'image/gif'"><img ngf-thumbnail="aFile.File1" style="height:60px" class="thumbnail"></div>
                                                <div class="col-md-7 pull-left" ng-if="aFile.File1.type !== 'image/png' && aFile.File1.type !== 'image/jpeg' && aFile.File1.type !== 'image/gif'" style="overflow:auto">{{aFile.File1.name}}</div>
                                                <div class="col-md-5">
                                                    <span ng-if="aFile.File1">
                                                        Correct File?
                                                        <button ng-if="aFile.File1" type="button" ng-click="saveFileUpload()">Replace</button>
                                                    </span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div ng-show="!depSenfileIsUploading">
                                    <button class="btn btn-primary" ng-if="aFile.file_id != undefined" ng-click="saveFile(DepSenFILEForm.$valid)">Save File</button>
                                    <button type="button" class="btn btn-danger" ng-if="aFile.file_id != undefined" ng-click="deleteFile()">Delete File</button>
                                    <button class="btn btn-primary" ng-if="aFile.file_id == undefined" ng-click="createFile(DepSenFILEForm.$valid)">Create File</button>
                                    <button type="button" class="btn btn-warning" ng-click="cancelFile()">Close/Cancel File</button>
                                </div>
                                <div ng-show="depSenfileIsUploading"><img src="images/fileUpload.gif" /></div>
                            </fieldset>
                        </form>
                    </div>
                </div>
            </uib-accordion-group>

            <!-- sensor files in nwis connection part-->
            <div ng-if="sensorDataNWIS" style="margin-top:5px;">
                <uib-accordion-group is-open="s.NWISFileOpen">
                    <uib-accordion-heading>
                        <i style="margin-right:10px" class="pull-left glyphicon" ng-class="{'glyphicon-chevron-down': s.NWISFileOpen, 'glyphicon-chevron-right': !s.NWISFileOpen}"></i>
                        <span ng-class="{'redText':showNWISFileForm}">NWIS Connection</span>
                        <button type="button" class="col-md-1 borderLess pull-right" tooltip-placement="left" tooltip-append-to-body="false" uib-tooltip-html="nwisHeaderTip">
                            <span class="glyphicon glyphicon-question-sign"></span>
                        </button>
                    </uib-accordion-heading>
                    <div class="col-md-12">
                        <div class="col-md-5"><h4>NWIS metadata for sensor</h4></div>
                        <div class="col-md-2" ng-if="!showNWISFileForm" style="margin-top:14px">
                            <button type="button" class="borderLess" ng-click="showNWISFile(0)" tooltip-placement="top" uib-tooltip="Add file metadata to this Sensor">
                                <span class="glyphicon glyphicon-plus"></span>
                            </button>
                        </div>
                        <br clear="all" />
                        <!-- list of existing files for this op -->
                        <div class="col-md-6" ng-if="sensorNWISFiles.length > 0">
                            <ul style="padding-left: 0">
                                <li ng-repeat="f in sensorNWISFiles" style="list-style:none;padding-bottom: 15px;">
                                    <span class="col-sm-9 borderLess" style="padding:0">
                                        <a class="btn borderLess" style="padding:0" title="{{f.file_date | date: 'MM/dd/yyyy'}} ({{f.name || f.file_id}})" ng-click="showNWISFile(f)">{{f.file_date | date: 'MM/dd/yyyy'}} ({{f.name || f.file_id}})</a>
                                    </span>
                                </li>
                            </ul>
                        </div>
                        <div ng-if="showNWISFileForm">
                            <br clear="all" /><hr />
                            <form class="form-horizontal" name="NWISSenFILEForm">
                                <fieldset>
                                    <!-- File Type* -->
                                    <div class="form-group" style="margin:0;padding:0">
                                        <label class="col-md-4 control-label">File Type:</label>
                                        <div class="col-md-6" style="margin-top:14px">{{NWISFile.FileType}}</div>
                                    </div>

                                    <br clear="all" />

                                    <!--File URL-->
                                    <div class="form-group" style="margin:0;padding:0">
                                        <label class="col-md-4 control-label" for="name">File URL:</label>
                                        <div class="col-md-6">
                                            <input class="form-control" name="name" title="{{NWISFile.name}}" ng- ng-model="NWISFile.name" type="text" />
                                        </div>
                                        <button type="button" class="col-md-1 borderLess pull-left" tooltip-placement="bottom" tooltip-append-to-body="false" uib-tooltip="Auto generated from USGS Station ID. Correct if necessary.">
                                            <span class="glyphicon glyphicon-question-sign"></span>
                                        </button>
                                    </div>

                                    <!--Data Processed by -->
                                    <div class="form-group" style="margin:0;padding:0">
                                        <label class="col-md-4 control-label" for="processor_id">Data Process By:</label>
                                        <div class="col-md-6" style="margin-top:14px">
                                            <span>{{nwisProcessor.fname}} {{nwisProcessor.lname}}</span>
                                        </div>
                                    </div>
                                    <!-- Date Collected/Processed* (data)-->
                                    <div class="form-group" ng-class="{'has-error':NWISSenFILEForm.collect_date.$invalid && NWISSenFILEForm.collect_date.$dirty}" style="margin:0;padding:0">
                                        <label class="col-md-4 control-label req" for="collect_date">
                                            Date Collected/Processed:
                                            <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Required">
                                                <span class="glyphicon glyphicon-asterisk" style="color:#d00;font-size:xx-small;"></span>
                                            </button>
                                        </label>
                                        <div class="col-md-4 input-group" style="padding-right:14px;padding-left:14px">
                                            <input class="form-control dateInputStyle" type="date" name="dfcd" uib-datepicker-popup="MM/dd/yyyy" show-weeks="false" is-open="datepickrs.dfcd" ng-model="NWISDF.collect_date" required />
                                            <span class="input-group-btn">
                                                <button class="btn btn-default" type="button" ng-click="open($event, 'dfcd')">
                                                    <i class="glyphicon glyphicon-calendar" />
                                                </button>
                                            </span>
                                        </div>
                                    </div>

                                    <!-- Date Uploaded* -->
                                    <div class="form-group" ng-class="{'has-error':NWISSenFILEForm.file_date.$invalid && NWISSenFILEForm.file_date.$dirty}" style="margin:0;padding:0">
                                        <label class="col-md-4 control-label req" for="file_date">
                                            Date Uploaded:
                                            <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Required">
                                                <span class="glyphicon glyphicon-asterisk" style="color:#d00;font-size:xx-small;"></span>
                                            </button>
                                        </label>
                                        <div class="col-md-4 input-group" style="padding-right:14px;padding-left:14px">
                                            <input class="form-control dateInputStyle" type="date" name="fd" uib-datepicker-popup="MM/dd/yyyy" show-weeks="false" is-open="datepickrs.fd" ng-model="NWISFile.file_date" required />
                                            <span class="input-group-btn">
                                                <button class="btn btn-default" type="button" ng-click="open($event, 'fd')">
                                                    <i class="glyphicon glyphicon-calendar" />
                                                </button>
                                            </span>
                                        </div>
                                    </div>

                                    <!--Description*-->
                                    <div class="form-group" ng-class="{'has-error':NWISSenFILEForm.description.$invalid && NWISSenFILEForm.description.$dirty}" style="margin:0;padding:0">
                                        <label class="col-md-4 control-label req" for="description">
                                            Description:
                                            <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Required">
                                                <span class="glyphicon glyphicon-asterisk" style="color:#d00;font-size:xx-small;"></span>
                                            </button>
                                        </label>
                                        <div class="col-md-6">
                                            <textarea class="form-control" id="description" type="text" rows="3" placeholder="Description" ng-model="NWISFile.description" required />
                                        </div>
                                    </div>

                                    <!-- Good Data Start Time* (data) -->
                                    <div class="form-group" ng-class="{'has-error':NWISSenFILEForm.good_start.$invalid && NWISSenFILEForm.good_start.$dirty}" style="margin:0;padding:0">
                                        <label class="col-md-4 control-label req" for="good_start" style="margin-top:4%">
                                            Good Data Start Time:
                                            <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Required">
                                                <span class="glyphicon glyphicon-asterisk" style="color:#d00;font-size:xx-small;"></span>
                                            </button>
                                        </label>
                                        <div class="col-md-6">
                                            <datetimepicker ng-model="NWISDF.good_start" show-meridian="true" date-format="MM/dd/yyyy" readonly-date="false" date-options="dateOptions"
                                                            hidden-time="false" hidden-date="false" show-spinners="true" date-opened="datepickrs.dfgs" date-ng-click="open($event, 'dfgs')" required>
                                            </datetimepicker>
                                        </div>
                                        <button style="margin-top:4%" type="button" class="col-md-1 borderLess pull-left" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Used by the processing scripts to clip irrelavent data.">
                                            <span class="glyphicon glyphicon-question-sign"></span>
                                        </button>
                                    </div>

                                    <!-- Good Data End Time* (data)-->
                                    <div class="form-group" ng-class="{'has-error':NWISSenFILEForm.good_end.$invalid && NWISSenFILEForm.good_end.$dirty}" style="margin:0;padding:0">
                                        <label class="col-md-4 control-label req" for="good_end" style="margin-top:4%">
                                            Good Data End Time:
                                            <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Required">
                                                <span class="glyphicon glyphicon-asterisk" style="color:#d00;font-size:xx-small;"></span>
                                            </button>
                                        </label>
                                        <div class="col-md-6">
                                            <datetimepicker ng-model="NWISDF.good_end" show-meridian="true" date-format="MM/dd/yyyy" readonly-date="false" date-options="dateOptions"
                                                            hidden-time="false" hidden-date="false" show-spinners="true" date-opened="datepickrs.dfge" date-ng-click="open($event, 'dfge')" required>
                                            </datetimepicker>
                                        </div>
                                        <button style="margin-top:4%" type="button" class="col-md-1 borderLess pull-left" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Used by the processing scripts to clip irrelavent data.">
                                            <span class="glyphicon glyphicon-question-sign"></span>
                                        </button>
                                    </div>

                                    <!-- Timezone*: -->
                                    <div class="form-group" style="margin:0;padding:0">
                                        <label class="col-md-4 control-label req">
                                            Time Zone:
                                            <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Required">
                                                <span class="glyphicon glyphicon-asterisk" style="color:#d00;font-size:xx-small;"></span>
                                            </button>
                                        </label>
                                        <div class="col-md-6">
                                            <select class="form-control" name="time_zone" ng-model="NWISDF.time_zone" ng-options="vcm for vcm in timeZoneList" required>
                                                <option value=""></option>
                                            </select>
                                        </div>
                                        <button type="button" class="col-md-1 borderLess pull-left" tooltip-placement="right" tooltip-append-to-body="false" uib-tooltip="Date/Time will be stored in UTC.">
                                            <span class="glyphicon glyphicon-question-sign"></span>
                                        </button>
                                    </div>

                                    <!-- Elevation -->
                                    <div class="form-group" style="margin:0;padding:0">
                                        <label class="col-md-4 control-label">Elevation:</label>
                                        <div class="col-md-6">
                                            <span class="radio-inline">
                                                <input type="radio" name="elevation_status" ng-model="NWISDF.elevation_status" value="Final" />Final
                                            </span>
                                            <span class="radio-inline">
                                                <input type="radio" name="elevation_status" ng-model="NWISDF.elevation_status" value="Arbitrary" />Arbitrary
                                            </span>
                                        </div>
                                    </div>
                                    <div ng-show="!depNWISSenfileIsUploading">
                                        <button class="btn btn-primary" ng-if="NWISFile.file_id != undefined" ng-click="saveNWISFile(NWISSenFILEForm.$valid)">Save NWIS File Info</button>
                                        <button type="button" class="btn btn-danger" ng-if="NWISFile.file_id != undefined" ng-click="deleteNWISFile()">Delete NWIS File Info</button>
                                        <button class="btn btn-primary" ng-if="NWISFile.file_id == undefined" ng-click="createNWISFile(NWISSenFILEForm.$valid)">Create NWIS File Info</button>
                                        <button type="button" class="btn btn-warning" ng-click="cancelNWISFile()">Close/Cancel NWIS File Info</button>
                                    </div>
                                    <div ng-show="depNWISSenfileIsUploading"><img src="images/fileUpload.gif" /></div>
                                </fieldset>
                            </form>
                        </div>
                    </div>
                </uib-accordion-group>
            </div>
        </uib-accordion>
    </div>
    <div class="modal-footer">
        <div class="form-group">
            <div class="col-md-12">
                <button type="button" class="btn btn-danger" ng-disabled="showFileForm || showNWISFileForm" ng-click="deleteS()">Delete Sensor</button>
                <button type="button" class="btn btn-warning" ng-disabled="showFileForm || showNWISFileForm" ng-click="cancel()">Close</button>
            </div>
        </div>
    </div>
</script>

<!-- MODAL for Retrieving a Sensor-->
<script type="text/ng-template" id="SensorRetrievalModal.html">
    <div class="modal-header">
        <h3 class="modal-title">Retrieve Sensor<button class="close" type="button" ng-click="cancel()" aria-hidden="true" style="color:gray;">&times;</button></h3>
    </div>

    <form class="form-horizontal" name="SensorFormR">
        <fieldset>
            <div class="modal-body">
                <label>Deployed Sensor Information</label>
                <!-- Event: -->
                <div class="col-md-12">
                    <div class="col-md-4 col-md-offset-1"><label>Event:</label></div>
                    <div class="col-md-6">{{EventName}}</div>
                </div>
                <!-- Sensor Type: -->
                <div class="col-md-12">
                    <div class="col-md-4 col-md-offset-1"><label>Sensor Type:</label></div>
                    <div class="col-md-6">{{aSensor.sensorType || '---'}}</div>
                </div>
                <!-- Sensor Brand: -->
                <div class="col-md-12">
                    <div class="col-md-4 col-md-offset-1"><label>Sensor Brand:</label></div>
                    <div class="col-md-6">{{aSensor.sensorBrand || '---'}}</div>
                </div>
                <!-- Serial Number: -->
                <div class="col-md-12">
                    <div class="col-md-4 col-md-offset-1"><label>Serial Number:</label></div>
                    <div class="col-md-6">{{aSensor.serial_number || '---'}}</div>
                </div>
                <!-- Housing Serial Number: -->
                <div class="col-md-12">
                    <div class="col-md-4 col-md-offset-1"><label>Housing Serial Number:</label></div>
                    <div class="col-md-6">{{aSensor.housing_serial_number || '---'}}</div>
                </div>
                <!-- Housing Types: -->
                <div class="col-md-12">
                    <div class="col-md-4 col-md-offset-1"><label>Housing Types:</label></div>
                    <div class="col-md-6">{{aSensor.housingType || '---'}}</div>
                </div>
                <!--Tapedowns-->
                <div class="col-md-12" ng-show="DEPtapeDownTable.length > 0">
                    <hr class="col-md-9 col-md-offset-1" />

                    <div class="col-md-4 col-md-offset-1"><label>Tapedowns:</label></div>
                    <div class="col-md-8 col-md-offset-1">
                        <table class="table table-condensed">
                            <thead>
                                <tr>
                                    <td>Datum Location</td>
                                    <td>Elevation</td>
                                    <td class="col-md-1" style="text-align:center">Offset Correction</td>
                                    <td class="col-md-1" style="text-align:center">Water Surface</td>
                                    <td class="col-md-1" style="text-align:center">Ground Surface</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr ng-repeat="dt in DEPtapeDownTable">
                                    <td>{{dt.op_name}}</td>
                                    <td>{{dt.elevation}} {{dt.Vdatum}}</td>
                                    <td style="text-align:center">{{dt.offset_correction}}</td>
                                    <td style="text-align:center">{{dt.water_surface}}</td>
                                    <td style="text-align:center">{{dt.ground_surface}}</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="col-md-12">
                        <div class="col-md-4 col-md-offset-1"><label>Sensor Elevation:</label></div>
                        <div class="col-md-6">{{depSensStatus.sensor_elevation || '---'}}</div>
                    </div>
                    <div class="col-md-12">
                        <div class="col-md-4 col-md-offset-1"><label>Water Surface Elevation:</label></div>
                        <div class="col-md-6">{{depSensStatus.ws_elevation || '---'}}</div>
                    </div>
                    <div class="col-md-12">
                        <div class="col-md-4 col-md-offset-1"><label>Ground Elevation:</label></div>
                        <div class="col-md-6">{{depSensStatus.gs_elevation || '---'}}</div>
                    </div>
                    <div class="col-md-12">
                        <div class="col-md-4 col-md-offset-1"><label>In feet above:</label></div>
                        <div class="col-md-6">{{depSensStatus.VDatum || '---'}}</div>
                    </div>
                    <hr class="col-md-9 col-md-offset-1" />
                </div>
                <!-- Vented (only if Sensor Type is Pressure Transducer)-->
                <div class="col-md-12" ng-show="aSensor.sensor_type_id == 1">
                    <div class="col-md-4 col-md-offset-1"><label>Vented:</label></div>
                    <div class="col-md-6">{{aSensor.vented ||  '---'}}</div>
                </div>
                <!-- Deployment Type: -->
                <div class="col-md-12">
                    <div class="col-md-4 col-md-offset-1"><label>Deployment Type:</label></div>
                    <div class="col-md-6">{{aSensor.deploymentType || '---'}}</div>
                </div>
                <!-- Location Description: -->
                <div class="col-md-12">
                    <div class="col-md-4 col-md-offset-1"><label>Location Description:</label></div>
                    <div class="col-md-6">{{aSensor.location_description || '---'}}</div>
                </div>
                <!-- Interval: -->
                <div class="col-md-12">
                    <div class="col-md-4 col-md-offset-1"><label>Interval:</label></div>
                    <div class="col-md-6">{{aSensor.interval || '---'}} <span ng-show='aSensor.interval'>seconds</span></div>
                </div>
                <!-- Deploy Date: -->
                <div class="col-md-12">
                    <div class="col-md-4 col-md-offset-1"><label>Deploy Date and Time:</label></div>
                    <div class="col-md-6">{{depSensStatus.time_stamp | date: 'MM/dd/yyyy hh:mm a' }} {{depSensStatus.time_zone}}</div>
                </div>
                <!-- Note: -->
                <div class="col-md-12">
                    <div class="col-md-4 col-md-offset-1"><label>Note:</label></div>
                    <div class="col-md-6">{{depSensStatus.notes || '---'}}</div>
                </div>
                <!-- Deploy Member: -->
                <div class="col-md-12">
                    <div class="col-md-4 col-md-offset-1"><label>Deploy Member:</label></div>
                    <div class="col-md-6">{{Deployer.fname}} {{Deployer.lname}}</div>
                </div>
                <br clear="all" />
                <hr />
                <label>Retrieval Information</label>
                <!-- Status Type:* -->
                <div class="form-group" ng-class="{'has-error':SensorFormR.status_type_id.$invalid && SensorFormR.status_type_id.$dirty}">
                    <label class="col-md-5 control-label req" for="status_type_id">
                        <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                            <span class="glyphicon glyphicon-eye-open"></span>
                        </button> Status:
                        <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Required">
                            <span class="glyphicon glyphicon-asterisk" style="color:#d00;font-size:xx-small;"></span>
                        </button>
                    </label>
                    <div class="col-md-6">
                        <select class="form-control" name="status_type_id" ng-model="aRetrieval.status_type_id"
                                ng-options="s.status_type_id as s.status for s in statusTypeList" required>
                            <option value=""></option>
                        </select>
                    </div>
                </div>

                <!-- Collection Condition:* -->
                <div class="form-group" ng-class="{'has-error':SensorFormR.inst_collection_id.$invalid && SensorFormR.inst_collection_id.$dirty}">
                    <label class="col-md-5 control-label req" for="inst_collection_id">
                        <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                            <span class="glyphicon glyphicon-eye-open"></span>
                        </button> Collection Conditions:
                        <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Required">
                            <span class="glyphicon glyphicon-asterisk" style="color:#d00;font-size:xx-small;"></span>
                        </button>
                    </label>
                    <div class="col-md-6">
                        <select class="form-control" name="inst_collection_id" ng-model="aSensor.inst_collection_id"
                                ng-options="ins.id as ins.condition for ins in collectCondList" required>
                            <option value=""></option>
                        </select>
                    </div>
                </div>

                <!-- Note: -->
                <div class="form-group">
                    <label class="col-md-5 control-label" for="notes">
                        <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                            <span class="glyphicon glyphicon-eye-open"></span>
                        </button> Note:
                    </label>
                    <div class="col-md-6">
                        <textarea class="form-control" name="notes" type="text" rows="3" ng-model="aRetrieval.notes" elastic />
                    </div>
                </div>

                <!-- Retrieve Time: * -->
                <div class="form-group" ng-class="{'has-error':SensorFormR.time_stamp.$invalid && SensorFormR.time_stamp.$dirty}">
                    <label class="col-md-5 control-label req" style="margin-top:3%" for="time_stamp">
                        <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                            <span class="glyphicon glyphicon-eye-open"></span>
                        </button> Date and Time:
                        <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Required">
                            <span class="glyphicon glyphicon-asterisk" style="color:#d00;font-size:xx-small;"></span>
                        </button>
                    </label>
                    <div class="col-md-6">
                        <datetimepicker hour-step="1" minute-step="1" ng-model="aRetrieval.time_stamp" show-meridian="true" id="retrievalDate"
                                        date-format="MM/dd/yyyy" readonly-date="false" readonly-time="false" date-options="dateOptions"
                                        hidden-time="false" hidden-date="false" show-spinners="true" ng-change="date_change(aRetrieval.time_stamp)">
                        </datetimepicker>
                    </div>
                </div>

                <!-- Time Zone:* -->
                <div class="form-group">
                    <label class="col-md-5 control-label" for="time_zone">
                        <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                            <span class="glyphicon glyphicon-eye-open"></span>
                        </button> Time Zone:
                        <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Required">
                            <span class="glyphicon glyphicon-asterisk" style="color:#d00;font-size:xx-small;"></span>
                        </button>
                    </label>
                    <div class="col-md-6">
                        <select class="form-control" name="time_zone" ng-model="aRetrieval.time_zone"
                                ng-options="vcm for vcm in timeZoneList">
                            <option value=""></option>
                        </select>
                    </div>
                    <button type="button" class="borderLess" tooltip-placement="right" tooltip-append-to-body="false" uib-tooltip="Date/Time will be stored in UTC.">
                        <span class="glyphicon glyphicon-question-sign"></span>
                    </button>
                </div>

                <!-- -------------------------- START TAPEDOWN SECTION --------------------------------  -->
                <uib-accordion close-others="false">
                    <uib-accordion-group is-open="tapedownOpen">
                        <uib-accordion-heading>
                            <i style="margin-right:10px" class="pull-left glyphicon" ng-class="{'glyphicon-chevron-down': tapedownOpen, 'glyphicon-chevron-right': !tapedownOpen}"></i>
                            Tape Down Information
                            <button type="button" class="col-md-1 borderLess pull-right" tooltip-placement="left" tooltip-append-to-body="false" uib-tooltip="These elevations and tape down data are used for both field activities and final products. Please pay attention to how your data is entered.">
                                <span class="glyphicon glyphicon-question-sign"></span>
                            </button>
                        </uib-accordion-heading>
                        <!--Add Tapedown button-->
                        <div ng-if="OPsPresent" class="form-group">
                            <label class="col-md-3 control-label">Datum Location(s):</label>
                            <div class="col-md-6">
                                <div isteven-multi-select
                                     input-model="OPsForTapeDown"
                                     container="body"
                                     output-model="OPMeasure"
                                     button-label="name"
                                     item-label="name"
                                     on-item-click="OPchosen(data)"
                                     tick-property="selected"
                                     helper-elements="filter">
                                </div>
                            </div>
                        </div><!-- end if OPsArePresent-->
                        <div ng-if="!OPsPresent" class="form-group">
                            <label class="col-md-3 control-label" for="TAPEDOWNBTN">Tape Down:</label>
                            <div class="col-md-6">
                                No Datum Locations have been added to this site yet to use for a tape down
                            </div>
                        </div>
                        <!--start add tapedown area -->
                        <br clear="all" />
                        <div ng-show="tapeDownTable.length > 0">
                            <div class="pull-right col-md-6"><em>Note: these are not used for any calculations but are to facilitate field activities</em></div>
                            <table class="table table-condensed">
                                <thead>
                                    <tr>
                                        <th>
                                            <label>
                                                <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                                                    <span class="glyphicon glyphicon-eye-open"></span>
                                                </button> Datum Location
                                            </label>
                                        </th>
                                        <th>Elevation</th>
                                        <th class="col-md-2">
                                            <label>
                                                <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                                                    <span class="glyphicon glyphicon-eye-open"></span>
                                                </button> Offset
                                                <button type="button" class="borderLess" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="From the datum location to the sensor orifice.">
                                                    <span class="glyphicon glyphicon-question-sign"></span>
                                                </button><br />
                                                Correction
                                            </label>
                                        </th>
                                        <th class="col-md-2">
                                            <label>
                                                <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                                                    <span class="glyphicon glyphicon-eye-open"></span>
                                                </button> Water
                                                <br />
                                                Surface
                                                <button type="button" class="borderLess" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="From the datum location to the water surface.">
                                                    <span class="glyphicon glyphicon-question-sign"></span>
                                                </button>
                                            </label>
                                        </th>
                                        <th class="col-md-2">
                                            <label>
                                                <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                                                    <span class="glyphicon glyphicon-eye-open"></span>
                                                </button> Ground
                                                <br />
                                                Surface
                                                <button type="button" class="borderLess" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="From the datum location to the ground surface.">
                                                    <span class="glyphicon glyphicon-question-sign"></span>
                                                </button>
                                            </label>
                                        </th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr ng-repeat="t in tapeDownTable">
                                        <td>{{t.op_name}}<input type="hidden" ng-model="t.objective_type_id" /><input type="hidden" ng-model="t.op_measurements_id" /></td>
                                        <td>
                                            {{t.elevation}} {{t.Vdatum}}
                                        </td>
                                        <td><input class="form-control" ng-keypress="isNum($event)" ng-model="t.offset_correction" /></td>
                                        <td><input class="form-control" ng-keypress="isNum($event)" ng-model="t.water_surface" /></td>
                                        <td><input class="form-control" ng-keypress="isnum($event)" ng-model="t.ground_surface" /></td>
                                    </tr>
                                </tbody>
                            </table>
                            <!-- Sensor status fields for tapedown -->
                            <div class="col-md-10">
                                <div class="form-group" style="margin-bottom:0">
                                    <label class="col-md-6 control-label" for="sensor_elevation">
                                        <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                                            <span class="glyphicon glyphicon-eye-open"></span>
                                        </button> Sensor Elevation:
                                    </label>
                                    <div class="col-md-5">
                                        <input class="form-control" ng-keypress="isNum($event)" name="sensor_elevation" ng-model="aRetrieval.sensor_elevation" type="text" />
                                    </div>
                                    <button type="button" class="col-md-1 borderLess pull-left" tooltip-placement="right-top" tooltip-append-to-body="false" uib-tooltip="Using the offset correction, elevation of the sensor orifice." tooltip-class="tooltip-wide">
                                        <span class="glyphicon glyphicon-question-sign"></span>
                                    </button>
                                </div>

                                <div class="form-group" style="margin-bottom:0">
                                    <label class="col-md-6 control-label" for="ws_elevation">
                                        <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                                            <span class="glyphicon glyphicon-eye-open"></span>
                                        </button> Water Surface Elevation:
                                    </label>
                                    <div class="col-md-5">
                                        <input class="form-control" ng-keypress="isNum($event)" name="ws_elevation" ng-model="aRetrieval.ws_elevation" type="text" />
                                    </div>
                                    <button type="button" class="col-md-1 borderLess pull-left" tooltip-placement="right-top" tooltip-append-to-body="false" uib-tooltip="Using the water surface tape down, elevation of the water surface." tooltip-class="tooltip-wide">
                                        <span class="glyphicon glyphicon-question-sign"></span>
                                    </button>
                                </div>

                                <div class="form-group" style="margin-bottom:0">
                                    <label class="col-md-6 control-label" for="gs_elevation">
                                        <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                                            <span class="glyphicon glyphicon-eye-open"></span>
                                        </button> Ground Elevation:
                                    </label>
                                    <div class="col-md-5">
                                        <input class="form-control" ng-keypress="isNum($event)" name="gs_elevation" ng-model="aRetrieval.gs_elevation" type="text" />
                                    </div>
                                    <button type="button" class="col-md-1 borderLess pull-left" tooltip-placement="right-top" tooltip-append-to-body="false" uib-tooltip="Using the ground surface tape down, elevation of the ground surface." tooltip-class="tooltip-wide">
                                        <span class="glyphicon glyphicon-question-sign"></span>
                                    </button>
                                </div>

                                <div class="form-group">
                                    <label class="col-md-6 control-label req" for="vdatum_id">
                                        <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                                            <span class="glyphicon glyphicon-eye-open"></span>
                                        </button> In feet above:
                                    </label>
                                    <div class="col-md-5">
                                        <select class="form-control" id="vdatum_id" name="vdatum_id" ng-model="aRetrieval.vdatum_id"
                                                ng-options="vd.datum_id as vd.datum_abbreviation for vd in vertDatumList">
                                            <option value=""></option>
                                        </select>
                                    </div>
                                </div>
                                <div class="pull-left col-md-12"><em>Note: these elevations are used in the sensor processing and the final products</em></div>
                            </div>
                        </div>
                        <br clear="all" />
                    </uib-accordion-group>
                </uib-accordion>

                <!-- -------------------------- END TAPEDOWN SECTION --------------------------------  -->
                <!-- Retrieve Member: -->
                <div class="form-group">
                    <label class="col-md-5 control-label">
                        <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                            <span class="glyphicon glyphicon-eye-open"></span>
                        </button> Retrieve Member:
                        <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Required">
                            <span class="glyphicon glyphicon-asterisk" style="color:#d00;font-size:xx-small;"></span>
                        </button>
                    </label>
                    <div class="col-md-6" style="margin-top:12px">{{Retriever.fname}} {{Retriever.lname}}</div>
                </div>
            </div>
            <div class="modal-footer">
                <div class="form-group">
                    <div class="col-md-12">
                        <button class="btn btn-primary" ng-if="whichButton == 'Retrieve'" ng-click="retrieveS(SensorFormR.$valid)">Submit</button>
                        <button type="button" class="btn btn-warning" ng-click="cancel()">Cancel</button>
                    </div>
                </div>
            </div>
        </fieldset>
    </form>
</script>

<!-- MODAL for full Sensor editing (deployed and retrieved states)-->
<script type="text/ng-template" id="fullSensormodal.html">
    <div class="modal-header">
        <h3 class="modal-title">Full Sensor<button class="close" type="button" ng-click="cancel()" aria-hidden="true" style="color:gray;">&times;</button></h3>
    </div>
    <div class="modal-body">
        <!--Deployed Sensor Part-->
        <uib-accordion close-others="false">
            <!--Deployed Sensor Part-->
            <uib-accordion-group is-open="s.depOpen">
                <uib-accordion-heading>
                    <i style="margin-right:10px" class="pull-left glyphicon" ng-class="{'glyphicon-chevron-down': s.depOpen, 'glyphicon-chevron-right': !s.depOpen}"></i>
                    <span ng-class="{'redText':view.DEPval == 'edit'}">Deployed Sensor Information</span>
                </uib-accordion-heading>
                <form name="editableDeployedForm">
                    <fieldset>
                        <!-- Event: -->
                        <div class="col-md-12" ng-if="view.DEPval == 'detail'">
                            <div class="col-md-4 col-md-offset-1"><label>Event:</label></div>
                            <div class="col-md-6">{{EventName}}</div>
                        </div>
                        <!-- Event: -->
                        <div class="form-group" ng-if="view.DEPval == 'edit'">
                            <label class="col-md-4 col-md-offset-1 control-label">
                                <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                                    <span class="glyphicon glyphicon-eye-open"></span>
                                </button> Event:
                            </label>
                            <div class="col-md-6">{{EventName}}</div>
                        </div>

                        <!-- Sensor Type*: (detail) -->
                        <div class="col-md-12" ng-if="view.DEPval == 'detail'">
                            <div class="col-md-4 col-md-offset-1"><label>Sensor Type:</label></div>
                            <div class="col-md-6">{{sensor.sensorType || '---'}}</div>
                        </div>
                        <!-- Sensor Type*: (edit) -->
                        <div class="form-group" ng-if="view.DEPval == 'edit'">
                            <label class="col-md-4 col-md-offset-1 req control-label">
                                <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                                    <span class="glyphicon glyphicon-eye-open"></span>
                                </button> Sensor Type:
                                <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Required">
                                    <span class="glyphicon glyphicon-asterisk" style="color:#d00;font-size:xx-small;"></span>
                                </button>
                            </label>
                            <div class="col-md-6">
                                <select class="form-control" name="sensor_type_id" ng-model="depStuffCopy[0].sensor_type_id"
                                        ng-options="s.sensor_type_id as s.sensor for s in sensorTypeList" ng-change="getDepTypes(depStuffCopy[0])" required>
                                    <option value=""></option>
                                </select>
                            </div>
                        </div>

                        <!-- Sensor Brand*: (detail) -->
                        <div class="col-md-12" ng-if="view.DEPval == 'detail'">
                            <div class="col-md-4 col-md-offset-1"><label>Sensor Brand:</label></div>
                            <div class="col-md-6">{{sensor.sensorBrand || '---'}}</div>
                        </div>
                        <!-- Sensor Brand*: (edit) -->
                        <div class="form-group" ng-if="view.DEPval == 'edit'">
                            <label class="col-md-4 col-md-offset-1 req control-label">
                                <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                                    <span class="glyphicon glyphicon-eye-open"></span>
                                </button> Sensor Brand:
                                <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Required">
                                    <span class="glyphicon glyphicon-asterisk" style="color:#d00;font-size:xx-small;"></span>
                                </button>
                            </label>
                            <div class="col-md-6">
                                <select class="form-control" name="sensor_brand_id" ng-model="depStuffCopy[0].sensor_brand_id"
                                        ng-options="sb.sensor_brand_id as sb.brand_name for sb in sensorBrandList" required>
                                    <option value=""></option>
                                </select>
                            </div>
                        </div>

                        <!-- Serial Number*: (detail) -->
                        <div class="col-md-12" ng-if="view.DEPval == 'detail'">
                            <div class="col-md-4 col-md-offset-1"><label>Serial Number:</label></div>
                            <div class="col-md-6">{{sensor.serial_number || '---'}}</div>
                        </div>
                        <!-- Serial Number*: (edit) -->
                        <div class="form-group" ng-if="view.DEPval == 'edit'">
                            <label class="col-md-4 col-md-offset-1 req control-label">
                                <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                                    <span class="glyphicon glyphicon-eye-open"></span>
                                </button> Serial Number:
                                <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Required">
                                    <span class="glyphicon glyphicon-asterisk" style="color:#d00;font-size:xx-small;"></span>
                                </button>
                            </label>
                            <div class="col-md-6">
                                <input class="form-control" name="serial_number" ng-model="depStuffCopy[0].serial_number" type="text" required />
                            </div>
                            <button type="button" class="col-md-1 borderLess pull-left" tooltip-placement="right" tooltip-append-to-body="false" uib-tooltip="Will be used in netCDF metadata.">
                                <span class="glyphicon glyphicon-question-sign"></span>
                            </button>
                        </div>

                        <!-- Housing Serial Number: (detail) -->
                        <div class="col-md-12" ng-if="view.DEPval == 'detail'">
                            <div class="col-md-4 col-md-offset-1"><label>Housing Serial Number:</label></div>
                            <div class="col-md-6">{{sensor.housing_serial_number || '---'}}</div>
                        </div>
                        <!-- Housing Serial Number: (edit) -->
                        <div class="form-group" ng-if="view.DEPval == 'edit'">
                            <label class="col-md-4 col-md-offset-1 control-label">
                                <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                                    <span class="glyphicon glyphicon-eye-open"></span>
                                </button> Housing Serial Number:
                            </label>
                            <div class="col-md-6">
                                <input class="form-control" name="housing_serial_number" ng-model="depStuffCopy[0].housing_serial_number" type="text" />
                            </div>
                            <button type="button" class="col-md-1 borderLess pull-left" tooltip-placement="right" tooltip-append-to-body="false" uib-tooltip="Required for DOI WATCH OFFICE 800 number.">
                                <span class="glyphicon glyphicon-question-sign"></span>
                            </button>
                        </div>

                        <!-- Housing Types: (detail) -->
                        <div class="col-md-12" ng-if="view.DEPval == 'detail'">
                            <div class="col-md-4 col-md-offset-1"><label>Housing Types:</label></div>
                            <div class="col-md-6">{{sensor.housingType || '---'}}</div>
                        </div>
                        <!-- Housing Types: (edit) -->
                        <div class="form-group" ng-if="view.DEPval == 'edit'">
                            <label class="col-md-4 col-md-offset-1 control-label">Housing Types:</label>
                            <div class="col-md-6">
                                <select class="form-control" id="housing_type_id" name="housing_type_id" ng-model="depStuffCopy[0].housing_type_id"
                                        ng-options="ht.housing_type_id as ht.type_name for ht in houseTypeList">
                                    <option value=""></option>
                                </select>
                            </div>
                        </div>
                        <br clear="all" /><hr />
                        <!-- tapedown (detail)-->
                        <div class="col-md-12" ng-if="view.DEPval == 'detail'">
                            <div class="col-md-4 col-md-offset-1"><label>Tapedowns:</label></div>
                            <div class="col-md-6">
                                <div ng-show="DEPtapeDownTable.length > 0">
                                    <div class="col-md-8">
                                        <table class="table table-condensed">
                                            <thead>
                                                <tr>
                                                    <td style="text-align:center">Datum Location</td>
                                                    <td style="text-align:center">Elevation</td>
                                                    <td style="text-align:center">Offset Correction</td>
                                                    <td style="text-align:center">Water Surface</td>
                                                    <td style="text-align:center">Ground Surface</td>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr ng-repeat="dt in DEPtapeDownTable">
                                                    <td>{{dt.op_name}}</td>
                                                    <td style="text-align:center">{{dt.elevation}} {{dt.Vdatum}}</td>
                                                    <td style="text-align:center">{{dt.offset_correction}}</td>
                                                    <td style="text-align:center">{{dt.water_surface}}</td>
                                                    <td style="text-align:center">{{dt.ground_surface}}</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                                <div ng-show="DEPtapeDownTable.length == 0">None chosen</div>
                            </div>
                        </div><!--end detail for Tapedowns-->
                        <!-- tapedown (edit)-->
                        <div class="form-group" ng-if="view.DEPval == 'edit'">
                            <label class="col-md-4 col-md-offset-1 control-label">Tapedowns:</label>
                            <div class="col-md-6"></div>
                            <button type="button" class="col-md-1 borderLess pull-left" tooltip-placement="left" tooltip-append-to-body="false" uib-tooltip="These elevations and tape down data are used for both field activities and final products. Please pay attention to how your data is entered.">
                                <span class="glyphicon glyphicon-question-sign"></span>
                            </button>
                            <div class="col-md-12">
                                <!--start add tapedown area -->
                                <div ng-if="OPsPresent" class="col-md-8 pull-right">
                                    <label class="col-md-4 control-label">Datum Locations:</label>
                                    <div class="col-md-6">
                                        <div isteven-multi-select
                                             input-model="DEPOPsForTapeDown"
                                             output-model="DEPOPMeasure"
                                             button-label="name"
                                             item-label="name"
                                             on-item-click="DEPOPchosen(data)"
                                             tick-property="selected"
                                             helper-elements="filter">
                                        </div>
                                    </div>
                                </div>
                                <div ng-if="!OPsPresent">No Datum Locations added to this site for tapedown</div>
                                <br clear="all" />
                                <div ng-if="OPsPresent" class="pull-right"><em>Note: these are not used for any calculations but are to facilitate field activities</em></div>
                                <div ng-show="depTapeCopy.length > 0">
                                    <table class="table">
                                        <thead>
                                            <tr>
                                                <th>
                                                    <label>
                                                        <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                                                            <span class="glyphicon glyphicon-eye-open"></span>
                                                        </button> Datum Location
                                                    </label>
                                                </th>
                                                <th>
                                                    <label>
                                                        <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                                                            <span class="glyphicon glyphicon-eye-open"></span>
                                                        </button> Elevation
                                                    </label>
                                                </th>
                                                <th class="col-sm-3">
                                                    <label>
                                                        <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                                                            <span class="glyphicon glyphicon-eye-open"></span>
                                                        </button> Offset
                                                        <button type="button" class="borderLess" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="From the datum location to the sensor orifice.">
                                                            <span class="glyphicon glyphicon-question-sign"></span>
                                                        </button>
                                                        <br />Correction
                                                    </label>
                                                </th>
                                                <th class="col-sm-2">
                                                    <label>
                                                        <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                                                            <span class="glyphicon glyphicon-eye-open"></span>
                                                        </button> Water
                                                        <br />Surface
                                                        <button type="button" class="borderLess" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="From the datum location to the water surface.">
                                                            <span class="glyphicon glyphicon-question-sign"></span>
                                                        </button>
                                                    </label>
                                                </th>
                                                <th class="col-sm-2">
                                                    <label>
                                                        <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                                                            <span class="glyphicon glyphicon-eye-open"></span>
                                                        </button> Ground
                                                        <br />Surface
                                                        <button type="button" class="borderLess" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="From the datum location to the ground surface.">
                                                            <span class="glyphicon glyphicon-question-sign"></span>
                                                        </button>
                                                    </label>
                                                </th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr ng-repeat="t in depTapeCopy">
                                                <td>{{t.op_name}}<input type="hidden" ng-model="t.objective_type_id" /><input type="hidden" ng-model="t.op_measurements_id" /></td>
                                                <td>
                                                    {{t.elevation}} {{t.Vdatum}}
                                                </td>
                                                <td><input class="form-control" ng-keypress="isNum($event)" ng-model="t.offset_correction" /></td>
                                                <td><input class="form-control" ng-keypress="isNum($event)" ng-model="t.water_surface" /></td>
                                                <td><input class="form-control" ng-keypress="isNum($event)" ng-model="t.ground_surface" /></td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>

                        </div><!--end formgroup for Tapedowns-->
                        <br clear="all" />

                        <!--sensor stat tapedown parts-->
                        <!-- Sensor Elevation (detail) -->
                        <div ng-if="OPsPresent && view.DEPval == 'detail'" class="col-md-12">
                            <div class="col-md-4 col-md-offset-1"><label>Sensor Elevation:</label></div>
                            <div class="col-md-6">{{DeployedSensorStat.sensor_elevation || '--'}}</div>
                        </div>
                        <!-- Sensor Elevation (edit) -->
                        <div ng-if="OPsPresent && view.DEPval == 'edit'" class="form-group">
                            <label class="col-md-4 col-md-offset-1 control-label">
                                <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                                    <span class="glyphicon glyphicon-eye-open"></span>
                                </button> Sensor Elevation:
                            </label>
                            <div class="col-md-6">
                                <input class="form-control" ng-keypress="isNum($event)" name="sensor_elevation" ng-model="depStuffCopy[1].sensor_elevation" type="text" />
                            </div>
                            <button type="button" class="col-md-1 borderLess pull-left" tooltip-placement="right" tooltip-append-to-body="false" uib-tooltip="Using the offset correction, elevation of the sensor orifice.">
                                <span class="glyphicon glyphicon-question-sign"></span>
                            </button>
                        </div>

                        <!-- Water Surface Elevation (detail) -->
                        <div ng-if="OPsPresent && view.DEPval == 'detail'" class="col-md-12">
                            <div class="col-md-4 col-md-offset-1"><label>Water Surface Elevation:</label></div>
                            <div class="col-md-6">{{DeployedSensorStat.ws_elevation || '--'}}</div>
                        </div>
                        <!-- Water Surface Elevation (edit) -->
                        <div ng-if="OPsPresent && view.DEPval == 'edit'" class="form-group">
                            <label class="col-md-4 col-md-offset-1 control-label">
                                <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                                    <span class="glyphicon glyphicon-eye-open"></span>
                                </button> Water Surface Elevation:
                            </label>
                            <div class="col-md-6">
                                <input class="form-control" ng-keypress="isNum($event)" name="ws_elevation" ng-model="depStuffCopy[1].ws_elevation" type="text" />
                            </div>
                            <button type="button" class="col-md-1 borderLess pull-left" tooltip-placement="right" tooltip-append-to-body="false" uib-tooltip="Using the water surface tape down, elevation of the water surface.">
                                <span class="glyphicon glyphicon-question-sign"></span>
                            </button>
                        </div>

                        <!-- Ground Elevation (detail) -->
                        <div ng-if="OPsPresent && view.DEPval == 'detail'" class="col-md-12">
                            <div class="col-md-4 col-md-offset-1"><label>Ground Elevation:</label></div>
                            <div class="col-md-6">{{DeployedSensorStat.gs_elevation || '--'}}</div>
                        </div>
                        <!-- Ground Elevation (edit) -->
                        <div ng-if="OPsPresent && view.DEPval == 'edit'" class="form-group">
                            <label class="col-md-4 col-md-offset-1 control-label">
                                <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                                    <span class="glyphicon glyphicon-eye-open"></span>
                                </button> Ground Elevation:
                            </label>
                            <div class="col-md-6">
                                <input class="form-control" ng-keypress="isNum($event)" name="gs_elevation" ng-model="depStuffCopy[1].gs_elevation" type="text" />
                            </div>
                            <button type="button" class="col-md-1 borderLess pull-left" tooltip-placement="right" tooltip-append-to-body="false" uib-tooltip="Using the ground surface tape down, elevation of the ground surface.">
                                <span class="glyphicon glyphicon-question-sign"></span>
                            </button>
                        </div>

                        <!-- In feet above (detail) -->
                        <div ng-if="OPsPresent && view.DEPval == 'detail'" class="col-md-12">
                            <div class="col-md-4 col-md-offset-1"><label>In feet above:</label></div>
                            <div class="col-md-6">{{DeployedSensorStat.vdatum}}</div>
                        </div>
                        <!-- In feet above (edit) -->
                        <div ng-if="OPsPresent && view.DEPval == 'edit'" class="form-group">
                            <label class="col-md-4 col-md-offset-1 control-label">
                                <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                                    <span class="glyphicon glyphicon-eye-open"></span>
                                </button> In feet above:
                            </label>
                            <div class="col-md-6">
                                <select class="form-control" id="vdatum_id" name="vdatum_id" ng-model="depStuffCopy[1].vdatum_id"
                                        ng-options="vd.datum_id as vd.datum_abbreviation for vd in vertDatumList">
                                    <option value=""></option>
                                </select>
                            </div>
                        </div>
                        <div ng-if="OPsPresent && view.DEPval == 'edit'" class="col-md-12"><em>Note: these elevations are used in the sensor processing and the final products</em></div>
                        <br clear="all" /><hr />

                        <!-- Vented (only if Sensor Type is Pressure Transducer) (detail)-->
                        <div ng-show="(sensor.sensor_type_id == 1 || depStuffCopy[0].sensor_type_id == 1) && view.DEPval == 'detail'">
                            <div class="col-md-12">
                                <div class="col-md-4 col-md-offset-1"><label>Vented:</label></div>
                                <div class="col-md-6">{{sensor.vented || '---'}}</div>
                            </div>
                        </div>
                        <!-- Vented (only if Sensor Type is Pressure Transducer) (edit)-->
                        <div ng-show="(sensor.sensor_type_id == 1 || depStuffCopy[0].sensor_type_id == 1) && view.DEPval == 'edit'">
                            <div class="form-group">
                                <label class="col-md-4 col-md-offset-1 control-label">
                                    <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                                        <span class="glyphicon glyphicon-eye-open"></span>
                                    </button> Vented:
                                </label>
                                <div class="col-md-6">
                                    <span class="radio-inline">
                                        <input type="radio" name="vented" ng-model="depStuffCopy[0].vented" value="Yes" />Yes
                                    </span>
                                    <span class="radio-inline">
                                        <input type="radio" name="vented" ng-model="depStuffCopy[0].vented" value="No" />No
                                    </span>
                                </div>
                            </div>
                        </div>

                        <!-- Deployment Type: (detail) -->
                        <div class="col-md-12" ng-if="view.DEPval == 'detail'">
                            <div class="col-md-4 col-md-offset-1"><label>Deployment Type:</label></div>
                            <div class="col-md-6">{{sensor.deploymentType || '---'}}</div>
                        </div>
                        <!-- Deployment Type: (edit)-->
                        <div class="form-group" ng-if="view.DEPval == 'edit'">
                            <label class="col-md-4 col-md-offset-1 control-label">
                                <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                                    <span class="glyphicon glyphicon-eye-open"></span>
                                </button> Deployment Type:
                            </label>
                            <div class="col-md-6">
                                <select class="form-control" id="deployment_type_id" name="deployment_type_id" ng-model="depStuffCopy[0].deployment_type_id"
                                        ng-options="dt.deployment_type_id as dt.method for dt in filteredDeploymentTypes">
                                    <option value=""></option>
                                </select>
                            </div>
                        </div>

                        <!-- Location Description: (detail) -->
                        <div class="col-md-12" ng-if="view.DEPval == 'detail'">
                            <div class="col-md-4 col-md-offset-1"><label>Location Description:</label></div>
                            <div class="col-md-6">{{sensor.location_description || '---'}}</div>
                        </div>
                        <!-- Location Description: (edit) -->
                        <div class="form-group" ng-if="view.DEPval == 'edit'">
                            <label class="col-md-4 col-md-offset-1 control-label">
                                <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                                    <span class="glyphicon glyphicon-eye-open"></span>
                                </button> Location Description:
                            </label>
                            <div class="col-md-6">
                                <textarea class="form-control" id="location_description" name="location_description" type=" text" rows="3" ng-model="depStuffCopy[0].location_description" />
                            </div>
                            <button type="button" class="col-md-1 borderLess pull-left" tooltip-placement="right" tooltip-append-to-body="false" uib-tooltip="Please be specific so someone else can find this sensor later. This field is public.">
                                <span class="glyphicon glyphicon-question-sign"></span>
                            </button>
                        </div>

                        <!-- Interval: -->
                        <div class="form-group" ng-show="view.DEPval == 'edit'">
                            <label class="col-md-4 control-label"></label>
                            <div class="col-md-6 col-md-offset-1" style="padding-top:5px;">
                                <span class="radio-inline">
                                    <input type="radio" name="intervalType" ng-model="IntervalType.type" value="Minutes" />Minutes
                                </span>
                                <span class="radio-inline">
                                    <input type="radio" name="intervalType" ng-model="IntervalType.type" value="Seconds" />Seconds
                                </span>
                            </div>
                        </div>
                        <!-- interval (detail)-->
                        <div class="col-md-12" ng-if="view.DEPval == 'detail'">
                            <div class="col-md-4 col-md-offset-1"><label>Interval:</label></div>
                            <div class="col-md-6"><span>{{sensor.interval || '---'}} <span ng-if='sensor.interval'>seconds</span></span></div>
                        </div>
                        <!-- interval (edit)-->
                        <div class="form-group" ng-if="view.DEPval == 'edit'">
                            <label class="col-md-4 col-md-offset-1 control-label">
                                <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                                    <span class="glyphicon glyphicon-eye-open"></span>
                                </button> Interval:
                            </label>
                            <div class="col-md-6">
                                <input class="form-control" ng-keypress="isNum($event)" name="interval" ng-model="depStuffCopy[0].interval" type="text" />
                            </div>
                        </div>

                        <!-- Deploy Date*: (detail)-->
                        <div class="col-md-12" ng-if="view.DEPval == 'detail'">
                            <div class="col-md-4 col-md-offset-1"><label>Deploy Date:</label></div>
                            <div class="col-md-6">{{DeployedSensorStat.time_stamp | date: 'MM/dd/yyyy hh:mm a'}}</div>
                        </div>
                        <!-- Deploy Date*: (edit)-->
                        <div class="form-group" ng-if="view.DEPval == 'edit'">
                            <label class="col-md-4 col-md-offset-1 control-label topPad">
                                <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                                    <span class="glyphicon glyphicon-eye-open"></span>
                                </button> Deploy Date:
                                <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Required">
                                    <span class="glyphicon glyphicon-asterisk" style="color:#d00;font-size:xx-small;"></span>
                                </button>
                            </label>
                            <div class="col-md-6">
                                <datetimepicker hour-step="1" minute-step="1" ng-model="depStuffCopy[1].time_stamp" show-meridian="true"
                                                date-format="MM/dd/yyyy" readonly-date="false" readonly-time="false" date-options="dateOptions"
                                                hidden-time="false" hidden-date="false" show-spinners="true" required>
                                </datetimepicker>
                            </div>
                        </div>

                        <!-- Deploy timezone*: (detail)-->
                        <div class="col-md-12" ng-if="view.DEPval == 'detail'">
                            <div class="col-md-4 col-md-offset-1 req"><label>Time Zone:</label></div>
                            <div class="col-md-6">{{DeployedSensorStat.time_zone}}</div>
                        </div>
                        <!-- Deploy timezone*: (edit)-->
                        <div class="form-group" ng-if="view.DEPval == 'edit'">
                            <label class="col-md-4 col-md-offset-1 req control-label">
                                <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                                    <span class="glyphicon glyphicon-eye-open"></span>
                                </button> Time Zone:
                                <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Required">
                                    <span class="glyphicon glyphicon-asterisk" style="color:#d00;font-size:xx-small;"></span>
                                </button>
                            </label>
                            <div class="col-md-6">
                                <select class="form-control" name="time_zone" ng-model="depStuffCopy[1].time_zone" ng-options="vcm for vcm in timeZoneList" required>
                                    <option value=""></option>
                                </select>
                            </div>
                            <button type="button" class="borderLess pull-left" tooltip-placement="right" tooltip-append-to-body="false" uib-tooltip="Date/Time will be stored in UTC.">
                                <span class="glyphicon glyphicon-question-sign"></span>
                            </button>
                        </div>

                        <!-- Note: (detail)-->
                        <div class="col-md-12" ng-if="view.DEPval == 'detail'">
                            <div class="col-md-4 col-md-offset-1"><label>Note:</label></div>
                            <div class="col-md-6">{{DeployedSensorStat.notes || '---'}}</div>
                        </div>
                        <!-- Note: (edit)-->
                        <div class="form-group" ng-if="view.DEPval == 'edit'">
                            <label class="col-md-4 col-md-offset-1 control-label">
                                <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                                    <span class="glyphicon glyphicon-eye-open"></span>
                                </button> Note:
                            </label>
                            <div class="col-md-6">
                                <textarea class="form-control" name="notes" type="text" rows="3" ng-model="depStuffCopy[1].notes" />
                            </div>
                        </div>

                        <!-- Deploy Member: (detail)-->
                        <div class="col-md-12" ng-if="view.DEPval == 'detail'">
                            <div class="col-md-4 col-md-offset-1"><label>Deploy Member:</label></div>
                            <div class="col-md-6">{{Deployer.fname}} {{Deployer.lname}}</div>
                        </div>
                        <!-- Deploy Member: (edit)-->
                        <div class="form-group" ng-if="view.DEPval == 'edit'">
                            <label class="col-md-4 col-md-offset-1 control-label">
                                <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                                    <span class="glyphicon glyphicon-eye-open"></span>
                                </button> Deploy Member:
                            </label>
                            <div class="col-md-6">{{Deployer.fname}} {{Deployer.lname}}</div>
                        </div>

                        <div class="form-group">
                            <div class="col-md-12">
                                <button type="button" class="btn btn-primary" ng-show="view.DEPval == 'detail'" ng-disabled="view.RETval == 'edit'" ng-click="wannaEditDep()">Edit Deployed Sensor</button>
                                <button class="btn btn-primary" ng-show="view.DEPval == 'edit'" ng-click="saveDeployed(editableDeployedForm.$valid)">Save</button>
                                <button type="button" class="btn btn-warning" ng-show="view.DEPval == 'edit'" ng-click="cancelDepEdit()">Cancel Edit</button>
                            </div>
                        </div>
                    </fieldset>
                </form>
            </uib-accordion-group>

            <!--Retrieved Sensor Part-->
            <uib-accordion-group is-open="s.retOpen">
                <uib-accordion-heading>
                    <i style="margin-right:10px" class="pull-left glyphicon" ng-class="{'glyphicon-chevron-down': s.retOpen, 'glyphicon-chevron-right': !s.retOpen}"></i>
                    <span ng-class="{'redText':view.RETval == 'edit'}">{{mostRecentStatus}} Sensor Information</span>
                </uib-accordion-heading>
                <form name="editableRetrievedForm">
                    <fieldset>
                        <!-- Status Type:*(detail) -->
                        <div class="col-md-12" ng-if="view.RETval == 'detail'">
                            <div class="col-md-4 col-md-offset-1"><label>Status:</label></div>
                            <div class="col-md-6">{{RetrievedSensorStat.status || '---'}}</div>
                        </div>
                        <!-- Status Type:*(edit) -->
                        <div class="form-group" ng-if="view.RETval == 'edit'">
                            <label class="col-md-5 control-label req">
                                <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                                    <span class="glyphicon glyphicon-eye-open"></span>
                                </button> Status:
                                <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Required">
                                    <span class="glyphicon glyphicon-asterisk" style="color:#d00;font-size:xx-small;"></span>
                                </button>
                            </label>
                            <div class="col-md-6">
                                <select class="form-control" name="status_type_id" ng-model="retStuffCopy[1].status_type_id" ng-options="s.status_type_id as s.status for s in statusTypeList" required>
                                    <option value=""></option>
                                </select>
                            </div>
                        </div>

                        <!-- Collection Condition:*(detail) -->
                        <div class="col-md-12" ng-if="view.RETval == 'detail'">
                            <div class="col-md-4 col-md-offset-1"><label>Collection Conditions:</label></div>
                            <div class="col-md-6">{{sensor.instCollection || '---'}}</div>
                        </div>
                        <!-- Collection Condition:* (edit)-->
                        <div class="form-group" ng-if="view.RETval == 'edit'">
                            <label class="col-md-5 control-label req" for="inst_collection_id">
                                <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                                    <span class="glyphicon glyphicon-eye-open"></span>
                                </button> Collection Conditions:
                                <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Required">
                                    <span class="glyphicon glyphicon-asterisk" style="color:#d00;font-size:xx-small;"></span>
                                </button>
                            </label>
                            <div class="col-md-6">
                                <select class="form-control" name="inst_collection_id" ng-model="retStuffCopy[0].inst_collection_id"
                                        ng-options="ins.id as ins.condition for ins in collectCondList" required>
                                    <option value=""></option>
                                </select>
                            </div>
                        </div>

                        <!-- Note: (detail)-->
                        <div class="col-md-12" ng-if="view.RETval == 'detail'">
                            <div class="col-md-4 col-md-offset-1"><label>Note:</label></div>
                            <div class="col-md-6">{{RetrievedSensorStat.notes || '---'}}</div>
                        </div>
                        <!-- Note:(edit) -->
                        <div class="form-group" ng-if="view.RETval == 'edit'">
                            <label class="col-md-5 control-label" for="notes">
                                <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                                    <span class="glyphicon glyphicon-eye-open"></span>
                                </button> Note:
                            </label>
                            <div class="col-md-6">
                                <textarea class="form-control" name="notes" type="text" rows="3" ng-model="retStuffCopy[1].notes" />
                            </div>
                        </div>

                        <!-- Retrieve Date: *(detail) -->
                        <div class="col-md-12" ng-if="view.RETval == 'detail'">
                            <div class="col-md-4 col-md-offset-1"><label>Retrieve Date:</label></div>
                            <div class="col-md-6">{{RetrievedSensorStat.time_stamp | date: 'MM/dd/yyyy hh:mm a'}}</div>
                        </div>
                        <!-- Retrieve Date: *(edit) -->
                        <div class="form-group" ng-if="view.RETval == 'edit'">
                            <label class="col-md-5 control-label topPad">
                                <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                                    <span class="glyphicon glyphicon-eye-open"></span>
                                </button> Retrieve Date:
                                <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Required">
                                    <span class="glyphicon glyphicon-asterisk" style="color:#d00;font-size:xx-small;"></span>
                                </button>
                            </label>
                            <div class="col-md-6">
                                <datetimepicker hour-step="1" minute-step="1" ng-model="retStuffCopy[1].time_stamp" show-meridian="true" date-format="MM/dd/yyyy"
                                                readonly-date="false" readonly-time="false" date-options="dateOptions" hidden-time="false" hidden-date="false" show-spinners="true" required>
                                </datetimepicker>
                            </div>
                        </div>

                        <!-- Timezone*:(detail)-->
                        <div class="col-md-12" ng-if="view.RETval == 'detail'">
                            <div class="col-md-4 col-md-offset-1"><label>Time Zone:</label></div>
                            <div class="col-md-6">{{RetrievedSensorStat.time_zone}}</div>
                        </div>
                        <!-- Timezone*: (edit)-->
                        <div class="form-group" ng-if="view.RETval == 'edit'">
                            <label class="col-md-5 req control-label">
                                <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                                    <span class="glyphicon glyphicon-eye-open"></span>
                                </button> Time Zone:
                                <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Required">
                                    <span class="glyphicon glyphicon-asterisk" style="color:#d00;font-size:xx-small;"></span>
                                </button>
                            </label>
                            <div class="col-md-6">
                                <select class="form-control" name="time_zone" ng-model="retStuffCopy[1].time_zone" ng-options="vcm for vcm in timeZoneList" required>
                                    <option value=""></option>
                                </select>
                            </div>
                            <button type="button" class="borderLess pull-left" tooltip-placement="right" tooltip-append-to-body="false" uib-tooltip="Date/Time will be stored in UTC.">
                                <span class="glyphicon glyphicon-question-sign"></span>
                            </button>
                        </div>

                        <br clear="all" /><hr />

                        <!-- tapedown (detail)-->
                        <div class="col-md-12" ng-if="view.RETval == 'detail'">
                            <label class="col-md-4 col-md-offset-1 control-label">Tapedowns:</label>
                            <div class="col-md-6">
                                <div ng-show="RETtapeDownTable.length > 0">
                                    <div class="col-md-8">
                                        <table class="table table-condensed">
                                            <thead>
                                                <tr>
                                                    <td style="text-align:center">Datum Location</td>
                                                    <td style="text-align:center">Elevation</td>
                                                    <td style="text-align:center">Offset Correction</td>
                                                    <td style="text-align:center">Water Surface</td>
                                                    <td style="text-align:center">Ground Surface</td>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr ng-repeat="rt in RETtapeDownTable">
                                                    <td>{{rt.op_name}}</td>
                                                    <td style="text-align:center">{{rt.elevation}} {{rt.Vdatum}}</td>
                                                    <td style="text-align:center">{{rt.offset_correction}}</td>
                                                    <td style="text-align:center">{{rt.water_surface}}</td>
                                                    <td style="text-align:center">{{rt.ground_surface}}</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                                <div ng-show="RETtapeDownTable.length == 0">None chosen</div>
                            </div>
                        </div><!--end tapedown detail -->
                        <!-- tapedown (edit)-->
                        <div class="form-group" ng-if="view.RETval == 'edit'">
                            <label class="col-md-5 control-label">Tapedowns:</label>
                            <div class="col-md-6"></div>
                            <button type="button" class="col-md-1 borderLess pull-left" tooltip-placement="left" tooltip-append-to-body="false" uib-tooltip="These elevations and tape down data are used for both field activities and final products. Please pay attention to how your data is entered.">
                                <span class="glyphicon glyphicon-question-sign"></span>
                            </button>
                            <div class="col-md-12">
                                <div ng-if="OPsPresent" class="col-md-10 pull-right">
                                    <label class="col-md-4 control-label">Datum Locations:</label>
                                    <div class="col-md-6">
                                        <div isteven-multi-select
                                             input-model="RETOPsForTapeDown"
                                             output-model="RETOPMeasure"
                                             button-label="name"
                                             item-label="name"
                                             on-item-click="RETOPchosen(data)"
                                             tick-property="selected"
                                             helper-elements="filter">
                                        </div>
                                    </div>
                                </div>
                                <div ng-if="!OPsPresent">No Datum Locations added to this site for tapedown</div>
                                <br clear="all" />
                                <div ng-if="OPsPresent" class="pull-right"><em>Note: these are not used for any calculations but are to facilitate field activities</em></div>
                                <div ng-show="retTapeCopy.length > 0">
                                    <table class="table">
                                        <thead>
                                            <tr>
                                                <th>
                                                    <label>
                                                        <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                                                            <span class="glyphicon glyphicon-eye-open"></span>
                                                        </button> Datum Location
                                                    </label>
                                                </th>
                                                <th>
                                                    <label>
                                                        <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                                                            <span class="glyphicon glyphicon-eye-open"></span>
                                                        </button> Elevation
                                                    </label>
                                                </th>
                                                <th class="col-sm-3">
                                                    <label>
                                                        <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                                                            <span class="glyphicon glyphicon-eye-open"></span>
                                                        </button> Offset
                                                        <button type="button" class="borderLess" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="From the datum location to the sensor orifice.">
                                                            <span class="glyphicon glyphicon-question-sign"></span>
                                                        </button>
                                                        <br />Correction
                                                    </label>
                                                </th>
                                                <th class="col-sm-2">
                                                    <label>
                                                        <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                                                            <span class="glyphicon glyphicon-eye-open"></span>
                                                        </button> Water
                                                        <br />Surface
                                                        <button type="button" class="borderLess" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="From the datum location to the water surface.">
                                                            <span class="glyphicon glyphicon-question-sign"></span>
                                                        </button>
                                                    </label>
                                                </th>
                                                <th class="col-sm-2">
                                                    <label>
                                                        <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                                                            <span class="glyphicon glyphicon-eye-open"></span>
                                                        </button> Ground
                                                        <br />Surface
                                                        <button type="button" class="borderLess" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="From the datum location to the ground surface.">
                                                            <span class="glyphicon glyphicon-question-sign"></span>
                                                        </button>
                                                    </label>
                                                </th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr ng-repeat="rt in retTapeCopy">
                                                <td>{{rt.op_name}}<input type="hidden" ng-model="rt.objective_type_id" /><input type="hidden" ng-model="rt.op_measurements_id" /></td>
                                                <td>
                                                    {{rt.elevation}} {{t.Vdatum}}
                                                </td>
                                                <td><input class="form-control" ng-keypress="isNum($event)" ng-model="rt.offset_correction" /></td>
                                                <td><input class="form-control" ng-keypress="isNum($event)" ng-model="rt.water_surface" /></td>
                                                <td><input class="form-control" ng-keypress="isNum($event)" ng-model="rt.ground_surface" /></td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div><!--end formgroup -->

                        <br clear="all" />
                        <!--sensor stat tapedown parts-->
                        <!--sensor Elevation (detail)-->
                        <div ng-if="OPsPresent && view.RETval == 'detail'" class="col-md-12">
                            <div class="col-md-4 col-md-offset-1"><label>Sensor Elevation:</label></div>
                            <div class="col-md-6">{{RetrievedSensorStat.sensor_elevation || '--'}}</div>
                        </div>
                        <!--sensor Elevation (edit)-->
                        <div ng-if="OPsPresent && view.RETval == 'edit'" class="form-group">
                            <label class="col-md-4 col-md-offset-1 control-label">
                                <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                                    <span class="glyphicon glyphicon-eye-open"></span>
                                </button> Sensor Elevation:
                            </label>
                            <div class="col-md-6">
                                <input class="form-control" ng-keypress="isNum($event)" name="sensor_elevation" ng-model="retStuffCopy[1].sensor_elevation" type="text" />
                            </div>
                        </div>

                        <!--Water Surface Elevation (detail)-->
                        <div ng-if="OPsPresent && view.RETval == 'detail'" class="col-md-12">
                            <div class="col-md-4 col-md-offset-1"><label>Water Surface Elevation:</label></div>
                            <div class="col-md-6">{{RetrievedSensorStat.ws_elevation || '--'}}</div>
                        </div>
                        <!--Water Surface Elevation (edit)-->
                        <div ng-if="OPsPresent && view.RETval == 'edit'" class="form-group">
                            <label class="col-md-4 col-md-offset-1 control-label">
                                <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                                    <span class="glyphicon glyphicon-eye-open"></span>
                                </button> Water Surface Elevation:
                            </label>
                            <div class="col-md-6">
                                <input class="form-control" ng-keypress="isNum($event)" name="ws_elevation" ng-model="retStuffCopy[1].ws_elevation" type="text" />
                            </div>
                        </div>

                        <!--Ground Elevation (detail)-->
                        <div ng-if="OPsPresent && view.RETval == 'detail'" class="col-md-12">
                            <div class="col-md-4 col-md-offset-1"><label>Ground Elevation:</label></div>
                            <div class="col-md-6">{{RetrievedSensorStat.gs_elevation || '--'}}</div>
                        </div>
                        <!--Ground Elevation (edit)-->
                        <div ng-if="OPsPresent && view.RETval == 'edit'" class="form-group">
                            <label class="col-md-4 col-md-offset-1 control-label">
                                <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                                    <span class="glyphicon glyphicon-eye-open"></span>
                                </button> Ground Elevation:
                            </label>
                            <div class="col-md-6">
                                <input class="form-control" ng-keypress="isNum($event)" name="gs_elevation" ng-model="retStuffCopy[1].gs_elevation" type="text" />
                            </div>
                        </div>

                        <!--in feet above (detail)-->
                        <div ng-if="OPsPresent && view.RETval == 'detail'" class="col-md-12">
                            <label class="col-md-4 col-md-offset-1">In feet above:</label>
                            <div class="col-md-6">{{RetrievedSensorStat.vdatumName}}</div>
                        </div>
                        <!--in feet above (edit)-->
                        <div ng-if="OPsPresent && view.RETval == 'edit'" class="form-group">
                            <label class="col-md-4 col-md-offset-1 control-label">
                                <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                                    <span class="glyphicon glyphicon-eye-open"></span>
                                </button> In feet above:
                            </label>
                            <div class="col-md-6">
                                <select class="form-control" id="vdatum_id" name="vdatum_id" ng-model="retStuffCopy[1].vdatum_id"
                                        ng-options="vd.datum_id as vd.datum_abbreviation for vd in vertDatumList">
                                    <option value=""></option>
                                </select>
                            </div>
                        </div>
                        <div ng-if="OPsPresent && view.RETval == 'edit'" class="col-md-12"><em>Note: these elevations are used in the sensor processing and the final products</em></div>
                        <br clear="all" /><hr />

                        <!-- Retrieve Member: (detail) -->
                        <div class="col-md-12" ng-if="view.RETval == 'detail'">
                            <div class="col-md-4 col-md-offset-1"><label>Member:</label></div>
                            <div class="col-md-6">{{Retriever.fname}} {{Retriever.lname}}</div>
                        </div>
                        <!-- Retrieve Member: (edit) -->
                        <div class="form-group" ng-if="view.RETval == 'edit'">
                            <label class="col-md-5 control-label">
                                <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Displayed publicly.">
                                    <span class="glyphicon glyphicon-eye-open"></span>
                                </button> Member:
                                <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Required">
                                    <span class="glyphicon glyphicon-asterisk" style="color:#d00;font-size:xx-small;"></span>
                                </button>
                            </label>
                            <div class="col-md-6">{{Retriever.fname}} {{Retriever.lname}}</div>
                        </div>

                        <div class="form-group">
                            <div class="col-md-12">
                                <button type="button" class="btn btn-primary" ng-show="view.RETval == 'detail'" ng-disabled="view.DEPval == 'edit'" ng-click="wannaEditRet()">Edit {{mostRecentStatus}} Sensor</button>
                                <button class="btn btn-primary" ng-show="view.RETval == 'edit'" ng-click="saveRetrieved(editableRetrievedForm.$valid)">Save</button>
                                <button type="button" class="btn btn-warning" ng-show="view.RETval == 'edit'" ng-click="cancelRetEdit()">Cancel Edit</button>
                            </div>
                        </div>
                    </fieldset>
                </form>
            </uib-accordion-group>

            <!--Sensor File Part-->
            <uib-accordion-group is-open="s.sFileOpen">
                <uib-accordion-heading>
                    <i style="margin-right:10px" class="pull-left glyphicon" ng-class="{'glyphicon-chevron-down': s.sFileOpen, 'glyphicon-chevron-right': !s.sFileOpen}"></i>
                    <span ng-class="{'redText':showFileForm}">Sensor File Information</span>
                </uib-accordion-heading>
                <div class="col-md-12">
                    <div class="col-md-5"><h4>Sensor Files</h4></div>
                    <div class="col-md-6" ng-if="!showFileForm" style="margin-top:14px">
                        <button type="button" class="borderLess" ng-click="showFile(0)" tooltip-placement="right" uib-tooltip="Upload a new File to this Sensor">
                            <span class="glyphicon glyphicon-plus"></span>
                        </button>
                    </div>
                    <br clear="all" />
                    <!-- list of existing files for this op -->
                    <div class="col-md-6" ng-if="sensorFiles.length > 0">
                        <ul style="padding-left: 0">
                            <li ng-repeat="f in sensorFiles" style="list-style:none;padding-bottom: 15px;">
                                <span class="col-sm-9 borderLess" style="padding:0">
                                    <a class="btn borderLess" style="padding:0" title="{{f.file_date | date: 'MM/dd/yyyy'}} ({{f.name || f.file_id}})" ng-click="showFile(f)">{{f.file_date | date: 'MM/dd/yyyy'}} ({{f.name || f.file_id}})</a>
                                </span>
                            </li>
                        </ul>
                    </div>
                    <!-- carousel of photo files -->
                    <div class="col-md-6" ng-if="sensImageFiles.length > 0" style="height:120px;">
                        <uib-carousel interval="4000">
                            <uib-slide ng-repeat="f in sensImageFiles">
                                <img ng-click="showImageModal(f.file_id)" ng-src="{{serverURL}}/Files/{{f.file_id}}/Item{{stamp}}" />
                                <div class="carousel-caption">
                                    <p>{{f.name || f.file_id}}</p>
                                </div>
                            </uib-slide>
                        </uib-carousel>
                    </div>
                    <br clear="all" />

                    <div ng-if="showFileForm">
                        <hr />
                        <form class="form-horizontal" name="DepSenFILEForm">
                            <fieldset>
                                <!-- File Type* -->
                                <div class="form-group" ng-class="{'has-error':DepSenFILEForm.filetype_id.$invalid && DepSenFILEForm.filetype_id.$dirty}" style="margin:0;padding:0">
                                    <label class="col-md-4 control-label req" for="filetype_id">
                                        File Type:
                                        <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Required">
                                            <span class="glyphicon glyphicon-asterisk" style="color:#d00;font-size:xx-small;"></span>
                                        </button>
                                    </label>
                                    <div class="col-md-6" ng-if="aFile.file_id == undefined">
                                        <select class="form-control" name="filetype_id" ng-model="aFile.filetype_id" ng-change="updateAgencyForCaption()" ng-options="ft.filetype_id as ft.filetype for ft in fileTypes" required>
                                            <option value=""></option>
                                        </select>
                                    </div>
                                    <div class="col-md-6" ng-if="aFile.file_id != undefined">{{aFile.fileType}}</div>
                                </div>

                                <!--Upload Single Image with validations*-->
                                <div ng-if="aFile.file_id === undefined && aFile.filetype_id !== 8" class="form-group" style="margin:0;padding:0">
                                    <label class="col-md-4 control-label" for="FILE">
                                        Upload File:
                                        <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Required">
                                            <span class="glyphicon glyphicon-asterisk" style="color:#d00;font-size:xx-small;"></span>
                                        </button>
                                    </label>
                                    <div class="col-md-8">
                                        <input type="file" max="500000" file-model="aFile.File" />
                                        <img ngf-thumbnail="aFile.File" style="height:60px" class="thumbnail">
                                    </div>
                                </div>
                                <br clear="all" />

                                <!--File URL (LINK file)-->
                                <div ng-if="aFile.filetype_id === 8" class="form-group" style="margin:0;padding:0">
                                    <label class="col-md-4 control-label" for="name">File URL:</label>
                                    <div class="col-md-6">
                                        <input class="form-control" name="name" ng-model="aFile.name" type="text" />
                                    </div>
                                    <button type="button" class="col-md-1 borderLess pull-left" tooltip-placement="bottom" tooltip-append-to-body="false" uib-tooltip="Please link to persistent URLs or digital object identifier (doi) urls.">
                                        <span class="glyphicon glyphicon-question-sign"></span>
                                    </button>
                                </div>
                                <!--Data Processed by (Data) -->
                                <div ng-if="aFile.filetype_id === 2" class="form-group" style="margin:0;padding:0">
                                    <label class="col-md-4 control-label" for="processor_id">Data Process By:</label>
                                    <div class="col-md-6">
                                        <span>{{processor.fname}} {{processor.lname}}</span>
                                    </div>
                                </div>
                                <!-- Date Collected/Processed* (data)-->
                                <div ng-if="aFile.filetype_id === 2" class="form-group" ng-class="{'has-error':DepSenFILEForm.collect_date.$invalid && DepSenFILEForm.collect_date.$dirty}" style="margin:0;padding:0">
                                    <label class="col-md-4 control-label req" for="collect_date">
                                        Date Collected/Processed:
                                        <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Required">
                                            <span class="glyphicon glyphicon-asterisk" style="color:#d00;font-size:xx-small;"></span>
                                        </button>
                                    </label>
                                    <div class="col-md-4 input-group" style="padding-right:14px;padding-left:14px">
                                        <input class="form-control dateInputStyle" type="date" name="dfcd" uib-datepicker-popup="MM/dd/yyyy" show-weeks="false" is-open="datepickrs.dfcd" ng-model="datafile.collect_date" required />
                                        <span class="input-group-btn">
                                            <button class="btn btn-default" type="button" ng-click="open($event, 'dfcd')">
                                                <i class="glyphicon glyphicon-calendar" />
                                            </button>
                                        </span>
                                    </div>
                                </div>

                                <!--Source Name (photo)-->
                                <div class="form-group" ng-if="aFile.filetype_id === 1" ng-class="{'has-error':DepSenFILEForm.FULLname.$invalid && DepSenFILEForm.FULLname.$dirty}" style="margin:0;padding:0">
                                    <label class="col-md-4 control-label req" for="source_id">
                                        Source Photographer:
                                        <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Required">
                                            <span class="glyphicon glyphicon-asterisk" style="color:#d00;font-size:xx-small;"></span>
                                        </button>
                                    </label>
                                    <div class="col-md-6">
                                        <input class="form-control" name="FULLname" ng-model="aSource.FULLname" type="text" required />
                                    </div>
                                </div>

                                <!--Source Name (all other)-->
                                <div class="form-group" ng-if="aFile.filetype_id  > 2" ng-class="{'has-error':DepSenFILEForm.FULLname.$invalid && DepSenFILEForm.FULLname.$dirty}" style="margin:0;padding:0">
                                    <label class="col-md-4 control-label req" for="source_id">
                                        Source Name:
                                        <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Required">
                                            <span class="glyphicon glyphicon-asterisk" style="color:#d00;font-size:xx-small;"></span>
                                        </button>
                                    </label>
                                    <div class="col-md-6">
                                        <input class="form-control" name="FULLname" ng-model="aSource.FULLname" type="text" required />
                                    </div>
                                </div>

                                <!--Source Agency* (photo, allOther)-->
                                <div ng-if="aFile.filetype_id === 1 || aFile.filetype_id > 2" class="form-group" ng-class="{'has-error':DepSenFILEForm.agency_id.$invalid && DepSenFILEForm.agency_id.$dirty}" style="margin:0;padding:0">
                                    <label class="col-md-4 control-label req" for="agency_id">
                                        Source Agency:
                                        <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Required">
                                            <span class="glyphicon glyphicon-asterisk" style="color:#d00;font-size:xx-small;"></span>
                                        </button>
                                    </label>
                                    <div class="col-md-6">
                                        <select class="form-control" name="agency_id" ng-model="aSource.agency_id" ng-change="updateAgencyForCaption()"
                                                ng-options="a.agency_id as a.agency_name for a in agencies" required>
                                            <option value=""></option>
                                        </select>
                                    </div>
                                </div>

                                <!-- Photo Date * (photo) -->
                                <div ng-if="aFile.filetype_id === 1" class="form-group" ng-class="{'has-error':DepSenFILEForm.photo_date.$invalid && DepSenFILEForm.photo_date.$dirty}" style="margin:0;padding:0">
                                    <label class="col-md-4 control-label req" for="photo_date">
                                        Photo Date:
                                        <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Required">
                                            <span class="glyphicon glyphicon-asterisk" style="color:#d00;font-size:xx-small;"></span>
                                        </button>
                                    </label>
                                    <div class="col-md-4 input-group" style="padding-right:14px;padding-left:14px">
                                        <input class="form-control dateInputStyle" type="date" name="sd" uib-datepicker-popup="MM/dd/yyyy" show-weeks="false" is-open="datepickrs.sd" ng-model="aFile.photo_date" required />
                                        <span class="input-group-btn">
                                            <button class="btn btn-default" type="button" ng-click="open($event, 'sd')">
                                                <i class="glyphicon glyphicon-calendar" />
                                            </button>
                                        </span>
                                    </div>
                                </div>

                                <!-- Date Uploaded* (photo, data, allother) -->
                                <div ng-if="aFile.filetype_id > 0" class="form-group" ng-class="{'has-error':DepSenFILEForm.file_date.$invalid && DepSenFILEForm.file_date.$dirty}" style="margin:0;padding:0">
                                    <label class="col-md-4 control-label req" for="file_date">
                                        Date Uploaded:
                                        <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Required">
                                            <span class="glyphicon glyphicon-asterisk" style="color:#d00;font-size:xx-small;"></span>
                                        </button>
                                    </label>
                                    <div class="col-md-4 input-group" style="padding-right:14px;padding-left:14px">
                                        <input class="form-control dateInputStyle" type="date" name="fd" uib-datepicker-popup="MM/dd/yyyy" show-weeks="false" is-open="datepickrs.fd" ng-model="aFile.file_date" required />
                                        <span class="input-group-btn">
                                            <button class="btn btn-default" type="button" ng-click="open($event, 'fd')">
                                                <i class="glyphicon glyphicon-calendar" />
                                            </button>
                                        </span>
                                    </div>
                                </div>

                                <!--Description*(photo, data, allother)-->
                                <div ng-if="aFile.filetype_id > 0" class="form-group" ng-class="{'has-error':DepSenFILEForm.description.$invalid && DepSenFILEForm.description.$dirty}" style="margin:0;padding:0">
                                    <label class="col-md-4 control-label req" for="description">
                                        Description:
                                        <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Required">
                                            <span class="glyphicon glyphicon-asterisk" style="color:#d00;font-size:xx-small;"></span>
                                        </button>
                                    </label>
                                    <div class="col-md-6">
                                        <textarea class="form-control" id="description" type="text" rows="3" placeholder="Description" ng-model="aFile.description" required />
                                    </div>
                                    <button ng-show="aFile.filetype_id == 1" type="button" class="col-md-1 borderLess pull-left" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Populates in Photo caption below. If a person or people appear in photo include name(s). If non-USGS personnel, ensure consent to publish name in caption is given.">
                                        <span class="glyphicon glyphicon-question-sign"></span>
                                    </button>
                                </div>

                                <!-- show button for Chopper if  and file is present -->
                                <div class="form_group" ng-if="aFile.file_id == undefined && aFile.filetype_id == 2 && sensor.sensor_type_id == 1 && sensor.deployment_type_id < 4" style="padding-top: 10px;padding-bottom: 10px;">
                                    <label class="col-md-4 control-label"></label>
                                    <div class="col-md-9 col-md-offset-4 input-group" style="padding-right:14px;padding-left:14px">
                                            <!-- <label class="col-md-5" style="margin-top: 10px;"><input style="margin:0!important;" type="checkbox" class="col-md-1" name="daylightSavingsChop" ng-model="daylightSavingsChop.selected" ng-true-value="'true'" ng-false-value="'false'" /> &nbsp;&nbsp;Daylight Savings?</label> -->
                                            <button type="button" class="btn btn-primary pull-left" ng-click="runChopper()">Preview Data</button>
                                            <button type="button" style="float: inherit; margin-left: 15px;" class="col-md-1 borderLess" tooltip-placement="right-top" tooltip-append-to-body="false" tooltip-class="tooltip-wide"
                                                    uib-tooltip="Upload a csv file outputted by HoboWare or TruWare software. (These refer to the specific csv files that the script will ingest for Hobo and TruBlue respectively). Depending on the size of the csv, this process can take up to a few minutes to run. Ensure the sensor has all required fields populated first."> <!-- Check Daylight Savings if data was recorded in Daylight Savings. -->
                                                <span class="glyphicon glyphicon-question-sign"></span>
                                            </button>
                                        <div ng-show="smlallLoaderGo" style="display: inline;"><img src="images/loading1.gif" /></div>
                                    </div>
                                </div>

                                <div ng-if="chopperResponse2 && aFile.file_id == undefined">
                                    <!-- highchart goes here -->
                                    <hc-chart id="chopperChart2" options="chartOptions2"></hc-chart>
                                </div>
                                <!-- Good Data Start Time* (data) -->
                                <div ng-if="aFile.filetype_id === 2" class="form-group" ng-class="{'has-error':DepSenFILEForm.good_start.$invalid && DepSenFILEForm.good_start.$dirty}" style="margin:0;padding:0">
                                    <label class="col-md-4 control-label req" for="good_start" style="margin-top:4%">
                                        Good Data Start Time:
                                        <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Required">
                                            <span class="glyphicon glyphicon-asterisk" style="color:#d00;font-size:xx-small;"></span>
                                        </button>
                                    </label>
                                    <div class="col-md-6">
                                        <datetimepicker ng-model="datafile.good_start" show-meridian="true" date-format="MM/dd/yyyy" readonly-date="false" date-options="dateOptions"
                                                        hidden-time="false" hidden-date="false" show-spinners="true" date-opened="datepickrs.dfgs" date-ng-click="open($event, 'dfgs')" required>
                                        </datetimepicker>
                                    </div>
                                    <button type="button" style="margin-top:4%" class="col-md-1 borderLess pull-left" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Used by the processing scripts to clip irrelavent data.">
                                        <span class="glyphicon glyphicon-question-sign"></span>
                                    </button>
                                </div>

                                <!-- Good Data End Time* (data)-->
                                <div ng-if="aFile.filetype_id === 2" class="form-group" ng-class="{'has-error':DepSenFILEForm.good_end.$invalid && DepSenFILEForm.good_end.$dirty}" style="margin:0;padding:0">
                                    <label class="col-md-4 control-label req" for="good_end" style="margin-top:4%">
                                        Good Data End Time:
                                        <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Required">
                                            <span class="glyphicon glyphicon-asterisk" style="color:#d00;font-size:xx-small;"></span>
                                        </button>
                                    </label>
                                    <div class="col-md-6">
                                        <datetimepicker ng-model="datafile.good_end" show-meridian="true" date-format="MM/dd/yyyy" readonly-date="false" date-options="dateOptions"
                                                        hidden-time="false" hidden-date="false" show-spinners="true" date-opened="datepickrs.dfge" date-ng-click="open($event, 'dfge')" required>
                                        </datetimepicker>
                                    </div>
                                    <button type="button" style="margin-top:4%" class="col-md-1 borderLess pull-left" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Used by the processing scripts to clip irrelavent data.">
                                        <span class="glyphicon glyphicon-question-sign"></span>
                                    </button>
                                </div>

                                <!-- Timezone*: -->
                                <div ng-if="aFile.filetype_id === 2" class="form-group" style="margin:0;padding:0">
                                    <label class="col-md-4 control-label req">
                                        Time Zone:
                                        <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Required">
                                            <span class="glyphicon glyphicon-asterisk" style="color:#d00;font-size:xx-small;"></span>
                                        </button>
                                    </label>
                                    <div class="col-md-6">
                                        <select class="form-control" name="time_zone" ng-model="datafile.time_zone" ng-options="vcm for vcm in timeZoneList" required>
                                            <option value=""></option>
                                        </select>
                                    </div>
                                    <button type="button" class="col-md-1 borderLess pull-left" tooltip-placement="right" tooltip-append-to-body="false" uib-tooltip="Date/Time will be stored in UTC.">
                                        <span class="glyphicon glyphicon-question-sign"></span>
                                    </button>
                                </div>

                                <!-- Elevation -->
                                <div ng-if="aFile.filetype_id === 2" class="form-group" style="margin:0;padding:0">
                                    <label class="col-md-4 control-label">Elevation:</label>
                                    <div class="col-md-6">
                                        <span class="radio-inline">
                                            <input type="radio" name="elevation_status" ng-model="datafile.elevation_status" value="Final" />Final
                                        </span>
                                        <span class="radio-inline">
                                            <input type="radio" name="elevation_status" ng-model="datafile.elevation_status" value="Arbitrary" />Arbitrary
                                        </span>
                                    </div>
                                </div>

                                <!--Photo Direction (photo)-->
                                <div ng-if="aFile.filetype_id === 1" class="form-group" style="margin:0;padding:0;padding-top:5px;">
                                    <label class="col-md-4 control-label" for="photo_direction">Photo Direction:</label>
                                    <div class="col-md-6">
                                        <input class="form-control" id="photo_direction" name="photo_direction" ng-model="aFile.photo_direction" type="text" />
                                    </div>
                                </div>

                                <!-- Photo Latitude (photo)-->
                                <div ng-if="aFile.filetype_id === 1" class="form-group" style="margin:0;padding:0">
                                    <label class="col-md-4 control-label" for="latitude_dd">Photo Latitude <br /> (if different):</label>
                                    <div class="col-md-6">
                                        <input class="form-control" ng-keypress="isNum($event)" name="latitude_dd" id="latitude_dd" ng-model="aFile.latitude_dd"
                                               type="text" />
                                    </div>
                                </div>

                                <!--Photo Longitude (photo)-->
                                <div ng-if="aFile.filetype_id === 1" class="form-group" style="margin:0;padding:0">
                                    <label class="col-md-4 control-label" for="longitude_dd">Photo Longitude <br /> (if different):</label>
                                    <div class="col-md-6">
                                        <input class="form-control" ng-keypress="isNum($event)" id="longitude_dd" name="longitude_dd" ng-model="aFile.longitude_dd"
                                               type="text" />
                                    </div>
                                </div>

                                <!-- Approval info -->
                                <div class="form-group" ng-if="aFile.filetype_id === 2 && aFile.file_id !== undefined">
                                    <label class="col-md-4 control-label" for="approval_id">Approval Info:</label>
                                    <div class="col-md-6" ng-if="ApprovalInfo.Member !== undefined">
                                        Approved By:<span ng-if="ApprovalInfo.Member"> {{ApprovalInfo.Member.fname || '---'}} {{ApprovalInfo.Member.lname || '---'}}</span><br />
                                        On:<span ng-if="ApprovalInfo.approvalDate"> {{ApprovalInfo.approvalDate | date: 'MM/dd/yyyy hh:mm a' || '---'}}</span>
                                        <button ng-if="ApprovalInfo.approvalDate" type="button" class="borderLess" tooltip-placement="right" uib-tooltip="Time displayed as local, stored in UTC.">
                                            <span class="glyphicon glyphicon-question-sign"></span>
                                        </button>
                                    </div>
                                </div>

                                <div ng-if="aFile.filetype_id === 1" class="form-group" style="margin:0;padding:0;">
                                    <label class="col-md-4 control-label" for="Caption">Preview Caption:</label>
                                    <div class="col-md-6">
                                        <span>
                                            Photo of {{aFile.description || ' (Description HERE) '}} at {{thisSensorSite.site_description}}, {{thisSensorSite.county}}, {{thisSensorSite.state}}, {{aFile.photo_date | date: 'MM/dd/yyyy' || ' Date taken HERE '}}. Photograph by {{aSource.FULLname || ' Source Name HERE ' }}, {{agencyNameForCap || ' Agency HERE '}}.
                                        </span>
                                    </div>
                                </div>

                                <!-- Associated Files FULL SENSOR PAGE -->
                                <div ng-if="aFile.file_id !== undefined && aFile.filetype_id !== 8" class="form-group" style="margin:0;padding:0;padding-top:12px;">
                                    <label class="col-md-4 control-label">Associated File:</label>
                                    <div class="col-md-6">
                                        <span ng-if="fileItemExists">
                                            <a target="_blank" title="Download file" ng-href="{{serverURL}}/Files/{{aFile.file_id}}/Item">{{aFile.name}}</a>
                                            <br />
                                            <img ng-if="isPhoto" style="height:80px;" ng-src="{{src}}" />
                                        </span>
                                        <span ng-if="!fileItemExists">-- Missing --</span>
                                        <!--ReUpload Single Image with validations*-->
                                        <div ng-if="!fileItemExists" class="form-group">
                                            <div class="col-md-9">
                                                <label class="custom-file-input" for="Upload" />
                                                <input id="Upload" type="file" max="500000" file-model="aFile.File" style="visibility: hidden">
                                                <div class="col-md-7 pull-left" ng-if="aFile.File.type == 'image/png' || aFile.File.type == 'image/jpeg' || aFile.File.type == 'image/gif'"><img ngf-thumbnail="aFile.File" style="height:60px" class="thumbnail"></div>
                                                <div class="col-md-7 pull-left" ng-if="aFile.File.type !== 'image/png' && aFile.File.type !== 'image/jpeg' && aFile.File.type !== 'image/gif'" style="overflow:auto">{{aFile.File.name}}</div>
                                                <div class="col-md-5">
                                                    <span ng-if="aFile.File">
                                                        Correct File?
                                                        <button ng-if="aFile.File" type="button" ng-click="saveFileUpload()">Upload</button>
                                                    </span>
                                                </div>
                                            </div>

                                        </div>
                                        <!-- change out the existing fileItem with a different one-->
                                        <div ng-if="fileItemExists" class="form-group">
                                            <div class="col-md-9">
                                                <label class="custom-file-inputChange" for="Upload" />
                                                <input id="Upload" type="file" max="500000" file-model="aFile.File1" style="visibility: hidden">
                                                <div class="col-md-7 pull-left" ng-if="aFile.File1.type == 'image/png' || aFile.File1.type == 'image/jpeg' || aFile.File1.type == 'image/gif'"><img ngf-thumbnail="aFile.File1" style="height:60px" class="thumbnail"></div>
                                                <div class="col-md-7 pull-left" ng-if="aFile.File1.type !== 'image/png' && aFile.File1.type !== 'image/jpeg' && aFile.File1.type !== 'image/gif'" style="overflow:auto">{{aFile.File1.name}}</div>
                                                <div class="col-md-5">
                                                    <span ng-if="aFile.File1">
                                                        Correct File?
                                                        <button ng-if="aFile.File1" type="button" ng-click="saveFileUpload()">Replace</button>
                                                    </span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="col-md-8" ng-show="!fullSenfileIsUploading">
                                    <button class="btn btn-primary" ng-if="aFile.file_id != undefined" ng-click="saveFile(DepSenFILEForm.$valid)">Save File</button>
                                    <button type="button" ng-show="(datafile.data_file_id != undefined && ApprovalInfo.approvalDate == undefined) && (userRole == 'Admin' || userRole == 'Manager')"
                                            class="btn btn-primary" ng-click="approveDF(DepSenFILEForm.$valid)">
                                        Approve
                                    </button>
                                    <button type="button" ng-show="(datafile.data_file_id != undefined && ApprovalInfo.approvalDate != undefined) && (userRole == 'Admin' || userRole == 'Manager')"
                                            class="btn btn-primary" ng-click="unApproveDF(DepSenFILEForm.$valid)">
                                        UnApprove
                                    </button>
                                    <button type="button" class="btn btn-danger" ng-if="aFile.file_id != undefined" ng-click="deleteFile()">Delete File</button>
                                    <button class="btn btn-primary" ng-if="aFile.file_id == undefined" ng-click="createFile(DepSenFILEForm.$valid)">Create File</button>
                                    <button class="btn btn-warning" type="button" ng-click="cancelFile()">Close/Cancel File</button>
                                </div>
                                <div class="col-md-4" ng-if="!showProcessing">
                                    <!-- button to run STORM script if this existing data file is on a water sensor (sensor_type_id == 1 && (deployment_type_id == 1 || deployment_type_id == 2) )-->
                                    <span ng-show="(aFile.script_parent == undefined  || aFile.script_parent == '') || aFile.script_parent.indexOf('_') == -1">
                                        <!-- don't show the button for outputs of other scripts ran -->
                                        <button type="button" class="btn btn-primary" ng-if="aFile.file_id != undefined && aFile.filetype_id === 2 && (sensor.sensor_type_id == 1 && (sensor.deployment_type_id == 1 || sensor.deployment_type_id == 2))" ng-click="showStormSection()">Run Storm Script</button>
                                    </span>
                                    <span ng-show="(aFile.script_parent == undefined || aFile.script_parent == '') || (aFile.script_parent != undefined && aFile.script_parent == 'true')">
                                        <!-- don't show the button for outputs of other scripts ran -->
                                        <!-- button to run AIR script if this existing data file is on a air sensor (sensor_type_id == 1 && deployment_type_id == 3 ) -->
                                        <button type="button" class="btn btn-primary" ng-if="aFile.file_id != undefined && aFile.filetype_id === 2 && (sensor.sensor_type_id == 1 && sensor.deployment_type_id == 3)" ng-click="showdlSection()">Process Air Data File</button>
                                    </span>
                                </div>
                                <div ng-show="fullSenfileIsUploading"><img src="images/fileUpload.gif" /></div>
                                <div ng-show="showProcessing" class="col-md-4"><img src="images/processing.gif" /></div>
                                <br clear="all" />
                                <div ng-if="stormSection">
                                    <div ng-if="eventDataFiles.length > 0">
                                        <h4 style="margin-top:1em;">Select the raw csv barometric sensor file that you would like to use.</h4>
                                        <table class="table" style="display:inline-block;overflow:auto;">
                                            <thead>
                                                <tr>
                                                    <th class="selected"></th>
                                                    <th class="site_no">Site No.&nbsp;<a ng-click="sort_by('site_no')"><i class="glyphicon glyphicon-sort"></i></a></th>
                                                    <th class="distance">Site distance&nbsp;<a ng-click="sort_by('distance')"><i class="glyphicon glyphicon-sort"></i></a></th>
                                                    <th class="county">Location&nbsp;<a ng-click="sort_by('county')"><i class="glyphicon glyphicon-sort"></i></a></th>
                                                    <th class="brand_name">Sensor Brand&nbsp;<a ng-click="sort_by('brand_name')"><i class="glyphicon glyphicon-sort"></i></a></th>
                                                    <th class="name">File Name&nbsp;<a ng-click="sort_by('name')"><i class="glyphicon glyphicon-sort"></i></a></th>
                                                    <th class="good_start">Good Start&nbsp;<a ng-click="sort_by('good_start')"><i class="glyphicon glyphicon-sort"></i></a></th>
                                                    <th class="good_end">Good End&nbsp;<a ng-click="sort_by('good_end')"><i class="glyphicon glyphicon-sort"></i></a></th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr ng-repeat="df in eventDataFiles | orderBy:sortingOrder:reverse" ng-show="($index >= firstIndex) && ($index < lastIndex)">
                                                    <td><input type="radio" name="selected" ng-model="df.selected" value="true" ng-change="updateChosenAirRadio(df)" /></td>
                                                    <td>{{df.site_no}}</td>
                                                    <td>{{df.distance | number:4}} mi.</td>
                                                    <td>{{df.county}}, {{df.state}}</td>
                                                    <td>{{df.brand_name}}</td>
                                                    <td>{{df.name}}</td>
                                                    <td>{{df.good_start | date: 'MM/dd/yyyy hh:mm a' }}</td>
                                                    <td>{{df.good_end | date: 'MM/dd/yyyy hh:mm a'}}</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                        <div class="text-center">
                                            <uib-pagination ng-model="pagination.currentPage" max-size="pagination.maxPaginationSize" total-items="(eventDataFiles).length"
                                                            ng-change="updatePageIndexes()" items-per-page="itemsPerPage" boundary-links="true" previous-text="&lsaquo;"
                                                            next-text="&rsaquo;" first-text="&laquo;" last-text="&raquo;">
                                            </uib-pagination>
                                        </div>
                                        <div class="col-md-12">
                                            <div style="margin-bottom:15px" class="chx">
                                                <label>
                                                    <input style="margin:0!important;" class="col-md-1" type="checkbox" ng-model="is4Hz.selected" ng-true-value="'true'" ng-false-value="'false'" /> Sensor is 4 Hz
                                                    <button type="button" class="help-btn borderLess" tooltip-placement="right" tooltip-append-to-body="false"
                                                            uib-tooltip="Select this option if your instrument was sampled at 4hz, otherwise leave unchecked.">
                                                        <span class="glyphicon glyphicon-question-sign"></span>
                                                    </button>
                                                    <br/>
                                                    <br clear="all"/>
                                                    <!-- <input style="margin:0!important;" type="checkbox" class="col-md-1" name="daylightSavingsStorm" ng-model="daylightSavingsStorm.selected" ng-true-value="'true'" ng-false-value="'false'" /> Check this box if data was recorded in Daylight Savings? -->
                                                </label>
                                            </div>
                                            <div class="col-md-7"><button class="btn btn-primary" ng-click="runStormScript()">Run Script</button></div>
                                        </div>
                                    </div>
                                    <div style="margin:10px;" class="col-md-12" ng-if="eventDataFiles.length == 0">
                                        <span>This script requires a barometric sensor data file (at this event) to be used for processing with this water data file.</span>
                                    </div>
                                </div> <!-- end stormSection -->
                                <!-- Section for air data file DLS checkbox -->
                                <div ng-if="dl.showdlSection" style="margin: 15px;">
                                    <!-- <input style="margin:0!important;" type="checkbox" class="col-md-1" name="daylightSavingsAir" ng-model="daylightSavingsAir.selected" ng-true-value="'true'" ng-false-value="'false'" /> Check this box if data was recorded in Daylight Savings? -->
                                    <br/>
                                    <br clear="all"/>
                                    <button type="button" class="btn btn-primary" ng-click="runAirScript()">Run Script</button>
                                </div>
                            </fieldset>
                        </form>
                    </div>
                </div>
            </uib-accordion-group>

            <!-- sensor files in nwis link part-->
            <div ng-if="sensorDataNWIS" style="margin-top:5px;">
                <uib-accordion-group is-open="s.NWISFileOpen">
                    <uib-accordion-heading>
                        <i style="margin-right:10px" class="pull-left glyphicon" ng-class="{'glyphicon-chevron-down': s.NWISFileOpen, 'glyphicon-chevron-right': !s.NWISFileOpen}"></i>
                        <span ng-class="{'redText':showNWISFileForm}">NWIS Data Connection</span>
                        <button type="button" class="col-md-1 borderLess pull-right" tooltip-placement="left" tooltip-append-to-body="false" uib-tooltip-html="nwisHeaderTip">
                            <span class="glyphicon glyphicon-question-sign"></span>
                        </button>
                    </uib-accordion-heading>
                    <div class="col-md-12">
                        <div class="col-md-5"><h4>NWIS metadata for sensor</h4></div>
                        <div class="col-md-2" ng-if="!showNWISFileForm" style="margin-top:14px">
                            <button type="button" class="borderLess" ng-click="showNWISFile(0)" tooltip-placement="top" uib-tooltip="Add file metadata to this Sensor">
                                <span class="glyphicon glyphicon-plus"></span>
                            </button>
                        </div>
                        <br clear="all" />
                        <!-- list of existing files for this op -->
                        <div class="col-md-6" ng-if="sensorNWISFiles.length > 0">
                            <ul style="padding-left: 0">
                                <li ng-repeat="f in sensorNWISFiles" style="list-style:none;padding-bottom: 15px;">
                                    <span class="col-sm-9 borderLess" style="padding:0">
                                        <a class="btn borderLess" style="padding:0" title="{{f.file_date | date: 'MM/dd/yyyy'}} ({{f.name || f.file_id}})" ng-click="showNWISFile(f)">{{f.file_date | date: 'MM/dd/yyyy'}} ({{f.name || f.file_id}})</a>
                                    </span>
                                </li>
                            </ul>
                        </div>
                        <div ng-if="showNWISFileForm">
                            <br clear="all" /><hr />
                            <form class="form-horizontal" name="NWISSenFILEForm">
                                <fieldset>
                                    <!-- File Type* -->
                                    <div class="form-group" style="margin:0;padding:0">
                                        <label class="col-md-4 control-label">File Type:</label>
                                        <div class="col-md-6" style="margin-top:14px">{{NWISFile.FileType}}</div>
                                    </div>

                                    <br clear="all" />

                                    <!--File URL-->
                                    <div class="form-group" style="margin:0;padding:0">
                                        <label class="col-md-4 control-label" for="name">File URL:</label>
                                        <div class="col-md-6">
                                            <input class="form-control" name="name" title="{{NWISFile.name}}" ng- ng-model="NWISFile.name" type="text" />
                                        </div>
                                        <button type="button" class="col-md-1 borderLess pull-left" tooltip-placement="bottom" tooltip-append-to-body="false" uib-tooltip="Auto generated from USGS Station ID. Correct if necessary.">
                                            <span class="glyphicon glyphicon-question-sign"></span>
                                        </button>
                                    </div>

                                    <!--Data Processed by -->
                                    <div class="form-group" style="margin:0;padding:0">
                                        <label class="col-md-4 control-label" for="processor_id">Data Process By:</label>
                                        <div class="col-md-6" style="margin-top:14px">
                                            <span>{{nwisProcessor.fname}} {{nwisProcessor.lname}}</span>
                                        </div>
                                    </div>
                                    <!-- Date Collected/Processed* (data)-->
                                    <div class="form-group" ng-class="{'has-error':NWISSenFILEForm.collect_date.$invalid && NWISSenFILEForm.collect_date.$dirty}" style="margin:0;padding:0">
                                        <label class="col-md-4 control-label req" for="collect_date">
                                            Date Collected/Processed:
                                            <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Required">
                                                <span class="glyphicon glyphicon-asterisk" style="color:#d00;font-size:xx-small;"></span>
                                            </button>
                                        </label>
                                        <div class="col-md-4 input-group" style="padding-right:14px;padding-left:14px">
                                            <input class="form-control dateInputStyle" type="date" name="dfcd" uib-datepicker-popup="MM/dd/yyyy" show-weeks="false" is-open="datepickrs.dfcd" ng-model="NWISDF.collect_date" required />
                                            <span class="input-group-btn">
                                                <button class="btn btn-default" type="button" ng-click="open($event, 'dfcd')">
                                                    <i class="glyphicon glyphicon-calendar" />
                                                </button>
                                            </span>
                                        </div>
                                    </div>

                                    <!-- Date Uploaded* -->
                                    <div class="form-group" ng-class="{'has-error':NWISSenFILEForm.file_date.$invalid && NWISSenFILEForm.file_date.$dirty}" style="margin:0;padding:0">
                                        <label class="col-md-4 control-label req" for="file_date">
                                            Date Uploaded:
                                            <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Required">
                                                <span class="glyphicon glyphicon-asterisk" style="color:#d00;font-size:xx-small;"></span>
                                            </button>
                                        </label>
                                        <div class="col-md-4 input-group" style="padding-right:14px;padding-left:14px">
                                            <input class="form-control dateInputStyle" type="date" name="fd" uib-datepicker-popup="MM/dd/yyyy" show-weeks="false" is-open="datepickrs.fd" ng-model="NWISFile.file_date" required />
                                            <span class="input-group-btn">
                                                <button class="btn btn-default" type="button" ng-click="open($event, 'fd')">
                                                    <i class="glyphicon glyphicon-calendar" />
                                                </button>
                                            </span>
                                        </div>
                                    </div>

                                    <!--Description*-->
                                    <div class="form-group" ng-class="{'has-error':NWISSenFILEForm.description.$invalid && NWISSenFILEForm.description.$dirty}" style="margin:0;padding:0">
                                        <label class="col-md-4 control-label req" for="description">
                                            Description:
                                            <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Required">
                                                <span class="glyphicon glyphicon-asterisk" style="color:#d00;font-size:xx-small;"></span>
                                            </button>
                                        </label>
                                        <div class="col-md-6">
                                            <textarea class="form-control" id="description" type="text" rows="3" placeholder="Description" ng-model="NWISFile.description" required />
                                        </div>
                                    </div>

                                    <!-- Good Data Start Time* (data) -->
                                    <div class="form-group" ng-class="{'has-error':NWISSenFILEForm.good_start.$invalid && NWISSenFILEForm.good_start.$dirty}" style="margin:0;padding:0">
                                        <label class="col-md-4 control-label req" for="good_start" style="margin-top:4%">
                                            Good Data Start Time:
                                            <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Required">
                                                <span class="glyphicon glyphicon-asterisk" style="color:#d00;font-size:xx-small;"></span>
                                            </button>
                                        </label>
                                        <div class="col-md-6">
                                            <datetimepicker ng-model="NWISDF.good_start" show-meridian="true" date-format="MM/dd/yyyy" readonly-date="false" date-options="dateOptions"
                                                            hidden-time="false" hidden-date="false" show-spinners="true" date-opened="datepickrs.dfgs" date-ng-click="open($event, 'dfgs')" required>
                                            </datetimepicker>
                                        </div>
                                        <button type="button" class="col-md-1 borderLess pull-left" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Used by the processing scripts to clip irrelavent data.">
                                            <span class="glyphicon glyphicon-question-sign"></span>
                                        </button>
                                    </div>

                                    <!-- Good Data End Time* (data)-->
                                    <div class="form-group" ng-class="{'has-error':NWISSenFILEForm.good_end.$invalid && NWISSenFILEForm.good_end.$dirty}" style="margin:0;padding:0">
                                        <label class="col-md-4 control-label req" for="good_end" style="margin-top:4%">
                                            Good Data End Time:
                                            <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Required">
                                                <span class="glyphicon glyphicon-asterisk" style="color:#d00;font-size:xx-small;"></span>
                                            </button>
                                        </label>
                                        <div class="col-md-6">
                                            <datetimepicker ng-model="NWISDF.good_end" show-meridian="true" date-format="MM/dd/yyyy" readonly-date="false" date-options="dateOptions"
                                                            hidden-time="false" hidden-date="false" show-spinners="true" date-opened="datepickrs.dfge" date-ng-click="open($event, 'dfge')" required>
                                            </datetimepicker>
                                        </div>
                                        <button type="button" class="col-md-1 borderLess pull-left" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Used by the processing scripts to clip irrelavent data.">
                                            <span class="glyphicon glyphicon-question-sign"></span>
                                        </button>
                                    </div>

                                    <!-- Timezone*: -->
                                    <div class="form-group" style="margin:0;padding:0">
                                        <label class="col-md-4 control-label req">
                                            Time Zone:
                                            <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Required">
                                                <span class="glyphicon glyphicon-asterisk" style="color:#d00;font-size:xx-small;"></span>
                                            </button>
                                        </label>
                                        <div class="col-md-6">
                                            <select class="form-control" name="time_zone" ng-model="NWISDF.time_zone" ng-options="vcm for vcm in timeZoneList" required>
                                                <option value=""></option>
                                            </select>
                                        </div>
                                        <button type="button" class="borderLess pull-left" tooltip-placement="right" tooltip-append-to-body="false" uib-tooltip="Date/Time will be stored in UTC.">
                                            <span class="glyphicon glyphicon-question-sign"></span>
                                        </button>
                                    </div>

                                    <!-- Elevation -->
                                    <div class="form-group" style="margin:0;padding:0">
                                        <label class="col-md-4 control-label">Elevation:</label>
                                        <div class="col-md-6">
                                            <span class="radio-inline">
                                                <input type="radio" name="elevation_status" ng-model="NWISDF.elevation_status" value="Final" />Final
                                            </span>
                                            <span class="radio-inline">
                                                <input type="radio" name="elevation_status" ng-model="NWISDF.elevation_status" value="Arbitrary" />Arbitrary
                                            </span>
                                        </div>
                                    </div>

                                    <button class="btn btn-primary" ng-if="NWISFile.file_id != undefined" ng-click="saveNWISFile(NWISSenFILEForm.$valid)">Save NWIS File Info</button>
                                    <button type="button" class="btn btn-danger" ng-if="NWISFile.file_id != undefined" ng-click="deleteNWISFile()">Delete NWIS File Info</button>
                                    <button class="btn btn-primary" ng-if="NWISFile.file_id == undefined" ng-click="createNWISFile(NWISSenFILEForm.$valid)">Create NWIS File Info</button>
                                    <button type="button" class="btn btn-warning" ng-click="cancelNWISFile()">Close/Cancel NWIS File Info</button>
                                </fieldset>
                            </form>
                        </div>
                    </div>
                </uib-accordion-group>
            </div>
        </uib-accordion>
    </div>
    <div class="modal-footer">
        <div class="form-group">
            <div class="col-md-12">
                <button type="button" class="btn btn-danger" ng-disabled="showFileForm || showNWISFileForm" ng-click="deleteS()">Delete Sensor</button>
                <button type="button" class="btn btn-warning" ng-disabled="showFileForm || showNWISFileForm" ng-click="cancel()">Close</button>
            </div>
        </div>
    </div>
</script>

<!-- MODAL for FILE create-->
<script type="text/ng-template" id="FileCreateModal.html">
    <div class="modal-header">
        <h3 class="modal-title">{{whoseFile}}<button class="close" type="button" ng-click="cancel()" aria-hidden="true" style="color:gray;">&times;</button></h3>
    </div>
    <form class="form-horizontal" name="FILEcreateForm">
        <fieldset>
            <div class="modal-body">
                <!--File Type*-->
                <div class="form-group" ng-class="{'has-error':FILEcreateForm.filetype_id.$invalid && FILEcreateForm.filetype_id.$dirty}">
                    <label class="col-md-3 control-label req" for="filetype_id">
                        File Type:
                        <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Required">
                            <span class="glyphicon glyphicon-asterisk" style="color:#d00;font-size:xx-small;"></span>
                        </button>
                    </label>
                    <div class="col-md-6">
                        <select class="form-control" name="filetype_id" ng-model="aFile.filetype_id" ng-change="updateAgencyForCaption()" ng-options="ft.filetype_id as ft.filetype for ft in fileTypes" required>
                            <option value=""></option>
                        </select>
                    </div>
                </div>

                <!--Upload Single Image with validations*-->
                <div ng-if="aFile.file_id === undefined && aFile.filetype_id !== 8" class="form-group">
                    <label class="col-md-3 control-label" for="FILE">
                        Upload File:
                        <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Required">
                            <span class="glyphicon glyphicon-asterisk" style="color:#d00;font-size:xx-small;"></span>
                        </button>
                    </label>
                    <div class="col-md-9">
                        <input type="file" max="500000" file-model="aFile.File" />
                        <img ngf-thumbnail="aFile.File" style="height:60px" class="thumbnail">
                    </div>
                </div>

                <br clear="all" />

                <!-- photo file upload fileType==1-->  <!-- all other file upload fileType > 2-->    <!--data file upload fileType==2 (NOT DEALT WITH IN THIS MODAL -- only in Sensor Modals) -->
                <!--File URL (link)-->
                <div ng-if="aFile.filetype_id === 8" class="form-group">
                    <label class="col-md-3 control-label" for="name">File URL:</label>
                    <div class="col-md-6">
                        <input class="form-control" name="name" ng-model="aFile.name" type="text" />
                    </div>
                    <button type="button" class="col-md-1 borderLess pull-left" tooltip-placement="bottom" tooltip-append-to-body="false" uib-tooltip="Please link to persistent URLs or digital object identifier (doi) urls.">
                        <span class="glyphicon glyphicon-question-sign"></span>
                    </button>
                </div>

                <!--Data Processed by (Data)-->
                <div ng-if="aFile.filetype_id === 2" class="form-group">
                    <label class="col-md-3 control-label" for="processor_id">Data Process By:</label>
                    <div class="col-md-6">
                        {{processor}}
                    </div>
                </div>

                <!-- Date Collected/Processed* (data) -->
                <div ng-if="aFile.filetype_id === 2" class="form-group" ng-class="{'has-error':FILEcreateForm.collect_date.$invalid && FILEcreateForm.collect_date.$dirty}">
                    <label class="col-md-3 control-label req" for="collect_date">
                        Date Collected/Processed:
                        <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Required">
                            <span class="glyphicon glyphicon-asterisk" style="color:#d00;font-size:xx-small;"></span>
                        </button>
                    </label>
                    <div class="col-md-4 input-group" style="padding-right:14px;padding-left:14px">
                        <input class="form-control dateInputStyle" type="date" name="dfcd" uib-datepicker-popup="MM/dd/yyyy" show-weeks="false" is-open="datepickrs.dfcd" ng-model="datafile.collect_date" required />
                        <span class="input-group-btn">
                            <button class="btn btn-default" type="button" ng-click="open($event, 'dfcd')">
                                <i class="glyphicon glyphicon-calendar" />
                            </button>
                        </span>
                    </div>
                </div>

                <!--Source Name (all other)-->
                <div class="form-group" ng-if="aFile.filetype_id === 1" ng-class="{'has-error':FILEcreateForm.FULLname.$invalid && FILEcreateForm.FULLname.$dirty}">
                    <label class="col-md-3 control-label req" for="source_id">
                        Source Photographer:
                        <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Required">
                            <span class="glyphicon glyphicon-asterisk" style="color:#d00;font-size:xx-small;"></span>
                        </button>
                    </label>
                    <div class="col-md-6">
                        <input class="form-control" name="FULLname" ng-model="aSource.FULLname" type="text" required />
                    </div>
                </div>

                <div class="form-group" ng-if="aFile.filetype_id  > 2" ng-class="{'has-error':FILEcreateForm.FULLname.$invalid && FILEcreateForm.FULLname.$dirty}">
                    <label class="col-md-3 control-label req" for="source_id">
                        Source Name:
                        <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Required">
                            <span class="glyphicon glyphicon-asterisk" style="color:#d00;font-size:xx-small;"></span>
                        </button>
                    </label>
                    <div class="col-md-6">
                        <input class="form-control" name="FULLname" ng-model="aSource.FULLname" type="text" required />
                    </div>
                </div>

                <!--Source Agency* (photo, allOther)-->
                <div ng-if="aFile.filetype_id === 1 || aFile.filetype_id > 2" class="form-group" ng-class="{'has-error':FILEcreateForm.agency_id.$invalid && FILEcreateForm.agency_id.$dirty}">
                    <label class="col-md-3 control-label req" for="agency_id">
                        Source Agency:
                        <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Required">
                            <span class="glyphicon glyphicon-asterisk" style="color:#d00;font-size:xx-small;"></span>
                        </button>
                    </label>
                    <div class="col-md-6">
                        <select class="form-control" name="agency_id" ng-model="aSource.agency_id" ng-change="updateAgencyForCaption()"
                                ng-options="a.agency_id as a.agency_name for a in agencies" required>
                            <option value=""></option>
                        </select>
                    </div>
                </div>

                <!-- Photo Date* (photo) -->
                <div ng-if="aFile.filetype_id === 1" class="form-group" ng-class="{'has-error':FILEcreateForm.photo_date.$invalid && FILEcreateForm.photo_date.$dirty}">
                    <label class="col-md-3 control-label req" for="photo_date">
                        Photo Date:
                        <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Required">
                            <span class="glyphicon glyphicon-asterisk" style="color:#d00;font-size:xx-small;"></span>
                        </button>
                    </label>
                    <div class="col-md-4 input-group" style="padding-right:14px;padding-left:14px">
                        <input class="form-control dateInputStyle" type="date" name="sd" uib-datepicker-popup="MM/dd/yyyy" show-weeks="false" is-open="datepickrs.sd" ng-model="aFile.photo_date" required />
                        <span class="input-group-btn">
                            <button class="btn btn-default" type="button" ng-click="open($event, 'sd')">
                                <i class="glyphicon glyphicon-calendar" />
                            </button>
                        </span>
                    </div>
                </div>

                <!-- Date Uploaded* (photo, data, allother) -->
                <div ng-if="aFile.filetype_id > 0" class="form-group" ng-class="{'has-error':FILEcreateForm.file_date.$invalid && FILEcreateForm.file_date.$dirty}">
                    <label class="col-md-3 control-label req" for="file_date">
                        Date Uploaded:
                        <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Required">
                            <span class="glyphicon glyphicon-asterisk" style="color:#d00;font-size:xx-small;"></span>
                        </button>
                    </label>
                    <div class="col-md-4 input-group" style="padding-right:14px;padding-left:14px">
                        <input class="form-control dateInputStyle" type="date" name="fd" uib-datepicker-popup="MM/dd/yyyy" show-weeks="false" is-open="datepickrs.fd" ng-model="aFile.file_date" required />
                        <span class="input-group-btn">
                            <button class="btn btn-default" type="button" ng-click="open($event, 'fd')">
                                <i class="glyphicon glyphicon-calendar" />
                            </button>
                        </span>
                    </div>
                </div>

                <!--Description*(photo, data, allother)-->
                <div ng-if="aFile.filetype_id > 0" class="form-group" ng-class="{'has-error':FILEcreateForm.description.$invalid && FILEcreateForm.description.$dirty}">
                    <label class="col-md-3 control-label req" for="description">
                        Description:
                        <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Required">
                            <span class="glyphicon glyphicon-asterisk" style="color:#d00;font-size:xx-small;"></span>
                        </button>
                    </label>
                    <div class="col-md-6">
                        <textarea class="form-control" id="description" type="text" rows="3" placeholder="Description" ng-model="aFile.description" required />
                    </div>
                    <button ng-show="aFile.filetype_id == 1" type="button" class="col-md-1 borderLess pull-left" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Populates in Photo caption below. If a person or people appear in photo include name(s). If non-USGS personnel, ensure consent to publish name in caption is given.">
                        <span class="glyphicon glyphicon-question-sign"></span>
                    </button>
                </div>

                <!-- Good Data Start Time* (data) -->
                <div ng-if="aFile.filetype_id === 2" class="form-group" ng-class="{'has-error':FILEcreateForm.good_start.$invalid && FILEcreateForm.good_start.$dirty}">
                    <label class="col-md-3 control-label req" for="good_start">
                        Good Data Start Time:
                        <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Required">
                            <span class="glyphicon glyphicon-asterisk" style="color:#d00;font-size:xx-small;"></span>
                        </button>
                    </label>
                    <div class="col-md-6">
                        <datetimepicker ng-model="datafile.good_start" show-meridian="true" date-format="MM/dd/yyyy" readonly-date="false" date-options="dateOptions"
                                        hidden-time="false" hidden-date="false" show-spinners="true" date-opened="datepickrs.dfgs" date-ng-click="open($event, 'dfgs')" required>
                        </datetimepicker>
                    </div>
                    <button type="button" class="col-md-1 borderLess pull-left" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Used by the processing scripts to clip irrelavent data.">
                        <span class="glyphicon glyphicon-question-sign"></span>
                    </button>
                </div>

                <!-- Good Data End Time* (data) -->
                <div ng-if="aFile.filetype_id === 2" class="form-group" ng-class="{'has-error':FILEcreateForm.good_end.$invalid && FILEcreateForm.good_end.$dirty}">
                    <label class="col-md-3 control-label req" for="good_end">
                        Good Data End Time:
                        <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Required">
                            <span class="glyphicon glyphicon-asterisk" style="color:#d00;font-size:xx-small;"></span>
                        </button>
                    </label>
                    <div class="col-md-6">
                        <datetimepicker ng-model="datafile.good_end" show-meridian="true" date-format="MM/dd/yyyy" readonly-date="false" date-options="dateOptions"
                                        hidden-time="false" hidden-date="false" show-spinners="true" date-opened="datepickrs.dfge" date-ng-click="open($event, 'dfge')" required>
                        </datetimepicker>
                    </div>
                    <button type="button" class="col-md-1 borderLess pull-left" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Used by the processing scripts to clip irrelavent data.">
                        <span class="glyphicon glyphicon-question-sign"></span>
                    </button>
                </div>

                <!-- Timezone*:-->
                <div ng-if="aFile.filetype_id === 2" class="form-group">
                    <label class="col-md-3 control-label req">
                        Time Zone:
                        <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Required">
                            <span class="glyphicon glyphicon-asterisk" style="color:#d00;font-size:xx-small;"></span>
                        </button>
                    </label>
                    <div class="col-md-6">
                        <select class="form-control" name="time_zone" ng-model="datafile.time_zone" ng-options="vcm for vcm in timeZoneList" required>
                            <option value=""></option>
                        </select>
                    </div>
                    <button type="button" class="borderLess pull-left" tooltip-placement="right" tooltip-append-to-body="false" uib-tooltip="Date/Time will be stored in UTC.">
                        <span class="glyphicon glyphicon-question-sign"></span>
                    </button>
                </div>

                <div ng-if="aFile.filetype_id === 2" class="form-group">
                    <label class="col-md-3 control-label">Elevation:</label>
                    <div class="col-md-6">
                        <span class="radio-inline">
                            <input type="radio" name="elevation_status" ng-model="datafile.elevation_status" value="Final" />Final
                        </span>
                        <span class="radio-inline">
                            <input type="radio" name="elevation_status" ng-model="datafile.elevation_status" value="Arbitrary" />Arbitrary
                        </span>
                    </div>
                </div>

                <!-- This is where Other ends, rest is for Photo -->
                <!--Photo Direction (photo)-->
                <div ng-if="aFile.filetype_id === 1" class="form-group">
                    <label class="col-md-3 control-label" for="photo_direction">Photo Direction:</label>
                    <div class="col-md-6">
                        <input class="form-control" id="photo_direction" name="photo_direction" ng-model="aFile.photo_direction" type="text" />
                    </div>
                </div>

                <!-- Photo Latitude (photo)-->
                <div ng-if="aFile.filetype_id === 1" class="form-group">
                    <label class="col-md-3 control-label" for="latitude_dd">Photo Latitude <br /> (if different):</label>
                    <div class="col-md-6">
                        <input class="form-control" ng-keypress="isNum($event)" name="latitude_dd" id="latitude_dd" ng-model="aFile.latitude_dd" type="text" />
                    </div>
                </div>
                <!--Photo Longitude (photo)-->
                <div ng-if="aFile.filetype_id === 1" class="form-group">
                    <label class="col-md-3 control-label" for="longitude_dd">Photo Longitude <br /> (if different):</label>
                    <div class="col-md-6">
                        <input class="form-control" ng-keypress="isNum($event)" id="longitude_dd" name="longitude_dd" ng-model="aFile.longitude_dd" type="text" />
                    </div>
                </div>

                <div ng-if="aFile.filetype_id === 1" class="form-group">
                    <label class="col-md-3 control-label" for="Caption">Preview Caption:</button></label>
                    <div class="col-md-6">
                        <span>
                            Photo of {{aFile.description || '(Description HERE)'}} at {{theSite.site_description}}, {{theSite.county}}, {{theSite.state}}, {{aFile.photo_date | date: 'MM/dd/yyyy' || ' Date taken HERE '}}. Photograph by {{aSource.FULLname || ' Source Name HERE ' }}, {{agencyNameForCap || ' Agency HERE '}}.
                        </span>
                    </div>
                </div>

                <div ng-if="aFile.file_id !== undefined && aFile.filetype_id !== 8" class="form-group">
                    <label class="col-md-3 control-label">Associated File:</label>
                    <div class="col-md-6">
                        <a target="_blank" title="Download File" ng-href="{{serverURL}}/Files/{{aFile.file_id}}/Item">
                            <span class="glyphicon glyphicon-download"></span>
                        </a>
                        <img ng-if="aFile.filetype_id === 1" style="height:80px;" ng-src="{{serverURL}}/Files/{{aFile.file_id}}/Item" />
                    </div>
                </div>
                <div class="form-group">
                    <div class="col-md-12 text-center">
                        <button class="btn btn-primary" ng-click="create(FILEcreateForm.$valid)">Create</button>
                    </div>
                </div>
            </div> <!--end modal body-->

            <div class="modal-footer">
                <div ng-show="!sFileIsUploading">
                    <button class="btn btn-warning" type="button" ng-click="cancel()">Close/Cancel</button>
                </div>
                <div ng-show="sFileIsUploading"><img src="images/fileUpload.gif" /></div>
            </div>
        </fieldset>
    </form>
</script>

<!-- MODAL for FILE details/edit-->
<script type="text/ng-template" id="FILEmodal.html">
    <div class="modal-header">
        <h3 class="modal-title">{{whoseFile}} <span ng-if="aFile.is_nwis == 1">(NWIS Connection datafile)</span><button class="close" type="button" ng-click="cancel()" aria-hidden="true" style="color:gray;">&times;</button></h3>
    </div>
    <form class="form-horizontal" name="FILEForm">
        <fieldset>
            <div class="modal-body">
                <!--File Type* (detail)-->
                <div class="col-md-12" ng-if="view.FILEval == 'detail'">
                    <div class="col-md-4"><label>File Type:</label></div>
                    <div class="col-md-6">{{aFile.fileType || '---'}}</div>
                </div>
                <!--File Type* (edit)-->
                <div class="form-group" ng-if="view.FILEval == 'edit'" ng-class="{'has-error':FILEForm.filetype_id.$invalid && FILEForm.filetype_id.$dirty}">
                    <label class="col-md-4 control-label req" for="filetype_id">
                        File Type:
                        <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Required">
                            <span class="glyphicon glyphicon-asterisk" style="color:#d00;font-size:xx-small;"></span>
                        </button>
                    </label>
                    <div class="col-md-6">
                        <div class="col-md-6">{{aFile.fileType || '---'}}</div>
                        <!--<select class="form-control" name="filetype_id" ng-model="fileCopy.filetype_id" ng-change="updateAgencyForCaption()" ng-options="ft.filetype_id as ft.filetype for ft in fileTypes" required>
                            <option value=""></option>
                        </select>-->
                    </div>
                </div>

                <!--Upload Single Image with validations*-->
                <div ng-if="aFile.file_id === undefined && aFile.filetype_id !== 8" class="form-group">
                    <label class="col-md-4 control-label" for="FILE">
                        Upload File:
                        <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Required">
                            <span class="glyphicon glyphicon-asterisk" style="color:#d00;font-size:xx-small;"></span>
                        </button>
                    </label>
                    <div class="col-md-9">
                        <input type="file" max="500000" file-model="aFile.File" />
                        <img ngf-thumbnail="aFile.File" style="height:60px" class="thumbnail">
                    </div>
                </div>

                <br clear="all" />
                <!-- photo file upload fileType==1-->  <!-- all other file upload fileType > 2-->    <!--data file upload fileType==2 (NOT DEALT WITH IN THIS MODAL -- only in Sensor Modals) -->
                <!--File URL (link) (detail)-->
                <div ng-if="view.FILEval == 'detail' && (aFile.filetype_id === 8 || aFile.is_nwis === 1)" class="col-md-12">
                    <div class="col-md-4"><label>File URL:</label></div>
                    <div class="col-md-6">{{aFile.name || '---'}}</div>
                </div>

                <!--File URL (link) (edit)-->
                <div ng-if="view.FILEval == 'edit' && (fileCopy.filetype_id === 8 || fileCopy.is_nwis === 1)" class="form-group">
                    <label class="col-md-4 control-label" for="name">File URL:</label>
                    <div class="col-md-6">
                        <input class="form-control" title="{{fileCopy.name}}" nam name="name" ng-model="fileCopy.name" type="text" />
                    </div>
                    <button type="button" class="col-md-1 borderLess pull-left" tooltip-placement="bottom" tooltip-append-to-body="false" uib-tooltip="Please link to persistent URLs or digital object identifier (doi) urls.">
                        <span class="glyphicon glyphicon-question-sign"></span>
                    </button>
                </div>

                <!--Data Processed by (Data) (detail)-->
                <div ng-if="view.FILEval == 'detail' && aFile.filetype_id === 2" class="col-md-12">
                    <div class="col-md-4"><label>Data Process By:</label></div>
                    <div class="col-md-6">{{processor}}</div>
                </div>
                <!--Data Processed by (Data) (edit)-->
                <div ng-if="view.FILEval == 'edit' && fileCopy.filetype_id === 2" class="form-group">
                    <label class="col-md-4 control-label" for="processor_id">Data Process By:</label>
                    <div class="col-md-6">{{processor || usersName}}</div>
                </div>

                <!-- Date Collected/Processed* (data) (detail) -->
                <div ng-if="view.FILEval == 'detail' && aFile.filetype_id === 2" class="col-md-12">
                    <div class="col-md-4"><label>Date Collected/Processed:</label></div>
                    <div class="col-md-4 input-group" style="padding-right:14px;padding-left:14px">
                        {{datafile.collect_date | date: 'MM/dd/yyyy' || '---'}}
                    </div>
                </div>
                <!-- Date Collected/Processed* (data)  (edit)-->
                <div ng-if="view.FILEval == 'edit' && fileCopy.filetype_id === 2" class="form-group" ng-class="{'has-error':FILEForm.collect_date.$invalid && FILEForm.collect_date.$dirty}">
                    <label class="col-md-4 control-label req" for="collect_date">
                        Date Collected/Processed:
                        <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Required">
                            <span class="glyphicon glyphicon-asterisk" style="color:#d00;font-size:xx-small;"></span>
                        </button>
                    </label>
                    <div class="col-md-4 input-group" style="padding-right:14px;padding-left:14px">
                        <input class="form-control dateInputStyle" type="date" name="dfcd" uib-datepicker-popup="MM/dd/yyyy" show-weeks="false" is-open="datepickrs.dfcd" ng-model="dfCopy.collect_date" required />
                        <span class="input-group-btn">
                            <button class="btn btn-default" type="button" ng-click="open($event, 'dfcd')">
                                <i class="glyphicon glyphicon-calendar" />
                            </button>
                        </span>
                    </div>
                </div>

                <!--Source Name (Photo) (detail) -->
                <div class="col-md-12" ng-if="view.FILEval == 'detail' && aFile.filetype_id === 1">
                    <div class="col-md-4"><label>Source Photographer:</label></div>
                    <div class="col-md-6">{{aSource.FULLname || '---'}}</div>
                </div>
                <!--Source Name (Photo) (edit)-->
                <div class="form-group" ng-if="view.FILEval == 'edit' && fileCopy.filetype_id === 1" ng-class="{'has-error':FILEForm.FULLname.$invalid && FILEForm.FULLname.$dirty}">
                    <label class="col-md-4 control-label req" for="source_id">
                        Source Photographer:
                        <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Required">
                            <span class="glyphicon glyphicon-asterisk" style="color:#d00;font-size:xx-small;"></span>
                        </button>
                    </label>
                    <div class="col-md-6">
                        <input class="form-control" name="FULLname" ng-model="sourceCopy.FULLname" type="text" required />
                    </div>
                </div>

                <!--Source Name (allOther) (detail)-->
                <div class="col-md-12" ng-if="view.FILEval == 'detail' && aFile.filetype_id  > 2">
                    <div class="col-md-4"><label>Source Name:</label></div>
                    <div class="col-md-6">{{aSource.FULLname || '---'}}</div>
                </div>
                <!--Source Name (allOther) (edit)-->
                <div class="form-group" ng-if="view.FILEval == 'edit' && fileCopy.filetype_id  > 2" ng-class="{'has-error':FILEForm.FULLname.$invalid && FILEForm.FULLname.$dirty}">
                    <label class="col-md-4 control-label req" for="source_id">
                        Source Name:
                        <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Required">
                            <span class="glyphicon glyphicon-asterisk" style="color:#d00;font-size:xx-small;"></span>
                        </button>
                    </label>
                    <div class="col-md-6">
                        <input class="form-control" name="FULLname" ng-model="sourceCopy.FULLname" type="text" required />
                    </div>
                </div>

                <!--Source Agency* (photo, allOther) (detail)-->
                <div ng-if="view.FILEval == 'detail' && (aFile.filetype_id === 1 || aFile.filetype_id > 2)" class="col-md-12">
                    <div class="col-md-4"><label>Source Agency:</label></div>
                    <div class="col-md-6">{{aSource.agencyName || '---'}}</div>
                </div>
                <!--Source Agency* (photo, allOther) (edit)-->
                <div ng-if="view.FILEval == 'edit' && (fileCopy.filetype_id === 1 || fileCopy.filetype_id > 2)" class="form-group" ng-class="{'has-error':FILEForm.agency_id.$invalid && FILEForm.agency_id.$dirty}">
                    <label class="col-md-4 control-label req" for="agency_id">
                        Source Agency:
                        <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Required">
                            <span class="glyphicon glyphicon-asterisk" style="color:#d00;font-size:xx-small;"></span>
                        </button>
                    </label>
                    <div class="col-md-6">
                        <select class="form-control" name="agency_id" ng-model="sourceCopy.agency_id" ng-change="updateAgencyForCaption()"
                                ng-options="a.agency_id as a.agency_name for a in agencies" required>
                            <option value=""></option>
                        </select>
                    </div>
                </div>

                <!-- Photo Date* (photo)  (detail)-->
                <div ng-if="view.FILEval == 'detail' && aFile.filetype_id === 1" class="col-md-12">
                    <div class="col-md-4"><label>Photo Date:</label></div>
                    <div class="col-md-4 input-group" style="padding-right:14px;padding-left:14px">
                        <span>{{aFile.photo_date | date: 'MM/dd/yyyy' || '---'}}</span>
                    </div>
                </div>
                <!-- Photo Date* (photo) (edit) -->
                <div ng-if="view.FILEval == 'edit' && fileCopy.filetype_id === 1" class="form-group" ng-class="{'has-error':FILEForm.photo_date.$invalid && FILEForm.photo_date.$dirty}">
                    <label class="col-md-4 control-label req" for="photo_date">
                        Photo Date:
                        <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Required">
                            <span class="glyphicon glyphicon-asterisk" style="color:#d00;font-size:xx-small;"></span>
                        </button>
                    </label>
                    <div class="col-md-4 input-group" style="padding-right:14px;padding-left:14px">
                        <input class="form-control dateInputStyle" type="date" name="sd" uib-datepicker-popup="MM/dd/yyyy" show-weeks="false" is-open="datepickrs.sd" ng-model="fileCopy.photo_date" required />
                        <span class="input-group-btn">
                            <button class="btn btn-default" type="button" ng-click="open($event, 'sd')">
                                <i class="glyphicon glyphicon-calendar" />
                            </button>
                        </span>
                    </div>
                </div>

                <!-- Date Uploaded* (photo, data, allother) (detail) -->
                <div ng-if="view.FILEval == 'detail' && aFile.filetype_id > 0" class="col-md-12">
                    <div class="col-md-4"><label>Date Uploaded:</label></div>
                    <div class="col-md-4 input-group" style="padding-right:14px;padding-left:14px">
                        <span>{{aFile.file_date | date: 'MM/dd/yyyy' || '---'}}</span>
                    </div>
                </div>
                <!-- Date Uploaded* (photo, data, allother) (edit) -->
                <div ng-if="view.FILEval == 'edit' && fileCopy.filetype_id > 0" class="form-group" ng-class="{'has-error':FILEForm.file_date.$invalid && FILEForm.file_date.$dirty}">
                    <label class="col-md-4 control-label req" for="file_date">
                        Date Uploaded:
                        <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Required">
                            <span class="glyphicon glyphicon-asterisk" style="color:#d00;font-size:xx-small;"></span>
                        </button>
                    </label>
                    <div class="col-md-4 input-group" style="padding-right:14px;padding-left:14px">
                        <input class="form-control dateInputStyle" type="date" name="fd" uib-datepicker-popup="MM/dd/yyyy" show-weeks="false" is-open="datepickrs.fd" ng-model="fileCopy.file_date" required />
                        <span class="input-group-btn">
                            <button class="btn btn-default" type="button" ng-click="open($event, 'fd')">
                                <i class="glyphicon glyphicon-calendar" />
                            </button>
                        </span>
                    </div>
                </div>

                <!--Description*(photo, data, allother) (detail)-->
                <div ng-if="view.FILEval == 'detail' && aFile.filetype_id > 0" class="col-md-12">
                    <div class="col-md-4"><label>Description:</label></div>
                    <div class="col-md-6">{{aFile.description || '---'}}</div>
                </div>
                <!--Description*(photo, data, allother) (edit)-->
                <div ng-if="view.FILEval == 'edit' && fileCopy.filetype_id > 0" class="form-group" ng-class="{'has-error':FILEForm.description.$invalid && FILEForm.description.$dirty}">
                    <label class="col-md-4 control-label req" for="description">
                        Description:
                        <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Required">
                            <span class="glyphicon glyphicon-asterisk" style="color:#d00;font-size:xx-small;"></span>
                        </button>
                    </label>
                    <div class="col-md-6">
                        <textarea class="form-control" id="description" type="text" rows="3" placeholder="Description" ng-model="fileCopy.description" required />
                    </div>
                </div>

                <!-- Good Data Start Time* (data) (detail) -->
                <div ng-if="view.FILEval == 'detail' && aFile.filetype_id === 2" class="col-md-12">
                    <div class="col-md-4"><label>Good Data Start Time:</label></div>
                    <div class="col-md-6">{{datafile.good_start | date: 'MM/dd/yyyy hh:mm a' || '---'}}</div>
                </div>
                <!-- Good Data Start Time* (data) (edit)-->
                <div ng-if="view.FILEval == 'edit' && fileCopy.filetype_id === 2" class="form-group" ng-class="{'has-error':FILEForm.good_start.$invalid && FILEForm.good_start.$dirty}">
                    <label class="col-md-4 control-label req" style="padding-top:4em;" for="good_start">
                        Good Data Start Time:
                        <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Required">
                            <span class="glyphicon glyphicon-asterisk" style="color:#d00;font-size:xx-small;"></span>
                        </button>
                    </label>
                    <div class="col-md-6">
                        <datetimepicker ng-model="dfCopy.good_start" show-meridian="true" date-format="MM/dd/yyyy" readonly-date="false" date-options="dateOptions"
                                        hidden-time="false" hidden-date="false" show-spinners="true" date-opened="datepickrs.dfgs" date-ng-click="open($event, 'dfgs')" required>
                        </datetimepicker>
                    </div>
                    <button style="padding-top:4em;" type="button" class="col-md-1 borderLess pull-left" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Used by the processing scripts to clip irrelavent data.">
                        <span class="glyphicon glyphicon-question-sign"></span>
                    </button>
                </div>

                <!-- Good Data End Time* (data) (detail) -->
                <div ng-if="view.FILEval == 'detail' && aFile.filetype_id === 2" class="col-md-12">
                    <div class="col-md-4"><label>Good Data End Time:</label></div>
                    <div class="col-md-6">{{datafile.good_end | date: 'MM/dd/yyyy hh:mm a' || '---'}}</div>
                </div>
                <!-- Good Data End Time* (data) (edit)-->
                <div ng-if="view.FILEval == 'edit' && fileCopy.filetype_id === 2" class="form-group" ng-class="{'has-error':FILEForm.good_end.$invalid && FILEForm.good_end.$dirty}">
                    <label class="col-md-4 control-label req" style="padding-top:4em;" for="good_end">
                        Good Data End Time:
                        <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Required">
                            <span class="glyphicon glyphicon-asterisk" style="color:#d00;font-size:xx-small;"></span>
                        </button>
                    </label>
                    <div class="col-md-6">
                        <datetimepicker ng-model="dfCopy.good_end" show-meridian="true" date-format="MM/dd/yyyy" readonly-date="false" date-options="dateOptions"
                                        hidden-time="false" hidden-date="false" show-spinners="true" date-opened="datepickrs.dfge" date-ng-click="open($event, 'dfge')" required>
                        </datetimepicker>
                    </div>
                    <button style="padding-top:4em;" type="button" class="col-md-1 borderLess pull-left" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Used by the processing scripts to clip irrelavent data.">
                        <span class="glyphicon glyphicon-question-sign"></span>
                    </button>
                </div>

                <!-- Timezone*: (detail) -->
                <div ng-if="view.FILEval == 'detail' && aFile.filetype_id === 2" class="col-md-12">
                    <div class="col-md-4"><label>Time Zone:</label></div>
                    <div class="col-md-6">{{datafile.time_zone}}</div>
                </div>
                <!-- Timezone*: (edit)-->
                <div ng-if="view.FILEval == 'edit' && fileCopy.filetype_id === 2" class="form-group">
                    <label class="col-md-4 control-label req">
                        Time Zone:
                        <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Required">
                            <span class="glyphicon glyphicon-asterisk" style="color:#d00;font-size:xx-small;"></span>
                        </button>
                    </label>
                    <div class="col-md-6">
                        <select class="form-control" name="time_zone" ng-model="dfCopy.time_zone" ng-options="vcm for vcm in timeZoneList" required>
                            <option value=""></option>
                        </select>
                    </div>
                    <button type="button" class="col-md-1 borderLess pull-left" tooltip-placement="right" tooltip-append-to-body="false" uib-tooltip="Date/Time will be stored in UTC.">
                        <span class="glyphicon glyphicon-question-sign"></span>
                    </button>
                </div>

                <!--elevation (detail)-->
                <div ng-if="view.FILEval == 'detail' && aFile.filetype_id === 2" class="col-md-12">
                    <div class="col-md-4"><label>Elevation:</label></div>
                    <div class="col-md-6">{{datafile.elevation_status || '---'}}</div>
                </div>
                <!--elevation (edit)-->
                <div ng-if="view.FILEval == 'edit' && fileCopy.filetype_id === 2" class="form-group">
                    <label class="col-md-4 control-label">Elevation:</label>
                    <div class="col-md-6">
                        <span class="radio-inline">
                            <input type="radio" name="elevation_status" ng-model="dfCopy.elevation_status" value="Final" />Final
                        </span>
                        <span class="radio-inline">
                            <input type="radio" name="elevation_status" ng-model="dfCopy.elevation_status" value="Arbitrary" />Arbitrary
                        </span>
                    </div>
                </div>

                <!-- Approval info (detail)-->
                <div class="col-md-12" ng-if="view.FILEval == 'detail' && (aFile.filetype_id === 2 && aFile.file_id !== undefined && aFile.is_nwis !== 1)">
                    <div class="col-md-4"><label>Approval Info:</label></div>
                    <div class="col-md-6" ng-if="ApprovalInfo.Member !== undefined">
                        Approved By:<span ng-if="ApprovalInfo.Member"> {{ApprovalInfo.Member.fname || '---'}} {{ApprovalInfo.Member.lname || '---'}}</span><br />
                        On:<span ng-if="ApprovalInfo.approvalDate"> {{ApprovalInfo.approvalDate | date: 'MM/dd/yyyy hh:mm a' || '---'}}</span>
                        <button ng-if="ApprovalInfo.approvalDate" type="button" class="borderLess" tooltip-placement="right" uib-tooltip="Time displayed as local, stored in UTC.">
                            <span class="glyphicon glyphicon-question-sign"></span>
                        </button>
                    </div>
                </div>
                <!-- Approval info (edit) -->
                <div class="form-group" ng-if="view.FILEval == 'edit' && (aFile.filetype_id === 2 && aFile.file_id !== undefined && aFile.is_nwis !== 1)">
                    <label class="col-md-4 control-label" for="approval_id">Approval Info:</label>
                    <div class="col-md-6" ng-if="ApprovalInfo.Member !== undefined">
                        Approved By:<span ng-if="ApprovalInfo.Member"> {{ApprovalInfo.Member.fname || '---'}} {{ApprovalInfo.Member.lname || '---'}}</span><br />
                        On:<span ng-if="ApprovalInfo.approvalDate"> {{ApprovalInfo.approvalDate | date: 'MM/dd/yyyy hh:mm a' || '---'}}</span>
                        <button ng-if="ApprovalInfo.approvalDate" type="button" class="borderLess" tooltip-placement="right" uib-tooltip="Time displayed as local, stored in UTC.">
                            <span class="glyphicon glyphicon-question-sign"></span>
                        </button>
                    </div>
                </div>

                <!-- This is where Other ends, rest is for Photo -->
                <!--Photo Direction (photo) (detail)-->
                <div ng-if="view.FILEval == 'detail' && aFile.filetype_id === 1" class="col-md-12">
                    <div class="col-md-4"><label>Photo Direction:</label></div>
                    <div class="col-md-6">{{aFile.photo_direction || '---'}}</div>
                </div>
                <!--Photo Direction (photo) (edit)-->
                <div ng-if="view.FILEval == 'edit' && fileCopy.filetype_id === 1" class="form-group">
                    <label class="col-md-4 control-label" for="photo_direction">Photo Direction:</label>
                    <div class="col-md-6">
                        <input class="form-control" id="photo_direction" name="photo_direction" ng-model="fileCopy.photo_direction" type="text" />
                    </div>
                </div>

                <!-- Photo Latitude (photo) (detail)-->
                <div ng-if="view.FILEval == 'detail' && aFile.filetype_id === 1" class="col-md-12">
                    <div class="col-md-4"><label>Photo Latitude <br /> (if different):</label></div>
                    <div class="col-md-6">{{aFile.latitude_dd || '---'}}</div>
                </div>
                <!-- Photo Latitude (photo) (edit)-->
                <div ng-if="view.FILEval == 'edit' && fileCopy.filetype_id === 1" class="form-group">
                    <label class="col-md-4 control-label" for="latitude_dd">Photo Latitude <br /> (if different):</label>
                    <div class="col-md-6">
                        <input class="form-control" ng-keypress="isNum($event)" name="latitude_dd" id="latitude_dd" ng-model="fileCopy.latitude_dd" type="text" />
                    </div>
                </div>

                <!--Photo Longitude (photo) (detail)-->
                <div ng-if="view.FILEval == 'detail' && aFile.filetype_id === 1" class="col-md-12">
                    <div class="col-md-4"><label>Photo Longitude <br /> (if different):</label></div>
                    <div class="col-md-6">{{aFile.longitude_dd || '---'}}</div>
                </div>
                <!--Photo Longitude (photo) (edit)-->
                <div ng-if="view.FILEval == 'edit' && fileCopy.filetype_id === 1" class="form-group">
                    <label class="col-md-4 control-label" for="longitude_dd">Photo Longitude <br /> (if different):</label>
                    <div class="col-md-6">
                        <input class="form-control" ng-keypress="isNum($event)" id="longitude_dd" name="longitude_dd" ng-model="fileCopy.longitude_dd" type="text" />
                    </div>
                </div>

                <!-- caption (detail)-->
                <div ng-if="view.FILEval == 'detail' && aFile.filetype_id === 1" class="col-md-12" style="padding-bottom: 12px;">
                    <div class="col-md-4"><label>Preview Caption:</label></div>
                    <div class="col-md-6">
                        <span>
                            Photo of {{aFile.description || '(Description HERE)'}} at {{theSite.site_description}}, {{theSite.county}}, {{theSite.state}}, {{aFile.photo_date | date: 'MM/dd/yyyy' || ' Date taken HERE '}}. Photograph by {{aSource.FULLname || ' Source Name HERE ' }}, {{agencyNameForCap || ' Agency HERE '}}.
                        </span>
                    </div>
                </div>
                <!-- caption (edit)-->
                <div ng-if="view.FILEval == 'edit' && fileCopy.filetype_id === 1" class="form-group" style="padding-bottom: 12px;">
                    <label class="col-md-4 control-label" for="Caption">Preview Caption:</button></label>
                    <div class="col-md-6">
                        <span>
                            Photo of {{fileCopy.description || '(Description HERE)'}} at {{theSite.site_description}}, {{theSite.county}}, {{theSite.state}}, {{fileCopy.photo_date | date: 'MM/dd/yyyy' || ' Date taken HERE '}}. Photograph by {{sourceCopy.FULLname || ' Source Name HERE ' }}, {{agencyNameForCap || ' Agency HERE '}}.
                        </span>
                    </div>
                </div>

                <!-- associated files (detail) FILE ACCORDION -->
                <div ng-if="view.FILEval == 'detail' && ((aFile.file_id !== undefined && aFile.filetype_id !== 8 && aFile.is_nwis !== 1) || (fileCopy.file_id !== undefined && fileCopy.filetype_id !== 8 && fileCopy.is_nwis !== 1))" class="col-md-12">
                    <div class="col-md-4"><label>Associated File:</label></div>
                    <div class="col-md-6">
                        <span ng-if="fileItemExists">
                            <a target="_blank" title="Download File" ng-href="{{serverURL}}/Files/{{aFile.file_id}}/Item">{{aFile.name}}</a>
                            <br />
                            <img ng-if="isPhoto" style="height:80px;" ng-src="{{src}}"></img>
                        </span>

                        <span ng-if="!fileItemExists">-- Missing --</span>

                        <!--ReUpload Single Image-->
                        <div ng-if="!fileItemExists" class="form-group">
                            <div class="col-md-7">
                                <label class="custom-file-input" for="Upload" />
                                <input id="Upload" type="file" max="500000" file-model="aFile.File" style="visibility: hidden">
                                <div class="col-md-7 pull-left" ng-if="aFile.File.type == 'image/png' || aFile.File.type == 'image/jpeg' || aFile.File.type == 'image/gif'"><img ngf-thumbnail="aFile.File" style="height:60px" class="thumbnail"></div>
                                <div class="col-md-7 pull-left" ng-if="aFile.File.type !== 'image/png' && aFile.File.type !== 'image/jpeg' && aFile.File.type !== 'image/gif'" style="overflow:auto">{{aFile.File.name}}</div>
                                <div class="col-md-5">
                                    <span ng-if="aFile.File">
                                        Correct File?
                                        <button ng-if="aFile.File" type="button" ng-click="saveFileUpload()">Upload</button>
                                    </span>
                                </div>
                            </div>
                        </div>
                        <!-- change out the existing fileItem with a different one-->
                        <div ng-if="fileItemExists" class="form-group">
                            <div class="col-md-9">
                                <label class="custom-file-inputChange" for="Upload" />
                                <input id="Upload" type="file" max="500000" file-model="aFile.File1" style="visibility: hidden">
                                <div class="col-md-7 pull-left" ng-if="aFile.File1.type == 'image/png' || aFile.File1.type == 'image/jpeg' || aFile.File1.type == 'image/gif'"><img ngf-thumbnail="aFile.File1" style="height:60px" class="thumbnail"></div>
                                <div class="col-md-7 pull-left" ng-if="aFile.File1.type !== 'image/png' && aFile.File1.type !== 'image/jpeg' && aFile.File1.type !== 'image/gif'" style="overflow:auto">{{aFile.File1.name}}</div>
                                <div class="col-md-5">
                                    <span ng-if="aFile.File1">
                                        Correct File?
                                        <button ng-if="aFile.File1" type="button" ng-click="saveFileUpload()">Replace</button>
                                    </span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- associated files (edit)-->
                <div ng-if="view.FILEval == 'edit' && ((aFile.file_id !== undefined && aFile.filetype_id !== 8 && aFile.is_nwis !== 1) || (fileCopy.file_id !== undefined && fileCopy.filetype_id !== 8 && fileCopy.is_nwis !== 1))" class="form-group">
                    <label class="col-md-4 control-label">Associated File:</label>
                    <div class="col-md-6">
                        <a target="_blank" title="Download File" ng-href="{{serverURL}}/Files/{{fileCopy.file_id}}/Item">
                            <span class="glyphicon glyphicon-download"></span>
                        </a>
                        <img ng-if="fileCopy.filetype_id === 1" style="height:80px;" ng-src="{{serverURL}}/Files/{{fileCopy.file_id}}/Item" />
                    </div>
                </div>
                <br clear="all" />
                <!-- Edit Save Approve buttons
                <div class="form-group" ng-show="createOReditFile == 'edit'">-->
                <div class="col-md-12" ng-show="createOReditFile == 'edit'">
                    <button type="button" class="btn btn-primary" ng-show="view.FILEval == 'detail'" ng-click="wannaEditFILE()">Edit File</button>
                    <button class="btn btn-primary" ng-show="view.FILEval == 'edit'" ng-click="save(FILEForm.$valid)">Save</button>
                    <button type="button" class="btn btn-primary" ng-click="approveDF()"
                            ng-show="(datafile.data_file_id != undefined && aFile.is_nwis !== 1 && view.FILEval == 'detail' && ApprovalInfo.approvalDate == undefined && (userRole == 'Admin' || userRole == 'Manager'))">
                        Approve
                    </button>
                    <button type="button" class="btn btn-warning" ng-click="unApproveDF()"
                            ng-show="(datafile.data_file_id != undefined && (view.FILEval == 'detail' && ApprovalInfo.approvalDate != undefined) && (userRole == 'Admin' || userRole == 'Manager'))">
                        UnApprove
                    </button>
                    <button type="button" class="btn btn-warning" ng-show="view.FILEval == 'edit'" ng-click="cancelFILEEdit()">Cancel Edit</button>
                </div>
                <!--</div>-->

                <div class="form-group" ng-show="createOReditFile == 'create'">
                    <div class="col-md-12 text-center">
                        <button class="btn btn-primary" ng-click="create(FILEForm.$valid)">Create</button>
                    </div>
                </div>

            </div> <!--end modal body-->
            <br clear="all" />
            <div class="modal-footer">
                <div ng-show="!sFileIsUploading">
                    <button type="button" class="btn btn-danger" ng-if="aFile.file_id != undefined" ng-click="deleteFile()">Delete File</button>
                    <button class="btn btn-warning" type="button" ng-click="cancel()">Close/Cancel</button>
                </div>
                <div ng-show="sFileIsUploading"><img src="images/fileUpload.gif" /></div>
            </div>
        </fieldset>
    </form>
</script>

<style type="text/css">
    .needRetrieve {
        color: red;
    }


    .chart div {
        width: 0;
        transition: all 1s ease-out;
        -moz-transition: all 1s ease-out;
        -webkit-transition: all 1s ease-out;
        font: 10px sans-serif;
        background-color: steelblue;
        text-align: right;
        padding: 3px;
        margin: 5px;
        color: white;
        box-shadow: 2px 2px 2px #666;
    }
</style>
<!-- MODAL for PEAK Create/edit-->
<script type="text/ng-template" id="PEAKmodal.html">
    <div class="modal-header">
        <h3 class="modal-title">Peak Summary<button class="close" type="button" ng-click="cancel()" aria-hidden="true" style="color:gray;">&times;</button></h3>
    </div>
    <form class="form-horizontal" name="peakForm" role="form">
        <fieldset>
            <div class="modal-body">
                <!-- Start SENSORs and HWMs used for Peak -->
                <label class="col-md-6 text-center">Select Data used for Interpretation</label>
                <!-- HWM list-->
                <div class="col-sm-12" ng-repeat="h in eventSiteHWMs">
                    <input type="checkbox" class="col-sm-1 pull-left" ng-model="h.selected" ng-click="addHWM(h)" />
                    <span>
                        <!-- class="col-sm-7">-->
                        HWM {{h.hwm_id}} - {{h.elev_ft || '--'}} ft

                    </span>
                    <span class="col-sm-4 pull-right">
                        <button type="button" class="borderLess" tooltip-placement="top" uib-tooltip="Show Details" ng-click="showHWMDetails(h)"><span class="glyphicon glyphicon-info-sign"></span></button>
                        <button ng-if="h.elev_ft" type="button" class="borderLess" tooltip-placement="top" uib-tooltip="Set as Primary" ng-click="primaryHWM(h)"><span class="glyphicon glyphicon-check"></span></button>
                        <button ng-if="!h.elev_ft" type="button" class="borderLess" tooltip-placement="top" uib-tooltip="Incomplete" ng-click="showIncompleteHWMInfo()"><span class="glyphicon glyphicon-alert"></span></button>
                    </span>
                </div>
                <!-- Sensor list -->
                <div class="col-sm-12" ng-repeat="s in eventSiteSensors">
                    <!--<span class="col-sm-1"> </span>-->
                    <span class="col-md-12">
                        {{s.deploymentType || s.sensorType}} Sensor
                        <button type="button" class="borderLess" tooltip-placement="top" uib-tooltip="Show Details" ng-click="showSensorDetails(s)"><span class="glyphicon glyphicon-info-sign"></span></button>
                    </span>
                    <span class="col-sm-4 pull-right">
                        <button ng-if="s.NeedDF" type="button" class="borderLess" tooltip-placement="top" uib-tooltip="Incomplete" ng-click="showIncompleteDFInfo()"><span class="glyphicon glyphicon-alert"></span></button>
                        <button ng-if="!s.isRetrieved" type="button" class="borderLess" tooltip-placement="top" uib-tooltip="Needs to be Retrieved" ng-click="showRetrieveInfo()"><span class="needRetrieve glyphicon glyphicon-alert"></span></button>
                    </span>
                    <!-- Sensor FILES list -->
                    <div ng-repeat="f in s.files | where:{filetype_id: 2}" class="col-sm-12">
                        <!--<span class="col-sm-1"> </span>-->
                        <input type="checkbox" class="pull-left col-sm-1" ng-model="f.selected" ng-click="addDataFile(f)" />
                        <span>{{f.name || '---'}}</span>
                        <span class="col-sm-4 pull-right">
                            <button type="button" class="borderLess" tooltip-placement="top" uib-tooltip="Show Details" ng-click="showDataFileDetails(f)"><span class="glyphicon glyphicon-info-sign"></span></button>
                            <button type="button" class="borderLess" tooltip-placement="top" uib-tooltip="Set as Primary" ng-click="primaryDataFile(f)"><span class="glyphicon glyphicon-check"></span></button>
                        </span>
                    </div>
                </div>

                <br clear="all" />

                <!-- hwm box of meta data and files -->
                <div style="border:solid 1px black;padding-bottom:10px;" class="col-md-12" ng-if="hwmDetail">
                    <!-- only show if they click showHWMDetails() above -->
                    <label>HWM {{HWMBox.hwm_id}} Details</label>
                    <button class="close" type="button" ng-click="closeDetail()" aria-hidden="true" style="color:gray;">&times;</button>
                    <ul>
                        <li style="list-style:none">Location Description: {{HWMBox.HWM_location_description || '--'}}</li>
                        <li style="list-style:none">Bank: {{HWMBox.bank}}</li>
                        <li style="list-style:none">Flag Date: {{HWMBox.flag_date | date:'MM/dd/yyyy'}}</li>
                        <li style="list-style:none">Elevation: {{HWMBox.elev_ft}} ft</li>
                        <li style="list-style:none">Elevation above ground: {{HWMBox.height_above_gnd}} ft</li>
                        <li style="list-style:none">Quality: {{HWMBox.hwm_quality}}</li>
                        <li style="list-style:none">Type: {{HWMBox.hwm_type}}</li>
                        <li style="list-style:none" ng-if="HWMBox.stillwater == 0">Stillwater: No</li>
                        <li style="list-style:none" ng-if="HWMBox.stillwater == 1">Stillwater: Yes</li>
                        <li style="list-style:none" ng-if="HWMBox.stillwater == undefined">Stillwater: ---</li>
                    </ul><br clear="all" />
                    <div class="col-md-12" ng-if="HWMBox.files.length > 0">
                        <label>HWM Files</label>
                        <ul style="padding-left: 0">
                            <li ng-repeat="f in HWMBox.files" style="list-style:none;padding-bottom: 15px;">
                                <span class="col-sm-9 borderLess" style="padding:0">
                                    <a class="borderLess" style="padding:0" target="_blank" ng-href="{{serverURL}}/Files/{{f.file_id}}/Item">
                                        {{f.file_date | date: 'MM/dd/yyyy'}} ({{f.name || f.file_id}})
                                    </a>
                                </span>
                            </li>
                        </ul>
                    </div>

                    <!-- carousel of photo files -->
                    <div class="col-md-6" ng-if="HWMBox.files.length > 0" style="height:120px;">
                        <uib-carousel interval="4000">
                            <uib-slide ng-repeat="f in HWMBox.files | where:{filetype_id:1}">
                                <img ng-click="showImageModal(f.file_id)" ng-src="{{serverURL}}/Files/{{f.file_id}}/Item" />
                                <div class="carousel-caption">
                                    <p>{{f.name || f.file_id}}</p>
                                </div>
                            </uib-slide>
                        </uib-carousel>
                    </div>
                </div>
                <!-- sensor box of meta data and files -->
                <div style="border:solid 1px black;padding-bottom:10px" class="col-md-12" ng-if="sensorDetail">
                    <!-- only show if they click showSensorDetails() above -->
                    <label>{{SensorBox.deploymentType || SensorBox.sensorType}} Sensor Details</label>
                    <button class="close" type="button" ng-click="closeDetail()" aria-hidden="true" style="color:gray;">&times;</button>
                    <ul>
                        <li style="list-style:none">Sensor Type: {{SensorBox.sensorType}}</li>
                        <li style="list-style:none">Deployment Type: {{SensorBox.deploymentType || '--'}}</li>
                        <li style="list-style:none">Retrieved on: {{SensorBox.instrument_status[0].time_stamp | date: 'MM/dd/yyyy hh:mm a'}}</li>
                        <li style="list-style:none">Collection Condition: {{SensorBox.CollectCondition || '--'}}</li>
                        <li style="list-style:none">Serial Number: {{SensorBox.serial_number || '--'}}</li>
                        <li style="list-style:none">Location Description: {{SensorBox.location_description || '--'}}</li>
                        <li style="list-style:none">Sensor Brand: {{SensorBox.sensorBrand || '--'}}</li>
                    </ul><br clear="all" />
                    <div class="col-md-12">
                        <label>Sensor Files</label>
                        <div ng-if="SensorBox.files.length > 0">
                            <ul style="padding-left: 0">
                                <li ng-repeat="f in SensorBox.files" style="list-style:none;padding-bottom: 15px;">
                                    <span class="col-sm-9 borderLess" style="padding:0">
                                        <a class="btn btn-primary borderLess" style="padding:0;color:#333333;" target="_blank" ng-href="{{serverURL}}/Files/{{f.file_id}}/Item">
                                            {{f.file_date | date: 'MM/dd/yyyy'}} ({{f.name || f.file_id}})
                                        </a>
                                    </span>
                                </li>
                            </ul>
                        </div>
                        <div ng-if="SensorBox.files.length == 0">No files</div>
                        <!-- carousel of photo files-->
                        <div class="col-md-6" ng-if="SensorBox.files.length > 0" style="height:120px;">
                            <uib-carousel interval="4000">
                                <uib-slide ng-repeat="f in SensorBox.files | where:{filetype_id:1}">
                                    <img ng-click="showImageModal(f.file_id)" ng-src="{{serverURL}}/Files/{{f.file_id}}/Item" />
                                    <div class="carousel-caption">
                                        <p>{{f.name || f.file_id}}</p>
                                    </div>
                                </uib-slide>
                            </uib-carousel>
                        </div>
                    </div>

                </div>
                <!-- datafile box of meta data and datafiles -->
                <div style="border:solid 1px black;padding-bottom:10px" class="col-md-12" ng-if="dataFileDetail">
                    <!-- only show if they click showDataFileDetails() above -->
                    <label>Data File {{DFBox.filePath}} Details</label><button class="close" type="button" ng-click="closeDetail()" aria-hidden="true" style="color:gray;">&times;</button>
                    <ul>
                        <li style="list-style:none">Description: {{DFBox.fileDesc || '--'}}</li>
                        <li style="list-style:none">Collected on: {{DFBox.collect_date | date: 'MM/dd/yyyy hh:mm a'}} UTC</li>
                        <li style="list-style:none">Good Start: {{DFBox.good_start | date: 'MM/dd/yyyy hh:mm a'}} UTC</li>
                        <li style="list-style:none">Good End:{{DFBox.good_end | date: 'MM/dd/yyyy hh:mm a'}} UTC</li>
                        <li style="list-style:none">Processed By: {{DFBox.processedBy.fname}} {{DFBox.processedBy.lname}}</li>
                        <li style="list-style:none">Elevation Status: {{DFBox.elevation_status}}</li>
                    </ul><br clear="all" />
                    <div class="col-md-12">
                        <label>File</label><br clear="all" />
                        <!-- TODO :: IF this is an NWIS file, show link to go see the data instead of the link to download -->
                        <span ng-if="!DFBox.nwisFile" class="col-sm-9 borderLess" style="padding:0">
                            <a class="btn btn-primary borderLess" style="padding:0;color:#333333;" target="_blank" ng-href="{{serverURL}}/Files/{{DFBox.fileID}}/Item">
                                {{DFBox.collect_date | date: 'MM/dd/yyyy'}} ({{DFBox.filePath}})
                            </a>
                        </span>
                        <span ng-if="DFBox.nwisFile" class="col-sm-9 borderLess" style="padding:0">
                            <a class="btn btn-primary borderLess" style="padding:0" target="_blank" ng-href="{{DFBox.fileURL}}">{{DFBox.fileURL}}</a>
                        </span>
                    </div>
                </div>
                <!--</div>
                </div>
                </div>-->
                <!-- End SENSORs and HWMs used for Peak -->

                <br clear="all" />

                <!-- Peak Calculation Notes: -->
                <div class="form-group">
                    <label class="col-md-4 control-label" for="calc_notes">Peak Calculation Notes:</label>
                    <div class="col-md-5">
                        <textarea class="form-control" name="calc_notes" type="text" rows="3" placeholder="Please document the reason this Peak was chosen for this event." ng-model="aPeak.calc_notes" />
                    </div>
                    <button type="button" class="col-md-2 borderLess" tooltip-placement="top" uib-tooltip="Please document the reason this Peak was chosen for this event.">
                        <span class="glyphicon glyphicon-question-sign"></span>
                    </button>
                </div>
                <br clear="all" />

                <!--Peak creator-->
                <div class="form-group">
                    <label class="col-md-4 control-label" for="member_id">Peak Creator:</label>
                    <div class="col-md-5" style="margin-top:13px">
                        <span>{{PeakCreator.fname}} {{PeakCreator.lname}}</span>
                    </div>
                </div>

                <!-- Peak Date: * -->
                <div class="form-group" ng-class="{'has-error':peakForm.peak_date.date.$invalid && peakForm.peak_date.date.$dirty}" id="test">
                    <label class="col-md-4 control-label req" for="peak_date.date">
                        Peak Date:
                        <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Required">
                            <span class="glyphicon glyphicon-asterisk" style="color:#d00;font-size:xx-small;"></span>
                        </button>
                    </label>
                    <div class="col-md-5">
                        <datetimepicker hour-step="1" minute-step="1" ng-model="aPeak.peak_date.date" show-meridian="true"
                                        date-format="MM/dd/yyyy" readonly-date="false" readonly-time="false" date-options="dateOptions"
                                        hidden-time="true" hidden-date="false" show-spinners="true" required>
                        </datetimepicker>
                    </div>
                    <div class="col-md-1">
                        <span tooltip-placement="right" uib-tooltip="Date Estimated?">
                            <input type="checkbox" name="is_peak_estimated" ng-model="aPeak.is_peak_estimated" ng-true-value="1" ng-false-value="0" />
                        </span>
                    </div>
                </div>

                <!-- Peak Time: * -->
                <div class="form-group" ng-class="{'has-error':peakForm.peak_date.time.$invalid && peakForm.peak_date.time.$dirty}">
                    <label class="col-md-4 control-label req" style="margin-top:4%" for="peak_time.time">
                        Peak Time:
                        <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Required">
                            <span class="glyphicon glyphicon-asterisk" style="color:#d00;font-size:xx-small;"></span>
                        </button>
                    </label>
                    <div class="col-md-5">
                        <datetimepicker hour-step="1" minute-step="1" ng-model="aPeak.peak_date.time" show-meridian="true"
                                        date-format="MM/dd/yyyy" readonly-date="false" readonly-time="false" date-options="dateOptions"
                                        hidden-time="false" hidden-date="true" show-spinners="true" required>
                        </datetimepicker>
                    </div>
                    <div class="col-md-1" style="margin-top:4%">
                        <span tooltip-placement="right" uib-tooltip="Time Estimated?">
                            <input type="checkbox" name="is_peak_time_estimated" ng-model="aPeak.is_peak_time_estimated" ng-true-value="1" ng-false-value="0" />
                        </span>
                    </div>
                </div>

                <!-- Time Zone:* -->
                <div class="form-group">
                    <label class="col-md-4 control-label" for="time_zone">
                        Peak Recorded In:
                        <button type="button" class="help-btn" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Required">
                            <span class="glyphicon glyphicon-asterisk" style="color:#d00;font-size:xx-small;"></span>
                        </button>
                    </label>
                    <div class="col-md-5">
                        <select class="form-control" name="time_zone" ng-model="aPeak.time_zone" ng-change="change()"
                                ng-options="vcm for vcm in timeZoneList" required>
                            <option value=""></option>
                        </select>
                    </div>
                    <button type="button" class="col-md-2 borderLess" tooltip-placement="top" uib-tooltip="Date/Time will be stored in UTC.">
                        <span class="glyphicon glyphicon-question-sign"></span>
                    </button>
                </div>

                <!-- Time Preview:* -->
                <div class="form-group">
                        <label class="col-md-4 control-label">
                                <button type="button" class="btn btn-primary" ng-click="previewTime()" ng-disabled="aPeak.time_zone == undefined" ng-model="aPeak.time_zone == undefined" tooltip-enable="aPeak.time_zone == undefined" tooltip-placement="top" ng-style="{'pointer-events':disableButton ? 'none' : ''}" uib-tooltip="Select a timezone in the dropdown above to see conversion">  
                                    <span style="color:#fff;">Preview time in UTC</span>
                                </button> 
                        </label>
                        <div class="col-md-5">
                                 : {{timePreview}}
                        </div>
                    </div>

                <!-- Peak Stage-->
                <div class="form-group">
                    <label class="col-md-4 control-label" for="peak_stage">Peak Stage (elevation ft):</label>
                    <div class="col-md-5">
                        <input class="form-control" ng-keypress="isNum($event)" name="peak_stage" ng-model="aPeak.peak_stage" type="text" />
                    </div>
                    <div class="col-md-1">
                        <span tooltip-placement="right" uib-tooltip="Peak Stage Estimated?">
                            <input type="checkbox" name="is_peak_stage_estimated" ng-model="aPeak.is_peak_stage_estimated" ng-true-value="1" ng-false-value="0" />
                        </span>
                    </div>
                </div>

                <!-- Vertical Datum: -->
                <div class="form-group" ng-class="{'required': aPeak.peak_stage}">
                    <label class="col-md-4 control-label" ng-class="{'req': aPeak.peak_stage}" for="vdatum_id">Vertical Datum:</label>
                    <div class="col-md-5">
                        <select class="form-control" name="vdatum_id" ng-model="aPeak.vdatum_id"
                                ng-options="vd.datum_id as vd.datum_abbreviation for vd in VDatumsList" ng-required="aPeak.peak_stage">
                            <option value=""></option>
                        </select>
                    </div>
                    <button ng-show="aPeak.peak_stage" type="button" class="col-md-2 borderLess" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Vertical Datum is required if Peak Stage Elevation is populated.">
                        <span class="glyphicon glyphicon-question-sign"></span>
                    </button>
                </div>

                <!-- Height Above Ground (ft)-->
                <div class="form-group">
                    <label class="col-md-4 control-label" for="height_above_gnd">Height Above Ground <br />(depth of water in ft):</label>
                    <div class="col-md-5">
                        <input class="form-control" ng-keypress="isNum($event)" name="height_above_gnd" ng-model="aPeak.height_above_gnd" type="text" />
                    </div>
                    <div class="col-md-1">
                        <span tooltip-placement="right" uib-tooltip="HAG Estimated?">
                            <input type="checkbox" name="is_hag_estimated" ng-model="aPeak.is_hag_estimated" ng-true-value="1" ng-false-value="0" />
                        </span>
                    </div>
                </div>

                <div class="panel panel-default">
                    <div class="panel-body">
                        <div class="col-md-8 col-md-offset-4">
                            These fields shall be filled out pursuant to sw13.01
                            <br />
                            Click this <a target="_blank" href="https://water.usgs.gov/admin/memo/SW/sw13.01.pdf">link</a> for more information.
                        </div>
                        <br clear="all" />
                        <!-- Peak Discharge-->
                        <div class="form-group">
                            <label class="col-md-4 control-label" for="peak_discharge">Peak Discharge:</label>
                            <div class="col-md-5">
                                <input class="form-control" ng-keypress="isNum($event)" name="peak_discharge" ng-model="aPeak.peak_discharge" type="text" />
                            </div>
                            <div class="col-md-1">
                                <span tooltip-placement="right" uib-tooltip="Peak Discharge Estimated?">
                                    <input type="checkbox" name="is_peak_discharge_estimated" ng-model="aPeak.is_peak_discharge_estimated" ng-true-value="1" ng-false-value="0" />
                                </span>
                            </div>
                        </div>

                        <!--AEP: -->
                        <div class="form-group">
                            <label class="col-md-4 control-label" for="aep">AEP:</label>
                            <div class="col-md-5">
                                <input class="form-control" ng-keypress="isNum($event)" name="aep" ng-model="aPeak.aep" type="text" />
                            </div>
                        </div>

                        <!--AEP Confidence Interval (lower limit): -->
                        <div class="form-group">
                            <label class="col-md-4 control-label" for="aep_lowci">AEP Confidence Interval<br />(lower limit):</label>
                            <div class="col-md-5">
                                <input class="form-control" ng-keypress="isNum($event)" name="aep_lowci" ng-model="aPeak.aep_lowci" type="text" />
                            </div>
                        </div>

                        <!--AEP Confidence Interval (upper limit): -->
                        <div class="form-group">
                            <label class="col-md-4 control-label" for="aep_upperci">AEP Confidence Interval<br />(upper limit):</label>
                            <div class="col-md-5">
                                <input class="form-control" ng-keypress="isNum($event)" name="aep_upperci" ng-model="aPeak.aep_upperci" type="text" />
                            </div>
                        </div>

                        <!--AEP Confidence Interval (percentage of limits): -->
                        <div class="form-group">
                            <label class="col-md-4 control-label" for="aep_range">AEP Confidence Interval<br />(percentage of limits):</label>
                            <div class="col-md-5">
                                <input class="form-control" ng-keypress="isNum($event)" name="aep_range" ng-model="aPeak.aep_range" type="text" />
                            </div>
                        </div>
                    </div>
                </div>


            </div><!-- end modal-body-->
            <div class="modal-footer">
                <button class="btn btn-primary" ng-if="aPeak.peak_summary_id != undefined" ng-click="savePeak(peakForm.$valid)">Save</button>
                <button class="btn btn-primary" ng-if="aPeak.peak_summary_id == undefined" ng-click="createPeak(peakForm.$valid)">Create</button>
                <button type="button" class="btn btn-danger" ng-if="loggedInRole == 'Admin' && aPeak.peak_summary_id !== undefined" ng-click="deletePeak()">Delete</button>
                <button type="button" class="btn btn-warning" ng-click="cancel()">Cancel</button>
            </div>
        </fieldset>
    </form>
</script>
