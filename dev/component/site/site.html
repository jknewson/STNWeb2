<!-- Site title with number-->
<div class="col-md-12">
    <div ui-view="siteNo"></div>
</div>
<div class="col-md-8">
    <div ui-view="aMap"></div>
</div>
<!-- Site with map above it -->
<div class=" col-md-8">
    <div ui-view="aSite"></div>
</div>

<!-- if there's a site, show the OP, Sensor, HWM, Files, and Peaks -->
<div ng-if="siteID > 0">
    <div class="col-md-4">
        <div ui-view="op"></div>
        <div ui-view="sensor"></div>
        <div ui-view="hwm"></div>
        <div ui-view="file"></div>
        <div ui-view="peak"></div>
    </div>
</div>

<!-- Style for 'graying' out proposed sensor parts -->
<style type="text/css">
    .darkClass {
        filter: alpha(opacity=50); /* IE */
        opacity: 0.5; /* Safari, Opera */
        -moz-opacity: 0.50; /* FireFox */
        z-index: 20;
        background-repeat: no-repeat;
        background-position: center;
    }

    .redText {
        color: red;
    }
</style>

<!-- MODAL for Site Create/edit-->
<script type="text/ng-template" id="SITEmodal.html">
    <div class="modal-header">
        <h3 class="modal-title">Site<button class="close" type="button" ng-click="cancel()" aria-hidden="true" style="color:gray;">&times;</button></h3>
    </div>
    <form class="form-horizontal" name="siteForm">
        <fieldset>
            <div class="modal-body">

                <!--<legend>Site Information</legend>-->
                <!--Site Description*-->
                <div class="form-group required">
                    <label class="col-md-4 control-label req" for="site_description">Site Description:</label>
                    <div class="col-md-7">
                        <textarea class="form-control" id="site_description" type="text" rows="3" placeholder="Site Description" ng-model="aSite.site_description" required />
                    </div>
                    <button type="button" class="col-md-1 borderLess pull-left" tooltip-placement="right" tooltip-append-to-body="false" uib-tooltip="Brief description of the site area. Displayed publicly.">
                        <span class="glyphicon glyphicon-question-sign"></span>
                    </button>
                </div>

                <!--Internal Notes-->
                <div class="form-group">
                    <label class="col-md-4 control-label" for="site_notes">Internal Notes:</label>
                    <div class="col-md-7">
                        <textarea class="form-control" id="site_notes" type="text" rows="3" placeholder="Internal Notes" ng-model="aSite.site_notes" />
                    </div>
                </div>

                <!-- dec deg or dms: -->
                <div>
                    <label class="col-md-4 control-label"></label>
                    <div class="col-md-7">
                        <span class="radio-inline">
                            <input type="radio" name="decDegORdms" ng-model="aSite.decDegORdms" ng-change="latLongChange()" value="dd" /> Dec Deg
                        </span>
                        <span class="radio-inline">
                            <input type="radio" name="decDegORdms" ng-model="aSite.decDegORdms" ng-change="latLongChange()" value="dms" /> DMS
                        </span>
                    </div>
                </div>

                <!--Latitude*-->
                <div class="form-group required" ng-class="{'has-error':siteForm.latitude_dd.$invalid && siteForm.latitude_dd.$dirty}">
                    <label class="col-md-4 control-label req" for="latitude_dd">Latitude:</label>
                    <div class="col-md-7" ng-if="aSite.decDegORdms == 'dd'">
                        <input class="form-control" ng-keypress="isNum($event)" name="latitude_dd" id="latitude_dd" ng-model="aSite.latitude_dd"
                               ng-model-options="{ updateOn: 'blur' }" ng-change="checkValue()" type="text" placeholder="Latitude" required />
                    </div>
                    <div class="col-md-7" ng-if="aSite.decDegORdms == 'dms'">
                        <table>
                            <tr>
                                <td><input class="form-control" ng-keypress="isNum($event)" ng-model-options="{ updateOn: 'blur' }" ng-change="checkValue('dms')" id="LaDeg" name="Deg" ng-model="DMS.LADeg" type="text" /></td>
                                <td>°</td>
                                <td><input class="form-control" ng-keypress="isNum($event)" name="Min" ng-model="DMS.LAMin" type="text" /></td>
                                <td>′</td>
                                <td><input class="form-control" ng-keypress="isNum($event)" name="Sec" ng-model="DMS.LASec" type="text" /></td>
                                <td>″</td>
                            </tr>
                        </table>
                    </div>
                </div>

                <!--Longitude*-->
                <div class="form-group required" ng-class="{'has-error':siteForm.longitude_dd.$invalid && siteForm.longitude_dd.$dirty}">
                    <label class="col-md-4 control-label req" for="longitude_dd">Longitude:</label>
                    <div class="col-md-7" ng-if="aSite.decDegORdms == 'dd'">
                        <input class="form-control" ng-keypress="isNum($event)" ng-enter="getAddress()" id="longitude_dd" name="longitude_dd" ng-model="aSite.longitude_dd"
                               ng-model-options="{ updateOn: 'blur' }" ng-change="checkValue()" type="text" placeholder="Longitude" required />
                    </div>
                    <div class="col-md-7" ng-if="aSite.decDegORdms == 'dms'">
                        <table>
                            <tr>
                                <td><input class="form-control" ng-keypress="isNum($event)" ng-model-options="{ updateOn: 'blur' }" ng-change="checkValue('dms')" id="LoDeg" name="Deg" ng-model="DMS.LODeg" type="text" /></td>
                                <td>°</td>
                                <td><input class="form-control" ng-keypress="isNum($event)" name="Min" ng-model="DMS.LOMin" type="text" /></td>
                                <td>′</td>
                                <td><input class="form-control" ng-keypress="isNum($event)" name="Sec" ng-model="DMS.LOSec" type="text" /></td>
                                <td>″</td>
                            </tr>
                        </table>
                    </div>
                </div>

                <!--Horizontal Datum*-->
                <div class="form-group required" ng-class="{'has-error':siteForm.hdatum_id.$invalid && siteForm.hdatum_id.$dirty}">
                    <label class="col-md-4 control-label req" for="hdatum_id">Horizontal Datum:</label>
                    <div class="col-md-7">
                        <select class="form-control" name="hdatum_id" ng-model="aSite.hdatum_id"
                                ng-options="hd.datum_id as hd.datum_name for hd in HorizontalDatumList" required>
                            <option value=""></option>
                        </select>
                    </div>
                </div>

                <!--Horizontal Collection Method*-->
                <div class="form-group required" ng-class="{'has-error':siteForm.hcollect_method_id.$invalid && siteForm.hcollect_method_id.$dirty}">
                    <label class="col-md-4 control-label req" for="hcollect_method_id">Horizontal Collection Method:</label>
                    <div class="col-md-7">
                        <select class="form-control" name="hcollect_method_id" ng-model="aSite.hcollect_method_id"
                                ng-options="hc.hcollect_method_id as hc.hcollect_method for hc in HorCollMethodList" required>
                            <option value=""></option>
                        </select>
                    </div>
                </div>

                <!--populate button*-->
                <div class="form-group">
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            <h3 class="panel-title">Location Information</h3>
                        </div>
                        <div class="panel-body">
                            <div class="form-group required" ng-if="aSite.site_id == undefined">
                                <label class="col-md-4 control-label" for="POPULATEBTN">Click here to populate location fields:</label>
                                <div class="col-md-7">
                                    <button type="button" ng-click="getAddress()" class="btn btn-primary">Verify Location</button>
                                </div>
                                <button type="button" class="col-md-1 borderLess pull-left" tooltip-placement="right" tooltip-append-to-body="false" uib-tooltip="Also checks for nearby sites within x ft, and populates 5 fields below.">
                                    <span class="glyphicon glyphicon-question-sign"></span>
                                </button>
                            </div>

                            <!-- map showing lat/long location-->
                            <div class="col-md-7 col-md-offset-3" style="height:300px;display:table;" ng-show="showMap">
                                <div><label>There are: {{closeSites.length}} sites nearby.</label></div>
                                <p ng-if="closeSites.length > 0">
                                    <span>To use one of these sites (shown as blue dot) instead, click on the site name.</span>
                                    <ul style="max-height:50px;overflow:auto;">
                                        <li ng-repeat="s in closeSites" style="list-style:none">
                                            <a ui-sref="site.dashboard({id: s.site_id})" ng-click="$dismiss()">{{s.site_no}}</a>
                                        </li>
                                    </ul>
                                </p>
                                <p>Click and drag the point to relocate this site (all related fields will update).</p>
                                <div class="panel panel-primary" style="height:inherit">
                                    <leaflet lf-center="mapCenter" width="100%" height="100%" markers="mapMarkers"></leaflet>
                                </div>
                            </div>
                            <br clear="all" />
                            <!--Address-->
                            <div class="form-group">
                                <label class="col-md-4 control-label" for="address">Address:</label>
                                <div class="col-md-7">
                                    <input class="form-control" name="address" ng-model="aSite.address" type="text" />
                                </div>
                            </div>
                            <!--City-->
                            <div class="form-group">
                                <label class="col-md-4 control-label" for="city">City:</label>
                                <div class="col-md-7">
                                    <input class="form-control" name="city" ng-model="aSite.city" type="text" />
                                </div>
                            </div>
                            <!--State*-->
                            <div class="form-group required" ng-class="{'has-error':siteForm.state.$invalid && siteForm.state.$dirty}">
                                <label class="col-md-4 control-label req" for="state">State:</label>
                                <div class="col-md-7">
                                    <select class="form-control" name="state" ng-model="aSite.state" ng-change="updateCountyList(aSite.state)"
                                            ng-options="state.state_abbrev as state.state_name for state in StateList" required>
                                        <option value=""></option>
                                    </select>
                                </div>
                                <button type="button" class="col-md-1 borderLess pull-left" tooltip-placement="right" tooltip-append-to-body="false" uib-tooltip="Used to autogenerate the Site Number.">
                                    <span class="glyphicon glyphicon-question-sign"></span>
                                </button>
                            </div>

                            <!--Zip-->
                            <div class="form-group">
                                <label class="col-md-4 control-label" for="zip">Zip:</label>
                                <div class="col-md-7">
                                    <input class="form-control" name="zip" ng-model="aSite.zip" type="text" ui-mask="{{'99999'}}" />
                                </div>
                            </div>

                            <!--County*-->
                            <div class="form-group required" ng-class="{'has-error':siteForm.county.$invalid && siteForm.county.$dirty}">
                                <label class="col-md-4 control-label req" for="county">County:</label>
                                <div class="col-md-7">
                                    <select class="form-control" name="county" ng-model="aSite.county" ng-options="c.county_name as c.county_name for c in stateCountyList" required>
                                        <option value=""></option>
                                    </select>
                                </div>
                                <button type="button" class="col-md-1 borderLess pull-left" tooltip-placement="right" tooltip-append-to-body="false" uib-tooltip="Used to autogenerate the Site Number. Use the verify location to populate.">
                                    <span class="glyphicon glyphicon-question-sign"></span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                <!--Waterbody*-->
                <div class="form-group required" ng-class="{'has-error':siteForm.waterbody.$invalid && siteForm.waterbody.$dirty}">
                    <label class="col-md-4 control-label req" for="waterbody">Waterbody:</label>
                    <div class="col-md-7">
                        <input class="form-control" name="waterbody" ng-model="aSite.waterbody" type="text" required />
                    </div>
                    <button type="button" class="col-md-1 borderLess pull-left" tooltip-placement="right" tooltip-append-to-body="false" uib-tooltip-html="htmlDescriptionTip">
                        <span class="glyphicon glyphicon-question-sign"></span>
                    </button>
                </div>

                <!--Drainage Area-->
                <div class="form-group">
                    <label class="col-md-4 control-label" for="drainage_area_sqmi">Drainage Area (sq mi):</label>
                    <div class="col-md-7">
                        <input class="form-control" name="drainage_area_sqmi" ng-model="aSite.drainage_area_sqmi" type="text" />
                    </div>
                </div>

                <!--Station ID for USGS gage-->
                <div class="form-group">
                    <label class="col-md-4 control-label" for="usgs_sid">Station ID for USGS gage:</label>
                    <div class="col-md-7">
                        <input class="form-control" name="usgs_sid" ng-model="aSite.usgs_sid" type="text" />
                    </div>
                </div>

                <!--Station ID for NOAA gage-->
                <div class="form-group">
                    <label class="col-md-4 control-label" for="noaa_sid">Station ID for NOAA gage:</label>
                    <div class="col-md-7">
                        <input class="form-control" name="noaa_sid" ng-model="aSite.noaa_sid" type="text" />
                    </div>
                </div>

                <!--Other Station ID-->
                <div class="form-group">
                    <label class="col-md-4 control-label" for="other_sid">Other Station ID:</label>
                    <div class="col-md-7">
                        <input class="form-control" name="other_sid" placeholder="Please add details in the Site Description" ng-model="aSite.other_sid" type="text" />
                    </div>
                </div>

                <!--Safety Notes-->
                <div class="form-group">
                    <label class="col-md-4 control-label" for="safety_notes">Safety Notes:</label>
                    <div class="col-md-7">
                        <textarea class="form-control" type="text" rows="3" ng-model="aSite.safety_notes" />
                    </div>
                </div>

                <hr />

                <!--Site Housing section-->
                <div class="form-group">
                    <div style="padding:0" class="panel panel-default">
                        <div class="panel-heading">
                            <h3 class="panel-title">
                                <span>Site Housing</span>
                                <button type="button" class="col-md-1 borderLess pull-right" tooltip-placement="left" tooltip-append-to-body="false" uib-tooltip="Housing needed at this site. Think about what it would take to pack your truck.">
                                    <span class="glyphicon glyphicon-question-sign"></span>
                                </button>
                            </h3>

                        </div>
                        <div class="panel-body">
                            <label class="col-md-4 control-label" for="HOUSING_TYPE">Site Housing(s):</label>
                            <div class="col-md-7">
                                <div isteven-multi-select
                                     input-model="allHousingTypeList"
                                     output-model="houseType.value"
                                     button-label="type_name"
                                     item-label="type_name"
                                     max-height="300px"
                                     on-item-click="HouseTypeClick(data)"
                                     tick-property="selected"
                                     helper-elements="filter">
                                </div>
                            </div>
                            <br clear="all" />
                            <div ng-show="siteHouseTypesTable.length > 0">
                                <table class="table">
                                    <thead>
                                        <tr>
                                            <th class="col-sm-3">House Type</th>
                                            <th class="col-sm-1">Housing Length (ft)</th>
                                            <th class="col-sm-3">Housing Material</th>
                                            <th class="col-sm-3">Housing Notes</th>
                                            <th class="col-sm-1">Amount</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr ng-repeat="house in siteHouseTypesTable">
                                            <td>{{house.type_name}}<input type="hidden" ng-model="house.housing_type_id" /><input type="hidden" ng-model="house.site_housing_id" /></td>
                                            <td><input style="width:70%" ng-keypress="isNum($event)" ng-model="house.length" /></td>
                                            <td><input ng-model="house.material" /></td>
                                            <td><input ng-model="house.notes" /></td>
                                            <td><input style="width:70%" ng-keypress="isNum($event)" ng-model="house.amount" /></td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div><!-- end panel-body-->
                    </div>
                </div>

                <!--Priority-->
                <div class="form-group">
                    <label class="col-md-4 control-label" for="priority_id">Priority:</label>
                    <div class="col-md-7">
                        <select class="form-control" name="priority_id" ng-model="aSite.priority_id" ng-options="p.priority_id as p.priority_name for p in DepPriorityList">
                            <option value=""></option>
                        </select>
                    </div>
                </div>

                <!--Network Type-->
                <div class="form-group">
                    <label class="col-md-4 control-label" for="NETWORK_TYPE">Site Location Type in the Network:</label>
                    <div class="col-md-7">
                        <ul style="padding-left:0">
                            <li style="list-style:none;" ng-repeat="nt in NetTypeList">
                                <input type="checkbox" ng-model="nt.selected" ng-change="netTypeChg()" />
                                <span>{{nt.network_type_name}}</span>
                            </li>
                        </ul>
                    </div>
                </div>

                <!--Network NAME-->
                <div class="form-group">
                    <label class="col-md-4 control-label" for="NETWORK_NAME">Network Name:</label>
                    <div class="col-md-7">
                        <ul style="padding-left:0">
                            <li style="list-style:none;" ng-repeat="nn in NetNameList">
                                <input type="checkbox" ng-model="nn.selected" ng-change="whichOne(nn)" ng-disabled="(checked == checkedName) && (nn.name != checkedName)" />
                                <span>{{nn.name}}</span>
                            </li>
                        </ul>
                    </div>
                </div>

                <!--Zone-->
                <div class="form-group">
                    <label class="col-md-4 control-label" for="zone">Zone:</label>
                    <div class="col-md-7">
                        <input class="form-control" name="zone" ng-model="aSite.zone" type="text" />
                    </div>
                    <button type="button" class="col-md-1 borderLess pull-left" tooltip-placement="right" tooltip-append-to-body="false" uib-tooltip="For Water Science Center specific planning.">
                        <span class="glyphicon glyphicon-question-sign"></span>
                    </button>
                </div>

                <!--Sensor Not Appropriate-->
                <div class="form-group">
                    <label class="col-md-4 control-label" for="sensor_not_appropriate">Check if Sensor is not appropriate here:</label>
                    <div class="col-md-7">
                        <ul style="padding-left:0">
                            <li style="list-style:none;">
                                <input type="checkbox" name="sensor_not_appropriate" ng-click="dimAction()" ng-model="aSite.sensor_not_appropriate" ng-true-value="1" ng-false-value="0" />
                            </li>
                        </ul>
                    </div>
                    <button type="button" class="col-md-1 borderLess pull-left" tooltip-placement="right" tooltip-append-to-body="false" uib-tooltip="Only HWMs can be flagged at this site. Sensors can not be or do not have permission to be deployed.">
                        <span class="glyphicon glyphicon-question-sign"></span>
                    </button>
                </div>

                <!--Permanent Sensor Housing?-->
                <div class="form-group sensorInfo" ng-class="{darkClass:disableSensorParts}">
                    <label class="col-md-4 control-label" for="is_permanent_housing_installed">Permanent Sensor Housing Installed?</label>
                    <div class="col-md-7">
                        <span class="radio-inline">
                            <input ng-disabled="disableSensorParts" type="radio" name="is_permanent_housing_installed" ng-model="aSite.is_permanent_housing_installed" value="Yes"> Yes
                        </span>
                        <span class="radio-inline">
                            <input ng-disabled="disableSensorParts" type="radio" name="is_permanent_housing_installed" ng-model="aSite.is_permanent_housing_installed" value="No"> No
                        </span>
                    </div>
                </div>

                <!--Add Proposed Sensor-->
                <div class="form-group sensorInfo" ng-class="{darkClass:disableSensorParts}" ng-show="aSite.site_id == undefined">
                    <label class="col-md-4 control-label" for="PROPOSED_SENSOR">Add Proposed Sensor:</label>
                    <div class="col-md-7">
                        <ul style="padding-left:0">
                            <li style="list-style:none;" ng-repeat="ps in ProposedSens">
                                <input ng-disabled="disableSensorParts" type="checkbox" ng-model="ps.selected" ng-value="{{ps.selected}}" />
                                <span>{{ps.method}}</span>
                            </li>
                        </ul>
                    </div>
                    <button type="button" class="col-md-1 borderLess pull-left" tooltip-placement="right" tooltip-append-to-body="false" uib-tooltip="Sensors desired or appropriate for this site should be targeted in the next deployment.">
                        <span class="glyphicon glyphicon-question-sign"></span>
                    </button>
                </div>

                <!--Site creator-->
                <div class="form-group">
                    <label class="col-md-4 control-label" for="member_id">Site Creator:</label>
                    <div class="col-md-7">
                        <span>{{aSite.Creator}}</span>
                    </div>
                </div>

                <!--Add Landowner button-->
                <div class="form-group" ng-show="aSite.landownercontact_id == null">
                    <label class="col-md-4 control-label" for="LANDOWNERBTN">Landowner Contact:</label>
                    <div class="col-md-7">
                        <button type="button" ng-click="showLandOwnerPart()" class="btn btn-primary">Add Landowner</button>
                    </div>
                    <button type="button" class="col-md-1 borderLess pull-left" tooltip-placement="right" tooltip-append-to-body="false" uib-tooltip="Do not record information that private citizens have a reasonable expectation of privacy about. No names or phone numbers of private citizens. Business contact information is acceptable.">
                        <span class="glyphicon glyphicon-question-sign"></span>
                    </button>
                </div>

                <!--start Landowner contact area -->


                <div ng-show="addLandowner">
                    <div class="col-md-9 col-md-offset-1" style="border:solid 1px red">Do not record information that private citizens have a reasonable expectation of privacy about. No names or phone numbers of private citizens. Business contact information is acceptable.</div>
                    <div class="panel panel-default col-md-9 col-md-offset-1" style="padding:0">
                        <div class="panel-heading">Land Owner Information</div>
                        <div class="panel-body">
                            <!--First Name:-->
                            <div class="form-group" ng-class="{'required': addLandowner}">
                                <label class="col-md-4 control-label" ng-class="{'req': addLandownder}" for="fname">First Name:</label>
                                <div class="col-md-7">
                                    <input class="form-control" id="LOfname" name="fname" ng-model="landowner.fname" type="text" ng-required="addLandowner" />
                                </div>
                            </div>
                            <!--Last Name:-->
                            <div class="form-group" ng-class="{'required': addlandowner}">
                                <label class="col-md-4 control-label" ng-class="{'req': addLandownder}" for="lname">Last Name:</label>
                                <div class="col-md-7">
                                    <input class="form-control" id="LOlname" name="lname" ng-model="landowner.lname" type="text" ng-required="addLandowner" />
                                </div>
                            </div>
                            <!--Affiliation/Title:-->
                            <div class="form-group">
                                <label class="col-md-4 control-label" for="title">Affiliation/Title:</label>
                                <div class="col-md-7">
                                    <input class="form-control" id="LOtitle" name="title" ng-model="landowner.title" type="text" />
                                </div>
                            </div>

                            <div>
                                <label class="col-md-4 control-label"></label>
                                <div class="col-md-7">
                                    <input type="checkbox" ng-model="useSiteAddress" ng-click="useAddressforLO()" /><span style="padding-left:8px">Address same as Site address</span>
                                </div>
                            </div>
                            <!--Address:-->
                            <div class="form-group">
                                <label class="col-md-4 control-label" for="address">Address:</label>
                                <div class="col-md-7">
                                    <input class="form-control" id="LOaddress" name="address" ng-model="landowner.address" type="text" />
                                </div>
                            </div>
                            <!--City:-->
                            <div class="form-group">
                                <label class="col-md-4 control-label" for="city">City:</label>
                                <div class="col-md-7">
                                    <input class="form-control" id="LOcity" name="city" ng-model="landowner.city" type="text" />
                                </div>
                            </div>
                            <!--State-->
                            <div class="form-group">
                                <label class="col-md-4 control-label" for="state">State:</label>
                                <div class="col-md-7">
                                    <select class="form-control" id="LOstate" name="state" ng-model="landowner.state" ng-options="state.state_abbrev as state.state_name for state in StateList">
                                        <option value=""></option>
                                    </select>
                                </div>
                            </div>
                            <!--Zip:-->
                            <div class="form-group">
                                <label class="col-md-4 control-label" for="zip">Zip:</label>
                                <div class="col-md-7">
                                    <input class="form-control" id="LOzip" name="zip" ng-model="landowner.zip" type="text" ui-mask="{{'99999'}}" />
                                </div>
                            </div>
                            <!--Primary Phone:-->
                            <div class="form-group">
                                <label class="col-md-4 control-label" for="primaryphone">Primary Phone:</label>
                                <div class="col-md-7">
                                    <input class="form-control" id="LOprimaryphone" name="primaryphone"
                                           type="text" my-input-mask="{mask: '(999) 999-9999[ x99999]', greedy: false}"
                                           ng-model="landowner.primaryphone" />
                                </div>
                            </div>
                            <!--Secondary Phone:-->
                            <div class="form-group">
                                <label class="col-md-4 control-label" for="secondaryphone">Secondary Phone:</label>
                                <div class="col-md-7">
                                    <input class="form-control" id="LOsecondaryphone" name="secondaryphone"
                                           type="text" my-input-mask="{mask: '(999) 999-9999[ x99999]', greedy:false}"
                                           ng-model="landowner.secondaryphone" />
                                </div>
                            </div>
                            <!--Email:-->
                            <div class="form-group">
                                <label class="col-md-4 control-label" for="email">Email:</label>
                                <div class="col-md-7">
                                    <input class="form-control" id="LOemail" name="email" ng-model="landowner.email" type="email" />
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <br clear="all" />
                <!--end Landowner contact area-->
                <!--Access Permission Granted-->
                <div class="form-group">
                    <label class="col-md-4 control-label" for="access_granted">Access Permission Granted:</label>
                    <div class="col-md-7">
                        <span class="radio-inline">
                            <input type="radio" name="access_granted" ng-model="aSite.access_granted" value="Yes"> Yes
                        </span>
                        <span class="radio-inline">
                            <input type="radio" name="access_granted" ng-model="aSite.access_granted" value="No"> No
                        </span>
                        <span class="radio-inline">
                            <input type="radio" name="access_granted" ng-model="aSite.access_granted" value="Not Needed"> Not Needed
                        </span>
                    </div>
                </div>

                <br clear="all" />

                <!--submit and cancel buttons-->
                <div class="form-group">
                    <div class="col-md-4 col-md-offset-2">
                        <span>
                            <button ng-show="aSite.site_id == undefined" class="btn btn-primary" style="width:80px;margin-right:10px" ng-click="create(siteForm.$valid)">
                                <span>Create</span>
                            </button>
                        </span>
                        <span>
                            <button ng-show="aSite.site_id != undefined" class="btn btn-primary" style="width:80px;margin-right:10px" ng-click="save(siteForm.$valid)">
                                <span>Save</span>
                            </button>
                        </span>
                        <span ng-if="userRole == 'Admin'">
                            <button ng-show="aSite.site_id != undefined" class="btn btn-danger" style="width:80px;margin-right:10px" ng-click="deleteSite()">
                                <span>Delete</span>
                            </button>
                        </span>
                        <span>
                            <button type="button" class="btn btn-default" ng-click="cancel()">
                                <span>Cancel</span>
                            </button>
                        </span>
                    </div>
                </div>
            </div><!--end modal-body -->
        </fieldset>
    </form>
</script>

<!-- MODAL for Objective Point -->
<script type="text/ng-template" id="OPmodal.html">
    <div class="modal-header">
        <h3 class="modal-title">Datum Location<button class="close" type="button" ng-click="cancel()" aria-hidden="true" style="color:gray;">&times;</button></h3>
    </div>
    <div class="modal-body">
        <div ng-if="createOReditOP == 'create'">
            <form class="form-horizontal" name="OPForm">
                <fieldset>
                    <!-- Type: -->
                    <div class="form-group required" ng-class="{'has-error':OPForm.op_type_id.$invalid && OPForm.op_type_id.$dirty}">
                        <label class="col-md-4 control-label req" for="op_type_id">Type:</label>
                        <div class="col-md-6">
                            <select class="form-control" name="op_type_id" ng-model="OP.op_type_id"
                                    ng-options="opt.objective_point_type_id as opt.op_type for opt in OPTypeList" required>
                                <option value=""></option>
                            </select>
                        </div>
                    </div>

                    <!-- Name: -->
                    <div class="form-group required" ng-class="{'has-error':OPForm.name.$invalid && OPForm.name.$dirty}">
                        <label class="col-md-4 control-label req" for="name">Name:</label>
                        <div class="col-md-6">
                            <input class="form-control" name="name" ng-model="OP.name" type="text" required />
                        </div>
                    </div>

                    <!-- Description: -->
                    <div class="form-group required" ng-class="{'has-error':OPForm.description.$invalid && OPForm.description.$dirty}">
                        <label class="col-md-4 control-label req" for="description">Description:</label>
                        <div class="col-md-6">
                            <textarea class="form-control" name="description" type=" text" rows="3" ng-model="OP.description" required />
                        </div>
                        <button type="button" class="col-md-1 borderLess pull-left" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip-html="htmlDescriptionTip">
                            <span class="glyphicon glyphicon-question-sign"></span>
                        </button>
                    </div>

                    <!-- Control Identifier add button -->
                    <div class="form-group">
                        <label class="col-md-4 control-label" for="CONTROL">Control Identifier:</label>
                        <div class="col-md-6">
                            <button type="button" class="btn btn-default" ng-click="addNewIdentifier()">Add New Identifier</button>
                        </div>
                        <button type="button" class="col-md-1 borderLess pull-left" tooltip-placement="bottom" tooltip-append-to-body="false" uib-tooltip="National Geodetic Survey permanent identifier. See: ngs.noaa.gov/NGSDataExplorer/ for more information.">
                            <span class="glyphicon glyphicon-question-sign"></span>
                        </button>
                    </div>

                    <!-- Control Identifier input: -->
                    <div class="form-group" ng-show="showControlIDinput">
                        <label class="col-md-4 control-label"></label>
                        <div class="col-md-6">
                            <div ng-repeat="id in addedIdentifiers">
                                <div class="col-md-12" style="margin-bottom:5px">
                                    <div class="col-md-7"><input class="form-control" name="OPControl" ng-model="id.identifier" type="text" /></div>
                                    <input type="hidden" name="op_control_identifier_id" ng-model="id.op_control_identifier_id" />
                                    <input type="hidden" name="objective_point_id" ng-model="id.objective_point_id" />

                                    <span class="radio-inline">
                                        <input type="radio" name="identifier_type{{$index}}" ng-model="id.identifier_type" value="PID" /> PID
                                    </span>
                                    <span class="radio-inline">
                                        <input type="radio" name="identifier_type{{$index}}" ng-model="id.identifier_type" value="Other" /> Other
                                    </span>
                                    <div class="buttons pull-right">
                                        <button class="btn borderLess" ng-click="RemoveID(id)" type="button">
                                            <i class="glyphicon glyphicon-remove"></i>
                                        </button>
                                    </div>
                                </div><br />
                            </div>
                        </div>
                    </div>

                    <!-- dec deg or dms: -->
                    <div>
                        <label class="col-md-4 control-label"></label>
                        <div class="col-md-6">
                            <span class="radio-inline">
                                <input type="radio" name="decDegORdms" ng-change="latLongChange()" ng-model="OP.decDegORdms" value="dd" /> Dec Deg
                            </span>
                            <span class="radio-inline">
                                <input type="radio" name="decDegORdms" ng-change="latLongChange()" ng-model="OP.decDegORdms" value="dms" /> DMS
                            </span>
                        </div>
                    </div>

                    <!-- Latitude: -->
                    <div class="form-group">
                        <label class="col-md-4 control-label" for="latitude_dd">Latitude:</label>
                        <div class="col-md-6" ng-if="OP.decDegORdms == 'dd'">
                            <input class="form-control" ng-keypress="isNum($event)" name="latitude_dd" id="latitude_dd" ng-model="OP.latitude_dd"
                                   ng-model-options="{ updateOn: 'blur' }" ng-change="checkValue('dd')" type="text" />
                        </div>
                        <div class="col-md-6" ng-if="OP.decDegORdms == 'dms'">
                            <table>
                                <tr>
                                    <td><input class="form-control" ng-keypress="isNum($event)" ng-model-options="{ updateOn: 'blur' }" ng-change="checkValue('dms')" id="LaDeg" name="Deg" ng-model="DMS.LADeg" type="text" /></td>
                                    <td>°</td>
                                    <td><input class="form-control" ng-keypress="isNum($event)" name="Min" ng-model="DMS.LAMin" type="text" /></td>
                                    <td>′</td>
                                    <td><input class="form-control" ng-keypress="isNum($event)" name="Sec" ng-model="DMS.LASec" type="text" /></td>
                                    <td>″</td>
                                </tr>
                            </table>
                        </div>
                    </div>

                    <!-- Longitude: -->
                    <div class="form-group">
                        <label class="col-md-4 control-label" for="longitude_dd">Longitude:</label>
                        <div class="col-md-6" ng-if="OP.decDegORdms == 'dd'">
                            <input class="form-control" ng-keypress="isNum($event)" id="longitude_dd" name="longitude_dd" ng-model="OP.longitude_dd"
                                   ng-model-options="{ updateOn: 'blur' }" ng-change="checkValue('dd')" type="text" />
                        </div>
                        <div class="col-md-6" ng-if="OP.decDegORdms == 'dms'">
                            <table>
                                <tr>
                                    <td><input class="form-control" ng-keypress="isNum($event)" ng-model-options="{ updateOn: 'blur' }" ng-change="checkValue('dms')" id="LoDeg" name="Deg" ng-model="DMS.LODeg" type="text" /></td>
                                    <td>°</td>
                                    <td><input class="form-control" ng-keypress="isNum($event)" name="Min" ng-model="DMS.LOMin" type="text" /></td>
                                    <td>′</td>
                                    <td><input class="form-control" ng-keypress="isNum($event)" name="Sec" ng-model="DMS.LOSec" type="text" /></td>
                                    <td>″</td>
                                </tr>
                            </table>
                        </div>
                    </div>

                    <!-- Horizontal Datum: -->
                    <div class="form-group">
                        <label class="col-md-4 control-label" for="hdatum_id">Horizontal Datum:</label>
                        <div class="col-md-6">
                            <select class="form-control" name="hdatum_id" ng-model="OP.hdatum_id"
                                    ng-options="hd.datum_id as hd.datum_name for hd in HDList">
                                <option value=""></option>
                            </select>
                        </div>
                    </div>

                    <!-- Horizontal Collection Method: -->
                    <div class="form-group">
                        <label class="col-md-4 control-label" for="hcollect_method_id">Horizontal Collection Method:</label>
                        <div class="col-md-6">
                            <select class="form-control" name="hcollect_method_id" ng-model="OP.hcollect_method_id"
                                    ng-options="hcm.hcollect_method_id as hcm.hcollect_method for hcm in HCollectMethodList">
                                <option value=""></option>
                            </select>
                        </div>
                    </div>

                    <!-- Ft or Meter radios: -->
                    <div>
                        <label class="col-md-4 control-label"></label>
                        <div class="col-md-6">
                            <span class="radio-inline">
                                <input type="radio" name="FTorMETER" ng-model="OP.FTorMETER" value="ft" /> ft
                            </span>
                            <span class="radio-inline">
                                <input type="radio" name="FTorMETER" ng-model="OP.FTorMETER" value="meter" /> meter
                            </span>
                        </div>
                    </div>

                    <!-- Elevation: -->
                    <div class="form-group">
                        <label class="col-md-4 control-label" for="elev_ft">Elevation:</label>
                        <div class="col-md-6">
                            <input class="form-control" ng-keypress="isNum($event)" name="elev_ft" ng-model="OP.elev_ft" type="text" />
                        </div>
                    </div>

                    <!--  Vertical Datum: -->
                    <div class="form-group required" ng-class="{'has-error':OPForm.vdatum_id.$invalid && OPForm.vdatum_id.$dirty}">
                        <label class="col-md-4 control-label req" for="vdatum_id">Vertical Datum:</label>
                        <div class="col-md-6">
                            <select class="form-control" name="vdatum_id" ng-model="OP.vdatum_id"
                                    ng-options="vd.datum_id as vd.datum_abbreviation for vd in VDatumList" required>
                                <option value=""></option>
                            </select>
                        </div>
                    </div>

                    <!-- Vertical Collection Method: -->
                    <div class="form-group">
                        <label class="col-md-4 control-label" for="vcollect_method_id">Vertical Collection Method:</label>
                        <div class="col-md-6">
                            <select class="form-control" name="vcollect_method_id" ng-model="OP.vcollect_method_id"
                                    ng-options="vcm.vcollect_method_id as vcm.vcollect_method for vcm in VCollectMethodList">
                                <option value=""></option>
                            </select>
                        </div>
                    </div>

                    <!-- Ft or CM radios: -->
                    <div>
                        <label class="col-md-4 control-label"></label>
                        <div class="col-md-6">
                            <span class="radio-inline">
                                <input type="radio" name="FTorCM" ng-model="OP.FTorCM" value="ft" /> +/- ft
                            </span>
                            <span class="radio-inline">
                                <input type="radio" name="FTorCM" ng-model="OP.FTorCM" value="cm" /> +/- cm
                            </span>
                        </div>
                    </div>

                    <!-- Uncertainty: -->
                    <div class="form-group">
                        <label class="col-md-4 control-label" for="uncertainty">Uncertainty:</label>
                        <div class="col-md-6">
                            <div class="col-md-12" style="margin-bottom:5px;padding-left:0">
                                <div class="col-md-3" style="padding-left: 0;"><input class="form-control" ng-disabled="OP.unquantified==1" ng-keypress="isNum($event)" ng-model="OP.uncertainty" type="text" /></div>
                                <div class="col-md-2" style="text-decoration:underline">OR</span></div>
                                <div class="col-md-5">
                                    <input type="checkbox" ng-model="OP.unquantified" ng-checked="OP.unquantified==1" ng-true-value="1" ng-false-value="0" ng-click="UnquantChecked()" />
                                    <span style="margin-left:10px">Unquantified</span>
                                </div>
                                <button type="button" class="col-md-1 borderLess pull-left" tooltip-placement="bottom" tooltip-append-to-body="false" uib-tooltip="From GNSS or OPUS solution.">
                                    <span class="glyphicon glyphicon-question-sign"></span>
                                </button>
                                <br />
                            </div>
                        </div>
                    </div>

                    <!-- Quality: -->
                    <div class="form-group">
                        <label class="col-md-4 control-label" for="op_quality_id">Quality:</label>
                        <div class="col-md-6">
                            <select class="form-control" name="op_quality_id" ng-model="OP.op_quality_id"
                                    ng-options="opq.op_quality_id as opq.quality for opq in OPQualityList">
                                <option value=""></option>
                            </select>
                        </div>
                    </div>

                    <!-- Objective Point Notes: -->
                    <div class="form-group">
                        <label class="col-md-4 control-label" for="op_notes">Datum Location Notes:</label>
                        <div class="col-md-6">
                            <textarea class="form-control" type="text" rows="3" ng-model="OP.op_notes" />
                        </div>
                    </div>

                    <!-- Date Established: -->
                    <div class="form-group required" ng-class="{'has-error':OPForm.date_established.$invalid && OPForm.date_established.$dirty}">
                        <label class="col-md-4 control-label req" for="date_established">Date Established:</label>
                        <div class="col-md-6">
                            <div class="col-md-6 input-group">
                                <input class="form-control dateInputStyle" type="date" name="de" uib-datepicker-popup="MM/dd/yyyy" show-weeks="false" is-open="datepickrs.de" ng-model="OP.date_established" required />
                                <span class="input-group-btn">
                                    <button type="button" class="btn btn-default" ng-click="open($event, 'de')">
                                        <i class="glyphicon glyphicon-calendar" />
                                    </button>
                                </span>
                            </div>
                        </div>
                    </div>

                    <!-- Date Recovered: -->
                    <div class="form-group">
                        <label class="col-md-4 control-label" for="date_recovered">Date Recovered:</label>
                        <div class="col-md-6">
                            <div class="col-md-6 input-group">
                                <input show-weeks="false" class="form-control dateInputStyle" type="date" name="dr" uib-datepicker-popup="MM/dd/yyyy" is-open="datepickrs.dr" ng-model="OP.date_recovered" />
                                <span class="input-group-btn">
                                    <button type="button" class="btn btn-default" ng-click="open($event, 'dr')">
                                        <i class="glyphicon glyphicon-calendar" />
                                    </button>
                                </span>
                            </div>
                        </div>
                        <button type="button" class="col-md-1 borderLess pull-left" tooltip-placement="bottom" tooltip-append-to-body="false" uib-tooltip="Enter the date the location was recently found in good condition.">
                            <span class="glyphicon glyphicon-question-sign"></span>
                        </button>
                    </div>
                    <!--create button-->
                    <div class="form-group">
                        <div class="col-md-12 text-center">
                            <button class="btn btn-primary" ng-click="create(OPForm.$valid)"><span>Create</span></button>
                        </div>
                    </div>
                </fieldset>
            </form>
        </div>

        <div ng-if="createOReditOP == 'edit'">
            <uib-accordion close-others="false">
                <!--Datum Location Part-->
                <uib-accordion-group is-open="dl.dlOpen" panel-class="{{getPanelClass()}}">
                    <uib-accordion-heading>
                        <i style="margin-right:10px" class="pull-left glyphicon" ng-class="{'glyphicon-chevron-down': dl.dlOpen, 'glyphicon-chevron-right': !dl.dlOpen}"></i>
                        <span ng-class="{'redText':view.OPval == 'edit'}">{{opModalHeader}}</span>
                    </uib-accordion-heading>
                    <form class="form-horizontal" name="OPEditForm">
                        <fieldset>
                            <!--edit button-->
                            <div class="form-group">
                                <div class="col-md-12">
                                    <span><button ng-show="view.OPval == 'detail'" type="button" class="btn btn-primary" ng-click="wannaEditOP()"><span>Edit Datum Location</span></button></span>
                                    <span><button ng-show="view.OPval == 'edit'" class="btn btn-primary" ng-click="save(OPEditForm.$valid)"><span>Save</span></button></span>
                                    <span><button ng-show="view.OPval == 'edit'" type="button" class=" btn btn-primary" ng-click="cancelOPEdit()"><span>Cancel</span></button></span>
                                </div>
                            </div>

                            <!-- Type: (Detail) -->
                            <div ng-if="view.OPval == 'detail'" class="col-md-12">
                                <div class="col-md-4"><label>Type:</label></div>
                                <div class="col-md-6"><span>{{OP.opType || '---'}}</span></div>
                            </div>
                            <!-- Type: (Edit)-->
                            <div ng-if="view.OPval == 'edit'" class="form-group required" ng-class="{'has-error':OPEditForm.op_type_id.$invalid && OPEditForm.op_type_id.$dirty && view.OPval =='edit'}">
                                <label class="col-md-4 control-label req" for="op_type_id">Type:</label>
                                <div class="col-md-6">
                                    <select ng-show="view.OPval == 'edit'" class="form-control" name="op_type_id" ng-model="opCopy.op_type_id"
                                            ng-options="opt.objective_point_type_id as opt.op_type for opt in OPTypeList" required>
                                        <option value=""></option>
                                    </select>
                                </div>
                            </div>

                            <!-- Name: (Detail) -->
                            <div ng-if="view.OPval == 'detail'" class="col-md-12">
                                <div class="col-md-4"><label>Name:</label></div>
                                <div class="col-md-6"><span>{{OP.name || '---'}}</span></div>
                            </div>
                            <!-- Name: (Edit)-->
                            <div ng-if="view.OPval == 'edit'" class="form-group required" ng-class="{'has-error':OPEditForm.name.$invalid && OPEditForm.name.$dirty && view.OPval =='edit'}">
                                <label class="col-md-4 control-label req" for="name">Name:</label>
                                <div class="col-md-6">
                                    <input ng-show="view.OPval == 'edit'" class="form-control" name="name" ng-model="opCopy.name" type="text" required />
                                </div>
                            </div>

                            <!-- Description: (Detail) -->
                            <div ng-if="view.OPval == 'detail'" class="col-md-12">
                                <div class="col-md-4"><label>Description:</label></div>
                                <div class="col-md-6"><span>{{OP.description || '---'}}</span></div>
                            </div>
                            <!-- Description: (Edit) -->
                            <div ng-if="view.OPval == 'edit'" class="form-group required" ng-class="{'has-error':OPEditForm.description.$invalid && OPEditForm.description.$dirty && view.OPval =='edit'}">
                                <label class="col-md-4 control-label req" for="description">Description:</label>
                                <div class="col-md-6">
                                    <textarea class="form-control" name="description" type=" text" rows="3" ng-model="opCopy.description" required />
                                </div>
                                <button type="button" class="col-md-1 borderLess pull-left" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip-html="htmlDescriptionTip">
                                    <span class="glyphicon glyphicon-question-sign"></span>
                                </button>
                            </div>

                            <!-- Control Identifier input: (Details) -->
                            <div class="col-md-12" ng-if="showControlIDinput && view.OPval == 'detail'">
                                <div class="col-md-4"><label><span>Control Identifier:</span></label></div>
                                <div class="col-md-6">
                                    <div ng-repeat="id in addedIdentifiers">
                                        <div style="margin-bottom:5px">
                                            <div class="col-md-7"><span>-- {{id.identifier}}, {{id.identifier_type}}</span></div>
                                        </div><br />
                                    </div>
                                </div>
                            </div>
                            <!-- Control Identifier input: (Edit) -->
                            <!-- Control Identifier add button -->
                            <div ng-if="view.OPval == 'edit'" class="form-group">
                                <label class="col-md-4 control-label" for="CONTROL">Control Identifier:</label>
                                <div class="col-md-6">
                                    <button type="button" class="btn btn-default" ng-click="addNewIdentifier()">Add New Identifier</button>
                                </div>
                                <button type="button" class="col-md-1 borderLess pull-left" tooltip-placement="bottom" tooltip-append-to-body="false" uib-tooltip="National Geodetic Survey permanent identifier. See: ngs.noaa.gov/NGSDataExplorer/ for more information.">
                                    <span class="glyphicon glyphicon-question-sign"></span>
                                </button>
                            </div>
                            <div class="form-group" ng-if="showControlIDinput && view.OPval == 'edit'">
                                <label class="col-md-4 control-label"></label>
                                <div class="col-md-6">
                                    <div>
                                        <div ng-repeat="idC in addedIdentifiersCopy">
                                            <div class="col-md-12" style="margin-bottom:5px">
                                                <div class="col-md-6"><input class="form-control" name="OPControl" ng-model="idC.identifier" type="text" /></div>
                                                <input type="hidden" name="op_control_identifier_id" ng-model="idC.op_control_identifier_id" />
                                                <input type="hidden" name="objective_point_id" ng-model="idC.objective_point_id" />

                                                <span class="radio-inline">
                                                    <input type="radio" name="identifier_type{{$index}}" ng-model="idC.identifier_type" value="PID" /> PID
                                                </span>
                                                <span class="radio-inline">
                                                    <input type="radio" name="identifier_type{{$index}}" ng-model="idC.identifier_type" value="Other" /> Other
                                                </span>
                                                <div class="buttons pull-right">
                                                    <button type="button" class="btn borderLess" ng-click="RemoveID(idC)">
                                                        <i class="glyphicon glyphicon-remove"></i>
                                                    </button>
                                                </div>
                                            </div><br />
                                        </div> <!-- end repeat -->
                                    </div>
                                </div>
                            </div>

                            <!-- dec deg or dms: -->
                            <div ng-if="view.OPval == 'edit'">
                                <label class="col-md-4 control-label"></label>
                                <div class="col-md-6">
                                    <span class="radio-inline">
                                        <input type="radio" name="decDegORdms" ng-change="latLongChange()" ng-model="opCopy.decDegORdms" value="dd" /> Dec Deg
                                    </span>
                                    <span class="radio-inline">
                                        <input type="radio" name="decDegORdms" ng-change="latLongChange()" ng-model="opCopy.decDegORdms" value="dms" /> DMS
                                    </span>
                                </div>
                            </div>
                            <!-- Latitude: (Details) -->
                            <div ng-if="view.OPval == 'detail'" class="col-md-12">
                                <div class="col-md-4"><label>Latitude:</label></div>
                                <div class="col-md-6"><span>{{OP.latitude_dd}}</span></div>

                            </div>
                            <!-- Latitude: (edit) -->
                            <div ng-if="view.OPval == 'edit'" class="form-group">
                                <label class="col-md-4 control-label" for="latitude_dd">Latitude:</label>
                                <div class="col-md-6" ng-if="opCopy.decDegORdms == 'dd'">
                                    <input class="form-control" ng-keypress="isNum($event)" name="latitude_dd" id="latitude_dd" ng-model="opCopy.latitude_dd"
                                           ng-model-options="{ updateOn: 'blur' }" ng-change="checkValue('dd')" type="text" />
                                </div>
                                <div class="col-md-6" ng-if="opCopy.decDegORdms == 'dms'">
                                    <table>
                                        <tr>
                                            <td><input class="form-control" ng-keypress="isNum($event)" ng-model-options="{ updateOn: 'blur' }" ng-change="checkValue('dms')" id="LaDeg" name="Deg" ng-model="DMS.LADeg" type="text" /></td>
                                            <td>°</td>
                                            <td><input class="form-control" ng-keypress="isNum($event)" name="Min" ng-model="DMS.LAMin" type="text" /></td>
                                            <td>′</td>
                                            <td><input class="form-control" ng-keypress="isNum($event)" name="Sec" ng-model="DMS.LASec" type="text" /></td>
                                            <td>″</td>
                                        </tr>
                                    </table>
                                </div>
                            </div>

                            <!-- Longitude: (Details) -->
                            <div ng-if="view.OPval == 'detail'" class="col-md-12">
                                <div class="col-md-4"><label>Longitude:</label></div>
                                <div class="col-md-6"><span>{{OP.longitude_dd}}</span></div>
                            </div>
                            <!-- Longitude: (Edit) -->
                            <div ng-if="view.OPval == 'edit'" class="form-group">
                                <label class="col-md-4 control-label" for="longitude_dd">Longitude:</label>
                                <div class="col-md-6" ng-if="opCopy.decDegORdms == 'dd'">
                                    <input class="form-control" ng-keypress="isNum($event)" id="longitude_dd" name="longitude_dd" ng-model="opCopy.longitude_dd"
                                           ng-model-options="{ updateOn: 'blur' }" ng-change="checkValue('dd')" type="text" />
                                </div>
                                <div class="col-md-6" ng-if="opCopy.decDegORdms == 'dms'">
                                    <table>
                                        <tr>
                                            <td><input class="form-control" ng-keypress="isNum($event)" ng-model-options="{ updateOn: 'blur' }" ng-change="checkValue('dms')" id="LoDeg" name="Deg" ng-model="DMS.LODeg" type="text" /></td>
                                            <td>°</td>
                                            <td><input class="form-control" ng-keypress="isNum($event)" name="Min" ng-model="DMS.LOMin" type="text" /></td>
                                            <td>′</td>
                                            <td><input class="form-control" ng-keypress="isNum($event)" name="Sec" ng-model="DMS.LOSec" type="text" /></td>
                                            <td>″</td>
                                        </tr>
                                    </table>
                                </div>
                            </div>

                            <!-- Horizontal Datum: (Details) -->
                            <div ng-if="view.OPval == 'detail'" class="col-md-12">
                                <div class="col-md-4"><label>Horizontal Datum:</label></div>
                                <div class="col-md-6"><span>{{OP.hdatum || '---'}}</span></div>
                            </div>
                            <!-- Horizontal Datum: (edit) -->
                            <div class="form-group" ng-if="view.OPval == 'edit'">
                                <label class="col-md-4 control-label" for="hdatum_id">Horizontal Datum:</label>
                                <div class="col-md-6">
                                    <select class="form-control" name="hdatum_id" ng-model="opCopy.hdatum_id"
                                            ng-options="hd.datum_id as hd.datum_name for hd in HDList">
                                        <option value=""></option>
                                    </select>
                                </div>
                            </div>

                            <!-- Horizontal Collection Method: (Details) -->
                            <div ng-if="view.OPval == 'detail'" class="col-md-12">
                                <div class="col-md-4"><label>Horizontal Collection Method:</label></div>
                                <div class="col-md-6"><span>{{OP.hCollectMethod || '---'}}</span></div>
                            </div>
                            <!-- Horizontal Collection Method: (edit) -->
                            <div ng-if="view.OPval == 'edit'" class="form-group">
                                <label class="col-md-4 control-label" for="hcollect_method_id">Horizontal Collection Method:</label>
                                <div class="col-md-6">
                                    <select class="form-control" name="hcollect_method_id" ng-model="opCopy.hcollect_method_id"
                                            ng-options="hcm.hcollect_method_id as hcm.hcollect_method for hcm in HCollectMethodList">
                                        <option value=""></option>
                                    </select>
                                </div>
                            </div>

                            <!-- Ft or Meter radios: -->
                            <div ng-show="view.OPval == 'edit'">
                                <label class="col-md-4 control-label"></label>
                                <div class="col-md-6">
                                    <span class="radio-inline">
                                        <input type="radio" name="FTorMETER" ng-model="opCopy.FTorMETER" value="ft" /> ft
                                    </span>
                                    <span class="radio-inline">
                                        <input type="radio" name="FTorMETER" ng-model="opCopy.FTorMETER" value="meter" /> meter
                                    </span>
                                </div>
                            </div>

                            <!-- Elevation: (Details) -->
                            <div class="col-md-12" ng-if="view.OPval == 'detail'">
                                <div class="col-md-4"><label>Elevation:</label></div>
                                <div class="col-md-6"><span>{{OP.elev_ft || '---'}}<span ng-if="OP.elev_ft"> ft.</span></span></div>
                            </div>
                            <!-- Elevation: (edit)-->
                            <div class="form-group" ng-if="view.OPval == 'edit'">
                                <label class="col-md-4 control-label" for="elev_ft">Elevation:</label>
                                <div class="col-md-6">
                                    <input ng-show="view.OPval == 'edit'" class="form-control" ng-keypress="isNum($event)" name="elev_ft" ng-model="opCopy.elev_ft" type="text" />
                                </div>
                            </div>

                            <!--  Vertical Datum:(Details) -->
                            <div class="col-md-12" ng-if="view.OPval == 'detail'">
                                <div class="col-md-4"><label>Vertical Datum:</label></div>
                                <div class="col-md-6"><span>{{OP.vDatum || '---'}}</span></div>
                            </div>
                            <!--  Vertical Datum:(edit) -->
                            <div ng-if="view.OPval == 'edit'" class="form-group required" ng-class="{'has-error':OPEditForm.vdatum_id.$invalid && OPEditForm.vdatum_id.$dirty && view.OPval =='edit'}">
                                <label class="col-md-4 control-label req" for="vdatum_id">Vertical Datum:</label>
                                <div class="col-md-6">
                                    <select class="form-control" name="vdatum_id" ng-model="opCopy.vdatum_id"
                                            ng-options="vd.datum_id as vd.datum_name for vd in VDatumList" required>
                                        <option value=""></option>
                                    </select>
                                </div>
                            </div>

                            <!-- Vertical Collection Method: (details) -->
                            <div class="col-md-12" ng-if="view.OPval == 'detail'">
                                <div class="col-md-4"><label>Vertical Collection Method:</label></div>
                                <div class="col-md-6"><span>{{OP.vCollectMethod || '---'}}</span></div>
                            </div>
                            <!-- Vertical Collection Method: (edit) -->
                            <div ng-if="view.OPval == 'edit'" class="form-group">
                                <label class="col-md-4 control-label" for="vcollect_method_id">Vertical Collection Method:</label>
                                <div class="col-md-6">
                                    <select class="form-control" name="vcollect_method_id" ng-model="opCopy.vcollect_method_id"
                                            ng-options="vcm.vcollect_method_id as vcm.vcollect_method for vcm in VCollectMethodList">
                                        <option value=""></option>
                                    </select>
                                </div>
                            </div>

                            <!-- Ft or CM radios: -->
                            <div ng-show="view.OPval == 'edit'">
                                <label class="col-md-4 control-label"></label>
                                <div class="col-md-6">
                                    <span class="radio-inline">
                                        <input type="radio" name="FTorCM" ng-model="opCopy.FTorCM" value="ft" /> +/- ft
                                    </span>
                                    <span class="radio-inline">
                                        <input type="radio" name="FTorCM" ng-model="opCopy.FTorCM" value="cm" /> +/- cm
                                    </span>
                                </div>
                            </div>

                            <!-- Uncertainty: (details) -->
                            <div class="col-md-12" ng-if="view.OPval == 'detail'">
                                <div class="col-md-4"><label>Uncertainty:</label></div>
                                <div class="col-md-6">
                                    <div>{{OP.uncertainty || OP.unquantified == 1 ? 'Unquantified' : '---'}}</div>
                                </div>
                            </div>
                            <!-- Uncertainty: (edit) -->
                            <div class="form-group" ng-if="view.OPval == 'edit'">
                                <label class="col-md-4 control-label" for="uncertainty">Uncertainty:</label>
                                <div class="col-md-6">
                                    <div class="col-md-12" style="margin-bottom:5px;padding-left:0">
                                        <div class="col-md-3" style="padding-left: 0;"><input class="form-control" ng-disabled="opCopy.unquantified==1" ng-keypress="isNum($event)" ng-model="opCopy.uncertainty" type="text" /></div>
                                        <div class="col-md-2" style="text-decoration:underline">OR</span></div>
                                        <div class="col-md-5">
                                            <input type="checkbox" ng-model="opCopy.unquantified" ng-checked="opCopy.unquantified==1" ng-true-value="1" ng-false-value="0" ng-click="UnquantChecked()" />
                                            <span style="margin-left:10px">Unquantified</span>
                                        </div>
                                        <button type="button" class="col-md-1 borderLess pull-left" tooltip-placement="bottom" tooltip-append-to-body="false" uib-tooltip="From GNSS or OPUS solution.">
                                            <span class="glyphicon glyphicon-question-sign"></span>
                                        </button>
                                        <br />
                                    </div>
                                </div>
                            </div>

                            <!-- Quality: (detail) -->
                            <div class="col-md-12" ng-if="view.OPval == 'detail'">
                                <div class="col-md-4"><label>Quality:</label></div>
                                <div class="col-md-6"><span>{{OP.quality || '---'}}</span></div>
                            </div>

                            <!-- Quality: (edit)-->
                            <div class="form-group" ng-if="view.OPval == 'edit'">
                                <label class="col-md-4 control-label" for="op_quality_id">Quality:</label>
                                <div class="col-md-6">
                                    <select class="form-control" name="op_quality_id" ng-model="opCopy.op_quality_id"
                                            ng-options="opq.op_quality_id as opq.quality for opq in OPQualityList">
                                        <option value=""></option>
                                    </select>
                                </div>
                            </div>

                            <!-- Objective Point Notes: (detail) -->
                            <div ng-if="view.OPval == 'detail'" class="col-md-12">
                                <div class="col-md-4"><label>Datum Location Notes:</label></div>
                                <div class="col-md-6"><span>{{OP.op_notes || '---'}}</span></div>
                            </div>
                            <!-- Objective Point Notes: (edit) -->
                            <div ng-if="view.OPval == 'edit'" class="form-group">
                                <label class="col-md-4 control-label" for="op_notes">Datum Location Notes:</label>
                                <div class="col-md-6">
                                    <textarea class="form-control" type="text" rows="3" ng-model="opCopy.op_notes" />
                                </div>
                            </div>

                            <!-- Date Established: (detail) -->
                            <div ng-if="view.OPval == 'detail'" class="col-md-12">
                                <div class="col-md-4"><label>Date Established:</label></div>
                                <div class="col-md-6">
                                    <div class="col-md-6 input-group"><span>{{OP.date_established | date: 'MM/dd/yyyy' || '---'}}</span></div>
                                </div>
                            </div>
                            <!-- Date Established: (edit) -->
                            <div ng-if="view.OPval == 'edit'" class="form-group required" ng-class="{'has-error':OPEditForm.date_established.$invalid && OPEditForm.date_established.$dirty && view.OPval =='edit'}">
                                <label class="col-md-4 control-label req" for="date_established">Date Established:</label>
                                <div class="col-md-6">
                                    <div class="col-md-6 input-group">
                                        <input class="form-control dateInputStyle" type="date" name="de" uib-datepicker-popup="MM/dd/yyyy" show-weeks="false" is-open="datepickrs.de" ng-model="opCopy.date_established" required />
                                        <span class="input-group-btn">
                                            <button type="button" class="btn btn-default" ng-click="open($event, 'de')">
                                                <i class="glyphicon glyphicon-calendar" />
                                            </button>
                                        </span>
                                    </div>
                                </div>
                            </div>

                            <!-- Date Recovered: (detail) -->
                            <div ng-if="view.OPval == 'detail'" class="col-md-12">
                                <div class="col-md-4"><label>Date Recovered:</label></div>
                                <div class="col-md-6">
                                    <div class="col-md-6 input-group"><span>{{OP.date_recovered | date: 'MM/dd/yyyy' || '---'}}</span></div>
                                </div>
                            </div>
                            <!-- Date Recovered: (edit) -->
                            <div ng-if="view.OPval == 'edit'" class="form-group">
                                <label class="col-md-4 control-label" for="date_recovered">Date Recovered:</label>
                                <div class="col-md-6">
                                    <div class="col-md-6 input-group">
                                        <input show-weeks="false" class="form-control dateInputStyle" type="date" name="dr" uib-datepicker-popup="MM/dd/yyyy" is-open="datepickrs.dr" ng-model="opCopy.date_recovered" />
                                        <span class="input-group-btn">
                                            <button type="button" class="btn btn-default" ng-click="open($event, 'dr')">
                                                <i class="glyphicon glyphicon-calendar" />
                                            </button>
                                        </span>
                                    </div>
                                </div>
                                <button type="button" class="col-md-1 borderLess pull-left" tooltip-placement="bottom" tooltip-append-to-body="false" uib-tooltip="Enter the date the location was recently found in good condition.">
                                    <span class="glyphicon glyphicon-question-sign"></span>
                                </button>
                            </div>
                        </fieldset>
                    </form>
                </uib-accordion-group>
                <!-- OBJECTIVE POINT FILES SECTION -->
                <div ng-if="OP.objective_point_id !== undefinfed">
                    <!--OP File Part-->
                    <uib-accordion-group is-open="dl.dlFileOpen">
                        <uib-accordion-heading>
                            <i style="margin-right:10px" class="pull-left glyphicon" ng-class="{'glyphicon-chevron-down': dl.dlFileOpen, 'glyphicon-chevron-right': !dl.dlFileOpen}"></i>
                            <span ng-class="{'redText':showFileForm}">Datum Location File Information</span>
                        </uib-accordion-heading>
                        <div class="col-md-12">
                            <div class="col-md-4"><h3>Datum Location Files</h3></div>
                            <div class="col-md-6" ng-if="!showFileForm" style="margin-top:14px">
                                <button type="button" class="borderLess" ng-click="showFile(0)" tooltip-placement="right" uib-tooltip="Upload a new File to this OP">
                                    <span class="glyphicon glyphicon-plus"></span>
                                </button>
                            </div>
                            <br clear="all" />
                            <!-- list of existing files for this op -->
                            <div class="col-md-6" ng-if="OPFiles.length > 0">
                                <span ng-repeat="f in OPFiles">
                                    <ul style="padding-left: 0">
                                        <li style="list-style:none;padding-bottom: 15px;">
                                            <span class="col-sm-9 borderLess" style="padding:0">
                                                <a class="btn borderLess" style="padding:0" title="{{f.file_date | date: 'MM/dd/yyyy'}} ({{f.name || f.file_id}})" ng-click="showFile(f)">{{f.file_date | date: 'MM/dd/yyyy'}} ({{f.name || f.file_id}})</a>
                                            </span>
                                        </li>
                                    </ul>
                                </span>
                            </div>
                            <!-- carousel of photo files -->
                            <div class="col-md-6" ng-if="opImageFiles.length > 0" style="height:120px;">
                                <uib-carousel interval="4000">
                                    <uib-slide ng-repeat="f in opImageFiles">
                                        <img ng-click="showImageModal(f.file_id)" ng-src="{{serverURL}}/Files/{{f.file_id}}/Item" />
                                        <div class="carousel-caption">
                                            <p>{{f.name || f.file_id}}</p>
                                        </div>
                                    </uib-slide>
                                </uib-carousel>
                            </div>
                            <br clear="all" />

                            <div ng-if="showFileForm">
                                <hr />
                                <form class="form-horizontal" name="OPFILEForm">
                                    <fieldset>
                                        <!--Upload Single Image with validations*-->
                                        <div ng-if="aFile.file_id === undefined" class="form-group required" style="margin:0;padding:0">
                                            <label class="col-md-3 control-label" for="FILE">Upload File:</label>
                                            <div class="col-md-9">
                                                <input type="file" max="500000" file-model="aFile.File" />
                                                <img ngf-thumbnail="aFile.File" style="height:60px" class="thumbnail">
                                            </div>
                                        </div>
                                        <!-- File Type* -->
                                        <div class="form-group required" ng-class="{'has-error':OPFILEForm.filetype_id.$invalid && OPFILEForm.filetype_id.$dirty}" style="margin:0;padding:0">
                                            <label class="col-md-3 control-label req" for="filetype_id">File Type:</label>
                                            <div class="col-md-6">
                                                <select class="form-control" name="filetype_id" ng-model="aFile.filetype_id" ng-change="updateAgencyForCaption()"
                                                        ng-options="ft.filetype_id as ft.filetype for ft in fileTypes" required>
                                                    <option value=""></option>
                                                </select>
                                            </div>
                                        </div>

                                        <br clear="all" />

                                        <!-- photo file fileType==1-->  <!-- all other file fileType > 2-->    <!--data file fileType==2 -->
                                        <!--File URL (Link file only)-->
                                        <div ng-if="aFile.filetype_id === 8" class="form-group" style="margin:0;padding:0">
                                            <label class="col-md-3 control-label" for="name">File URL:</label>
                                            <div class="col-md-6">
                                                <input class="form-control" name="name" ng-model="aFile.name" type="text" />
                                            </div>
                                            <button type="button" class="col-md-1 borderLess pull-left" tooltip-placement="bottom" tooltip-append-to-body="false" uib-tooltip="Please link to persistent URLs or digital object identifier (doi) urls.">
                                                <span class="glyphicon glyphicon-question-sign"></span>
                                            </button>
                                        </div>

                                        <!--Source Name (photo)-->
                                        <div class="form-group required" ng-if="aFile.filetype_id === 1" ng-class="{'has-error':OPFILEForm.FULLname.$invalid && OPFILEForm.FULLname.$dirty}" style="margin:0;padding:0">
                                            <label class="col-md-3 control-label req" for="source_id">Source Photographer:</label>
                                            <div class="col-md-6">
                                                <input class="form-control" name="FULLname" ng-model="aSource.FULLname" type="text" required />
                                            </div>
                                        </div>

                                        <!--Source Name (all other)-->
                                        <div class="form-group required" ng-if="aFile.filetype_id  > 2" ng-class="{'has-error':OPFILEForm.FULLname.$invalid && OPFILEForm.FULLname.$dirty}" style="margin:0;padding:0">
                                            <label class="col-md-3 control-label req" for="source_id">Source Name:</label>
                                            <div class="col-md-6">
                                                <input class="form-control" name="FULLname" ng-model="aSource.FULLname" type="text" required />
                                            </div>
                                        </div>

                                        <!--Source Agency* (photo, allOther)-->
                                        <div ng-if="aFile.filetype_id === 1 || aFile.filetype_id > 2" class="form-group required" ng-class="{'has-error':OPFILEForm.agency_id.$invalid && OPFILEForm.agency_id.$dirty}" style="margin:0;padding:0">
                                            <label class="col-md-3 control-label req" for="agency_id">Source Agency:</label>
                                            <div class="col-md-6">
                                                <select class="form-control" name="agency_id" ng-model="aSource.agency_id" ng-change="updateAgencyForCaption()"
                                                        ng-options="a.agency_id as a.agency_name for a in agencies" required>
                                                    <option value=""></option>
                                                </select>
                                            </div>
                                        </div>

                                        <!-- Photo Date* (photo) -->
                                        <div ng-if="aFile.filetype_id === 1" class="form-group required" ng-class="{'has-error':OPFILEForm.photo_date.$invalid && OPFILEForm.photo_date.$dirty}" style="margin:0;padding:0">
                                            <label class="col-md-3 control-label req" for="photo_date">Photo Date:</label>
                                            <div class="col-md-3 input-group" style="padding-right:14px;padding-left:14px">
                                                <input class="form-control dateInputStyle" type="date" name="sd" uib-datepicker-popup="MM/dd/yyyy" show-weeks="false" is-open="datepickrs.sd" ng-model="aFile.photo_date" required />
                                                <span class="input-group-btn">
                                                    <button type="button" class="btn btn-default" ng-click="open($event, 'sd')">
                                                        <i class="glyphicon glyphicon-calendar" />
                                                    </button>
                                                </span>
                                            </div>
                                        </div>

                                        <!-- Date Uploaded* (photo, data, allother) -->
                                        <div ng-if="aFile.filetype_id > 0" class="form-group required" ng-class="{'has-error':OPFILEForm.file_date.$invalid && OPFILEForm.file_date.$dirty}" style="margin:0;padding:0">
                                            <label class="col-md-3 control-label req" for="file_date">Date Uploaded:</label>
                                            <div class="col-md-3 input-group" style="padding-right:14px;padding-left:14px">
                                                <input class="form-control dateInputStyle" type="date" name="fd" uib-datepicker-popup="MM/dd/yyyy" show-weeks="false" is-open="datepickrs.fd" ng-model="aFile.file_date" required />
                                                <span class="input-group-btn">
                                                    <button type="button" class="btn btn-default" ng-click="open($event, 'fd')">
                                                        <i class="glyphicon glyphicon-calendar" />
                                                    </button>
                                                </span>
                                            </div>
                                        </div>

                                        <!--Description*(photo, data, allother)-->
                                        <div ng-if="aFile.filetype_id > 0" class="form-group required" ng-class="{'has-error':OPFILEForm.description.$invalid && OPFILEForm.description.$dirty}" style="margin:0;padding:0">
                                            <label class="col-md-3 control-label req" for="description">Description:</label>
                                            <div class="col-md-6">
                                                <textarea class="form-control" id="description" type="text" rows="3" placeholder="Description" ng-model="aFile.description" required />
                                            </div>
                                            <button ng-show="aFile.filetype_id == 1" type="button" class="col-md-1 borderLess pull-left" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Populates in Photo caption below.">
                                                <span class="glyphicon glyphicon-question-sign"></span>
                                            </button>
                                        </div>

                                        <!-- This is where Other ends, rest is for Photo -->
                                        <!--Photo Direction (photo)-->
                                        <div ng-if="aFile.filetype_id === 1" class="form-group" style="margin:0;padding:0;padding-top:5px;">
                                            <label class="col-md-3 control-label" for="photo_direction">Photo Direction:</label>
                                            <div class="col-md-6">
                                                <input class="form-control" id="photo_direction" name="photo_direction" ng-model="aFile.photo_direction" type="text" />
                                            </div>
                                        </div>

                                        <!-- Photo Latitude (photo)-->
                                        <div ng-if="aFile.filetype_id === 1" class="form-group" style="margin:0;padding:0">
                                            <label class="col-md-3 control-label" for="latitude_dd">Photo Latitude <br /> (if different):</label>
                                            <div class="col-md-6">
                                                <input class="form-control" ng-keypress="isNum($event)" name="latitude_dd" id="latitude_dd" ng-model="aFile.latitude_dd"
                                                       type="text" />
                                            </div>
                                        </div>

                                        <!--Photo Longitude (photo)-->
                                        <div ng-if="aFile.filetype_id === 1" class="form-group" style="margin:0;padding:0">
                                            <label class="col-md-3 control-label" for="longitude_dd">Photo Longitude <br /> (if different):</label>
                                            <div class="col-md-6">
                                                <input class="form-control" ng-keypress="isNum($event)" id="longitude_dd" name="longitude_dd" ng-model="aFile.longitude_dd"
                                                       type="text" />
                                            </div>
                                        </div>

                                        <div ng-if="aFile.filetype_id === 1" class="form-group" style="margin:0;padding:0">
                                            <label class="col-md-3 control-label" for="Caption">Preview Caption:</button></label>
                                            <div class="col-md-6">
                                                <span>
                                                    Photo of {{aFile.description || ' (Description HERE) '}} at {{thisOPsite.site_description}}, {{thisOPsite.county}}, {{thisOPsite.state}}, {{aFile.photo_date | date: 'MM/dd/yyyy' || ' Date taken HERE '}}. Photograph by {{aSource.FULLname || ' Source Name HERE ' }}, {{agencyNameForCap || ' Agency HERE '}}.
                                                </span>
                                            </div>
                                        </div>

                                        <div ng-show="aFile.file_id !== undefined && aFile.filetype_id !== 8" class="form-group" style="margin:0;padding:0">
                                            <label class="col-md-3 control-label">Associated File:</label>
                                            <div class="col-md-6">
                                                <a target="_blank" title="Download File" ng-href="{{serverURL}}/Files/{{aFile.file_id}}/Item">
                                                    <span class="glyphicon glyphicon-download"></span>
                                                </a>
                                                <img ng-if="aFile.filetype_id === 1" style="height:80px;" ng-src="{{serverURL}}/Files/{{aFile.file_id}}/Item" />
                                            </div>
                                        </div>

                                        <div ng-show="!fileIsUploading">
                                            <button class="btn btn-primary" ng-if="aFile.file_id != undefined" ng-click="saveFile(OPFILEForm.$valid)">Save File</button>
                                            <button type="button" class="btn btn-danger" ng-if="aFile.file_id != undefined" ng-click="deleteFile()">Delete File</button>
                                            <button class="btn btn-primary" ng-if="aFile.file_id == undefined" ng-click="createFile(OPFILEForm.$valid)">Create File</button>
                                            <button type="button" class="btn btn-warning" type="button" ng-click="cancelFile()">Close/Cancel File</button>
                                        </div>
                                        <div ng-show="fileIsUploading"><img src="images/fileUpload.gif" /></div>

                                    </fieldset>
                                </form>
                            </div>
                        </div>
                    </uib-accordion-group>
                </div>
            </uib-accordion>
        </div><!-- end edit view -->
    </div> <!-- end modal-body -->
    <br clear="all" />
    <div class="modal-footer">
        <div class="form-group">
            <div class="col-md-12">
                <button ng-disabled="showFileForm" type="button" ng-show="OP.objective_point_id !== undefined" class="btn btn-danger" ng-click="deleteOP(OPEditForm.$valid)"><span>Delete Datum Location</span></button>
                <button type="button" class="btn btn-warning" ng-disabled="showFileForm" ng-click="cancel()"><span>Cancel/Close</span></button>
            </div>
        </div>
    </div> <!-- end modal-footer -->
</script>

<!-- MODAL for HWM-->
<script type="text/ng-template" id="HWMmodal.html">
    <div class="modal-header">
        <h3 class="modal-title">HWM<button class="close" type="button" ng-click="cancel()" aria-hidden="true" style="color:gray;">&times;</button></h3>
    </div>

    <div class="modal-body">
        <div ng-if="createOReditHWM == 'create'">
            <form class="form-horizontal" name="HWMForm">
                <fieldset>
                    <!-- Waterbody: -->
                    <div class="form-group">
                        <label class="col-md-4 control-label" for="waterbody">Waterbody:</label>
                        <div class="col-md-6">
                            <input class="form-control" name="waterbody" ng-model="aHWM.waterbody" type="text" />
                        </div>
                    </div>

                    <!-- Event: -->
                    <div class="form-group">
                        <label class="col-md-4 control-label" for="event_id">Event:</label>
                        <div class="col-md-6">
                            <div class="col-md-8">{{EventName}}</div>
                            <div class="col-md-3" ng-show="userRole == 'Admin' && aHWM.hwm_id != undefined">
                                <button type="button" ng-click="showChangeEventDD()" class="btn btn-primary">Change Event</button>
                            </div>
                        </div>
                    </div>

                    <!--Event dropdown for admin -->
                    <div ng-show="showEventDD">
                        <div class="form-group">
                            <label class="col-md-4 control-label">Events:</label>
                            <div class="col-md-6">
                                <select class="form-control" name="event_id" ng-model="adminChanged.event_id" ng-change="ChangeEvent()"
                                        ng-options="e.event_id as (e.event_name + ' --- ' + (e.event_start_date | date: 'MM/dd/yyyy') + ' to ' + ((e.event_end_date || '-Not Set-') | date: 'MM/dd/yyyy'))  for e in eventList | orderBy: '-event_start_date'"
                                <option value=""></option>
                            </select>
                            </div>
                        </div>
                    </div>

                    <!-- HWM Type:* -->
                    <div class="form-group required" ng-class="{'has-error':HWMForm.hwm_type_id.$invalid && HWMForm.hwm_type_id.$dirty}">
                        <label class="col-md-4 control-label req" for="hwm_type_id">HWM Type:</label>
                        <div class="col-md-6">
                            <select class="form-control" name="hwm_type_id" ng-model="aHWM.hwm_type_id"
                                    ng-options="htype.hwm_type_id as htype.hwm_type for htype in hwmTypeList" required>
                                <option value=""></option>
                            </select>
                        </div>
                    </div>

                    <!-- Marker: -->
                    <div class="form-group">
                        <label class="col-md-4 control-label" for="marker_id">Marker:</label>
                        <div class="col-md-6">
                            <select class="form-control" name="marker_id" ng-model="aHWM.marker_id"
                                    ng-options="vd.marker_id as vd.marker1 for vd in markerList">
                                <option value=""></option>
                            </select>
                        </div>
                    </div>

                    <!-- HWM Environment:* -->
                    <div class="form-group required" ng-class="{'has-error':HWMForm.hwm_environment.$invalid && HWMForm.hwm_environment.$dirty}">
                        <label class="col-md-4 control-label req">HWM Environment:</label>
                        <div class="col-md-6">
                            <span class="radio-inline">
                                <input type="radio" name="hwm_environment" ng-model="aHWM.hwm_environment" value="Coastal" />Coastal
                            </span>
                            <span class="radio-inline">
                                <input type="radio" name="hwm_environment" ng-model="aHWM.hwm_environment" value="Riverine" />Riverine
                            </span>
                        </div>
                    </div>

                    <!-- Breakdown of categories -->
                    <div class="form-group">
                        <label class="col-md-4"></label>
                        <div class="col-md-6">
                            <table>
                                <tr><td style="text-align: center;width: 81px">0.05</td><td style="text-align: center;width: 81px">0.02</td><td style="text-align: left;width: 81px">Excellent</td></tr>
                                <tr><td style="text-align: center;width: 81px">0.1</td><td style="text-align: center;width: 81px">0.05</td><td style="text-align: left;width: 81px">Good</td></tr>
                                <tr><td style="text-align: center;width: 81px">0.2</td><td style="text-align: center;width: 81px">0.1</td><td style="text-align: left;width: 81px">Fair</td></tr>
                                <tr><td style="text-align: center;width: 81px">0.4</td><td style="text-align: center;width: 81px">0.2</td><td style="text-align: left;width: 81px">Poor</td></tr>
                                <tr><td style="text-align: center;width: 81px">&#62;0.40</td><td style="text-align: center;width: 81px">&#62;0.20</td><td style="text-align: left;width: 81px">V. Poor</td></tr>
                                <tr><td colspan="3"><a href="http://pubs.usgs.gov/tm/11d1/" target="_blank">USGS T&M 11-D1, Table 13</a></td></tr>
                            </table>
                        </div>
                    </div>

                    <!-- HWM Quality:* -->
                    <div class="form-group required" ng-class="{'has-error':HWMForm.hwm_quality_id.$invalid && HWMForm.hwm_quality_id.$dirty}">
                        <label class="col-md-4 control-label req">HWM Quality:</label>
                        <div class="col-md-6">
                            <select class="form-control" name="hwm_quality_id" ng-model="aHWM.hwm_quality_id"
                                    ng-options="hqual.hwm_quality_id as hqual.hwm_quality for hqual in hwmQualList" required>
                                <option value=""></option>
                            </select>
                        </div>
                    </div>

                    <!-- Bank: -->
                    <div class="form-group">
                        <label class="col-md-4 control-label">Bank:</label>
                        <div class="col-md-6">
                            <span class="radio-inline">
                                <input type="radio" name="bank" ng-model="aHWM.bank" value="Left" />Left
                            </span>
                            <span class="radio-inline">
                                <input type="radio" name="bank" ng-model="aHWM.bank" value="Right" />Right
                            </span>
                            <span class="radio-inline">
                                <input type="radio" name="bank" ng-model="aHWM.bank" value="N/A" />N/A
                            </span>
                        </div>
                    </div>

                    <!-- Location Description: -->
                    <div class="form-group">
                        <label class="col-md-4 control-label" for="hwm_locationdescription">Location Description:</label>
                        <div class="col-md-6">
                            <textarea class="form-control" name="hwm_locationdescription" type=" text" rows="3" ng-model="aHWM.hwm_locationdescription" />
                        </div>
                        <button type="button" class="col-md-1 borderLess pull-left" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Please be specific so someone else can find this sensor later. This field is public.">
                            <span class="glyphicon glyphicon-question-sign"></span>
                        </button>
                    </div>

                    <!-- dec deg or dms: -->
                    <div>
                        <label class="col-md-4 control-label"></label>
                        <div class="col-md-6">
                            <span class="radio-inline">
                                <input type="radio" name="decDegORdms" ng-change="latLongChange()" ng-model="aHWM.decDegORdms" value="dd" /> Dec Deg
                            </span>
                            <span class="radio-inline">
                                <input type="radio" name="decDegORdms" ng-change="latLongChange()" ng-model="aHWM.decDegORdms" value="dms" /> DMS
                            </span>
                        </div>
                    </div>

                    <!-- Latitude: -->
                    <div class="form-group">
                        <label class="col-md-4 control-label" for="latitude_dd">Latitude:</label>
                        <div class="col-md-6" ng-if="aHWM.decDegORdms == 'dd'">
                            <input class="form-control" ng-keypress="isNum($event)" name="latitude_dd" id="latitude_dd" ng-model="aHWM.latitude_dd"
                                   ng-model-options="{ updateOn: 'blur' }" ng-change="checkValue('dd')" type="text" />
                        </div>
                        <div class="col-md-6" ng-if="aHWM.decDegORdms == 'dms'">
                            <table>
                                <tr>
                                    <td><input class="form-control" ng-keypress="isNum($event)" ng-model-options="{ updateOn: 'blur' }" ng-change="checkValue('dms')" id="LaDeg" name="Deg" ng-model="DMS.LADeg" type="text" /></td>
                                    <td>°</td>
                                    <td><input class="form-control" ng-keypress="isNum($event)" name="Min" ng-model="DMS.LAMin" type="text" /></td>
                                    <td>′</td>
                                    <td><input class="form-control" ng-keypress="isNum($event)" name="Sec" ng-model="DMS.LASec" type="text" /></td>
                                    <td>″</td>
                                </tr>
                            </table>
                        </div>
                    </div>

                    <!-- Longitude: -->
                    <div class="form-group">
                        <label class="col-md-4 control-label" for="longitude_dd">Longitude:</label>
                        <div class="col-md-6" ng-if="aHWM.decDegORdms == 'dd'">
                            <input class="form-control" ng-keypress="isNum($event)" id="longitude_dd" name="longitude_dd" ng-model="aHWM.longitude_dd"
                                   ng-model-options="{ updateOn: 'blur' }" ng-change="checkValue('dd')" type="text" />
                        </div>
                        <div class="col-md-6" ng-if="aHWM.decDegORdms == 'dms'">
                            <table>
                                <tr>
                                    <td><input class="form-control" ng-keypress="isNum($event)" name="Deg" ng-model-options="{ updateOn: 'blur' }" ng-change="checkValue('dms')" id="LoDeg" ng-model="DMS.LODeg" type="text" /></td>
                                    <td>°</td>
                                    <td><input class="form-control" ng-keypress="isNum($event)" name="Min" ng-model="DMS.LOMin" type="text" /></td>
                                    <td>′</td>
                                    <td><input class="form-control" ng-keypress="isNum($event)" name="Sec" ng-model="DMS.LOSec" type="text" /></td>
                                    <td>″</td>
                                </tr>
                            </table>
                        </div>
                    </div>

                    <!-- Horizontal Datum:* -->
                    <div class="form-group required" ng-class="{'has-error':HWMForm.hdatum_id.$invalid && HWMForm.hdatum_id.$dirty}">
                        <label class="col-md-4 control-label req">Horizontal Datum:</label>
                        <div class="col-md-6">
                            <select class="form-control" name="hdatum_id" ng-model="aHWM.hdatum_id"
                                    ng-options="hd.datum_id as hd.datum_name for hd in HDatumsList" required>
                                <option value=""></option>
                            </select>
                        </div>
                    </div>

                    <!-- Horizontal Collection Method: * -->
                    <div class="form-group required" ng-class="{'has-error':HWMForm.hcollect_method_id.$invalid && HWMForm.hcollect_method_id.$dirty}">
                        <label class="col-md-4 control-label req">Horizontal Collection Method:</label>
                        <div class="col-md-6">
                            <select class="form-control" name="hcollect_method_id" ng-model="aHWM.hcollect_method_id"
                                    ng-options="hcm.hcollect_method_id as hcm.hcollect_method for hcm in hCollMList" required>
                                <option value=""></option>
                            </select>
                        </div>
                    </div>

                    <!-- Height above ground (ft): -->
                    <div class="form-group">
                        <label class="col-md-4 control-label" for="height_above_gnd">Height above ground (ft):</label>
                        <div class="col-md-6">
                            <input class="form-control" ng-keypress="isNum($event)" name="height_above_gnd" ng-model="aHWM.height_above_gnd" type="text" />
                        </div>
                    </div>

                    <!-- Flag/Found Date: * -->
                    <div class="form-group required" ng-class="{'has-error':HWMForm.flag_date.$invalid && HWMForm.flag_date.$dirty}">
                        <label class="col-md-4 control-label req" for="flag_date">Flag/Found Date:</label>
                        <div class="col-md-3 input-group" style="padding-right:14px;padding-left:14px">
                            <input show-weeks="false" class="form-control dateInputStyle" type="date" id="flag_date" name="fd" uib-datepicker-popup="MM/dd/yyyy" is-open="datepickrs.fd" ng-model="aHWM.flag_date" required />
                            <span class="input-group-btn">
                                <button type="button" class="btn btn-default" ng-click="open($event, 'fd')">
                                    <i class="glyphicon glyphicon-calendar" />
                                </button>
                            </span>
                        </div>
                    </div>

                    <!-- Surveyed Date: -->
                    <div class="form-group">
                        <label class="col-md-4 control-label" for="survey_date">Surveyed Date:</label>
                        <div class="col-md-3">
                            <div class="col-md-3 input-group">
                                <input show-weeks="false" class="form-control dateInputStyle" type="date" id="survey_date" name="sd" uib-datepicker-popup="MM/dd/yyyy" is-open="datepickrs.sd" ng-model="aHWM.survey_date" />
                                <span class="input-group-btn">
                                    <button type="button" class="btn btn-default" ng-click="open($event, 'sd')">
                                        <i class="glyphicon glyphicon-calendar" />
                                    </button>
                                </span>
                            </div>
                        </div>
                        <button type="button" class="col-md-3 borderLess pull-right" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Elevation required below if survey date is populated.">
                            <span class="glyphicon glyphicon-question-sign"></span>
                        </button>
                    </div>

                    <!-- Surveyed Elevation (ft): -->
                    <div class="form-group" ng-class="{'required': aHWM.survey_date}">
                        <label class="col-md-4 control-label" ng-class="{'req': aHWM.survey_date}" for="elev_ft">Surveyed Elevation (ft):</label>
                        <div class="col-md-6">
                            <input class="form-control" ng-keypress="isNum($event)" name="elev_ft" ng-model="aHWM.elev_ft" type="text" ng-required="aHWM.survey_date" />
                        </div>
                    </div>

                    <!-- Vertical Datum: -->
                    <div class="form-group">
                        <label class="col-md-4 control-label" for="vdatum_id">Vertical Datum:</label>
                        <div class="col-md-6">
                            <select class="form-control" name="vdatum_id" ng-model="aHWM.vdatum_id"
                                    ng-options="vd.datum_id as vd.datum_name for vd in VDatumsList">
                                <option value=""></option>
                            </select>
                        </div>
                    </div>

                    <!-- Vertical Collection Method: -->
                    <div class="form-group">
                        <label class="col-md-4 control-label" for="vdatum_id">Vertical Collection Method:</label>
                        <div class="col-md-6">
                            <select class="form-control" name="vcollect_method_id" ng-model="aHWM.vcollect_method_id"
                                    ng-options="vcm.vcollect_method_id as vcm.vcollect_method for vcm in vCollMList">
                                <option value=""></option>
                            </select>
                        </div>
                    </div>

                    <!-- Ft or CM radios: -->
                    <div>
                        <label class="col-md-4 control-label"></label>
                        <div class="col-md-6">
                            <span class="radio-inline">
                                <input type="radio" name="FTorCM" ng-model="FTorCM" value="ft" /> +/- ft
                            </span>
                            <span class="radio-inline">
                                <input type="radio" name="FTorCM" ng-model="FTorCM" value="cm" /> +/- cm
                            </span>
                        </div>
                    </div>

                    <!-- Uncertainty: -->
                    <div class="form-group">
                        <label class="col-md-4 control-label" for="uncertainty">Uncertainty:</label>
                        <div class="col-md-6">
                            <div class="col-md-12" style="margin-bottom:5px;padding-left:0">
                                <div class="col-md-3" style="padding-left: 0;"><input class="form-control" ng-keypress="isNum($event)" ng-model="aHWM.uncertainty" type="text" /></div>
                            </div>
                        </div>
                    </div>

                    <!-- Notes: -->
                    <div class="form-group">
                        <label class="col-md-4 control-label" for="hwm_notes">Notes:</label>
                        <div class="col-md-6">
                            <textarea class="form-control" name="hwm_notes" type=" text" rows="3" ng-model="aHWM.hwm_notes" />
                        </div>
                    </div>

                    <!-- Tranquil/Stillwater HWM -->
                    <div class="form-group">
                        <label class="col-md-4 control-label">Tranquil/Stillwater HWM:</label>
                        <div class="col-md-6">
                            <span class="radio-inline">
                                <input type="radio" name="stillwater" ng-model="aHWM.stillwater" value="1" />Yes
                            </span>
                            <span class="radio-inline">
                                <input type="radio" name="stillwater" ng-model="aHWM.stillwater" value="0" />No
                            </span>
                        </div>
                        <button type="button" class="col-md-1 borderLess pull-left" tooltip-placement="bottom" tooltip-append-to-body="false" uib-tooltip="Tranquil-Water HWMs preferred over Rapid-Water HWMs. Refer to T&M 3-A24 for details.">
                            <span class="glyphicon glyphicon-question-sign"></span>
                        </button>
                    </div>

                    <!-- Flagging Member: -->
                    <div class="form-group">
                        <label class="col-md-4 control-label" for="flag_member_id">Flagging Member:</label>
                        <div class="col-md-6">
                            <span>{{FlagMember.fname}} {{FlagMember.lname}}</span>
                        </div>
                    </div>

                    <!-- Survey Member: -->
                    <div class="form-group" ng-show="aHWM.survey_member_id">
                        <label class="col-md-4 control-label" for="survey_member_id">Survey Member:</label>
                        <div class="col-md-6">
                            <span>{{SurveyMember.fname}} {{SurveyMember.lname}}</span>
                        </div>
                    </div>


                    <!-- form submit button -->
                    <div class="form-group">
                        <div class="col-md-12 text-center">
                            <button class="btn btn-primary" ng-click="create(HWMForm.$valid)"><span>Create</span></button>
                        </div>
                    </div>
                </fieldset>
            </form>
        </div> <!-- end if create hwm -->
        <div ng-if="createOReditHWM == 'edit'">
            <uib-accordion close-others="false">
                <!--HWM Part-->
                <uib-accordion-group is-open="h.hOpen">
                    <uib-accordion-heading>
                        <i style="margin-right:10px" class="pull-left glyphicon" ng-class="{'glyphicon-chevron-down': h.hOpen, 'glyphicon-chevron-right': !h.hOpen}"></i>
                        <span ng-class="{'redText':view.HWMval == 'edit'}">{{hwmModalHeader}}</span>
                    </uib-accordion-heading>
                    <form class="form-horizontal" name="HWMEditForm">
                        <fieldset>
                            <!-- edit button -->
                            <div class="form-group">
                                <div class="col-md-12">
                                    <span><button ng-show="view.HWMval == 'detail'" type="button" class="btn btn-primary" ng-click="wannaEditHWM()"><span>Edit HWM</span></button></span>
                                    <span><button ng-show="view.HWMval == 'edit'" class="btn btn-primary" ng-click="save(HWMEditForm.$valid)"><span>Save</span></button></span>
                                    <span><button type="button" ng-show="view.HWMval == 'edit'" type="button" class=" btn btn-primary" ng-click="cancelHWMEdit()"><span>Cancel</span></button></span>
                                    <span><button type="button" ng-show="((ApprovalInfo.approvalDate == undefined && view.HWMval == 'detail') && (userRole == 'Admin' || userRole == 'Manager'))" class="btn btn-primary" ng-click="approveHWM()"><span>Approve</span></button></span>
                                    <span><button type="button" ng-show="((ApprovalInfo.approvalDate != undefined && view.HWMval == 'detail') && (userRole == 'Admin' || userRole == 'Manager'))" class="btn btn-primary" ng-click="unApproveHWM()"><span>UnApprove</span></button></span>
                                </div>
                            </div>

                            <!-- Waterbody: (details) -->
                            <div class="col-md-12" ng-if="view.HWMval== 'detail'">
                                <div class="col-md-4"><label>Waterbody:</label></div>
                                <div class="col-md-6"><span>{{aHWM.waterbody || '---'}}</span></div>
                            </div>
                            <!-- Waterbody: (edit) -->
                            <div class="form-group" ng-if="view.HWMval== 'edit'">
                                <label class="col-md-4 control-label" for="waterbody">Waterbody:</label>
                                <div class="col-md-6">
                                    <input class="form-control" name="waterbody" ng-model="aHWM.waterbody" type="text" />
                                </div>
                            </div>

                            <!-- Event:  (details)-->
                            <div class="col-md-12" ng-if="view.HWMval== 'detail'">
                                <div class="col-md-4"><label>Event:</label></div>
                                <div class="col-md-6"><span>{{EventName}}</span></div>
                            </div>
                            <!-- Event: (edit) -->
                            <div class="form-group" ng-if="view.HWMval== 'edit'" ng-class="{'has-error':HWMEditForm.event_id.$invalid && HWMEditForm.event_id.$dirty}">
                                <label class="col-md-4 control-label">Event:</label>
                                <div class="col-md-6">
                                    <div class="col-md-8">{{EventName}}</div>
                                    <div class="col-md-3" ng-show="userRole == 'Admin'">
                                        <button type="button" ng-click="showChangeEventDD()" class="btn btn-primary">Change Event</button>
                                    </div>
                                </div>
                            </div>

                            <!--Event dropdown for admin -->
                            <div ng-show="showEventDD && view.HWMval == 'edit'">
                                <div class="form-group">
                                    <label class="col-md-4 control-label" for="event_id">Events:</label>
                                    <div class="col-md-6">
                                        <select class="form-control" name="event_id" ng-model="adminChanged.event_id" ng-change="ChangeEvent()"
                                                ng-options="e.event_id as (e.event_name + ' --- ' + (e.event_start_date | date: 'MM/dd/yyyy') + ' to ' + ((e.event_end_date || '-Not Set-') | date: 'MM/dd/yyyy'))  for e in eventList | orderBy: '-event_start_date'"
                                            <option value=""></option>
                                        </select>
                                    </div>
                                </div>
                            </div>

                            <!-- HWM Type:*  (details)-->
                            <div class="col-md-12" ng-if="view.HWMval== 'detail'">
                                <div class="col-md-4"><label>HWM Type:</label></div>
                                <div class="col-md-6"><span>{{aHWM.hwm_type || '---'}}</span></div>
                            </div>
                            <!-- HWM Type:* (edit) -->
                            <div class="form-group required" ng-if="view.HWMval== 'edit'" ng-class="{'has-error':HWMEditForm.hwm_type_id.$invalid && HWMEditForm.hwm_type_id.$dirty}">
                                <label class="col-md-4 control-label req" for="hwm_type_id">HWM Type:</label>
                                <div class="col-md-6">
                                    <select class="form-control" name="hwm_type_id" ng-model="hwmCopy.hwm_type_id" ng-options="htype.hwm_type_id as htype.hwm_type for htype in hwmTypeList" required>
                                        <option value=""></option>
                                    </select>
                                </div>
                            </div>

                            <!-- Marker: (details) -->
                            <div class="col-md-12" ng-if="view.HWMval== 'detail'">
                                <div class="col-md-4"><label>Marker:</label></div>
                                <div class="col-md-6"><span>{{aHWM.Marker || '---'}}</span></div>
                            </div>
                            <!-- Marker: (edit) -->
                            <div class="form-group" ng-if="view.HWMval== 'edit'">
                                <label class="col-md-4 control-label" for="marker_id">Marker:</label>
                                <div class="col-md-6">
                                    <select class="form-control" name="marker_id" ng-model="hwmCopy.marker_id"
                                            ng-options="vd.marker_id as vd.marker1 for vd in markerList">
                                        <option value=""></option>
                                    </select>
                                </div>
                            </div>

                            <!-- HWM Environment:* (details) -->
                            <div class="col-md-12" ng-if="view.HWMval== 'detail'">
                                <div class="col-md-4"><label>HWM Environment:</label></div>
                                <div class="col-md-6"><span>{{aHWM.hwm_environment || '---'}}</span></div>
                            </div>
                            <!-- HWM Environment:* (edit) -->
                            <div class="form-group required" ng-class="{'has-error':HWMEditForm.hwm_environment.$invalid && HWMEditForm.hwm_environment.$dirty}" ng-if="view.HWMval== 'edit'">
                                <label class="col-md-4 control-label req">HWM Environment:</label>
                                <div class="col-md-6">
                                    <span class="radio-inline">
                                        <input type="radio" name="hwm_environment" ng-model="hwmCopy.hwm_environment" value="Coastal" />Coastal
                                    </span>
                                    <span class="radio-inline">
                                        <input type="radio" name="hwm_environment" ng-model="hwmCopy.hwm_environment" value="Riverine" />Riverine
                                    </span>
                                </div>
                            </div>

                            <!-- Breakdown of categories -->
                            <div class="form-group">
                                <label class="col-md-4"></label>
                                <div class="col-md-6">
                                    <table>
                                        <tr><td style="text-align: center;width: 81px">0.05</td><td style="text-align: center;width: 81px">0.02</td><td style="text-align: left;width: 81px">Excellent</td></tr>
                                        <tr><td style="text-align: center;width: 81px">0.1</td><td style="text-align: center;width: 81px">0.05</td><td style="text-align: left;width: 81px">Good</td></tr>
                                        <tr><td style="text-align: center;width: 81px">0.2</td><td style="text-align: center;width: 81px">0.1</td><td style="text-align: left;width: 81px">Fair</td></tr>
                                        <tr><td style="text-align: center;width: 81px">0.4</td><td style="text-align: center;width: 81px">0.2</td><td style="text-align: left;width: 81px">Poor</td></tr>
                                        <tr><td style="text-align: center;width: 81px">&#62;0.40</td><td style="text-align: center;width: 81px">&#62;0.20</td><td style="text-align: left;width: 81px">V. Poor</td></tr>
                                        <tr><td colspan="3"><a href="http://pubs.usgs.gov/tm/11d1/" target="_blank">USGS T&M 11-D1, Table 13</a></td></tr>
                                    </table>
                                </div>
                            </div>

                            <!-- HWM Quality:* (details) -->
                            <div class="col-md-12" ng-if="view.HWMval== 'detail'">
                                <div class="col-md-4"><label>HWM Quality:</label></div>
                                <div class="col-md-6"><span>{{aHWM.Quality || '---'}}</span></div>
                            </div>
                            <!-- HWM Quality:* (edit) -->
                            <div class="form-group required" ng-class="{'has-error':HWMEditForm.hwm_quality_id.$invalid && HWMEditForm.hwm_quality_id.$dirty}" ng-if="view.HWMval== 'edit'">
                                <label class="col-md-4 control-label req">HWM Quality:</label>
                                <div class="col-md-6">
                                    <select class=" form-control" name="hwm_quality_id" ng-model="hwmCopy.hwm_quality_id" ng-options="hqual.hwm_quality_id as hqual.hwm_quality for hqual in hwmQualList" required>
                                        <option value=""></option>
                                    </select>
                                </div>
                            </div>

                            <!-- Bank: (details) -->
                            <div class="col-md-12" ng-if="view.HWMval== 'detail'">
                                <div class="col-md-4"><label>Bank:</label></div>
                                <div class="col-md-6"><span>{{aHWM.bank || '---'}}</span></div>
                            </div>
                            <!-- Bank: (edit) -->
                            <div class="form-group" ng-if="view.HWMval== 'edit'">
                                <label class="col-md-4 control-label">Bank:</label>
                                <div class="col-md-6">
                                    <span class="radio-inline">
                                        <input type="radio" name="bank" ng-model="hwmCopy.bank" value="Left" />Left
                                    </span>
                                    <span class="radio-inline">
                                        <input type="radio" name="bank" ng-model="hwmCopy.bank" value="Right" />Right
                                    </span>
                                    <span class="radio-inline">
                                        <input type="radio" name="bank" ng-model="hwmCopy.bank" value="N/A" />N/A
                                    </span>
                                </div>
                            </div>

                            <!-- Location Description: (details) -->
                            <div class="col-md-12" ng-if="view.HWMval== 'detail'">
                                <div class="col-md-4"><label>Location Description:</label></div>
                                <div class="col-md-6"><span>{{aHWM.hwm_locationdescription || '---'}}</span></div>
                            </div>
                            <!-- Location Description: (edit) -->
                            <div class="form-group" ng-if="view.HWMval== 'edit'">
                                <label class="col-md-4 control-label" for="hwm_locationdescription">Location Description:</label>
                                <div class="col-md-6">
                                    <textarea class="form-control" name="hwm_locationdescription" type=" text" rows="3" ng-model="hwmCopy.hwm_locationdescription" />
                                </div>
                                <button type="button" class="col-md-1 borderLess pull-left" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Please be specific so someone else can find this sensor later. This field is public.">
                                    <span class="glyphicon glyphicon-question-sign"></span>
                                </button>
                            </div>

                            <!-- dec deg or dms: -->
                            <div ng-show="view.HWMval == 'edit'">
                                <label class="col-md-4 control-label"></label>
                                <div class="col-md-6">
                                    <span class="radio-inline">
                                        <input type="radio" name="decDegORdms" ng-change="latLongChange()" ng-model="hwmCopy.decDegORdms" value="dd" /> Dec Deg
                                    </span>
                                    <span class="radio-inline">
                                        <input type="radio" name="decDegORdms" ng-change="latLongChange()" ng-model="hwmCopy.decDegORdms" value="dms" /> DMS
                                    </span>
                                </div>
                            </div>

                            <!-- Latitude: (details) -->
                            <div class="col-md-12" ng-if="view.HWMval== 'detail'">
                                <div class="col-md-4"><label>Latitude:</label></div>
                                <div class="col-md-6"><span>{{aHWM.latitude_dd}}</span></div>
                            </div>
                            <!-- Latitude: (edit) -->
                            <div class="form-group" ng-if="view.HWMval== 'edit'">
                                <label class="col-md-4 control-label" for="latitude_dd">Latitude:</label>
                                <div class="col-md-6" ng-if="hwmCopy.decDegORdms == 'dd'">
                                    <input class="form-control" ng-keypress="isNum($event)" name="latitude_dd" id="latitude_dd" ng-model="hwmCopy.latitude_dd"
                                           ng-model-options="{ updateOn: 'blur' }" ng-change="checkValue('dd')" type="text" />
                                </div>
                                <div class="col-md-6" ng-if="hwmCopy.decDegORdms == 'dms'">
                                    <table>
                                        <tr>
                                            <td><input class="form-control" ng-keypress="isNum($event)" ng-model-options="{ updateOn: 'blur' }" ng-change="checkValue('dms')" id="LaDeg" name="Deg" ng-model="DMS.LADeg" type="text" /></td>
                                            <td>°</td>
                                            <td><input class="form-control" ng-keypress="isNum($event)" name="Min" ng-model="DMS.LAMin" type="text" /></td>
                                            <td>′</td>
                                            <td><input class="form-control" ng-keypress="isNum($event)" name="Sec" ng-model="DMS.LASec" type="text" /></td>
                                            <td>″</td>
                                        </tr>
                                    </table>
                                </div>
                            </div>

                            <!-- Longitude: (details) -->
                            <div class="col-md-12" ng-if="view.HWMval== 'detail'">
                                <div class="col-md-4"><label>Longitude:</label></div>
                                <div class="col-md-6"><span>{{aHWM.longitude_dd}}</span></div>
                            </div>
                            <!-- Longitude:  (edit)-->
                            <div class="form-group" ng-if="view.HWMval== 'edit'">
                                <label class="col-md-4 control-label" for="longitude_dd">Longitude:</label>
                                <div class="col-md-6" ng-if="hwmCopy.decDegORdms == 'dd'">
                                    <input class="form-control" ng-keypress="isNum($event)" id="longitude_dd" name="longitude_dd" ng-model="hwmCopy.longitude_dd"
                                           ng-model-options="{ updateOn: 'blur' }" ng-change="checkValue('dd')" type="text" />
                                </div>
                                <div class="col-md-6" ng-if="hwmCopy.decDegORdms == 'dms'">
                                    <table>
                                        <tr>
                                            <td><input class="form-control" ng-keypress="isNum($event)" ng-model-options="{ updateOn: 'blur' }" ng-change="checkValue('dms')" id="LoDeg" name="Deg" ng-model="DMS.LODeg" type="text" /></td>
                                            <td>°</td>
                                            <td><input class="form-control" ng-keypress="isNum($event)" name="Min" ng-model="DMS.LOMin" type="text" /></td>
                                            <td>′</td>
                                            <td><input class="form-control" ng-keypress="isNum($event)" name="Sec" ng-model="DMS.LOSec" type="text" /></td>
                                            <td>″</td>
                                        </tr>
                                    </table>
                                </div>
                            </div>

                            <!-- Horizontal Datum:* (details) -->
                            <div class="col-md-12" ng-if="view.HWMval== 'detail'">
                                <div class="col-md-4"><label>Horizontal Datum:</label></div>
                                <div class="col-md-6"><span>{{aHWM.hdatum || '---'}}</span></div>
                            </div>
                            <!-- Horizontal Datum:*  (edit)-->
                            <div class="form-group required" ng-class="{'has-error':HWMEditForm.hdatum_id.$invalid && HWMEditForm.hdatum_id.$dirty}" ng-if="view.HWMval== 'edit'">
                                <label class="col-md-4 control-label req">Horizontal Datum:</label>
                                <div class="col-md-6">
                                    <select class="form-control" name="hdatum_id" ng-model="hwmCopy.hdatum_id" ng-options="hd.datum_id as hd.datum_name for hd in HDatumsList" required>
                                        <option value=""></option>
                                    </select>
                                </div>
                            </div>

                            <!-- Horizontal Collection Method: * (details) -->
                            <div class="col-md-12" ng-if="view.HWMval== 'detail'">
                                <div class="col-md-4"><label>Horizontal Collection Method:</label></div>
                                <div class="col-md-6"><span>{{aHWM.hCollectMethod || '---'}}</span></div>
                            </div>
                            <!-- Horizontal Collection Method: * (edit) -->
                            <div class="form-group required" ng-class="{'has-error':HWMEditForm.hcollect_method_id.$invalid && HWMEditForm.hcollect_method_id.$dirty}" ng-if="view.HWMval== 'edit'">
                                <label class="col-md-4 control-label req">Horizontal Collection Method:</label>
                                <div class="col-md-6">
                                    <select class="form-control" name="hcollect_method_id" ng-model="hwmCopy.hcollect_method_id" ng-options="hcm.hcollect_method_id as hcm.hcollect_method for hcm in hCollMList" required>
                                        <option value=""></option>
                                    </select>
                                </div>
                            </div>

                            <!-- Height above ground (ft):  (details)-->
                            <div class="col-md-12" ng-if="view.HWMval== 'detail'">
                                <div class="col-md-4"><label>Height above ground (ft):</label></div>
                                <div class="col-md-6"><span>{{aHWM.height_above_gnd || '---'}}</span></div>
                            </div>
                            <!-- Height above ground (ft): (edit) -->
                            <div class="form-group" ng-if="view.HWMval== 'edit'">
                                <label class="col-md-4 control-label" for="height_above_gnd">Height above ground (ft):</label>
                                <div class="col-md-6">
                                    <input class="form-control" ng-keypress="isNum($event)" name="height_above_gnd" ng-model="hwmCopy.height_above_gnd" type="text" />
                                </div>
                            </div>

                            <!-- Flag/Found Date: * (details) -->
                            <div class="col-md-12" ng-if="view.HWMval== 'detail'">
                                <div class="col-md-4"><label>Flag/Found Date:</label></div>
                                <div class="col-md-3 input-group" style="padding-right:14px;padding-left:14px">
                                    <span>{{aHWM.flag_date | date: 'MM/dd/yyyy'}}</span>
                                </div>
                            </div>
                            <!-- Flag/Found Date: * (edit) -->
                            <div class="form-group required" ng-class="{'has-error':HWMEditForm.flag_date.$invalid && HWMEditForm.flag_date.$dirty}" ng-if="view.HWMval== 'edit'">
                                <label class="col-md-4 control-label req" for="flag_date">Flag/Found Date:</label>
                                <div class="col-md-3 input-group" style="padding-right:14px;padding-left:14px">
                                    <input show-weeks="false" class="form-control dateInputStyle" type="date" id="flag_date" name="fd" uib-datepicker-popup="MM/dd/yyyy"
                                           is-open="datepickrs.fd" ng-model="hwmCopy.flag_date" required />
                                    <span class="input-group-btn">
                                        <button class="btn btn-default" ng-click="open($event, 'fd')" type="button">
                                            <i class="glyphicon glyphicon-calendar" />
                                        </button>
                                    </span>
                                </div>
                            </div>

                            <!-- Surveyed Date: (details) -->
                            <div class="col-md-12" ng-if="view.HWMval== 'detail'">
                                <div class="col-md-4"><label>Surveyed Date:</label></div>
                                <div class="col-md-3">
                                    <span>{{aHWM.survey_date | date: 'MM/dd/yyyy' || '---'}}</span>
                                </div>
                            </div>
                            <!-- Surveyed Date: (edit) -->
                            <div class="form-group" ng-class="{'has-error':HWMEditForm.survey_date.$invalid && HWMEditForm.survey_date.$dirty}" ng-if="view.HWMval== 'edit'">
                                <label class="col-md-4 control-label" for="survey_date">Surveyed Date:</label>
                                <div class="col-md-3">
                                    <div class="col-md-3 input-group">
                                        <input show-weeks="false" class="form-control dateInputStyle" type="date" id="survey_date" name="sd" uib-datepicker-popup="MM/dd/yyyy" is-open="datepickrs.sd" ng-model="hwmCopy.survey_date" />
                                        <span class="input-group-btn">
                                            <button class="btn btn-default" ng-click="open($event, 'sd')" type="button">
                                                <i class="glyphicon glyphicon-calendar" />
                                            </button>
                                        </span>
                                    </div>
                                </div>
                                <button type="button" class="col-md-3 borderLess pull-right" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Elevation required below if survey date is populated.">
                                    <span class="glyphicon glyphicon-question-sign"></span>
                                </button>
                            </div>

                            <!-- Surveyed Elevation (ft): (details) -->
                            <div class="col-md-12" ng-if="view.HWMval== 'detail'">
                                <div class="col-md-4"><label>Surveyed Elevation (ft):</label></div>
                                <div class="col-md-6"><span>{{aHWM.elev_ft || '---'}}</span></div>
                            </div>
                            <!-- Surveyed Elevation (ft): (edit) -->
                            <div class="form-group" ng-class="{'required': hwmCopy.survey_date}" ng-if="view.HWMval== 'edit'">
                                <label class="col-md-4 control-label" ng-class="{'req': hwmCopy.survey_date}" for="elev_ft">Surveyed Elevation (ft):</label>
                                <div class="col-md-6">
                                    <input class="form-control" ng-keypress="isNum($event)" name="elev_ft" ng-model="hwmCopy.elev_ft" type="text" ng-required='hwmCopy.survey_date' />
                                </div>
                                <button ng-show="hwmCopy.survey_date" type="button" class="col-md-2 borderLess" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Elevation required if survey date is populated.">
                                    <span class="glyphicon glyphicon-question-sign"></span>
                                </button>
                            </div>

                            <!-- Vertical Datum: (details) -->
                            <div class="col-md-12" ng-if="view.HWMval== 'detail'">
                                <div class="col-md-4"><label>Vertical Datum:</label></div>
                                <div class="col-md-6"><span>{{aHWM.vDatum || '---'}}</span></div>
                            </div>
                            <!-- Vertical Datum: (edit) -->
                            <div class="form-group" ng-if="view.HWMval== 'edit'">
                                <label class="col-md-4 control-label" for="vdatum_id">Vertical Datum:</label>
                                <div class="col-md-6">
                                    <select class="form-control" name="vdatum_id" ng-model="hwmCopy.vdatum_id" ng-options="vd.datum_id as vd.datum_name for vd in VDatumsList">
                                        <option value=""></option>
                                    </select>
                                </div>
                            </div>

                            <!-- Vertical Collection Method: (details) -->
                            <div class="col-md-12" ng-if="view.HWMval== 'detail'">
                                <div class="col-md-4"><label>Vertical Collection Method:</label></div>
                                <div class="col-md-6"><span>{{aHWM.vCollectMethod || '---'}}</span></div>
                            </div>
                            <!-- Vertical Collection Method: (edit) -->
                            <div class="form-group" ng-if="view.HWMval== 'edit'">
                                <label class="col-md-4 control-label" for="vdatum_id">Vertical Collection Method:</label>
                                <div class="col-md-6">
                                    <select class="form-control" name="vcollect_method_id" ng-model="hwmCopy.vcollect_method_id" ng-options="vcm.vcollect_method_id as vcm.vcollect_method for vcm in vCollMList">
                                        <option value=""></option>
                                    </select>
                                </div>
                            </div>

                            <!-- Ft or CM radios: -->
                            <div ng-show="view.HWMval == 'edit'">
                                <label class="col-md-4 control-label"></label>
                                <div class="col-md-6">
                                    <span class="radio-inline">
                                        <input type="radio" name="FTorCM" ng-model="FTorCM" value="ft" /> +/- ft
                                    </span>
                                    <span class="radio-inline">
                                        <input type="radio" name="FTorCM" ng-model="FTorCM" value="cm" /> +/- cm
                                    </span>
                                </div>
                            </div>

                            <!-- Uncertainty: (details) -->
                            <div class="col-md-12" ng-if="view.HWMval== 'detail'">
                                <div class="col-md-4"><label>Uncertainty:</label></div>
                                <div class="col-md-6"><span>{{aHWM.uncertainty || '---'}}<span ng-show="aHWM.uncertainty"> ft.</span></span></div>
                            </div>
                            <!-- Uncertainty: (edit) -->
                            <div class="form-group" ng-if="view.HWMval== 'edit'">
                                <label class="col-md-4 control-label" for="uncertainty">Uncertainty:</label>
                                <div class="col-md-6">
                                    <div class="col-md-12" style="margin-bottom:5px;padding-left:0">
                                        <div class="col-md-3" style="padding-left: 0;"><input class="form-control" ng-keypress="isNum($event)" ng-model="hwmCopy.uncertainty" type="text" /></div>
                                    </div>
                                </div>
                            </div>

                            <!-- Notes: (details) -->
                            <div class="col-md-12" ng-if="view.HWMval== 'detail'">
                                <div class="col-md-4"><label>Notes:</label></div>
                                <div class="col-md-6"><span>{{aHWM.hwm_notes || '---'}}</span></div>
                            </div>
                            <!-- Notes: (edit) -->
                            <div class="form-group" ng-if="view.HWMval== 'edit'">
                                <label class="col-md-4 control-label" for="hwm_notes">Notes:</label>
                                <div class="col-md-6">
                                    <textarea class="form-control" name="hwm_notes" type=" text" rows="3" ng-model="hwmCopy.hwm_notes" />
                                </div>
                            </div>

                            <!-- Tranquil/Stillwater HWM (details) -->
                            <div class="col-md-12" ng-if="view.HWMval== 'detail'">
                                <div class="col-md-4"><label>Tranquil/Stillwater HWM:</label></div>
                                <div class="col-md-6"><span>{{aHWM.Tranquil || '---'}}</span></div>
                            </div>
                            <!-- Tranquil/Stillwater HWM (edit) -->
                            <div class="form-group" ng-if="view.HWMval== 'edit'">
                                <label class="col-md-4 control-label">Tranquil/Stillwater HWM:</label>
                                <div class="col-md-6">
                                    <span class="radio-inline">
                                        <input type="radio" name="stillwater" ng-model="hwmCopy.stillwater" value="1" />Yes
                                    </span>
                                    <span class="radio-inline">
                                        <input type="radio" name="stillwater" ng-model="hwmCopy.stillwater" value="0" />No
                                    </span>
                                </div>
                                <button type="button" type="button" class="col-md-1 borderLess pull-left" tooltip-placement="bottom" tooltip-append-to-body="false" uib-tooltip="Tranquil-Water HWMs preferred over Rapid-Water HWMs. Refer to T&M 3-A24 for details.">
                                    <span class="glyphicon glyphicon-question-sign"></span>
                                </button>
                            </div>

                            <!-- Flagging Member: (detail) -->
                            <div class="col-md-12" ng-if="view.HWMval== 'detail'">
                                <div class="col-md-4"><label>Flagging Member:</label></div>
                                <div class="col-md-6"><span>{{FlagMember.fname}} {{FlagMember.lname}}</span></div>
                            </div>
                            <!-- Flagging Member: (edit) -->
                            <div class="form-group" ng-if="view.HWMval== 'edit'">
                                <label class="col-md-4 control-label" for="flag_member_id">Flagging Member:</label>
                                <div class="col-md-6">
                                    <span>{{FlagMember.fname}} {{FlagMember.lname}}</span>
                                </div>
                            </div>

                            <!-- Survey Member: (detail)-->
                            <div class="form-group" ng-show="SurveyMember.fname && view.hwmval == 'detail'">
                                <div class=" col-md-4"><label>Survey Member:</label></div>
                                <div class="col-md-6"><span>{{SurveyMember.fname}} {{SurveyMember.lname}}</span></div>
                            </div>
                            <!-- Survey Member: (edit) -->
                            <div class="form-group" ng-show="SurveyMember.fname && view.HWMval == 'edit'">
                                <label class="col-md-4 control-label" for="survey_member_id">Survey Member:</label>
                                <div class="col-md-6">
                                    <span>{{SurveyMember.fname}} {{SurveyMember.lname}}</span>
                                </div>
                            </div>

                            <!-- Approval info (detail) -->
                            <div class="form-group" ng-show="ApprovalInfo.Member !==undefined">
                                <label class="col-md-4 control-label" for="approval_id">Approval Info:</label>
                                <div class="col-md-6">
                                    <span>Approved By:</span><span ng-if="ApprovalInfo.Member"> {{ApprovalInfo.Member.fname || '---'}} {{ApprovalInfo.Member.lname || '---'}}</span><br />
                                    <span>On:</span><span ng-if="ApprovalInfo.approvalDate"> {{ApprovalInfo.approvalDate | date: 'MM/dd/yyyy hh:mm a' || '---'}}</span>
                                    <button ng-if="ApprovalInfo.approvalDate" type="button" class="borderLess" tooltip-placement="right" uib-tooltip="Time displayed as local, stored in UTC.">
                                        <span class="glyphicon glyphicon-question-sign"></span>
                                    </button>
                                </div>
                            </div>

                        </fieldset>
                    </form>
                </uib-accordion-group>
                <!-- HWM FILES SECTION -->
                <div ng-if="aHWM.hwm_id !== undefinfed">
                    <!--HWM File Part-->
                    <uib-accordion-group is-open="h.hFileOpen">
                        <uib-accordion-heading>
                            <i style="margin-right:10px" class="pull-left glyphicon" ng-class="{'glyphicon-chevron-down': h.hFileOpen, 'glyphicon-chevron-right': !h.hFileOpen}"></i>
                            <span ng-class="{'redText':showFileForm}">HWM File Information</span>
                        </uib-accordion-heading>
                        <div class="col-md-12">
                            <div class="col-md-4"><h3>HWM Files</h3></div>
                            <div class="col-md-6" ng-if="!showFileForm" style="margin-top:14px">
                                <button type="button" class="borderLess" ng-click="showFile(0)" tooltip-placement="right" uib-tooltip="Upload a new File to this HWM">
                                    <span class="glyphicon glyphicon-plus"></span>
                                </button>
                            </div>
                            <br clear="all" />
                            <!-- list of existing files for this hwm -->
                            <div class="col-md-6" ng-if="HWMFiles.length > 0">
                                <span ng-repeat="f in HWMFiles">
                                    <ul style="padding-left: 0">
                                        <li style="list-style:none;padding-bottom: 15px;">
                                            <span class="col-sm-9 borderLess" style="padding:0">
                                                <a class="btn borderLess" style="padding:0" title="{{f.file_date | date: 'MM/dd/yyyy'}} ({{f.name || f.file_id}})" ng-click="showFile(f)">{{f.file_date | date: 'MM/dd/yyyy'}} ({{f.name || f.file_id}})</a>
                                            </span>
                                        </li>
                                    </ul>
                                </span>
                            </div>
                            <!-- carousel of photo files -->
                            <div class="col-md-6" ng-if="hwmImageFiles.length > 0" style="height:120px;">
                                <uib-carousel interval="4000">
                                    <uib-slide ng-repeat="f in hwmImageFiles">
                                        <img ng-click="showImageModal(f.file_id)" ng-src="{{serverURL}}/Files/{{f.file_id}}/Item" />
                                        <div class="carousel-caption">
                                            <p>{{f.name || f.file_id}}</p>
                                        </div>
                                    </uib-slide>
                                </uib-carousel>
                            </div>
                            <br clear="all" />

                            <div ng-if="showFileForm">
                                <hr />
                                <form class="form-horizontal" name="HWMFILEForm">
                                    <fieldset>
                                        <!-- File Type* -->
                                        <div class="form-group required" ng-class="{'has-error':HWMFILEForm.filetype_id.$invalid && HWMFILEForm.filetype_id.$dirty}" style="margin:0;padding:0">
                                            <label class="col-md-3 control-label req" for="filetype_id">File Type:</label>
                                            <div class="col-md-6">
                                                <select class="form-control" name="filetype_id" ng-model="aFile.filetype_id" ng-change="updateAgencyForCaption()" ng-options="ft.filetype_id as ft.filetype for ft in fileTypes" required>
                                                    <option value=""></option>
                                                </select>
                                            </div>
                                        </div>

                                        <!--Upload Single Image with validations*-->
                                        <div ng-if="aFile.file_id === undefined && aFile.filetype_id !== 8" class="form-group required" style="margin:0;padding:0">
                                            <label class="col-md-3 control-label" for="FILE">Upload File:</label>
                                            <div class="col-md-9">
                                                <input type="file" max="500000" file-model="aFile.File" />
                                                <img ngf-thumbnail="aFile.File" style="height:60px" class="thumbnail">
                                            </div>
                                        </div>
                                        <br clear="all" />

                                        <!--File URL (LINK file)-->
                                        <div ng-if="aFile.filetype_id === 8" class="form-group" style="margin:0;padding:0">
                                            <label class="col-md-3 control-label" for="name">File URL:</label>
                                            <div class="col-md-6">
                                                <input class="form-control" name="name" ng-model="aFile.name" type="text" />
                                            </div>
                                            <button type="button" class="col-md-1 borderLess pull-left" tooltip-placement="bottom" tooltip-append-to-body="false" uib-tooltip="Please link to persistent URLs or digital object identifier (doi) urls.">
                                                <span class="glyphicon glyphicon-question-sign"></span>
                                            </button>
                                        </div>

                                        <!--Source Name (photo)-->
                                        <div class="form-group required" ng-if="aFile.filetype_id === 1" ng-class="{'has-error':HWMFILEForm.FULLname.$invalid && HWMFILEForm.FULLname.$dirty}" style="margin:0;padding:0">
                                            <label class="col-md-3 control-label req" for="source_id">Source Photographer:</label>
                                            <div class="col-md-6">
                                                <input class="form-control" name="FULLname" ng-model="aSource.FULLname" type="text" required />
                                            </div>
                                        </div>

                                        <!--Source Name (all other)-->
                                        <div class="form-group required" ng-if="aFile.filetype_id  > 2" ng-class="{'has-error':HWMFILEForm.FULLname.$invalid && HWMFILEForm.FULLname.$dirty}" style="margin:0;padding:0">
                                            <label class="col-md-3 control-label req" for="source_id">Source Name:</label>
                                            <div class="col-md-6">
                                                <input class="form-control" name="FULLname" ng-model="aSource.FULLname" type="text" required />
                                            </div>
                                        </div>

                                        <!--Source Agency* (photo, allOther)-->
                                        <div ng-if="aFile.filetype_id === 1 || aFile.filetype_id > 2" class="form-group required" ng-class="{'has-error':HWMFILEForm.agency_id.$invalid && HWMFILEForm.agency_id.$dirty}" style="margin:0;padding:0">
                                            <label class="col-md-3 control-label req" for="agency_id">Source Agency:</label>
                                            <div class="col-md-6">
                                                <select class="form-control" name="agency_id" ng-model="aSource.agency_id" ng-change="updateAgencyForCaption()"
                                                        ng-options="a.agency_id as a.agency_name for a in agencies" required>
                                                    <option value=""></option>
                                                </select>
                                            </div>
                                        </div>

                                        <!-- Photo Date* (photo) -->
                                        <div ng-if="aFile.filetype_id === 1" class="form-group required" ng-class="{'has-error':HWMFILEForm.photo_date.$invalid && HWMFILEForm.photo_date.$dirty}" style="margin:0;padding:0">
                                            <label class="col-md-3 control-label req" for="photo_date">Photo Date:</label>
                                            <div class="col-md-3 input-group" style="padding-right:14px;padding-left:14px">
                                                <input class="form-control dateInputStyle" type="date" name="sd" uib-datepicker-popup="MM/dd/yyyy" show-weeks="false" is-open="datepickrs.sd" ng-model="aFile.photo_date" required />
                                                <span class="input-group-btn">
                                                    <button type="button" class="btn btn-default" ng-click="open($event, 'sd')">
                                                        <i class="glyphicon glyphicon-calendar" />
                                                    </button>
                                                </span>
                                            </div>
                                        </div>

                                        <!-- Date Uploaded* (photo, data, allother) -->
                                        <div ng-if="aFile.filetype_id > 0" class="form-group required" ng-class="{'has-error':HWMFILEForm.file_date.$invalid && HWMFILEForm.file_date.$dirty}" style="margin:0;padding:0">
                                            <label class="col-md-3 control-label req" for="file_date">Date Uploaded:</label>
                                            <div class="col-md-3 input-group" style="padding-right:14px;padding-left:14px">
                                                <input class="form-control dateInputStyle" type="date" name="fd" uib-datepicker-popup="MM/dd/yyyy" show-weeks="false" is-open="datepickrs.fd" ng-model="aFile.file_date" required />
                                                <span class="input-group-btn">
                                                    <button type="button" class="btn btn-default" ng-click="open($event, 'fd')">
                                                        <i class="glyphicon glyphicon-calendar" />
                                                    </button>
                                                </span>
                                            </div>
                                        </div>

                                        <!--Description*(photo, data, allother)-->
                                        <div ng-if="aFile.filetype_id > 0" class="form-group required" ng-class="{'has-error':HWMFILEForm.description.$invalid && HWMFILEForm.description.$dirty}" style="margin:0;padding:0">
                                            <label class="col-md-3 control-label req" for="description">Description:</label>
                                            <div class="col-md-6">
                                                <textarea class="form-control" id="description" type="text" rows="3" placeholder="Description" ng-model="aFile.description" required />
                                            </div>
                                            <button type="button" ng-show="aFile.filetype_id == 1" type="button" class="col-md-1 borderLess pull-left" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Populates in Photo caption below.">
                                                <span class="glyphicon glyphicon-question-sign"></span>
                                            </button>
                                        </div>

                                        <!-- This is where Other ends, rest is for Photo -->
                                        <!--Photo Direction (photo)-->
                                        <div ng-if="aFile.filetype_id === 1" class="form-group" style="margin:0;padding:0;padding-top:5px;">
                                            <label class="col-md-3 control-label" for="photo_direction">Photo Direction:</label>
                                            <div class="col-md-6">
                                                <input class="form-control" id="photo_direction" name="photo_direction" ng-model="aFile.photo_direction" type="text" />
                                            </div>
                                        </div>

                                        <!-- Photo Latitude (photo)-->
                                        <div ng-if="aFile.filetype_id === 1" class="form-group" style="margin:0;padding:0">
                                            <label class="col-md-3 control-label" for="latitude_dd">Photo Latitude <br /> (if different):</label>
                                            <div class="col-md-6">
                                                <input class="form-control" ng-keypress="isNum($event)" name="latitude_dd" id="latitude_dd" ng-model="aFile.latitude_dd"
                                                       type="text" />
                                            </div>
                                        </div>

                                        <!--Photo Longitude (photo)-->
                                        <div ng-if="aFile.filetype_id === 1" class="form-group" style="margin:0;padding:0">
                                            <label class="col-md-3 control-label" for="longitude_dd">Photo Longitude <br /> (if different):</label>
                                            <div class="col-md-6">
                                                <input class="form-control" ng-keypress="isNum($event)" id="longitude_dd" name="longitude_dd" ng-model="aFile.longitude_dd"
                                                       type="text" />
                                            </div>
                                        </div>

                                        <div ng-if="aFile.filetype_id === 1" class="form-group" style="margin:0;padding:0">
                                            <label class="col-md-3 control-label" for="Caption">Preview Caption:</button></label>
                                            <div class="col-md-6">
                                                <span>
                                                    Photo of {{aFile.description || ' (Description HERE) '}} at {{thisHWMsite.site_description}}, {{thisHWMsite.county}}, {{thisHWMsite.state}}, {{aFile.photo_date | date: 'MM/dd/yyyy' || ' Date taken HERE '}}. Photograph by {{aSource.FULLname || ' Source Name HERE ' }}, {{agencyNameForCap || ' Agency HERE '}}.
                                                </span>
                                            </div>
                                        </div>

                                        <div ng-if="aFile.file_id !== undefined && aFile.filetype_id !== 8" class="form-group" style="margin:0;padding:0">
                                            <label class="col-md-3 control-label">Associated File:</label>
                                            <div class="col-md-6">
                                                <a target="_blank" title="Download File" ng-href="{{serverURL}}/Files/{{aFile.file_id}}/Item">
                                                    <span class="glyphicon glyphicon-download"></span>
                                                </a>
                                                <img ng-if="aFile.filetype_id === 1" style="height:80px;" ng-src="{{serverURL}}/Files/{{aFile.file_id}}/Item" />
                                            </div>
                                        </div>
                                        <div ng-show="!HWMfileIsUploading">
                                            <button class="btn btn-primary" ng-if="aFile.file_id != undefined" ng-click="saveFile(HWMFILEForm.$valid)">Save File</button>
                                            <button type="button" class="btn btn-danger" ng-if="aFile.file_id != undefined" ng-click="deleteFile()">Delete File</button>
                                            <button class="btn btn-primary" ng-if="aFile.file_id == undefined" ng-click="createFile(HWMFILEForm.$valid)">Create File</button>
                                            <button type="button" class="btn btn-warning" type="button" ng-click="cancelFile()">Close/Cancel File</button>
                                        </div>
                                        <div ng-show="HWMfileIsUploading"><img src="images/fileUpload.gif" /></div>
                                    </fieldset>
                                </form>
                            </div>
                        </div>
                    </uib-accordion-group>
                </div>
            </uib-accordion>
        </div> <!-- end hwm edit -->
    </div> <!-- end modal-body -->
    <br clear="all" />

    <div class="modal-footer">
        <div class="form-group">
            <div class="col-md-12">
                <button type="button" ng-show="aHWM.hwm_id !== undefined" ng-disabled="showFileForm" class="btn btn-danger" ng-click="deleteHWM(HWMEditForm.$valid)"><span>Delete</span></button>
                <button type="button" class="btn btn-warning" ng-disabled="showFileForm" ng-click="cancel()"><span>Cancel/Close</span></button>
            </div>
        </div>
    </div> <!-- end modal-footer -->
</script>

<!-- MODAL for Deploying Sensor-->
<script type="text/ng-template" id="Sensormodal.html">
    <div class="modal-header">
        <h3 class="modal-title">Deploy Sensor<button class="close" type="button" ng-click="cancel()" aria-hidden="true" style="color:gray;">&times;</button></h3>
    </div>
    <div class="modal-body">
        <form class="form-horizontal" name="SensorForm">
            <fieldset>
                <!-- Event: -->
                <div class="form-group">
                    <label class="col-md-3 control-label" for="event_id">Event:</label>
                    <div class="col-md-6">
                        <div class="col-md-8">{{EventName}}</div>
                        <div class="col-md-3" ng-show="userRole == 'Admin' && whichButton == 'edit'">
                            <button type="button" ng-click="showChangeEventDD()" class="btn btn-primary">Change Event</button>
                        </div>
                    </div>
                </div>

                <!--Event dropdown for admin -->
                <div ng-show="showEventDD">
                    <div class="form-group">
                        <label class="col-md-3 control-label" for="event_id">Events:</label>
                        <div class="col-md-6">
                            <select class="form-control" id="event_id" name="event_id" ng-model="adminChanged.event_id" ng-change="ChangeEvent()"
                                    ng-options="e.event_id as (e.event_name + ' --- ' + (e.event_start_date | date: 'MM/dd/yyyy') + ' to ' + ((e.event_end_date || '-Not Set-') | date: 'MM/dd/yyyy'))  for e in eventList | orderBy: '-event_start_date'"
                                <option value=""></option>
                            </select>
                        </div>
                    </div>
                </div>

                <!-- Sensor Type:* -->
                <div class="form-group required" ng-class="{'has-error':SensorForm.sensor_type_id.$invalid && SensorForm.sensor_type_id.$dirty}">
                    <label class="col-md-3 control-label req" for="sensor_type_id">Sensor Type:</label>
                    <div class="col-md-6">
                        <select class="form-control" id="sensor_type_id" name="sensor_type_id" ng-model="aSensor.sensor_type_id"
                                ng-options="s.sensor_type_id as s.sensor for s in sensorTypeList" ng-change="getDepTypes()" required>
                            <option value=""></option>
                        </select>
                    </div>
                </div>

                <!-- Sensor Brand:* -->
                <div class="form-group required" ng-class="{'has-error':SensorForm.sensor_brand_id.$invalid && SensorForm.sensor_brand_id.$dirty}">
                    <label class="col-md-3 control-label req" for="sensor_brand_id">Sensor Brand:</label>
                    <div class="col-md-6">
                        <select class="form-control" id="sensor_brand_id" name="sensor_brand_id" ng-model="aSensor.sensor_brand_id"
                                ng-options="sb.sensor_brand_id as sb.brand_name for sb in sensorBrandList" required>
                            <option value=""></option>
                        </select>
                    </div>
                </div>

                <!-- Serial Number:* -->
                <div class="form-group required" ng-class="{'has-error':SensorForm.serial_number.$invalid && SensorForm.serial_number.$dirty}">
                    <label class="col-md-3 control-label req" for="serial_number">Serial Number:</label>
                    <div class="col-md-6">
                        <input class="form-control" name="serial_number" ng-model="aSensor.serial_number" type="text" required />
                    </div>
                    <button type="button" class="col-md-1 borderLess pull-left" tooltip-placement="right" tooltip-append-to-body="false" uib-tooltip="Will be used in netCDF metadata.">
                        <span class="glyphicon glyphicon-question-sign"></span>
                    </button>
                </div>

                <!-- Housing Serial Number: -->
                <div class="form-group">
                    <label class="col-md-3 control-label" for="housing_serial_number">Housing Serial Number:</label>
                    <div class="col-md-6">
                        <input class="form-control" name="housing_serial_number" ng-model="aSensor.housing_serial_number" type="text" />
                    </div>
                    <button type="button" class="col-md-1 borderLess pull-left" tooltip-placement="right" tooltip-append-to-body="false" uib-tooltip="Required for DOI WATCH OFFICE 800 number.">
                        <span class="glyphicon glyphicon-question-sign"></span>
                    </button>
                </div>

                <!-- Housing Types: -->
                <div class="form-group">
                    <label class="col-md-3 control-label" for="housing_type_id">Housing Types:</label>
                    <div class="col-md-6">
                        <select class="form-control" id="housing_type_id" name="housing_type_id" ng-model="aSensor.housing_type_id"
                                ng-options="ht.housing_type_id as ht.type_name for ht in houseTypeList">
                            <option value=""></option>
                        </select>
                    </div>
                </div>

                <!-- -------------------------- START TAPEDOWN SECTION --------------------------------  -->
                <uib-accordion close-others="false">
                    <uib-accordion-group is-open="tapedownOpen">
                        <uib-accordion-heading>
                            <i style="margin-right:10px" class="pull-left glyphicon" ng-class="{'glyphicon-chevron-down': tapedownOpen, 'glyphicon-chevron-right': !tapedownOpen}"></i>
                            <span>Tape Down Information</span>
                            <button type="button" class="col-md-1 borderLess pull-right" tooltip-placement="left" tooltip-append-to-body="false" uib-tooltip="These elevations and tape down data are used for both field activities and final products. Please pay attention to how your data is entered.">
                                <span class="glyphicon glyphicon-question-sign"></span>
                            </button>
                        </uib-accordion-heading>
                        <!--Add Tapedown button-->
                        <div ng-if="OPsPresent" class="form-group">
                            <div class="form-group">
                                <label class="col-md-3 control-label">Datum Location(s):</label>
                                <div class="col-md-6">
                                    <div isteven-multi-select
                                         input-model="OPsForTapeDown"
                                         output-model="OPMeasure"
                                         button-label="name"
                                         item-label="name"
                                         on-item-click="OPchosen(data)"
                                         tick-property="selected"
                                         helper-elements="filter">
                                    </div>
                                </div>
                            </div>
                        </div><!-- end if OPsArePresent-->
                        <div ng-if="!OPsPresent" class="form-group">
                            <label class="col-md-3 control-label" for="TAPEDOWNBTN">Tape Down:</label>
                            <div class="col-md-6">
                                <span>No Datum Locations have been added to this site yet to use for a tape down</span>
                            </div>
                        </div>

                        <!--start add tapedown area -->
                        <br clear="all" />
                        <div ng-show="tapeDownTable.length > 0">
                            <div class="pull-right col-md-6"><em>Note: these are not used for any calculations but are to facilitate field activities</em></div>
                            <table class="table table-condensed">
                                <thead>
                                    <tr>
                                        <th>Datum Location</th>
                                        <th>Elevation</th>
                                        <th class="col-md-2">
                                            Offset<br />Correction
                                            <button type="button" class="borderLess" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="From the datum location to the sensor orifice.">
                                                <span class="glyphicon glyphicon-question-sign"></span>
                                            </button>
                                        </th>
                                        <th class="col-md-2">Water Surface</th>
                                        <th class="col-md-2">Ground Surface</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr ng-repeat="t in tapeDownTable">
                                        <td>{{t.op_name}}<input type="hidden" ng-model="t.objective_type_id" /><input type="hidden" ng-model="t.op_measurements_id" /></td>
                                        <td>
                                            {{t.elevation}} {{t.Vdatum}}
                                        </td>
                                        <td><input class="form-control" ng-keypress="isNum($event)" ng-model="t.offset_correction" /></td>
                                        <td><input class="form-control" ng-keypress="isNum($event)" ng-model="t.water_surface" /></td>
                                        <td><input class="form-control" ng-keypress="isnum($event)" ng-model="t.ground_surface" /></td>
                                    </tr>
                                </tbody>
                            </table>
                            <!-- Sensor status fields for tapedown -->
                            <div class="col-md-6">
                                <div class="form-group" style="margin-bottom:0">
                                    <label class="col-md-6 control-label" for="sensor_elevation">Sensor Elevation:</label>
                                    <div class="col-md-5">
                                        <input class="form-control" ng-keypress="isNum($event)" name="sensor_elevation" ng-model="aSensStatus.sensor_elevation" type="text" />
                                    </div>
                                    <button type="button" class="col-md-1 borderLess pull-left" tooltip-placement="right-top" tooltip-append-to-body="false" uib-tooltip="Using the offset correction, elevation of the sensor orifice.">
                                        <span class="glyphicon glyphicon-question-sign"></span>
                                    </button>
                                </div>

                                <div class="form-group" style="margin-bottom:0">
                                    <label class="col-md-6 control-label" for="ws_elevation">Water Surface Elevation:</label>
                                    <div class="col-md-5">
                                        <input class="form-control" ng-keypress="isNum($event)" name="ws_elevation" ng-model="aSensStatus.ws_elevation" type="text" />
                                    </div>
                                    <button type="button" class="col-md-1 borderLess pull-left" tooltip-placement="right-top" tooltip-append-to-body="false" uib-tooltip="Using the water surface tape down, elevation of the water surface.">
                                        <span class="glyphicon glyphicon-question-sign"></span>
                                    </button>
                                </div>

                                <div class="form-group" style="margin-bottom:0">
                                    <label class="col-md-6 control-label" for="gs_elevation">Ground Elevation:</label>
                                    <div class="col-md-5">
                                        <input class="form-control" ng-keypress="isNum($event)" name="gs_elevation" ng-model="aSensStatus.gs_elevation" type="text" />
                                    </div>
                                    <button type="button" class="col-md-1 borderLess pull-left" tooltip-placement="right-top" tooltip-append-to-body="false" uib-tooltip="Using the ground surface tape down, elevation of the ground surface.">
                                        <span class="glyphicon glyphicon-question-sign"></span>
                                    </button>
                                </div>

                                <div class="form-group">
                                    <label class="col-md-6 control-label req" for="vdatum_id">In feet above:</label>
                                    <div class="col-md-5">
                                        <select class="form-control" id="vdatum_id" name="vdatum_id" ng-model="aSensStatus.vdatum_id"
                                                ng-options="vd.datum_id as vd.datum_abbreviation for vd in vertDatumList">
                                            <option value=""></option>
                                        </select>
                                    </div>
                                </div>
                                <div class="pull-left col-md-12"><em>Note: these elevations are used in the sensor processing and the final products</em></div>
                            </div>

                            <!-- area for D3 vertical ruler
                            <div class="col-md-6">
                                <bars-chart elevation-data="myData"></bars-chart>
                            </div> -->
                        </div>
                        <br clear="all" />
                    </uib-accordion-group>
                </uib-accordion>

                <!-- -------------------------- END TAPEDOWN SECTION --------------------------------  -->
                <!-- Vented (only if Sensor Type is Pressure Transducer)-->
                <div ng-show="aSensor.sensor_type_id == 1">
                    <div class="form-group">
                        <label class="col-md-3 control-label">Vented:</label>
                        <div class="col-md-6">
                            <span class="radio-inline">
                                <input type="radio" name="vented" ng-model="aSensor.vented" value="Yes" />Yes
                            </span>
                            <span class="radio-inline">
                                <input type="radio" name="vented" ng-model="aSensor.vented" value="No" />No
                            </span>
                        </div>
                    </div>
                </div>

                <!-- Deployment Type: -->
                <div class="form-group">
                    <label class="col-md-3 control-label req" for="deployment_type_id">Deployment Type:</label>
                    <div class="col-md-6">
                        <select class="form-control" id="deployment_type_id" name="deployment_type_id" ng-model="aSensor.deployment_type_id"
                                ng-options="dt.deployment_type_id as dt.method for dt in filteredDeploymentTypes">
                            <option value=""></option>
                        </select>
                    </div>
                </div>

                <!-- Location Description: -->
                <div class="form-group" ng-class="{'has-error':SensorForm.location_description.$invalid && SensorForm.location_description.$dirty}">
                    <label class="col-md-3 control-label" for="location_description">Location Description:</label>
                    <div class="col-md-6">
                        <textarea class="form-control" name="location_description" type="text" rows="3" ng-model="aSensor.location_description" />
                    </div>
                    <button type="button" class="col-md-1 borderLess pull-left" tooltip-placement="right" tooltip-append-to-body="false" uib-tooltip="Please be specific so someone else can find this sensor later. This field is public.">
                        <span class="glyphicon glyphicon-question-sign"></span>
                    </button>
                </div>

                <!-- Interval: -->
                <div>
                    <label class="col-md-3 control-label"></label>
                    <div class="col-md-6">
                        <span class="radio-inline">
                            <input type="radio" name="intervalType" ng-model="IntervalType.type" value="Minutes" />Minutes
                        </span>
                        <span class="radio-inline">
                            <input type="radio" name="intervalType" ng-model="IntervalType.type" value="Seconds" />Seconds
                        </span>
                    </div>
                </div><br clear="all" />
                <div class="form-group">
                    <label class="col-md-3 control-label" for="interval">Interval:</label>
                    <div class="col-md-6">
                        <input class="form-control" ng-keypress="isNum($event)" name="interval" ng-model="aSensor.interval" type="text" />
                    </div>
                </div>


                <!-- Deploy Time: * -->
                <div class="form-group required" ng-class="{'has-error':SensorForm.time_stamp.$invalid && SensorForm.time_stamp.$dirty}">
                    <label class="col-md-3 control-label req" style="margin-top:3%" for="time_stamp">Deploy Time:</label>
                    <div class="col-md-6">
                        <datetimepicker hour-step="1" minute-step="1" ng-model="aSensStatus.time_stamp" show-meridian="true"
                                        date-format="MM/dd/yyyy" readonly-date="false" readonly-time="false" date-options="dateOptions"
                                        hidden-time="false" hidden-date="false" show-spinners="true" required>
                        </datetimepicker>
                    </div>
                </div>

                <!-- Time Zone:* -->
                <div class="form-group required">
                    <label class="col-md-3 control-label" for="time_zone">Time Zone:</label>
                    <div class="col-md-6">
                        <select class="form-control" name="time_zone" ng-model="aSensStatus.time_zone"
                                ng-options="vcm for vcm in timeZoneList" required>
                            <option value=""></option>
                        </select>
                    </div>
                    <button type="button" class="borderLess" tooltip-placement="right" tooltip-append-to-body="false" uib-tooltip="Date/Time will be stored in UTC.">
                        <span class="glyphicon glyphicon-question-sign"></span>
                    </button>
                </div>

                <!-- Note: -->
                <div class="form-group">
                    <label class="col-md-3 control-label" for="notes">Note:</label>
                    <div class="col-md-6">
                        <textarea class="form-control" name="notes" type=" text" rows="3" ng-model="aSensStatus.notes" elastic />
                    </div>
                </div>

                <!-- Collection Member: -->
                <div class="form-group">
                    <label class="col-md-3 control-label">Deploy Member:</label>
                    <div class="col-md-6">
                        <input type="hidden" name="member_id" ng-model="aSensStatus.member_id" />
                        <span>{{Deployer.fname}} {{Deployer.lname}}</span>
                    </div>
                </div>

                <div class="form-group">
                    <div class="col-md-12">
                        <span><button ng-if="whichButton == 'deploy' || whichButton == 'deployP'" class="btn btn-primary" ng-click="deploy(SensorForm.$valid)"><span>Deploy</span></button></span>
                        <span><button type="button" class="btn btn-warning" ng-disabled="showFileForm" ng-click="cancel()"><span>Cancel/Close</span></button></span>
                    </div>
                </div>
            </fieldset>
        </form>
    </div> <!-- end modal-body -->
    <br clear="all" />

    <div class="modal-footer">

    </div><!-- end modal-footer -->

</script>

<!-- MODAL for Deployed Sensor editing (deployed and files)-->
<script type="text/ng-template" id="DepSensormodal.html">
    <div class="modal-header">
        <h3 class="modal-title">Deployed Sensor<button class="close" type="button" ng-click="cancel()" aria-hidden="true" style="color:gray;">&times;</button></h3>
    </div>
    <div class="modal-body">
        <!--Deployed Sensor Part-->
        <uib-accordion close-others="false">
            <!--Deployed Sensor Part-->
            <uib-accordion-group is-open="s.depOpen">
                <uib-accordion-heading>
                    <i style="margin-right:10px" class="pull-left glyphicon" ng-class="{'glyphicon-chevron-down': s.depOpen, 'glyphicon-chevron-right': !s.depOpen}"></i>
                    <span ng-class="{'redText':view.DEPval == 'edit'}">Deployed Sensor Information</span>
                </uib-accordion-heading>
                <form name="editDeployedForm">
                    <fieldset>
                        <!--edit button-->
                        <div class="form-group">
                            <div class="col-md-12">
                                <span>
                                    <button ng-show="view.DEPval == 'detail'" type="button" class="btn btn-primary" ng-click="wannaEditDep()">
                                        <span>Edit Sensor</span>
                                    </button>
                                </span>
                                <span>
                                    <button ng-show="view.DEPval == 'edit'" class="btn btn-primary" ng-click="save(editDeployedForm.$valid)">
                                        <span>Save</span>
                                    </button>
                                </span>
                                <span>
                                    <button ng-show="view.DEPval == 'edit'" type="button" class="btn btn-primary" ng-click="cancelDepEdit()">
                                        <span>Cancel</span>
                                    </button>
                                </span>
                            </div>
                        </div>
                        <br />
                        <!-- Event: (detail) -->
                        <div class="col-md-12" ng-if="view.DEPval == 'detail'">
                            <div class="col-md-3 col-md-offset-1"><label>Event:</label></div>
                            <div class="col-md-6">{{EventName}}</div>
                        </div>
                        <!-- Event: -->
                        <div class="form-group" ng-if="view.DEPval == 'edit'">
                            <label class="col-md-3 col-md-offset-1 control-label">Event:</label>
                            <div class="col-md-6">{{EventName}}</div>
                            <div class="col-md-2" ng-show="userRole == 'Admin' && view.DEPval == 'edit'">
                                <button type="button" ng-click="showChangeEventDD()" class="btn btn-primary">Change Event</button>
                            </div>
                        </div>

                        <!--Event dropdown for admin -->
                        <div ng-show="showEventDD && view.DEPval == 'edit'">
                            <div class="form-group">
                                <label class="col-md-3 col-md-offset-1 control-label" for="event_id">Events:</label>
                                <div class="col-md-6">
                                    <select class="form-control" id="event_id" name="event_id" ng-model="adminChanged.event_id" ng-change="ChangeEvent()"
                                            ng-options="e.event_id as (e.event_name + ' --- ' + (e.event_start_date | date: 'MM/dd/yyyy') + ' to ' + ((e.event_end_date || '-Not Set-') | date: 'MM/dd/yyyy'))  for e in eventList | orderBy: '-event_start_date'"
                                <option value=""></option>
                            </select>
                                </div>
                            </div>
                        </div>

                        <!-- Sensor Type*:(detail) -->
                        <div class="col-md-12" ng-if="view.DEPval == 'detail'">
                            <div class="col-md-3 col-md-offset-1"><label>Sensor Type:</label></div>
                            <div class="col-md-6"><span>{{aSensor.sensorType || '---'}}</span></div>
                        </div>
                        <!-- Sensor Type*:(edit) -->
                        <div class="form-group required" ng-class="{'has-error':editDeployedForm.sensor_type_id.$invalid && editDeployedForm.sensor_type_id.$dirty}" ng-if="view.DEPval == 'edit'">
                            <label class="col-md-3 col-md-offset-1 req control-label">Sensor Type:</label>
                            <div class="col-md-6">
                                <select class="form-control" name="sensor_type_id" ng-model="depStuffCopy[0].sensor_type_id"
                                        ng-options="s.sensor_type_id as s.sensor for s in sensorTypeList" ng-change="getDepTypes()" required>
                                    <option value=""></option>
                                </select>
                            </div>
                        </div>

                        <!-- Sensor Brand*:(detail) -->
                        <div class="col-md-12" ng-if="view.DEPval == 'detail'">
                            <div class="col-md-3 col-md-offset-1"><label>Sensor Brand:</label></div>
                            <div class="col-md-6"><span>{{aSensor.sensorBrand || '---'}}</span></div>
                        </div>
                        <!-- Sensor Brand*:(edit) -->
                        <div class="form-group required" ng-class="{'has-error':editDeployedForm.sensor_brand_id.$invalid && editDeployedForm.sensor_brand_id.$dirty}" ng-if="view.DEPval == 'edit'">
                            <label class="col-md-3 col-md-offset-1 req control-label">Sensor Brand:</label>
                            <div class="col-md-6">
                                <select class="form-control" name="sensor_brand_id" ng-model="depStuffCopy[0].sensor_brand_id"
                                        ng-options="sb.sensor_brand_id as sb.brand_name for sb in sensorBrandList" required>
                                    <option value=""></option>
                                </select>
                            </div>
                        </div>

                        <!-- Serial Number*: (detail)-->
                        <div class="col-md-12" ng-if="view.DEPval == 'detail'">
                            <div class="col-md-3 col-md-offset-1"><label>Serial Number:</label></div>
                            <div class="col-md-6"><span>{{aSensor.serial_number || '---'}}</span></div>
                        </div>
                        <!-- Serial Number*:(edit) -->
                        <div class="form-group required" ng-class="{'has-error':editDeployedForm.serial_number.$invalid && editDeployedForm.serial_number.$dirty}" ng-if="view.DEPval == 'edit'">
                            <label class="col-md-3 col-md-offset-1 req control-label">Serial Number:</label>
                            <div class="col-md-6">
                                <input class="form-control" name="serial_number" ng-model="depStuffCopy[0].serial_number" type="text" required />
                            </div>
                            <button type="button" class="col-md-1 borderLess pull-left" tooltip-placement="right" tooltip-append-to-body="false" uib-tooltip="Will be used in netCDF metadata.">
                                <span class="glyphicon glyphicon-question-sign"></span>
                            </button>
                        </div>

                        <!-- Housing Serial Number:(detail) -->
                        <div class="col-md-12" ng-if="view.DEPval == 'detail'">
                            <div class="col-md-3 col-md-offset-1"><label>Housing Serial Number:</label></div>
                            <div class="col-md-6"><span>{{aSensor.housing_serial_number || '---'}}</span></div>
                        </div>
                        <!-- Housing Serial Number:(edit) -->
                        <div class="form-group" ng-if="view.DEPval == 'edit'">
                            <label class="col-md-3 col-md-offset-1 control-label">Housing Serial Number:</label>
                            <div class="col-md-6">
                                <input class="form-control" name="housing_serial_number" ng-model="depStuffCopy[0].housing_serial_number" type="text" />
                            </div>
                            <button type="button" class="col-md-1 borderLess pull-left" tooltip-placement="right" tooltip-append-to-body="false" uib-tooltip="Required for DOI WATCH OFFICE 800 number.">
                                <span class="glyphicon glyphicon-question-sign"></span>
                            </button>
                        </div>

                        <!-- Housing Types: (detail) -->
                        <div class="col-md-12" ng-if="view.DEPval == 'detail'">
                            <div class="col-md-3 col-md-offset-1"><label>Housing Types:</label></div>
                            <div class="col-md-6"><span>{{aSensor.housingType || '---'}}</span></div>
                        </div>
                        <!-- Housing Types: (edit) -->
                        <div class="form-group" ng-if="view.DEPval == 'edit'">
                            <label class="col-md-3 col-md-offset-1 control-label">Housing Types:</label>
                            <div class="col-md-6">
                                <select class="form-control" id="housing_type_id" name="housing_type_id" ng-model="depStuffCopy[0].housing_type_id"
                                        ng-options="ht.housing_type_id as ht.type_name for ht in houseTypeList">
                                    <option value=""></option>
                                </select>
                            </div>
                        </div>
                        <br clear="all" /><hr />

                        <div class="col-md-12" ng-if="view.DEPval == 'detail'">
                            <div class="col-md-3 col-md-offset-1"><label>Tapedowns:</label></div>
                            <div class="col-md-6">
                                <div ng-show="tapeDownTable.length > 0">
                                    <div class="col-md-8">
                                        <table class="table table-condensed">
                                            <thead>
                                                <tr>
                                                    <th style="text-align:center">Datum Location</th>
                                                    <th style="text-align:center">Elevation</th>
                                                    <th style="text-align:center">Offset Correction</th>
                                                    <th style="text-align:center">Water Surface</th>
                                                    <th style="text-align:center">Ground Surface</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr ng-repeat="dt in tapeDownTable">
                                                    <td>{{dt.op_name}}</td>
                                                    <td style="text-align:center">{{dt.elevation}} {{dt.Vdatum}}</td>
                                                    <td style="text-align:center">{{dt.offset_correction}}</td>
                                                    <td style="text-align:center">{{dt.water_surface}}</td>
                                                    <td style="text-align:center">{{dt.ground_surface}}</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                                <div ng-show="tapeDownTable.length == 0">None chosen</div>
                            </div>
                        </div><!--end details for Tapedowns-->
                        <div class="form-group" ng-if="view.DEPval == 'edit'">
                            <label class="col-md-3 col-md-offset-1 control-label">Tapedowns:</label>
                            <div class="col-md-6"></div>
                            <button type="button" class="col-md-1 borderLess pull-left" tooltip-placement="left" tooltip-append-to-body="false" uib-tooltip="These elevations and tape down data are used for both field activities and final products. Please pay attention to how your data is entered.">
                                <span class="glyphicon glyphicon-question-sign"></span>
                            </button>
                            <div class="col-md-12">
                                <!--start add tapedown area -->
                                <div ng-if="OPsPresent" class="col-md-8 pull-right">
                                    <label class="col-md-4 control-label">Datum Locations:</label>
                                    <div class="col-md-6">
                                        <div isteven-multi-select
                                             input-model="OPsForTapeDown"
                                             output-model="OPMeasure"
                                             button-label="name"
                                             item-label="name"
                                             on-item-click="OPchosen(data)"
                                             tick-property="selected"
                                             helper-elements="">
                                        </div>
                                    </div>
                                </div>
                                <div ng-if="!OPsPresent"><span>No Datum Locations added to this site for tapedown</span></div>
                                <br clear="all" />
                                <div ng-if="OPsPresent" class="pull-right"><em>Note: these are not used for any calculations but are to facilitate field activities</em></div>
                                <div ng-show="depTapeCopy.length > 0">
                                    <table class="table">
                                        <thead>
                                            <tr>
                                                <th>Datum Location</th>
                                                <th>Elevation</th>
                                                <th class="col-sm-2">
                                                    Offset
                                                    <button type="button" class="borderLess" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="From the datum location to the sensor orifice.">
                                                        <span class="glyphicon glyphicon-question-sign"></span>
                                                    </button>
                                                    <br />Correction
                                                </th>
                                                <th class="col-sm-2">Water Surface</th>
                                                <th class="col-sm-2">Ground Surface</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr ng-repeat="t in depTapeCopy">
                                                <td>{{t.op_name}}<input type="hidden" ng-model="t.objective_type_id" /><input type="hidden" ng-model="t.op_measurements_id" /></td>
                                                <td>
                                                    {{t.elevation}} {{t.Vdatum}}
                                                </td>
                                                <td><input class="form-control" ng-keypress="isNum($event)" ng-model="t.offset_correction" /></td>
                                                <td><input class="form-control" ng-keypress="isNum($event)" ng-model="t.water_surface" /></td>
                                                <td><input class="form-control" ng-keypress="isNum($event)" ng-model="t.ground_surface" /></td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                            
                        </div><!--end formgroup for Tapedowns-->

                        <br clear="all" />

                        <!--sensor stat tapedown parts-->
                        <!--sensor elevation (details)-->
                        <div ng-if="OPsPresent && view.DEPval == 'detail'" class="col-md-12">
                            <div class="col-md-4 col-md-offset-1"><label>Sensor Elevation:</label></div>
                            <div class="col-md-4"><span>{{aSensStatus.sensor_elevation || '--'}}</span></div>
                        </div>
                        <!--sensor elevation (edit)-->
                        <div ng-if="OPsPresent && view.DEPval == 'edit'" class="form-group">
                            <label class="col-md-4 col-md-offset-1 control-label">Sensor Elevation:</label>
                            <div class="col-md-4">
                                <input class="form-control" ng-keypress="isNum($event)" name="sensor_elevation" ng-model="depStuffCopy[1].sensor_elevation" type="text" />
                            </div>
                            <button type="button" class="col-md-1 borderLess pull-left" tooltip-placement="right" tooltip-append-to-body="false" uib-tooltip="Using the offset correction, elevation of the sensor orifice.">
                                <span class="glyphicon glyphicon-question-sign"></span>
                            </button>
                        </div>

                        <!--Water Surface Elevation (details)-->
                        <div ng-if="OPsPresent && view.DEPval == 'detail'" class="col-md-12">
                            <div class="col-md-4 col-md-offset-1"><label>Water Surface Elevation:</label></div>
                            <div class="col-md-4"><span>{{aSensStatus.ws_elevation || '--'}}</span></div>
                        </div>
                        <!--Water Surface Elevation (edit)-->
                        <div ng-if="OPsPresent && view.DEPval == 'edit'" class="form-group">
                            <label class="col-md-4 col-md-offset-1 control-label">Water Surface Elevation:</label>
                            <div class="col-md-4">
                                <input class="form-control" ng-keypress="isNum($event)" name="ws_elevation" ng-model="depStuffCopy[1].ws_elevation" type="text" />
                            </div>
                            <button type="button" class="col-md-1 borderLess pull-left" tooltip-placement="right" tooltip-append-to-body="false" uib-tooltip="Using the water surface tape down, elevation of the water surface.">
                                <span class="glyphicon glyphicon-question-sign"></span>
                            </button>
                        </div>

                        <!--Ground Elevation (details)-->
                        <div ng-if="OPsPresent && view.DEPval == 'detail'" class="col-md-12">
                            <div class="col-md-4 col-md-offset-1"><label>Ground Elevation:</label></div>
                            <div class="col-md-4"><span>{{aSensStatus.gs_elevation || '--'}}</span></div>
                        </div>
                        <!--Ground Elevation (edit)-->
                        <div ng-if="OPsPresent && view.DEPval == 'edit'" class="form-group">
                            <label class="col-md-4 col-md-offset-1 control-label">Ground Elevation:</label>
                            <div class="col-md-4">
                                <input class="form-control" ng-keypress="isNum($event)" name="gs_elevation" ng-model="depStuffCopy[1].gs_elevation" type="text" />
                            </div>
                            <button type="button" class="col-md-1 borderLess pull-left" tooltip-placement="right-top" tooltip-append-to-body="false" uib-tooltip="Using the ground surface tape down, elevation of the ground surface.">
                                <span class="glyphicon glyphicon-question-sign"></span>
                            </button>
                        </div>

                        <!--In feet above(details)-->
                        <div ng-if="OPsPresent && view.DEPval == 'detail'" class="col-md-12">
                            <div class="col-md-4 col-md-offset-1"><label>In feet above:</label></div>
                            <div class="col-md-4"><span>{{aSensStatus.vdatum}}</span></div>
                        </div>
                        <!--In feet above(edit)-->
                        <div ng-if="OPsPresent && view.DEPval == 'edit'" class="form-group">
                            <label class="col-md-4 col-md-offset-1 control-label">In feet above:</label>
                            <div class="col-md-4">
                                <select class="form-control" id="vdatum_id" name="vdatum_id" ng-model="depStuffCopy[1].vdatum_id"
                                        ng-options="vd.datum_id as vd.datum_abbreviation for vd in vertDatumList">
                                    <option value=""></option>
                                </select>
                            </div>
                        </div>
                        <div ng-if="OPsPresent && view.DEPval == 'edit'" class="col-md-12"><em>Note: these elevations are used in the sensor processing and the final products</em></div>
                        <br clear="all" /><hr />

                        <!-- Vented (only if Sensor Type is Pressure Transducer) (detail)-->
                        <div ng-show="(aSensor.sensor_type_id == 1 || depStuffCopy[0].sensor_type_id == 1) && view.DEPval == 'detail'">
                            <div class="col-md-12">
                                <div class="col-md-3 col-md-offset-1"><label>Vented:</label></div>
                                <div class="col-md-6"><span>{{aSensor.vented || '---'}}</span></div>
                            </div>
                        </div>
                        <!-- Vented (only if Sensor Type is Pressure Transducer) (edit)-->
                        <div ng-show="(aSensor.sensor_type_id == 1 || depStuffCopy[0].sensor_type_id == 1) && view.DEPval == 'edit'">
                            <div class="form-group">
                                <label class="col-md-3 col-md-offset-1 control-label">Vented:</label>
                                <div class="col-md-6">
                                    <span class="radio-inline">
                                        <input type="radio" name="vented" ng-model="depStuffCopy[0].vented" value="Yes" />Yes
                                    </span>
                                    <span class="radio-inline">
                                        <input type="radio" name="vented" ng-model="depStuffCopy[0].vented" value="No" />No
                                    </span>
                                </div>
                            </div>
                        </div>

                        <!-- Deployment Type: (detail) -->
                        <div class="col-md-12" ng-if="view.DEPval == 'detail'">
                            <div class="col-md-3 col-md-offset-1"><label>Deployment Type:</label></div>
                            <div class="col-md-6"><span>{{aSensor.deploymentType || '---'}}</span></div>
                        </div>
                        <!-- Deployment Type: (edit) -->
                        <div class="form-group" ng-if="view.DEPval == 'edit'">
                            <label class="col-md-3 col-md-offset-1 control-label">Deployment Type:</label>
                            <div class="col-md-6">
                                <select class="form-control" id="deployment_type_id" name="deployment_type_id" ng-model="depStuffCopy[0].deployment_type_id"
                                        ng-options="dt.deployment_type_id as dt.method for dt in filteredDeploymentTypes">
                                    <option value=""></option>
                                </select>
                            </div>
                        </div>

                        <!-- Location Description: (detail) -->
                        <div class="col-md-12" ng-if="view.DEPval == 'detail'">
                            <div class="col-md-3 col-md-offset-1"><label>Location Description:</label></div>
                            <div class="col-md-6"><span>{{aSensor.location_description || '---'}}</span></div>
                        </div>
                        <!-- Location Description: (edit) -->
                        <div class="form-group" ng-if="view.DEPval == 'edit'" ng-class="{'has-error':editDeployedForm.location_description.$invalid && editDeployedForm.location_description.$dirty}">
                            <label class="col-md-3 col-md-offset-1 control-label">Location Description:</label>
                            <div class="col-md-6">
                                <textarea class="form-control" name="location_description" type="text" rows="3" ng-model="depStuffCopy[0].location_description" />
                            </div>
                            <button type="button" class="col-md-1 borderLess pull-left" tooltip-placement="right" tooltip-append-to-body="false" uib-tooltip="Please be specific so someone else can find this sensor later. This field is public.">
                                <span class="glyphicon glyphicon-question-sign"></span>
                            </button>
                        </div>

                        <!-- Interval: -->
                        <div class="form-group" ng-show="view.DEPval == 'edit'">
                            <label class="col-md-3 control-label"></label>
                            <div class="col-md-6 col-md-offset-1" style="padding-top:5px;">
                                <span class="radio-inline">
                                    <input type="radio" name="intervalType" ng-model="IntervalType.type" value="Minutes" />Minutes
                                </span>
                                <span class="radio-inline">
                                    <input type="radio" name="intervalType" ng-model="IntervalType.type" value="Seconds" />Seconds
                                </span>
                            </div>
                        </div>
                        <!--Interval (detail)-->
                        <div class="col-md-12" ng-if="view.DEPval == 'detail'">
                            <div class="col-md-3 col-md-offset-1"><label>Interval:</label></div>
                            <div class="col-md-6"><span>{{aSensor.interval || '---'}} <span ng-if='sensor.interval'>seconds</span></span></div>
                        </div>
                        <!--Interval (edit)-->
                        <div class="form-group" ng-if="view.DEPval == 'edit'">
                            <label class="col-md-3 col-md-offset-1 control-label">Interval:</label>
                            <div class="col-md-6">
                                <input class="form-control" ng-keypress="isNum($event)" name="interval" ng-model="depStuffCopy[0].interval" type="text" />
                            </div>
                        </div>

                        <!-- Deploy Date*: (detail) -->
                        <div class="col-md-12" ng-if="view.DEPval == 'detail'">
                            <div class="col-md-3 col-md-offset-1"><label>Deploy Date:</label></div>
                            <div class="col-md-6"><span>{{aSensStatus.time_stamp | date: 'MM/dd/yyyy hh:mm a'}}</span></div>
                        </div>
                        <!-- Deploy Date*: (edit) -->
                        <div class="form-group required" ng-class="{'has-error':editDeployedForm.time_stamp.$invalid && editDeployedForm.time_stamp.$dirty}" ng-if="view.DEPval == 'edit'">
                            <label class="col-md-3 col-md-offset-1 control-label topPad">Deploy Date:</label>
                            <div class="col-md-6">
                                <datetimepicker hour-step="1" minute-step="1" ng-model="depStuffCopy[1].time_stamp" show-meridian="true"
                                                date-format="MM/dd/yyyy" readonly-date="false" readonly-time="false" date-options="dateOptions"
                                                hidden-time="false" hidden-date="false" show-spinners="true" required>
                                </datetimepicker>
                            </div>
                        </div>

                        <!-- Deploy timezone*: (detail)-->
                        <div class="col-md-12" ng-if="view.DEPval == 'detail'">
                            <div class="col-md-3 col-md-offset-1"><label>Time Zone:</label></div>
                            <div class="col-md-6"><span>{{aSensStatus.time_zone}}</span></div>
                        </div>
                        <!-- Deploy timezone*: (edit)-->
                        <div class="form-group required" ng-if="view.DEPval == 'edit'">
                            <label class="col-md-3 col-md-offset-1 req control-label">Time Zone:</label>
                            <div class="col-md-6">
                                <select class="form-control" name="time_zone" ng-model="depStuffCopy[1].time_zone" ng-options="vcm for vcm in timeZoneList" required>
                                    <option value=""></option>
                                </select>
                            </div>
                            <button type="button" class="borderLess pull-left" tooltip-placement="right" tooltip-append-to-body="false" uib-tooltip="Date/Time will be stored in UTC.">
                                <span class="glyphicon glyphicon-question-sign"></span>
                            </button>
                        </div>

                        <!-- Note: (detail)-->
                        <div class="col-md-12" ng-if="view.DEPval == 'detail'">
                            <div class="col-md-3 col-md-offset-1"><label>Note:</label></div>
                            <div class="col-md-6"><span>{{aSensStatus.notes || '---'}}</span></div>
                        </div>
                        <!-- Note: (edit)-->
                        <div class="form-group" ng-if="view.DEPval == 'edit'">
                            <label class="col-md-3 col-md-offset-1 control-label">Note:</label>
                            <div class="col-md-6">
                                <textarea class="form-control" name="notes" type="text" rows="3" ng-model="depStuffCopy[1].notes" />
                            </div>
                        </div>

                        <!-- Deploy Member: (detail) -->
                        <div class="col-md-12" ng-if="view.DEPval == 'detail'">
                            <div class="col-md-3 col-md-offset-1"><label>Deploy Member:</label></div>
                            <div class="col-md-6"><span>{{Deployer.fname}} {{Deployer.lname}}</span></div>
                        </div>
                        <!-- Deploy Member: (edit) -->
                        <div class="form-group" ng-if="view.DEPval == 'edit'">
                            <label class="col-md-3 col-md-offset-1 control-label">Deploy Member:</label>
                            <div class="col-md-6">
                                <input type="hidden" name="member_id" ng-model="aSensStatus.member_id" />
                                <span>{{Deployer.fname}} {{Deployer.lname}}</span>
                            </div>
                        </div>

                    </fieldset>
                </form>
            </uib-accordion-group>

            <!--Sensor File Part-->
            <uib-accordion-group is-open="s.sFileOpen">
                <uib-accordion-heading>
                    <i style="margin-right:10px" class="pull-left glyphicon" ng-class="{'glyphicon-chevron-down': s.sFileOpen, 'glyphicon-chevron-right': !s.sFileOpen}"></i>
                    <span ng-class="{'redText':showFileForm}">Sensor Files Informations</span>
                </uib-accordion-heading>
                <div class="col-md-12">
                    <div class="col-md-5"><h4>Sensor Files</h4></div>
                    <div class="col-md-6" ng-if="!showFileForm" style="margin-top:14px">
                        <button type="button" class="borderLess" ng-click="showFile(0)" tooltip-placement="right" uib-tooltip="Upload a new File to this Sensor">
                            <span class="glyphicon glyphicon-plus"></span>
                        </button>
                    </div>
                    <br clear="all" />
                    <!-- list of existing files for this op -->
                    <div class="col-md-6" ng-if="DepSensorFiles.length > 0">
                        <span ng-repeat="f in DepSensorFiles">
                            <ul style="padding-left: 0">
                                <li style="list-style:none;padding-bottom: 15px;">
                                    <span class="col-sm-9 borderLess" style="padding:0">
                                        <a class="btn borderLess" style="padding:0" title="{{f.file_date | date: 'MM/dd/yyyy'}} ({{f.name || f.file_id}})" ng-click="showFile(f)">{{f.file_date | date: 'MM/dd/yyyy'}} ({{f.name || f.file_id}})</a>
                                    </span>
                                </li>
                            </ul>
                        </span>
                    </div>
                    <!-- carousel of photo files -->
                    <div class="col-md-6" ng-if="depSensImageFiles.length > 0" style="height:120px;">
                        <uib-carousel interval="4000">
                            <uib-slide ng-repeat="f in depSensImageFiles">
                                <img ng-click="showImageModal(f.file_id)" ng-src="{{serverURL}}/Files/{{f.file_id}}/Item" />
                                <div class="carousel-caption">
                                    <p>{{f.name || f.file_id}}</p>
                                </div>
                            </uib-slide>
                        </uib-carousel>
                    </div>
                    <br clear="all" />

                    <div ng-if="showFileForm">
                        <br clear="all" />
                        <hr />
                        <form class="form-horizontal" name="DepSenFILEForm">
                            <fieldset>
                                <!-- File Type* -->
                                <div class="form-group required" ng-class="{'has-error':DepSenFILEForm.filetype_id.$invalid && DepSenFILEForm.filetype_id.$dirty}" style="margin:0;padding:0">
                                    <label class="col-md-4 control-label req" for="filetype_id">File Type:</label>
                                    <div class="col-md-6">
                                        <select class="form-control" name="filetype_id" ng-model="aFile.filetype_id" ng-change="updateAgencyForCaption()" ng-options="ft.filetype_id as ft.filetype for ft in fileTypes" required>
                                            <option value=""></option>
                                        </select>
                                    </div>
                                </div>

                                <!--Upload Single Image with validations*-->
                                <div ng-if="aFile.file_id === undefined && aFile.filetype_id !== 8" class="form-group required" style="margin:0;padding:0">
                                    <label class="col-md-4 control-label" for="FILE">Upload File:</label>
                                    <div class="col-md-8">
                                        <input type="file" max="500000" file-model="aFile.File" />
                                        <img ngf-thumbnail="aFile.File" style="height:60px" class="thumbnail">
                                    </div>
                                </div>
                                <br clear="all" />

                                <!--File URL (LINK file)-->
                                <div ng-if="aFile.filetype_id === 8" class="form-group" style="margin:0;padding:0">
                                    <label class="col-md-4 control-label" for="name">File URL:</label>
                                    <div class="col-md-6">
                                        <input class="form-control" name="name" ng-model="aFile.name" type="text" />
                                    </div>
                                    <button type="button" class="col-md-1 borderLess pull-left" tooltip-placement="bottom" tooltip-append-to-body="false" uib-tooltip="Please link to persistent URLs or digital object identifier (doi) urls.">
                                        <span class="glyphicon glyphicon-question-sign"></span>
                                    </button>
                                </div>
                                <!--Data Processed by (Data) -->
                                <div ng-if="aFile.filetype_id === 2" class="form-group" style="margin:0;padding:0">
                                    <label class="col-md-4 control-label" for="processor_id">Data Process By:</label>
                                    <div class="col-md-6">
                                        <span>{{processor.fname}} {{processor.lname}}</span>
                                    </div>
                                </div>
                                <!-- Date Collected/Processed* (data)-->
                                <div ng-if="aFile.filetype_id === 2" class="form-group required" ng-class="{'has-error':DepSenFILEForm.collect_date.$invalid && DepSenFILEForm.collect_date.$dirty}" style="margin:0;padding:0">
                                    <label class="col-md-4 control-label req" for="collect_date">Date Collected/Processed:</label>
                                    <div class="col-md-3 input-group" style="padding-right:14px;padding-left:14px">
                                        <input class="form-control dateInputStyle" type="date" name="dfcd" uib-datepicker-popup="MM/dd/yyyy" show-weeks="false" is-open="datepickrs.dfcd" ng-model="datafile.collect_date" required />
                                        <span class="input-group-btn">
                                            <button class="btn btn-default" type="button" ng-click="open($event, 'dfcd')">
                                                <i class="glyphicon glyphicon-calendar" />
                                            </button>
                                        </span>
                                    </div>
                                </div>

                                <!--Source Name (photo)-->
                                <div class="form-group required" ng-if="aFile.filetype_id === 1" ng-class="{'has-error':DepSenFILEForm.FULLname.$invalid && DepSenFILEForm.FULLname.$dirty}" style="margin:0;padding:0">
                                    <label class="col-md-4 control-label req" for="source_id">Source Photographer:</label>
                                    <div class="col-md-6">
                                        <input class="form-control" name="FULLname" ng-model="aSource.FULLname" type="text" required />
                                    </div>
                                </div>

                                <!--Source Name (all other)-->
                                <div class="form-group required" ng-if="aFile.filetype_id  > 2" ng-class="{'has-error':DepSenFILEForm.FULLname.$invalid && DepSenFILEForm.FULLname.$dirty}" style="margin:0;padding:0">
                                    <label class="col-md-4 control-label req" for="source_id">Source Name:</label>
                                    <div class="col-md-6">
                                        <input class="form-control" name="FULLname" ng-model="aSource.FULLname" type="text" required />
                                    </div>
                                </div>

                                <!--Source Agency* (photo, allOther)-->
                                <div ng-if="aFile.filetype_id === 1 || aFile.filetype_id > 2" class="form-group required" ng-class="{'has-error':DepSenFILEForm.agency_id.$invalid && DepSenFILEForm.agency_id.$dirty}" style="margin:0;padding:0">
                                    <label class="col-md-4 control-label req" for="agency_id">Source Agency:</label>
                                    <div class="col-md-6">
                                        <select class="form-control" name="agency_id" ng-model="aSource.agency_id" ng-change="updateAgencyForCaption()"
                                                ng-options="a.agency_id as a.agency_name for a in agencies" required>
                                            <option value=""></option>
                                        </select>
                                    </div>
                                </div>

                                <!-- Photo Date * (photo) -->
                                <div ng-if="aFile.filetype_id === 1" class="form-group required" ng-class="{'has-error':DepSenFILEForm.photo_date.$invalid && DepSenFILEForm.photo_date.$dirty}" style="margin:0;padding:0">
                                    <label class="col-md-4 control-label req" for="photo_date">Photo Date:</label>
                                    <div class="col-md-3 input-group" style="padding-right:14px;padding-left:14px">
                                        <input class="form-control dateInputStyle" type="date" name="sd" uib-datepicker-popup="MM/dd/yyyy" show-weeks="false" is-open="datepickrs.sd" ng-model="aFile.photo_date" required />
                                        <span class="input-group-btn">
                                            <button class="btn btn-default" type="button" ng-click="open($event, 'sd')">
                                                <i class="glyphicon glyphicon-calendar" />
                                            </button>
                                        </span>
                                    </div>
                                </div>

                                <!-- Date Uploaded* (photo, data, allother) -->
                                <div ng-if="aFile.filetype_id > 0" class="form-group required" ng-class="{'has-error':DepSenFILEForm.file_date.$invalid && DepSenFILEForm.file_date.$dirty}" style="margin:0;padding:0">
                                    <label class="col-md-4 control-label req" for="file_date">Date Uploaded:</label>
                                    <div class="col-md-3 input-group" style="padding-right:14px;padding-left:14px">
                                        <input class="form-control dateInputStyle" type="date" name="fd" uib-datepicker-popup="MM/dd/yyyy" show-weeks="false" is-open="datepickrs.fd" ng-model="aFile.file_date" required />
                                        <span class="input-group-btn">
                                            <button class="btn btn-default" type="button" ng-click="open($event, 'fd')">
                                                <i class="glyphicon glyphicon-calendar" />
                                            </button>
                                        </span>
                                    </div>
                                </div>

                                <!--Description*(photo, data, allother)-->
                                <div ng-if="aFile.filetype_id > 0" class="form-group required" ng-class="{'has-error':DepSenFILEForm.description.$invalid && DepSenFILEForm.description.$dirty}" style="margin:0;padding:0">
                                    <label class="col-md-4 control-label req" for="description">Description:</label>
                                    <div class="col-md-6">
                                        <textarea class="form-control" id="description" type="text" rows="3" placeholder="Description" ng-model="aFile.description" required />
                                    </div>
                                    <button ng-show="aFile.filetype_id == 1" type="button" class="col-md-1 borderLess pull-left" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Populates in Photo caption below.">
                                        <span class="glyphicon glyphicon-question-sign"></span>
                                    </button>
                                </div>

                                <!-- Good Data Start Time* (data) -->
                                <div ng-if="aFile.filetype_id === 2" class="form-group required" ng-class="{'has-error':DepSenFILEForm.good_start.$invalid && DepSenFILEForm.good_start.$dirty}" style="margin:0;padding:0">
                                    <label class="col-md-4 control-label req" for="good_start" style="margin-top:4%">Good Data Start Time:</label>
                                    <div class="col-md-6">
                                        <datetimepicker ng-model="datafile.good_start" show-meridian="true" date-format="MM/dd/yyyy" readonly-date="false" date-options="dateOptions"
                                                        hidden-time="false" hidden-date="false" show-spinners="true" date-opened="datepickrs.dfgs" date-ng-click="open($event, 'dfgs')" required>
                                        </datetimepicker>
                                    </div>
                                    <button style="margin-top:4%" type="button" class="col-md-1 borderLess pull-left" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Used by the processing scripts to clip irrelavent data.">
                                        <span class="glyphicon glyphicon-question-sign"></span>
                                    </button>
                                </div>

                                <!-- Good Data End Time* (data)-->
                                <div ng-if="aFile.filetype_id === 2" class="form-group required" ng-class="{'has-error':DepSenFILEForm.good_end.$invalid && DepSenFILEForm.good_end.$dirty}" style="margin:0;padding:0">
                                    <label class="col-md-4 control-label req" for="good_end" style="margin-top:4%">Good Data End Time:</label>
                                    <div class="col-md-6">
                                        <datetimepicker ng-model="datafile.good_end" show-meridian="true" date-format="MM/dd/yyyy" readonly-date="false" date-options="dateOptions"
                                                        hidden-time="false" hidden-date="false" show-spinners="true" date-opened="datepickrs.dfge" date-ng-click="open($event, 'dfge')" required>
                                        </datetimepicker>
                                    </div>
                                    <button style="margin-top:4%" type="button" class="col-md-1 borderLess pull-left" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Used by the processing scripts to clip irrelavent data.">
                                        <span class="glyphicon glyphicon-question-sign"></span>
                                    </button>
                                </div>

                                <!-- Timezone*: -->
                                <div ng-if="aFile.filetype_id === 2" class="form-group required" style="margin:0;padding:0">
                                    <label class="col-md-4 control-label req">Time Zone:</label>
                                    <div class="col-md-6">
                                        <select class="form-control" name="time_zone" ng-model="datafile.time_zone" ng-options="vcm for vcm in timeZoneList" required>
                                            <option value=""></option>
                                        </select>
                                    </div>
                                    <button type="button" class="col-md-1 borderLess pull-left" tooltip-placement="right" tooltip-append-to-body="false" uib-tooltip="Date/Time will be stored in UTC.">
                                        <span class="glyphicon glyphicon-question-sign"></span>
                                    </button>
                                </div>

                                <!-- Elevation -->
                                <div ng-if="aFile.filetype_id === 2" class="form-group" style="margin:0;padding:0">
                                    <label class="col-md-4 control-label">Elevation:</label>
                                    <div class="col-md-6">
                                        <span class="radio-inline">
                                            <input type="radio" name="elevation_status" ng-model="datafile.elevation_status" value="Final" />Final
                                        </span>
                                        <span class="radio-inline">
                                            <input type="radio" name="elevation_status" ng-model="datafile.elevation_status" value="Arbitrary" />Arbitrary
                                        </span>
                                    </div>
                                </div>

                                <!--Photo Direction (photo)-->
                                <div ng-if="aFile.filetype_id === 1" class="form-group" style="margin:0;padding:0;padding-top:5px;">
                                    <label class="col-md-4 control-label" for="photo_direction">Photo Direction:</label>
                                    <div class="col-md-6">
                                        <input class="form-control" id="photo_direction" name="photo_direction" ng-model="aFile.photo_direction" type="text" />
                                    </div>
                                </div>

                                <!-- Photo Latitude (photo)-->
                                <div ng-if="aFile.filetype_id === 1" class="form-group" style="margin:0;padding:0">
                                    <label class="col-md-4 control-label" for="latitude_dd">Photo Latitude <br /> (if different):</label>
                                    <div class="col-md-6">
                                        <input class="form-control" ng-keypress="isNum($event)" name="latitude_dd" id="latitude_dd" ng-model="aFile.latitude_dd"
                                               type="text" />
                                    </div>
                                </div>

                                <!--Photo Longitude (photo)-->
                                <div ng-if="aFile.filetype_id === 1" class="form-group" style="margin:0;padding:0">
                                    <label class="col-md-4 control-label" for="longitude_dd">Photo Longitude <br /> (if different):</label>
                                    <div class="col-md-6">
                                        <input class="form-control" ng-keypress="isNum($event)" id="longitude_dd" name="longitude_dd" ng-model="aFile.longitude_dd"
                                               type="text" />
                                    </div>
                                </div>

                                <div ng-if="aFile.filetype_id === 1" class="form-group" style="margin:0;padding:0">
                                    <label class="col-md-4 control-label" for="Caption">Preview Caption:</button></label>
                                    <div class="col-md-6">
                                        <span>
                                            Photo of {{aFile.description || ' (Description HERE) '}} at {{thisSensorSite.site_description}}, {{thisSensorSite.county}}, {{thisSensorSite.state}}, {{aFile.photo_date | date: 'MM/dd/yyyy' || ' Date taken HERE '}}. Photograph by {{aSource.FULLname || ' Source Name HERE ' }}, {{agencyNameForCap || ' Agency HERE '}}.
                                        </span>
                                    </div>
                                </div>


                                <div ng-if="aFile.file_id !== undefined && aFile.filetype_id !== 8" class="form-group" style="margin:0;padding:0">
                                    <label class="col-md-4 control-label">Download File:</label>
                                    <div class="col-md-6" style="padding-top: 12px;">
                                        <a target="_blank" title="Download file" ng-href="{{serverURL}}/Files/{{aFile.file_id}}/Item">
                                            <span class="glyphicon glyphicon-download"></span>
                                        </a>
                                        <img ng-if="aFile.filetype_id === 1" style="height:80px;" ng-src="{{serverURL}}/Files/{{aFile.file_id}}/Item" />
                                    </div>
                                </div>
                                <div ng-show="!fullSenfileIsUploading">
                                    <button class="btn btn-primary" ng-if="aFile.file_id != undefined" ng-click="saveFile(DepSenFILEForm.$valid)">Save File</button>
                                    <button type="button" class="btn btn-danger" ng-if="aFile.file_id != undefined" ng-click="deleteFile()">Delete File</button>
                                    <button class="btn btn-primary" ng-if="aFile.file_id == undefined" ng-click="createFile(DepSenFILEForm.$valid)">Create File</button>
                                    <button class="btn btn-warning" type="button" ng-click="cancelFile()">Close/Cancel File</button>
                                </div>
                                <div ng-show="fullSenfileIsUploading"><img src="images/fileUpload.gif" /></div>
                            </fieldset>
                        </form>
                    </div>
                </div>
            </uib-accordion-group>

            <!-- sensor files in nwis connection part-->
            <div ng-if="sensorDataNWIS" style="margin-top:5px;">
                <uib-accordion-group is-open="s.NWISFileOpen">
                    <uib-accordion-heading>
                        <i style="margin-right:10px" class="pull-left glyphicon" ng-class="{'glyphicon-chevron-down': s.NWISFileOpen, 'glyphicon-chevron-right': !s.NWISFileOpen}"></i>
                        <span ng-class="{'redText':showNWISFileForm}">NWIS Connection</span>
                        <button type="button" class="col-md-1 borderLess pull-right" tooltip-placement="left" tooltip-append-to-body="false" uib-tooltip-html="nwisHeaderTip">
                            <span class="glyphicon glyphicon-question-sign"></span>
                        </button>
                    </uib-accordion-heading>
                    <div class="col-md-12">
                        <div class="col-md-5"><h4>NWIS metadata for sensor</h4></div>
                        <div class="col-md-2" ng-if="!showNWISFileForm" style="margin-top:14px">
                            <button type="button" class="borderLess" ng-click="showNWISFile(0)" tooltip-placement="top" uib-tooltip="Add file metadata to this Sensor">
                                <span class="glyphicon glyphicon-plus"></span>
                            </button>
                        </div>
                        <br clear="all" />
                        <!-- list of existing files for this op -->
                        <div class="col-md-6" ng-if="sensorNWISFiles.length > 0">
                            <span ng-repeat="f in sensorNWISFiles">
                                <ul style="padding-left: 0">
                                    <li style="list-style:none;padding-bottom: 15px;">
                                        <span class="col-sm-9 borderLess" style="padding:0">
                                            <a class="btn borderLess" style="padding:0" title="{{f.file_date | date: 'MM/dd/yyyy'}} ({{f.name || f.file_id}})" ng-click="showNWISFile(f)">{{f.file_date | date: 'MM/dd/yyyy'}} ({{f.name || f.file_id}})</a>
                                        </span>
                                    </li>
                                </ul>
                            </span>
                        </div>
                        <div ng-if="showNWISFileForm">
                            <br clear="all" /><hr />
                            <form class="form-horizontal" name="NWISSenFILEForm">
                                <fieldset>
                                    <!-- File Type* -->
                                    <div class="form-group" style="margin:0;padding:0">
                                        <label class="col-md-4 control-label">File Type:</label>
                                        <div class="col-md-6" style="margin-top:14px">
                                            <span>{{NWISFile.FileType}}</span>
                                        </div>
                                    </div>

                                    <br clear="all" />

                                    <!--File URL-->
                                    <div class="form-group" style="margin:0;padding:0">
                                        <label class="col-md-4 control-label" for="name">File URL:</label>
                                        <div class="col-md-6">
                                            <input class="form-control" name="name" title="{{NWISFile.name}}" ng- ng-model="NWISFile.name" type="text" />
                                        </div>
                                        <button type="button" class="col-md-1 borderLess pull-left" tooltip-placement="bottom" tooltip-append-to-body="false" uib-tooltip="Auto generated from USGS Station ID. Correct if necessary.">
                                            <span class="glyphicon glyphicon-question-sign"></span>
                                        </button>
                                    </div>

                                    <!--Data Processed by -->
                                    <div class="form-group" style="margin:0;padding:0">
                                        <label class="col-md-4 control-label" for="processor_id">Data Process By:</label>
                                        <div class="col-md-6" style="margin-top:14px">
                                            <span>{{nwisProcessor.fname}} {{nwisProcessor.lname}}</span>
                                        </div>
                                    </div>
                                    <!-- Date Collected/Processed* (data)-->
                                    <div class="form-group required" ng-class="{'has-error':NWISSenFILEForm.collect_date.$invalid && NWISSenFILEForm.collect_date.$dirty}" style="margin:0;padding:0">
                                        <label class="col-md-4 control-label req" for="collect_date">Date Collected/Processed:</label>
                                        <div class="col-md-3 input-group" style="padding-right:14px;padding-left:14px">
                                            <input class="form-control dateInputStyle" type="date" name="dfcd" uib-datepicker-popup="MM/dd/yyyy" show-weeks="false" is-open="datepickrs.dfcd" ng-model="NWISDF.collect_date" required />
                                            <span class="input-group-btn">
                                                <button class="btn btn-default" type="button" ng-click="open($event, 'dfcd')">
                                                    <i class="glyphicon glyphicon-calendar" />
                                                </button>
                                            </span>
                                        </div>
                                    </div>

                                    <!-- Date Uploaded* -->
                                    <div class="form-group required" ng-class="{'has-error':NWISSenFILEForm.file_date.$invalid && NWISSenFILEForm.file_date.$dirty}" style="margin:0;padding:0">
                                        <label class="col-md-4 control-label req" for="file_date">Date Uploaded:</label>
                                        <div class="col-md-3 input-group" style="padding-right:14px;padding-left:14px">
                                            <input class="form-control dateInputStyle" type="date" name="fd" uib-datepicker-popup="MM/dd/yyyy" show-weeks="false" is-open="datepickrs.fd" ng-model="NWISFile.file_date" required />
                                            <span class="input-group-btn">
                                                <button class="btn btn-default" type="button" ng-click="open($event, 'fd')">
                                                    <i class="glyphicon glyphicon-calendar" />
                                                </button>
                                            </span>
                                        </div>
                                    </div>

                                    <!--Description*-->
                                    <div class="form-group required" ng-class="{'has-error':NWISSenFILEForm.description.$invalid && NWISSenFILEForm.description.$dirty}" style="margin:0;padding:0">
                                        <label class="col-md-4 control-label req" for="description">Description:</label>
                                        <div class="col-md-6">
                                            <textarea class="form-control" id="description" type="text" rows="3" placeholder="Description" ng-model="NWISFile.description" required />
                                        </div>
                                    </div>

                                    <!-- Good Data Start Time* (data) -->
                                    <div class="form-group required" ng-class="{'has-error':NWISSenFILEForm.good_start.$invalid && NWISSenFILEForm.good_start.$dirty}" style="margin:0;padding:0">
                                        <label class="col-md-4 control-label req" for="good_start" style="margin-top:4%">Good Data Start Time:</label>
                                        <div class="col-md-6">
                                            <datetimepicker ng-model="NWISDF.good_start" show-meridian="true" date-format="MM/dd/yyyy" readonly-date="false" date-options="dateOptions"
                                                            hidden-time="false" hidden-date="false" show-spinners="true" date-opened="datepickrs.dfgs" date-ng-click="open($event, 'dfgs')" required>
                                            </datetimepicker>
                                        </div>
                                        <button style="margin-top:4%" type="button" class="col-md-1 borderLess pull-left" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Used by the processing scripts to clip irrelavent data.">
                                            <span class="glyphicon glyphicon-question-sign"></span>
                                        </button>
                                    </div>

                                    <!-- Good Data End Time* (data)-->
                                    <div class="form-group required" ng-class="{'has-error':NWISSenFILEForm.good_end.$invalid && NWISSenFILEForm.good_end.$dirty}" style="margin:0;padding:0">
                                        <label class="col-md-4 control-label req" for="good_end" style="margin-top:4%">Good Data End Time:</label>
                                        <div class="col-md-6">
                                            <datetimepicker ng-model="NWISDF.good_end" show-meridian="true" date-format="MM/dd/yyyy" readonly-date="false" date-options="dateOptions"
                                                            hidden-time="false" hidden-date="false" show-spinners="true" date-opened="datepickrs.dfge" date-ng-click="open($event, 'dfge')" required>
                                            </datetimepicker>
                                        </div>
                                        <button style="margin-top:4%" type="button" class="col-md-1 borderLess pull-left" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Used by the processing scripts to clip irrelavent data.">
                                            <span class="glyphicon glyphicon-question-sign"></span>
                                        </button>
                                    </div>

                                    <!-- Timezone*: -->
                                    <div class="form-group required" style="margin:0;padding:0">
                                        <label class="col-md-4 control-label req">Time Zone:</label>
                                        <div class="col-md-6">
                                            <select class="form-control" name="time_zone" ng-model="NWISDF.time_zone" ng-options="vcm for vcm in timeZoneList" required>
                                                <option value=""></option>
                                            </select>
                                        </div>
                                        <button type="button" class="col-md-1 borderLess pull-left" tooltip-placement="right" tooltip-append-to-body="false" uib-tooltip="Date/Time will be stored in UTC.">
                                            <span class="glyphicon glyphicon-question-sign"></span>
                                        </button>
                                    </div>

                                    <!-- Elevation -->
                                    <div class="form-group" style="margin:0;padding:0">
                                        <label class="col-md-4 control-label">Elevation:</label>
                                        <div class="col-md-6">
                                            <span class="radio-inline">
                                                <input type="radio" name="elevation_status" ng-model="NWISDF.elevation_status" value="Final" />Final
                                            </span>
                                            <span class="radio-inline">
                                                <input type="radio" name="elevation_status" ng-model="NWISDF.elevation_status" value="Arbitrary" />Arbitrary
                                            </span>
                                        </div>
                                    </div>

                                    <button class="btn btn-primary" ng-if="NWISFile.file_id != undefined" ng-click="saveNWISFile(NWISSenFILEForm.$valid)">Save NWIS File Info</button>
                                    <button type="button" class="btn btn-danger" ng-if="NWISFile.file_id != undefined" ng-click="deleteNWISFile()">Delete NWIS File Info</button>
                                    <button class="btn btn-primary" ng-if="NWISFile.file_id == undefined" ng-click="createNWISFile(NWISSenFILEForm.$valid)">Create NWIS File Info</button>
                                    <button class="btn btn-warning" type="button" ng-click="cancelNWISFile()">Close/Cancel NWIS File Info</button>
                                </fieldset>
                            </form>
                        </div>
                    </div>
                </uib-accordion-group>
            </div>
        </uib-accordion>
    </div>
    <div class="modal-footer">
        <div class="form-group">
            <div class="col-md-12">
                <span><button class="btn btn-danger" ng-disabled="showFileForm || showNWISFileForm" ng-click="deleteS()"><span>Delete Sensor</span></button></span>
                <span><button type="button" ng-disabled="showFileForm || showNWISFileForm" class="btn btn-warning" ng-click="cancel()"><span>Close</span></button></span>
            </div>
        </div>
    </div>
</script>

<!-- MODAL for Retrieving a Sensor-->
<script type="text/ng-template" id="SensorRetrievalModal.html">
    <div class="modal-header">
        <h3 class="modal-title">Retrieve Sensor<button class="close" type="button" ng-click="cancel()" aria-hidden="true" style="color:gray;">&times;</button></h3>
    </div>

    <form class="form-horizontal" name="SensorFormR">
        <fieldset>
            <div class="modal-body">
                <label>Deployed Sensor Information</label>

                <!-- Event: -->
                <div class="col-md-12">
                    <div class="col-md-4 col-md-offset-1"><label>Event:</label></div>
                    <div class="col-md-6">{{EventName}}</div>
                </div>
                <!-- Sensor Type: -->
                <div class="col-md-12">
                    <div class="col-md-4 col-md-offset-1"><label>Sensor Type:</label></div>
                    <div class="col-md-6">{{aSensor.sensorType || '---'}}</div>
                </div>
                <!-- Sensor Brand: -->
                <div class="col-md-12">
                    <div class="col-md-4 col-md-offset-1"><label>Sensor Brand:</label></div>
                    <div class="col-md-6">{{aSensor.sensorBrand || '---'}}</div>
                </div>
                <!-- Serial Number: -->
                <div class="col-md-12">
                    <div class="col-md-4 col-md-offset-1"><label>Serial Number:</label></div>
                    <div class="col-md-6">{{aSensor.serial_number || '---'}}</div>
                </div>
                <!-- Housing Serial Number: -->
                <div class="col-md-12">
                    <div class="col-md-4 col-md-offset-1"><label>Housing Serial Number:</label></div>
                    <div class="col-md-6">{{aSensor.housing_serial_number || '---'}}</div>
                </div>
                <!-- Housing Types: -->
                <div class="col-md-12">
                    <div class="col-md-4 col-md-offset-1"><label>Housing Types:</label></div>
                    <div class="col-md-6">{{aSensor.housingType || '---'}}</div>
                </div>

                <!--Tapedowns-->
                <div class="col-md-12" ng-show="DEPtapeDownTable.length > 0">
                    <hr class="col-md-9 col-md-offset-1" />

                    <div class="col-md-4 col-md-offset-1"><label>Tapedowns:</label></div>
                    <div class="col-md-8 col-md-offset-1">
                        <table class="table table-condensed">
                            <thead>
                                <tr>
                                    <td>Datum Location</td>
                                    <td>Elevation</td>
                                    <td class="col-md-1" style="text-align:center">Offset Correction</td>
                                    <td class="col-md-1" style="text-align:center">Water Surface</td>
                                    <td class="col-md-1" style="text-align:center">Ground Surface</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr ng-repeat="dt in DEPtapeDownTable">
                                    <td>{{dt.op_name}}</td>
                                    <td>{{dt.elevation}} {{dt.Vdatum}}</td>
                                    <td style="text-align:center">{{dt.offset_correction}}</td>
                                    <td style="text-align:center">{{dt.water_surface}}</td>
                                    <td style="text-align:center">{{dt.ground_surface}}</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="col-md-12">
                        <div class="col-md-4 col-md-offset-1"><label>Sensor Elevation:</label></div>
                        <div class="col-md-6">{{depSensStatus.sensor_elevation || '---'}}</div>
                    </div>
                    <div class="col-md-12">
                        <div class="col-md-4 col-md-offset-1"><label>Water Surface Elevation:</label></div>
                        <div class="col-md-6">{{depSensStatus.ws_elevation || '---'}}</div>
                    </div>
                    <div class="col-md-12">
                        <div class="col-md-4 col-md-offset-1"><label>Ground Elevation:</label></div>
                        <div class="col-md-6">{{depSensStatus.gs_elevation || '---'}}</div>
                    </div>
                    <div class="col-md-12">
                        <div class="col-md-4 col-md-offset-1"><label>In feet above:</label></div>
                        <div class="col-md-6">{{depSensStatus.VDatum || '---'}}</div>
                    </div>
                    <hr class="col-md-9 col-md-offset-1" />
                </div>                

                <!-- Vented (only if Sensor Type is Pressure Transducer)-->
                <div class="col-md-12" ng-show="aSensor.sensor_type_id == 1">
                    <div class="col-md-4 col-md-offset-1"><label>Vented:</label></div>
                    <div class="col-md-6">{{aSensor.vented ||  '---'}}</div>
                </div>
                <!-- Deployment Type: -->
                <div class="col-md-12">
                    <div class="col-md-4 col-md-offset-1"><label>Deployment Type:</label></div>
                    <div class="col-md-6">{{aSensor.deploymentType || '---'}}</div>
                </div>
                <!-- Location Description: -->
                <div class="col-md-12">
                    <div class="col-md-4 col-md-offset-1"><label>Location Description:</label></div>
                    <div class="col-md-6">{{aSensor.location_description || '---'}}</div>
                </div>
                <!-- Interval: -->
                <div class="col-md-12">
                    <div class="col-md-4 col-md-offset-1"><label>Interval:</label></div>
                    <div class="col-md-6">{{aSensor.interval || '---'}} <span ng-show='aSensor.interval'>seconds</span></div>
                </div>
                <!-- Deploy Date: -->
                <div class="col-md-12">
                    <div class="col-md-4 col-md-offset-1"><label>Deploy Date and Time:</label></div>
                    <div class="col-md-6">{{depSensStatus.time_stamp | date: 'MM/dd/yyyy hh:mm a' }} {{depSensStatus.time_zone}}</div>
                </div>
                <!-- Note: -->
                <div class="col-md-12">
                    <div class="col-md-4 col-md-offset-1"><label>Note:</label></div>
                    <div class="col-md-6">{{depSensStatus.notes || '---'}}</div>
                </div>
                <!-- Deploy Member: -->
                <div class="col-md-12">
                    <div class="col-md-4 col-md-offset-1"><label>Deploy Member:</label></div>
                    <div class="col-md-6">{{Deployer.fname}} {{Deployer.lname}}</div>
                </div>
                <br clear="all" />

                <hr />

                <label>Retrieval Information</label>
                <!-- Status Type:* -->
                <div class="form-group required" ng-class="{'has-error':SensorFormR.status_type_id.$invalid && SensorFormR.status_type_id.$dirty}">
                    <label class="col-md-3 control-label req" for="status_type_id">Status:</label>
                    <div class="col-md-6">
                        <select class="form-control" name="status_type_id" ng-model="aRetrieval.status_type_id"
                                ng-options="s.status_type_id as s.status for s in statusTypeList" required>
                            <option value=""></option>
                        </select>
                    </div>
                </div>

                <!-- Collection Condition:* -->
                <div class="form-group required" ng-class="{'has-error':SensorFormR.inst_collection_id.$invalid && SensorFormR.inst_collection_id.$dirty}">
                    <label class="col-md-3 control-label req" for="inst_collection_id">Collection Conditions:</label>
                    <div class="col-md-6">
                        <select class="form-control" name="inst_collection_id" ng-model="aSensor.inst_collection_id"
                                ng-options="ins.id as ins.condition for ins in collectCondList" required>
                            <option value=""></option>
                        </select>
                    </div>
                </div>

                <!-- Note: -->
                <div class="form-group">
                    <label class="col-md-3 control-label" for="notes">Note:</label>
                    <div class="col-md-6">
                        <textarea class="form-control" name="notes" type="text" rows="3" ng-model="aRetrieval.notes" elastic />
                    </div>
                </div>


                <!-- Retrieve Time: * -->
                <div class="form-group required" ng-class="{'has-error':SensorFormR.time_stamp.$invalid && SensorFormR.time_stamp.$dirty}">
                    <label class="col-md-3 control-label req" style="margin-top:3%" for="time_stamp">Date and Time:</label>
                    <div class="col-md-6">
                        <datetimepicker hour-step="1" minute-step="1" ng-model="aRetrieval.time_stamp" show-meridian="true" id="retrievalDate"
                                        date-format="MM/dd/yyyy" readonly-date="false" readonly-time="false" date-options="dateOptions"
                                        hidden-time="false" hidden-date="false" show-spinners="true" ng-change="date_change(aRetrieval.time_stamp)">
                        </datetimepicker>
                    </div>
                </div>

                <!-- Time Zone:* -->
                <div class="form-group required">
                    <label class="col-md-3 control-label" for="time_zone">Time Zone:</label>
                    <div class="col-md-6">
                        <select class="form-control" name="time_zone" ng-model="aRetrieval.time_zone"
                                ng-options="vcm for vcm in timeZoneList">
                            <option value=""></option>
                        </select>
                    </div>
                    <button type="button" class="borderLess" tooltip-placement="right" tooltip-append-to-body="false" uib-tooltip="Date/Time will be stored in UTC.">
                        <span class="glyphicon glyphicon-question-sign"></span>
                    </button>
                </div>

                <!-- -------------------------- START TAPEDOWN SECTION --------------------------------  -->
                <uib-accordion close-others="false">
                    <uib-accordion-group is-open="tapedownOpen">
                        <uib-accordion-heading>
                            <i style="margin-right:10px" class="pull-left glyphicon" ng-class="{'glyphicon-chevron-down': tapedownOpen, 'glyphicon-chevron-right': !tapedownOpen}"></i>
                            <span>Tape Down Information</span>
                        </uib-accordion-heading>
                        <!--Add Tapedown button-->
                        <div ng-if="OPsPresent" class="form-group">
                            <label class="col-md-3 control-label" for="TAPEDOWNBTN">Datum Location(s):</label>
                            <div class="col-md-6">
                                <div isteven-multi-select
                                     input-model="OPsForTapeDown"
                                     container="body"
                                     output-model="OPMeasure"
                                     button-label="name"
                                     item-label="name"
                                     on-item-click="OPchosen(data)"
                                     tick-property="selected"
                                     helper-elements="filter">
                                </div>
                            </div>
                        </div><!-- end if OPsArePresent-->
                        <div ng-if="!OPsPresent" class="form-group">
                            <label class="col-md-3 control-label" for="TAPEDOWNBTN">Tape Down:</label>
                            <div class="col-md-6">
                                <span>No Datum Locations have been added to this site yet to use for a tape down</span>
                            </div>
                        </div>
                        <!--start add tapedown area -->
                        <br clear="all" />
                        <div ng-show="tapeDownTable.length > 0">
                            <div class="pull-right col-md-6"><em>Note: these are not used for any calculations but are to facilitate field activities</em></div>
                            <table class="table table-condensed">
                                <thead>
                                    <tr>
                                        <th>Datum Location</th>
                                        <th>Elevation</th>
                                        <th class="col-md-2">Offset Correction</th>
                                        <th class="col-md-2">Water Surface</th>
                                        <th class="col-md-2">Ground Surface</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr ng-repeat="t in tapeDownTable">
                                        <td>{{t.op_name}}<input type="hidden" ng-model="t.objective_type_id" /><input type="hidden" ng-model="t.op_measurements_id" /></td>
                                        <td>
                                            {{t.elevation}} {{t.Vdatum}}
                                        </td>
                                        <td><input class="form-control" ng-keypress="isNum($event)" ng-model="t.offset_correction" /></td>
                                        <td><input class="form-control" ng-keypress="isNum($event)" ng-model="t.water_surface" /></td>
                                        <td><input class="form-control" ng-keypress="isnum($event)" ng-model="t.ground_surface" /></td>
                                    </tr>
                                </tbody>
                            </table>
                            <!-- Sensor status fields for tapedown -->
                            <div class="col-md-6">
                                <div class="form-group" style="margin-bottom:0">
                                    <label class="col-md-6 control-label" for="sensor_elevation">Sensor Elevation:</label>
                                    <div class="col-md-6">
                                        <input class="form-control" ng-keypress="isNum($event)" name="sensor_elevation" ng-model="aRetrieval.sensor_elevation" type="text" />
                                    </div>
                                </div>

                                <div class="form-group" style="margin-bottom:0">
                                    <label class="col-md-6 control-label" for="ws_elevation">Water Surface Elevation:</label>
                                    <div class="col-md-6">
                                        <input class="form-control" ng-keypress="isNum($event)" name="ws_elevation" ng-model="aRetrieval.ws_elevation" type="text" />
                                    </div>
                                </div>

                                <div class="form-group" style="margin-bottom:0">
                                    <label class="col-md-6 control-label" for="gs_elevation">Ground Elevation:</label>
                                    <div class="col-md-6">
                                        <input class="form-control" ng-keypress="isNum($event)" name="gs_elevation" ng-model="aRetrieval.gs_elevation" type="text" />
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label class="col-md-6 control-label req" for="vdatum_id">In feet above:</label>
                                    <div class="col-md-6">
                                        <select class="form-control" id="vdatum_id" name="vdatum_id" ng-model="aRetrieval.vdatum_id"
                                                ng-options="vd.datum_id as vd.datum_abbreviation for vd in vertDatumList">
                                            <option value=""></option>
                                        </select>
                                    </div>
                                </div>
                                <div class="pull-left col-md-12"><em>Note: these elevations are used in the sensor processing and the final products</em></div>
                            </div>
                        </div>
                        <br clear="all" />
                    </uib-accordion-group>
                </uib-accordion>

                <!-- -------------------------- END TAPEDOWN SECTION --------------------------------  -->
                <!-- Retrieve Member: -->
                <div class="form-group required">
                    <label class="col-md-3 control-label">Retrieve Member:</label>
                    <div class="col-md-6" style="margin-top:12px">{{Retriever.fname}} {{Retriever.lname}}</div>
                </div>

                <div class="modal-footer">
                    <div class="form-group">
                        <div class="col-md-12">
                            <span>
                                <button ng-if="whichButton == 'Retrieve'" class="btn btn-primary" ng-click="retrieveS(SensorFormR.$valid)">
                                    <span>Submit</span>
                                </button>
                            </span>
                            <span>
                                <button type="button" class="btn btn-warning" ng-click="cancel()">
                                    <span>Cancel</span>
                                </button>
                            </span>
                        </div>
                    </div>
                </div>
        </fieldset>
    </form>
</script>

<!-- MODAL for full Sensor editing (deployed and retrieved states)-->
<script type="text/ng-template" id="fullSensormodal.html">
    <div class="modal-header">
        <h3 class="modal-title">Full Sensor<button class="close" type="button" ng-click="cancel()" aria-hidden="true" style="color:gray;">&times;</button></h3>
    </div>
    <div class="modal-body">
        <!--Deployed Sensor Part-->
        <uib-accordion close-others="false">
            <!--Deployed Sensor Part-->
            <uib-accordion-group is-open="s.depOpen">
                <uib-accordion-heading>
                    <i style="margin-right:10px" class="pull-left glyphicon" ng-class="{'glyphicon-chevron-down': s.depOpen, 'glyphicon-chevron-right': !s.depOpen}"></i>
                    <span ng-class="{'redText':view.DEPval == 'edit'}">Deployed Sensor Information</span>
                </uib-accordion-heading>
                <form name="editableDeployedForm">
                    <fieldset>
                        <!-- Event: -->
                        <div class="col-md-12" ng-if="view.DEPval == 'detail'">
                            <div class="col-md-4 col-md-offset-1"><label>Event:</label></div>
                            <div class="col-md-6">{{EventName}}</div>
                        </div>
                        <!-- Event: -->
                        <div class="form-group" ng-if="view.DEPval == 'edit'">
                            <label class="col-md-4 col-md-offset-1 control-label">Event:</label>
                            <div class="col-md-6">{{EventName}}</div>
                        </div>

                        <!-- Sensor Type*: (detail) -->
                        <div class="col-md-12" ng-if="view.DEPval == 'detail'">
                            <div class="col-md-4 col-md-offset-1"><label>Sensor Type:</label></div>
                            <div class="col-md-6"><span>{{sensor.sensorType || '---'}}</span></div>
                        </div>
                        <!-- Sensor Type*: (edit) -->
                        <div class="form-group required" ng-if="view.DEPval == 'edit'">
                            <label class="col-md-4 col-md-offset-1 req control-label">Sensor Type:</label>
                            <div class="col-md-6">
                                <select class="form-control" name="sensor_type_id" ng-model="depStuffCopy[0].sensor_type_id"
                                        ng-options="s.sensor_type_id as s.sensor for s in sensorTypeList" ng-change="getDepTypes(depStuffCopy[0])" required>
                                    <option value=""></option>
                                </select>
                            </div>
                        </div>

                        <!-- Sensor Brand*: (detail) -->
                        <div class="col-md-12" ng-if="view.DEPval == 'detail'">
                            <div class="col-md-4 col-md-offset-1"><label>Sensor Brand:</label></div>
                            <div class="col-md-6"><span>{{sensor.sensorBrand || '---'}}</span></div>
                        </div>
                        <!-- Sensor Brand*: (edit) -->
                        <div class="form-group required" ng-if="view.DEPval == 'edit'">
                            <label class="col-md-4 col-md-offset-1 req control-label">Sensor Brand:</label>
                            <div class="col-md-6">
                                <select class="form-control" name="sensor_brand_id" ng-model="depStuffCopy[0].sensor_brand_id"
                                        ng-options="sb.sensor_brand_id as sb.brand_name for sb in sensorBrandList" required>
                                    <option value=""></option>
                                </select>
                            </div>
                        </div>

                        <!-- Serial Number*: (detail) -->
                        <div class="col-md-12" ng-if="view.DEPval == 'detail'">
                            <div class="col-md-4 col-md-offset-1"><label>Serial Number:</label></div>
                            <div class="col-md-6"><span>{{sensor.serial_number || '---'}}</span></div>
                        </div>
                        <!-- Serial Number*: (edit) -->
                        <div class="form-group required" ng-if="view.DEPval == 'edit'">
                            <label class="col-md-4 col-md-offset-1 req control-label">Serial Number:</label>
                            <div class="col-md-6">
                                <input class="form-control" name="serial_number" ng-model="depStuffCopy[0].serial_number" type="text" required />
                            </div>
                            <button type="button" class="col-md-1 borderLess pull-left" tooltip-placement="right" tooltip-append-to-body="false" uib-tooltip="Will be used in netCDF metadata.">
                                <span class="glyphicon glyphicon-question-sign"></span>
                            </button>
                        </div>

                        <!-- Housing Serial Number: (detail) -->
                        <div class="col-md-12" ng-if="view.DEPval == 'detail'">
                            <div class="col-md-4 col-md-offset-1"><label>Housing Serial Number:</label></div>
                            <div class="col-md-6"><span>{{sensor.housing_serial_number || '---'}}</span></div>
                        </div>
                        <!-- Housing Serial Number: (edit) -->
                        <div class="form-group" ng-if="view.DEPval == 'edit'">
                            <label class="col-md-4 col-md-offset-1 control-label">Housing Serial Number:</label>
                            <div class="col-md-6">
                                <input class="form-control" name="housing_serial_number" ng-model="depStuffCopy[0].housing_serial_number" type="text" />
                            </div>
                            <button type="button" class="col-md-1 borderLess pull-left" tooltip-placement="right" tooltip-append-to-body="false" uib-tooltip="Required for DOI WATCH OFFICE 800 number.">
                                <span class="glyphicon glyphicon-question-sign"></span>
                            </button>
                        </div>

                        <!-- Housing Types: (detail) -->
                        <div class="col-md-12" ng-if="view.DEPval == 'detail'">
                            <div class="col-md-4 col-md-offset-1"><label>Housing Types:</label></div>
                            <div class="col-md-6"><span>{{sensor.housingType || '---'}}</span></div>
                        </div>
                        <!-- Housing Types: (edit) -->
                        <div class="form-group" ng-if="view.DEPval == 'edit'">
                            <label class="col-md-4 col-md-offset-1 control-label">Housing Types:</label>
                            <div class="col-md-6">
                                <select class="form-control" id="housing_type_id" name="housing_type_id" ng-model="depStuffCopy[0].housing_type_id"
                                        ng-options="ht.housing_type_id as ht.type_name for ht in houseTypeList">
                                    <option value=""></option>
                                </select>
                            </div>
                        </div>
                        <br clear="all" /><hr />
                        <!-- tapedown (detail)-->
                        <div class="col-md-12" ng-if="view.DEPval == 'detail'">
                            <div class="col-md-4 col-md-offset-1"><label>Tapedowns:</label></div>
                            <div class="col-md-6">
                                <div ng-show="DEPtapeDownTable.length > 0">
                                    <div class="col-md-8">
                                        <table class="table table-condensed">
                                            <thead>
                                                <tr>
                                                    <td style="text-align:center">Datum Location</td>
                                                    <td style="text-align:center">Elevation</td>
                                                    <td style="text-align:center">Offset Correction</td>
                                                    <td style="text-align:center">Water Surface</td>
                                                    <td style="text-align:center">Ground Surface</td>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr ng-repeat="dt in DEPtapeDownTable">
                                                    <td>{{dt.op_name}}</td>
                                                    <td style="text-align:center">{{dt.elevation}} {{dt.Vdatum}}</td>
                                                    <td style="text-align:center">{{dt.offset_correction}}</td>
                                                    <td style="text-align:center">{{dt.water_surface}}</td>
                                                    <td style="text-align:center">{{dt.ground_surface}}</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                                <div ng-show="DEPtapeDownTable.length == 0">None chosen</div>
                            </div>
                        </div><!--end detail for Tapedowns-->
                        <!-- tapedown (edit)-->
                        <div class="form-group" ng-if="view.DEPval == 'edit'">
                            <label class="col-md-4 col-md-offset-1 control-label">Tapedowns:</label>
                            <div class="col-md-6"></div>
                            <button type="button" class="col-md-1 borderLess pull-left" tooltip-placement="left" tooltip-append-to-body="false" uib-tooltip="These elevations and tape down data are used for both field activities and final products. Please pay attention to how your data is entered.">
                                <span class="glyphicon glyphicon-question-sign"></span>
                            </button>
                            <div class="col-md-12">
                                <!--start add tapedown area -->
                                <div ng-if="OPsPresent" class="col-md-8 pull-right">
                                    <label class="col-md-4 control-label">Datum Locations:</label>
                                    <div class="col-md-6">
                                        <div isteven-multi-select
                                             input-model="DEPOPsForTapeDown"
                                             output-model="DEPOPMeasure"
                                             button-label="name"
                                             item-label="name"
                                             on-item-click="DEPOPchosen(data)"
                                             tick-property="selected"
                                             helper-elements="filter">
                                        </div>
                                    </div>
                                </div>
                                <div ng-if="!OPsPresent"><span>No Datum Locations added to this site for tapedown</span></div>
                                <br clear="all" />
                                <div ng-if="OPsPresent" class="pull-right"><em>Note: these are not used for any calculations but are to facilitate field activities</em></div>
                                <div ng-show="depTapeCopy.length > 0">
                                    <table class="table">
                                        <thead>
                                            <tr>
                                                <th>Datum Location</th>
                                                <th>Elevation</th>
                                                <th class="col-sm-3">
                                                    Offset
                                                    <button type="button" class="borderLess" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="From the datum location to the sensor orifice.">
                                                        <span class="glyphicon glyphicon-question-sign"></span>
                                                    </button>
                                                    <br />Correction
                                                </th>
                                                <th class="col-sm-2">Water Surface</th>
                                                <th class="col-sm-2">Ground Surface</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr ng-repeat="t in depTapeCopy">
                                                <td>{{t.op_name}}<input type="hidden" ng-model="t.objective_type_id" /><input type="hidden" ng-model="t.op_measurements_id" /></td>
                                                <td>
                                                    {{t.elevation}} {{t.Vdatum}}
                                                </td>
                                                <td><input class="form-control" ng-keypress="isNum($event)" ng-model="t.offset_correction" /></td>
                                                <td><input class="form-control" ng-keypress="isNum($event)" ng-model="t.water_surface" /></td>
                                                <td><input class="form-control" ng-keypress="isNum($event)" ng-model="t.ground_surface" /></td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>

                        </div><!--end formgroup for Tapedowns-->
                        <br clear="all" />

                        <!--sensor stat tapedown parts-->
                        <!-- Sensor Elevation (detail) -->
                        <div ng-if="OPsPresent && view.DEPval == 'detail'" class="col-md-12">
                            <div class="col-md-4 col-md-offset-1"><label>Sensor Elevation:</label></div>
                            <div class="col-md-6"><span>{{DeployedSensorStat.sensor_elevation || '--'}}</span></div>
                        </div>
                        <!-- Sensor Elevation (edit) -->
                        <div ng-if="OPsPresent && view.DEPval == 'edit'" class="form-group">
                            <label class="col-md-4 col-md-offset-1 control-label">Sensor Elevation:</label>
                            <div class="col-md-6">
                                <input class="form-control" ng-keypress="isNum($event)" name="sensor_elevation" ng-model="depStuffCopy[1].sensor_elevation" type="text" />
                            </div>
                            <button type="button" class="col-md-1 borderLess pull-left" tooltip-placement="right" tooltip-append-to-body="false" uib-tooltip="Using the offset correction, elevation of the sensor orifice.">
                                <span class="glyphicon glyphicon-question-sign"></span>
                            </button>
                        </div>

                        <!-- Water Surface Elevation (detail) -->
                        <div ng-if="OPsPresent && view.DEPval == 'detail'" class="col-md-12">
                            <div class="col-md-4 col-md-offset-1"><label>Water Surface Elevation:</label></div>
                            <div class="col-md-6"><span>{{DeployedSensorStat.ws_elevation || '--'}}</span></div>
                        </div>
                        <!-- Water Surface Elevation (edit) -->
                        <div ng-if="OPsPresent && view.DEPval == 'edit'" class="form-group">
                            <label class="col-md-4 col-md-offset-1 control-label">Water Surface Elevation:</label>
                            <div class="col-md-6">
                                <input class="form-control" ng-keypress="isNum($event)" name="ws_elevation" ng-model="depStuffCopy[1].ws_elevation" type="text" />
                            </div>
                            <button type="button" class="col-md-1 borderLess pull-left" tooltip-placement="right" tooltip-append-to-body="false" uib-tooltip="Using the water surface tape down, elevation of the water surface.">
                                <span class="glyphicon glyphicon-question-sign"></span>
                            </button>
                        </div>

                        <!-- Ground Elevation (detail) -->
                        <div ng-if="OPsPresent && view.DEPval == 'detail'" class="col-md-12">
                            <div class="col-md-4 col-md-offset-1"><label>Ground Elevation:</label></div>
                            <div class="col-md-6"><span>{{DeployedSensorStat.gs_elevation || '--'}}</span></div>
                        </div>
                        <!-- Ground Elevation (edit) -->
                        <div ng-if="OPsPresent && view.DEPval == 'edit'" class="form-group">
                            <label class="col-md-4 col-md-offset-1 control-label">Ground Elevation:</label>
                            <div class="col-md-6">
                                <input class="form-control" ng-keypress="isNum($event)" name="gs_elevation" ng-model="depStuffCopy[1].gs_elevation" type="text" />
                            </div>
                            <button type="button" class="col-md-1 borderLess pull-left" tooltip-placement="right" tooltip-append-to-body="false" uib-tooltip="Using the ground surface tape down, elevation of the ground surface.">
                                <span class="glyphicon glyphicon-question-sign"></span>
                            </button>
                        </div>

                        <!-- In feet above (detail) -->
                        <div ng-if="OPsPresent && view.DEPval == 'detail'" class="col-md-12">
                            <div class="col-md-4 col-md-offset-1"><label>In feet above:</label></div>
                            <div class="col-md-6"><span>{{DeployedSensorStat.vdatumName}}</span></div>
                        </div>
                        <!-- In feet above (edit) -->
                        <div ng-if="OPsPresent && view.DEPval == 'edit'" class="form-group">
                            <label class="col-md-4 col-md-offset-1 control-label">In feet above:</label>
                            <div class="col-md-6">
                                <select class="form-control" id="vdatum_id" name="vdatum_id" ng-model="depStuffCopy[1].vdatum_id"
                                        ng-options="vd.datum_id as vd.datum_abbreviation for vd in vertDatumList">
                                    <option value=""></option>
                                </select>
                            </div>
                        </div>
                        <div ng-if="OPsPresent && view.DEPval == 'edit'" class="col-md-12"><em>Note: these elevations are used in the sensor processing and the final products</em></div>
                        <br clear="all" /><hr />

                        <!-- Vented (only if Sensor Type is Pressure Transducer) (detail)-->
                        <div ng-show="(sensor.sensor_type_id == 1 || depStuffCopy[0].sensor_type_id == 1) && view.DEPval == 'detail'">
                            <div class="col-md-12">
                                <div class="col-md-4 col-md-offset-1"><label>Vented:</label></div>
                                <div class="col-md-6"><span>{{sensor.vented || '---'}}</span></div>
                            </div>
                        </div>
                        <!-- Vented (only if Sensor Type is Pressure Transducer) (edit)-->
                        <div ng-show="(sensor.sensor_type_id == 1 || depStuffCopy[0].sensor_type_id == 1) && view.DEPval == 'edit'">
                            <div class="form-group">
                                <label class="col-md-4 col-md-offset-1 control-label">Vented:</label>
                                <div class="col-md-6">
                                    <span class="radio-inline">
                                        <input type="radio" name="vented" ng-model="depStuffCopy[0].vented" value="Yes" />Yes
                                    </span>
                                    <span class="radio-inline">
                                        <input type="radio" name="vented" ng-model="depStuffCopy[0].vented" value="No" />No
                                    </span>
                                </div>
                            </div>
                        </div>

                        <!-- Deployment Type: (detail) -->
                        <div class="col-md-12" ng-if="view.DEPval == 'detail'">
                            <div class="col-md-4 col-md-offset-1"><label>Deployment Type:</label></div>
                            <div class="col-md-6"><span>{{sensor.deploymentType || '---'}}</span></div>
                        </div>
                        <!-- Deployment Type: (edit)-->
                        <div class="form-group" ng-if="view.DEPval == 'edit'">
                            <label class="col-md-4 col-md-offset-1 control-label">Deployment Type:</label>
                            <div class="col-md-6">
                                <select class="form-control" id="deployment_type_id" name="deployment_type_id" ng-model="depStuffCopy[0].deployment_type_id"
                                        ng-options="dt.deployment_type_id as dt.method for dt in filteredDeploymentTypes">
                                    <option value=""></option>
                                </select>
                            </div>
                        </div>

                        <!-- Location Description: (detail) -->
                        <div class="col-md-12" ng-if="view.DEPval == 'detail'">
                            <div class="col-md-4 col-md-offset-1"><label>Location Description:</label></div>
                            <div class="col-md-6"><span>{{sensor.location_description || '---'}}</span></div>
                        </div>
                        <!-- Location Description: (edit) -->
                        <div class="form-group" ng-if="view.DEPval == 'edit'">
                            <label class="col-md-4 col-md-offset-1 control-label">Location Description:</label>
                            <div class="col-md-6">
                                <textarea class="form-control" id="location_description" name="location_description" type=" text" rows="3" ng-model="depStuffCopy[0].location_description" />
                            </div>
                            <button type="button" class="col-md-1 borderLess pull-left" tooltip-placement="right" tooltip-append-to-body="false" uib-tooltip="Please be specific so someone else can find this sensor later. This field is public.">
                                <span class="glyphicon glyphicon-question-sign"></span>
                            </button>
                        </div>

                        <!-- Interval: -->
                        <div class="form-group" ng-show="view.DEPval == 'edit'">
                            <label class="col-md-4 control-label"></label>
                            <div class="col-md-6 col-md-offset-1" style="padding-top:5px;">
                                <span class="radio-inline">
                                    <input type="radio" name="intervalType" ng-model="IntervalType.type" value="Minutes" />Minutes
                                </span>
                                <span class="radio-inline">
                                    <input type="radio" name="intervalType" ng-model="IntervalType.type" value="Seconds" />Seconds
                                </span>
                            </div>
                        </div>
                        <!-- interval (detail)-->
                        <div class="col-md-12" ng-if="view.DEPval == 'detail'">
                            <div class="col-md-4 col-md-offset-1"><label>Interval:</label></div>
                            <div class="col-md-6"><span>{{sensor.interval || '---'}} <span ng-if='sensor.interval'>seconds</span></span></div>
                        </div>
                        <!-- interval (edit)-->
                        <div class="form-group" ng-if="view.DEPval == 'edit'">
                            <label class="col-md-4 col-md-offset-1 control-label">Interval:</label>
                            <div class="col-md-6">
                                <input class="form-control" ng-keypress="isNum($event)" name="interval" ng-model="depStuffCopy[0].interval" type="text" />
                            </div>
                        </div>

                        <!-- Deploy Date*: (detail)-->
                        <div class="col-md-12" ng-if="view.DEPval == 'detail'">
                            <div class="col-md-4 col-md-offset-1"><label>Deploy Date:</label></div>
                            <div class="col-md-6"><span>{{DeployedSensorStat.time_stamp | date: 'MM/dd/yyyy hh:mm a'}}</span></div>
                        </div>
                        <!-- Deploy Date*: (edit)-->
                        <div class="form-group required" ng-if="view.DEPval == 'edit'">
                            <label class="col-md-4 col-md-offset-1 control-label topPad">Deploy Date:</label>
                            <div class="col-md-6">
                                <datetimepicker hour-step="1" minute-step="1" ng-model="depStuffCopy[1].time_stamp" show-meridian="true"
                                                date-format="MM/dd/yyyy" readonly-date="false" readonly-time="false" date-options="dateOptions"
                                                hidden-time="false" hidden-date="false" show-spinners="true" required>
                                </datetimepicker>
                            </div>
                        </div>

                        <!-- Deploy timezone*: (detail)-->
                        <div class="col-md-12" ng-if="view.DEPval == 'detail'">
                            <div class="col-md-4 col-md-offset-1 req"><label>Time Zone:</label></div>
                            <div class="col-md-6"><span>{{DeployedSensorStat.time_zone}}</span></div>
                        </div>
                        <!-- Deploy timezone*: (edit)-->
                        <div class="form-group required" ng-if="view.DEPval == 'edit'">
                            <label class="col-md-4 col-md-offset-1 req control-label">Time Zone:</label>
                            <div class="col-md-6">
                                <select class="form-control" name="time_zone" ng-model="depStuffCopy[1].time_zone" ng-options="vcm for vcm in timeZoneList" required>
                                    <option value=""></option>
                                </select>
                            </div>
                            <button type="button" class="borderLess pull-left" tooltip-placement="right" tooltip-append-to-body="false" uib-tooltip="Date/Time will be stored in UTC.">
                                <span class="glyphicon glyphicon-question-sign"></span>
                            </button>
                        </div>

                        <!-- Note: (detail)-->
                        <div class="col-md-12" ng-if="view.DEPval == 'detail'">
                            <div class="col-md-4 col-md-offset-1"><label>Note:</label></div>
                            <div class="col-md-6"><span>{{DeployedSensorStat.notes || '---'}}</span></div>
                        </div>
                        <!-- Note: (edit)-->
                        <div class="form-group" ng-if="view.DEPval == 'edit'">
                            <label class="col-md-4 col-md-offset-1 control-label">Note:</label>
                            <div class="col-md-6">
                                <textarea class="form-control" name="notes" type="text" rows="3" ng-model="depStuffCopy[1].notes" />
                            </div>
                        </div>

                        <!-- Deploy Member: (detail)-->
                        <div class="col-md-12" ng-if="view.DEPval == 'detail'">
                            <div class="col-md-4 col-md-offset-1"><label>Deploy Member:</label></div>
                            <div class="col-md-6">{{Deployer.fname}} {{Deployer.lname}}</div>
                        </div>
                        <!-- Deploy Member: (edit)-->
                        <div class="form-group" ng-if="view.DEPval == 'edit'">
                            <label class="col-md-4 col-md-offset-1 control-label">Deploy Member:</label>
                            <div class="col-md-6">{{Deployer.fname}} {{Deployer.lname}}</div>
                        </div>

                        <div class="form-group">
                            <div class="col-md-12">
                                <span>
                                    <button ng-show="view.DEPval == 'detail'" ng-disabled="view.RETval == 'edit'" type="button" class="btn btn-primary" ng-click="wannaEditDep()">
                                        <span>Edit Deployed Sensor</span>
                                    </button>
                                </span>
                                <span>
                                    <button ng-show="view.DEPval == 'edit'" class="btn btn-primary" ng-click="saveDeployed(editableDeployedForm.$valid)">
                                        <span>Save</span>
                                    </button>
                                </span>
                                <span>
                                    <button ng-show="view.DEPval == 'edit'" type="button" class=" btn btn-primary" ng-click="cancelDepEdit()">
                                        <span>Cancel</span>
                                    </button>
                                </span>
                            </div>
                        </div>
                    </fieldset>
                </form>
            </uib-accordion-group>

            <!--Retrieved Sensor Part-->
            <uib-accordion-group is-open="s.retOpen">
                <uib-accordion-heading>
                    <i style="margin-right:10px" class="pull-left glyphicon" ng-class="{'glyphicon-chevron-down': s.retOpen, 'glyphicon-chevron-right': !s.retOpen}"></i>
                    <span ng-class="{'redText':view.RETval == 'edit'}">{{mostRecentStatus}} Sensor Information</span>
                </uib-accordion-heading>
                <form name="editableRetrievedForm">
                    <fieldset>
                        <!-- Status Type:*(detail) -->
                        <div class="col-md-12" ng-if="view.RETval == 'detail'">
                            <div class="col-md-4 col-md-offset-1"><label>Status:</label></div>
                            <div class="col-md-6"><span>{{RetrievedSensorStat.status || '---'}}</span></div>
                        </div>
                        <!-- Status Type:*(edit) -->
                        <div class="form-group required" ng-if="view.RETval == 'edit'">
                            <label class="col-md-4 col-md-offset-1 control-label req">Status:</label>
                            <div class="col-md-6">
                                <select class="form-control" name="status_type_id" ng-model="retStuffCopy[1].status_type_id" ng-options="s.status_type_id as s.status for s in statusTypeList" required>
                                    <option value=""></option>
                                </select>
                            </div>
                        </div>

                        <!-- Collection Condition:*(detail) -->
                        <div class="col-md-12" ng-if="view.RETval == 'detail'">
                            <div class="col-md-4 col-md-offset-1"><label>Collection Conditions:</label></div>
                            <div class="col-md-6"><span>{{sensor.instCollection || '---'}}</span></div>
                        </div>
                        <!-- Collection Condition:* (edit)-->
                        <div class="form-group required" ng-if="view.RETval == 'edit'">
                            <label class="col-md-4 col-md-offset-1 control-label req" for="inst_collection_id">Collection Conditions:</label>
                            <div class="col-md-6">
                                <select class="form-control" name="inst_collection_id" ng-model="retStuffCopy[0].inst_collection_id"
                                        ng-options="ins.id as ins.condition for ins in collectCondList" required>
                                    <option value=""></option>
                                </select>
                            </div>
                        </div>

                        <!-- Note: (detail)-->
                        <div class="col-md-12" ng-if="view.RETval == 'detail'">
                            <div class="col-md-4 col-md-offset-1"><label>Note:</label></div>
                            <div class="col-md-6"><span>{{RetrievedSensorStat.notes || '---'}}</span></div>
                        </div>
                        <!-- Note:(edit) -->
                        <div class="form-group" ng-if="view.RETval == 'edit'">
                            <label class="col-md-4 col-md-offset-1 control-label" for="notes">Note:</label>
                            <div class="col-md-6">
                                <textarea class="form-control" name="notes" type="text" rows="3" ng-model="retStuffCopy[1].notes" />
                            </div>
                        </div>

                        <!-- Retrieve Time: *(detail) -->
                        <div class="col-md-12" ng-if="view.RETval == 'detail'">
                            <div class="col-md-4 col-md-offset-1"><label>Retrieve Date:</label></div>
                            <div class="col-md-6"><span>{{RetrievedSensorStat.time_stamp | date: 'MM/dd/yyyy hh:mm a'}}</span></div>
                        </div>
                        <!-- Retrieve Time: *(edit) -->
                        <div class="form-group required" ng-if="view.RETval == 'edit'">
                            <label class="col-md-4 col-md-offset-1 control-label topPad">Retrieve Date:</label>
                            <div class="col-md-6">
                                <datetimepicker hour-step="1" minute-step="1" ng-model="retStuffCopy[1].time_stamp" show-meridian="true" date-format="MM/dd/yyyy"
                                                readonly-date="false" readonly-time="false" date-options="dateOptions" hidden-time="false" hidden-date="false" show-spinners="true" required>
                                </datetimepicker>
                            </div>
                        </div>

                        <!-- Timezone*:(detail)-->
                        <div class="col-md-12" ng-if="view.RETval == 'detail'">
                            <div class="col-md-4 col-md-offset-1"><label>Time Zone:</label></div>
                            <div class="col-md-6"><span>{{RetrievedSensorStat.time_zone}}</span></div>
                        </div>
                        <!-- Timezone*: (edit)-->
                        <div class="form-group required" ng-if="view.RETval == 'edit'">
                            <label class="col-md-4 col-md-offset-1 req control-label">Time Zone:</label>
                            <div class="col-md-6">
                                <select class="form-control" name="time_zone" ng-model="retStuffCopy[1].time_zone" ng-options="vcm for vcm in timeZoneList" required>
                                    <option value=""></option>
                                </select>
                            </div>
                            <button type="button" class="borderLess pull-left" tooltip-placement="right" tooltip-append-to-body="false" uib-tooltip="Date/Time will be stored in UTC.">
                                <span class="glyphicon glyphicon-question-sign"></span>
                            </button>
                        </div>

                        <br clear="all" /><hr />

                        <!-- tapedown (detail)-->
                        <div class="col-md-12" ng-if="view.RETval == 'detail'">
                            <label class="col-md-4 col-md-offset-1 control-label">Tapedowns:</label>
                            <div class="col-md-6">
                                <div ng-show="RETtapeDownTable.length > 0">
                                    <div class="col-md-8">
                                        <table class="table table-condensed">
                                            <thead>
                                                <tr>
                                                    <td style="text-align:center">Datum Location</td>
                                                    <td style="text-align:center">Elevation</td>
                                                    <td style="text-align:center">Offset Correction</td>
                                                    <td style="text-align:center">Water Surface</td>
                                                    <td style="text-align:center">Ground Surface</td>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr ng-repeat="rt in RETtapeDownTable">
                                                    <td>{{rt.op_name}}</td>
                                                    <td style="text-align:center">{{rt.elevation}} {{rt.Vdatum}}</td>
                                                    <td style="text-align:center">{{rt.offset_correction}}</td>
                                                    <td style="text-align:center">{{rt.water_surface}}</td>
                                                    <td style="text-align:center">{{rt.ground_surface}}</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                                <div ng-show="RETtapeDownTable.length == 0">None chosen</div>
                            </div>
                        </div><!--end tapedown detail -->
                        <!-- tapedown (edit)-->
                        <div class="form-group" ng-if="view.RETval == 'edit'">
                            <label class="col-md-4 col-md-offset-1 control-label">Tapedowns:</label>
                            <div class="col-md-6"></div>
                            <button type="button" class="col-md-1 borderLess pull-left" tooltip-placement="left" tooltip-append-to-body="false" uib-tooltip="These elevations and tape down data are used for both field activities and final products. Please pay attention to how your data is entered.">
                                <span class="glyphicon glyphicon-question-sign"></span>
                            </button>
                            <div class="col-md-12">
                                <div ng-if="OPsPresent" class="col-md-8 pull-right">
                                    <label class="col-md-4 control-label">Datum Locations:</label>
                                    <div class="col-md-6">
                                        <div isteven-multi-select
                                             input-model="RETOPsForTapeDown"
                                             output-model="RETOPMeasure"
                                             button-label="name"
                                             item-label="name"
                                             on-item-click="RETOPchosen(data)"
                                             tick-property="selected"
                                             helper-elements="filter">
                                        </div>
                                    </div>
                                </div>
                                <div ng-if="!OPsPresent"><span>No Datum Locations added to this site for tapedown</span></div>
                                <br clear="all" />
                                <div ng-if="OPsPresent" class="pull-right"><em>Note: these are not used for any calculations but are to facilitate field activities</em></div>
                                <div ng-show="retTapeCopy.length > 0">
                                    <table class="table">
                                        <thead>
                                            <tr>
                                                <th>Datum Location</th>
                                                <th>Elevation</th>
                                                <th class="col-sm-3">
                                                    Offset
                                                    <button type="button" class="borderLess" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="From the datum location to the sensor orifice.">
                                                        <span class="glyphicon glyphicon-question-sign"></span>
                                                    </button>
                                                    <br />Correction
                                                </th>
                                                <th class="col-sm-2">Water Surface</th>
                                                <th class="col-sm-2">Ground Surface</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr ng-repeat="rt in retTapeCopy">
                                                <td>{{rt.op_name}}<input type="hidden" ng-model="rt.objective_type_id" /><input type="hidden" ng-model="rt.op_measurements_id" /></td>
                                                <td>
                                                    {{rt.elevation}} {{t.Vdatum}}
                                                </td>
                                                <td><input class="form-control" ng-keypress="isNum($event)" ng-model="rt.offset_correction" /></td>
                                                <td><input class="form-control" ng-keypress="isNum($event)" ng-model="rt.water_surface" /></td>
                                                <td><input class="form-control" ng-keypress="isNum($event)" ng-model="rt.ground_surface" /></td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div><!--end formgroup -->

                        <br clear="all" />
                        <!--sensor stat tapedown parts-->
                        <!--sensor Elevation (detail)-->
                        <div ng-if="OPsPresent && view.RETval == 'detail'" class="col-md-12">
                            <div class="col-md-4 col-md-offset-1"><label>Sensor Elevation:</label></div>
                            <div class="col-md-6"><span>{{RetrievedSensorStat.sensor_elevation || '--'}}</span></div>
                        </div>
                        <!--sensor Elevation (edit)-->
                        <div ng-if="OPsPresent && view.RETval == 'edit'" class="form-group">
                            <label class="col-md-4 col-md-offset-1 control-label">Sensor Elevation:</label>
                            <div class="col-md-6">
                                <input class="form-control" ng-keypress="isNum($event)" name="sensor_elevation" ng-model="retStuffCopy[1].sensor_elevation" type="text" />
                            </div>
                        </div>

                        <!--Water Surface Elevation (detail)-->
                        <div ng-if="OPsPresent && view.RETval == 'detail'" class="col-md-12">
                            <div class="col-md-4 col-md-offset-1"><label>Water Surface Elevation:</label></div>
                            <div class="col-md-6"><span>{{RetrievedSensorStat.ws_elevation || '--'}}</span></div>
                        </div>
                        <!--Water Surface Elevation (edit)-->
                        <div ng-if="OPsPresent && view.RETval == 'edit'" class="form-group">
                            <label class="col-md-4 col-md-offset-1 control-label">Water Surface Elevation:</label>
                            <div class="col-md-6">
                                <input class="form-control" ng-keypress="isNum($event)" name="ws_elevation" ng-model="retStuffCopy[1].ws_elevation" type="text" />
                            </div>
                        </div>

                        <!--Ground Elevation (detail)-->
                        <div ng-if="OPsPresent && view.RETval == 'detail'" class="col-md-12">
                            <div class="col-md-4 col-md-offset-1"><label>Ground Elevation:</label></div>
                            <div class="col-md-6"><span>{{RetrievedSensorStat.gs_elevation || '--'}}</span></div>
                        </div>
                        <!--Ground Elevation (edit)-->
                        <div ng-if="OPsPresent && view.RETval == 'edit'" class="form-group">
                            <label class="col-md-4 col-md-offset-1 control-label">Ground Elevation:</label>
                            <div class="col-md-6">
                                <input class="form-control" ng-keypress="isNum($event)" name="gs_elevation" ng-model="retStuffCopy[1].gs_elevation" type="text" />
                            </div>
                        </div>

                        <!--in feet above (detail)-->
                        <div ng-if="OPsPresent && view.RETval == 'detail'" class="col-md-12">
                            <label class="col-md-4 col-md-offset-1">In feet above:</label>
                            <div class="col-md-6"><span>{{RetrievedSensorStat.vdatumName}}</span></div>
                        </div>
                        <!--in feet above (edit)-->
                        <div ng-if="OPsPresent && view.RETval == 'edit'" class="form-group">
                            <label class="col-md-4 col-md-offset-1 control-label">In feet above:</label>
                            <div class="col-md-6">
                                <select class="form-control" id="vdatum_id" name="vdatum_id" ng-model="retStuffCopy[1].vdatum_id"
                                        ng-options="vd.datum_id as vd.datum_abbreviation for vd in vertDatumList">
                                    <option value=""></option>
                                </select>
                            </div>
                        </div>
                        <div ng-if="OPsPresent && view.RETval == 'edit'" class="col-md-12"><em>Note: these elevations are used in the sensor processing and the final products</em></div>
                        <br clear="all" /><hr />

                        <!-- Retrieve Member: (detail) -->
                        <div class="col-md-12" ng-if="view.RETval == 'detail'">
                            <div class="col-md-4 col-md-offset-1"><label>Member:</label></div>
                            <div class="col-md-6">{{Retriever.fname}} {{Retriever.lname}}</div>
                        </div>
                        <!-- Retrieve Member: (edit) -->
                        <div class="form-group required" ng-if="view.RETval == 'edit'">
                            <label class="col-md-4 col-md-offset-1 control-label">Member:</label>
                            <div class="col-md-6">{{Retriever.fname}} {{Retriever.lname}}</div>
                        </div>

                        <div class="form-group">
                            <div class="col-md-12">
                                <span>
                                    <button ng-show="view.RETval == 'detail'" ng-disabled="view.DEPval == 'edit'" type="button" class="btn btn-primary" ng-click="wannaEditRet()">
                                        <span>Edit {{mostRecentStatus}} Sensor</span>
                                    </button>
                                </span>
                                <span>
                                    <button ng-show="view.RETval == 'edit'" class="btn btn-primary" ng-click="saveRetrieved(editableRetrievedForm.$valid)">
                                        <span>Save</span>
                                    </button>
                                </span>
                                <span>
                                    <button ng-show="view.RETval == 'edit'" type="button" class=" btn btn-primary" ng-click="cancelRetEdit()">
                                        <span>Cancel</span>
                                    </button>
                                </span>
                            </div>
                        </div>
                    </fieldset>
                </form>
            </uib-accordion-group>

            <!--Sensor File Part-->
            <uib-accordion-group is-open="s.sFileOpen">
                <uib-accordion-heading>
                    <i style="margin-right:10px" class="pull-left glyphicon" ng-class="{'glyphicon-chevron-down': s.sFileOpen, 'glyphicon-chevron-right': !s.sFileOpen}"></i>
                    <span ng-class="{'redText':showFileForm}">Sensor File Information</span>
                </uib-accordion-heading>
                <div class="col-md-12">
                    <div class="col-md-5"><h4>Sensor Files</h4></div>
                    <div class="col-md-6" ng-if="!showFileForm" style="margin-top:14px">
                        <button type="button" class="borderLess" ng-click="showFile(0)" tooltip-placement="right" uib-tooltip="Upload a new File to this Sensor">
                            <span class="glyphicon glyphicon-plus"></span>
                        </button>
                    </div>
                    <br clear="all" />
                    <!-- list of existing files for this op -->
                    <div class="col-md-6" ng-if="sensorFiles.length > 0">
                        <span ng-repeat="f in sensorFiles">
                            <ul style="padding-left: 0">
                                <li style="list-style:none;padding-bottom: 15px;">
                                    <span class="col-sm-9 borderLess" style="padding:0">
                                        <a class="btn borderLess" style="padding:0" title="{{f.file_date | date: 'MM/dd/yyyy'}} ({{f.name || f.file_id}})" ng-click="showFile(f)">{{f.file_date | date: 'MM/dd/yyyy'}} ({{f.name || f.file_id}})</a>
                                    </span>
                                </li>
                            </ul>
                        </span>
                    </div>
                    <!-- carousel of photo files -->
                    <div class="col-md-6" ng-if="sensImageFiles.length > 0" style="height:120px;">
                        <uib-carousel interval="4000">
                            <uib-slide ng-repeat="f in sensImageFiles">
                                <img ng-click="showImageModal(f.file_id)" ng-src="{{serverURL}}/Files/{{f.file_id}}/Item" />
                                <div class="carousel-caption">
                                    <p>{{f.name || f.file_id}}</p>
                                </div>
                            </uib-slide>
                        </uib-carousel>
                    </div>
                    <br clear="all" />

                    <div ng-if="showFileForm">
                        <hr />
                        <form class="form-horizontal" name="DepSenFILEForm">
                            <fieldset>
                                <!-- File Type* -->
                                <div class="form-group required" ng-class="{'has-error':DepSenFILEForm.filetype_id.$invalid && DepSenFILEForm.filetype_id.$dirty}" style="margin:0;padding:0">
                                    <label class="col-md-4 control-label req" for="filetype_id">File Type:</label>
                                    <div class="col-md-6">
                                        <select class="form-control" name="filetype_id" ng-model="aFile.filetype_id" ng-change="updateAgencyForCaption()" ng-options="ft.filetype_id as ft.filetype for ft in fileTypes" required>
                                            <option value=""></option>
                                        </select>
                                    </div>
                                </div>

                                <!--Upload Single Image with validations*-->
                                <div ng-if="aFile.file_id === undefined && aFile.filetype_id !== 8" class="form-group required" style="margin:0;padding:0">
                                    <label class="col-md-4 control-label" for="FILE">Upload File:</label>
                                    <div class="col-md-8">
                                        <input type="file" max="500000" file-model="aFile.File" />
                                        <img ngf-thumbnail="aFile.File" style="height:60px" class="thumbnail">
                                    </div>
                                </div>
                                <br clear="all" />

                                <!--File URL (LINK file)-->
                                <div ng-if="aFile.filetype_id === 8" class="form-group" style="margin:0;padding:0">
                                    <label class="col-md-4 control-label" for="name">File URL:</label>
                                    <div class="col-md-6">
                                        <input class="form-control" name="name" ng-model="aFile.name" type="text" />
                                    </div>
                                    <button type="button" class="col-md-1 borderLess pull-left" tooltip-placement="bottom" tooltip-append-to-body="false" uib-tooltip="Please link to persistent URLs or digital object identifier (doi) urls.">
                                        <span class="glyphicon glyphicon-question-sign"></span>
                                    </button>
                                </div>
                                <!--Data Processed by (Data) -->
                                <div ng-if="aFile.filetype_id === 2" class="form-group" style="margin:0;padding:0">
                                    <label class="col-md-4 control-label" for="processor_id">Data Process By:</label>
                                    <div class="col-md-6">
                                        <span>{{processor.fname}} {{processor.lname}}</span>
                                    </div>
                                </div>
                                <!-- Date Collected/Processed* (data)-->
                                <div ng-if="aFile.filetype_id === 2" class="form-group required" ng-class="{'has-error':DepSenFILEForm.collect_date.$invalid && DepSenFILEForm.collect_date.$dirty}" style="margin:0;padding:0">
                                    <label class="col-md-4 control-label req" for="collect_date">Date Collected/Processed:</label>
                                    <div class="col-md-3 input-group" style="padding-right:14px;padding-left:14px">
                                        <input class="form-control dateInputStyle" type="date" name="dfcd" uib-datepicker-popup="MM/dd/yyyy" show-weeks="false" is-open="datepickrs.dfcd" ng-model="datafile.collect_date" required />
                                        <span class="input-group-btn">
                                            <button class="btn btn-default" type="button" ng-click="open($event, 'dfcd')">
                                                <i class="glyphicon glyphicon-calendar" />
                                            </button>
                                        </span>
                                    </div>
                                </div>

                                <!--Source Name (photo)-->
                                <div class="form-group required" ng-if="aFile.filetype_id === 1" ng-class="{'has-error':DepSenFILEForm.FULLname.$invalid && DepSenFILEForm.FULLname.$dirty}" style="margin:0;padding:0">
                                    <label class="col-md-4 control-label req" for="source_id">Source Photographer:</label>
                                    <div class="col-md-6">
                                        <input class="form-control" name="FULLname" ng-model="aSource.FULLname" type="text" required />
                                    </div>
                                </div>

                                <!--Source Name (all other)-->
                                <div class="form-group required" ng-if="aFile.filetype_id  > 2" ng-class="{'has-error':DepSenFILEForm.FULLname.$invalid && DepSenFILEForm.FULLname.$dirty}" style="margin:0;padding:0">
                                    <label class="col-md-4 control-label req" for="source_id">Source Name:</label>
                                    <div class="col-md-6">
                                        <input class="form-control" name="FULLname" ng-model="aSource.FULLname" type="text" required />
                                    </div>
                                </div>

                                <!--Source Agency* (photo, allOther)-->
                                <div ng-if="aFile.filetype_id === 1 || aFile.filetype_id > 2" class="form-group required" ng-class="{'has-error':DepSenFILEForm.agency_id.$invalid && DepSenFILEForm.agency_id.$dirty}" style="margin:0;padding:0">
                                    <label class="col-md-4 control-label req" for="agency_id">Source Agency:</label>
                                    <div class="col-md-6">
                                        <select class="form-control" name="agency_id" ng-model="aSource.agency_id" ng-change="updateAgencyForCaption()"
                                                ng-options="a.agency_id as a.agency_name for a in agencies" required>
                                            <option value=""></option>
                                        </select>
                                    </div>
                                </div>

                                <!-- Photo Date * (photo) -->
                                <div ng-if="aFile.filetype_id === 1" class="form-group required" ng-class="{'has-error':DepSenFILEForm.photo_date.$invalid && DepSenFILEForm.photo_date.$dirty}" style="margin:0;padding:0">
                                    <label class="col-md-4 control-label req" for="photo_date">Photo Date:</label>
                                    <div class="col-md-3 input-group" style="padding-right:14px;padding-left:14px">
                                        <input class="form-control dateInputStyle" type="date" name="sd" uib-datepicker-popup="MM/dd/yyyy" show-weeks="false" is-open="datepickrs.sd" ng-model="aFile.photo_date" required />
                                        <span class="input-group-btn">
                                            <button class="btn btn-default" type="button" ng-click="open($event, 'sd')">
                                                <i class="glyphicon glyphicon-calendar" />
                                            </button>
                                        </span>
                                    </div>
                                </div>

                                <!-- Date Uploaded* (photo, data, allother) -->
                                <div ng-if="aFile.filetype_id > 0" class="form-group required" ng-class="{'has-error':DepSenFILEForm.file_date.$invalid && DepSenFILEForm.file_date.$dirty}" style="margin:0;padding:0">
                                    <label class="col-md-4 control-label req" for="file_date">Date Uploaded:</label>
                                    <div class="col-md-3 input-group" style="padding-right:14px;padding-left:14px">
                                        <input class="form-control dateInputStyle" type="date" name="fd" uib-datepicker-popup="MM/dd/yyyy" show-weeks="false" is-open="datepickrs.fd" ng-model="aFile.file_date" required />
                                        <span class="input-group-btn">
                                            <button class="btn btn-default" type="button" ng-click="open($event, 'fd')">
                                                <i class="glyphicon glyphicon-calendar" />
                                            </button>
                                        </span>
                                    </div>
                                </div>

                                <!--Description*(photo, data, allother)-->
                                <div ng-if="aFile.filetype_id > 0" class="form-group required" ng-class="{'has-error':DepSenFILEForm.description.$invalid && DepSenFILEForm.description.$dirty}" style="margin:0;padding:0">
                                    <label class="col-md-4 control-label req" for="description">Description:</label>
                                    <div class="col-md-6">
                                        <textarea class="form-control" id="description" type="text" rows="3" placeholder="Description" ng-model="aFile.description" required />
                                    </div>
                                    <button ng-show="aFile.filetype_id == 1" type="button" class="col-md-1 borderLess pull-left" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Populates in Photo caption below.">
                                        <span class="glyphicon glyphicon-question-sign"></span>
                                    </button>
                                </div>

                                <!-- Good Data Start Time* (data) -->
                                <div ng-if="aFile.filetype_id === 2" class="form-group required" ng-class="{'has-error':DepSenFILEForm.good_start.$invalid && DepSenFILEForm.good_start.$dirty}" style="margin:0;padding:0">
                                    <label class="col-md-4 control-label req" for="good_start" style="margin-top:4%">Good Data Start Time:</label>
                                    <div class="col-md-6">
                                        <datetimepicker ng-model="datafile.good_start" show-meridian="true" date-format="MM/dd/yyyy" readonly-date="false" date-options="dateOptions"
                                                        hidden-time="false" hidden-date="false" show-spinners="true" date-opened="datepickrs.dfgs" date-ng-click="open($event, 'dfgs')" required>
                                        </datetimepicker>
                                    </div>
                                    <button type="button" style="margin-top:4%" class="col-md-1 borderLess pull-left" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Used by the processing scripts to clip irrelavent data.">
                                        <span class="glyphicon glyphicon-question-sign"></span>
                                    </button>
                                </div>

                                <!-- Good Data End Time* (data)-->
                                <div ng-if="aFile.filetype_id === 2" class="form-group required" ng-class="{'has-error':DepSenFILEForm.good_end.$invalid && DepSenFILEForm.good_end.$dirty}" style="margin:0;padding:0">
                                    <label class="col-md-4 control-label req" for="good_end" style="margin-top:4%">Good Data End Time:</label>
                                    <div class="col-md-6">
                                        <datetimepicker ng-model="datafile.good_end" show-meridian="true" date-format="MM/dd/yyyy" readonly-date="false" date-options="dateOptions"
                                                        hidden-time="false" hidden-date="false" show-spinners="true" date-opened="datepickrs.dfge" date-ng-click="open($event, 'dfge')" required>
                                        </datetimepicker>
                                    </div>
                                    <button type="button" style="margin-top:4%" class="col-md-1 borderLess pull-left" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Used by the processing scripts to clip irrelavent data.">
                                        <span class="glyphicon glyphicon-question-sign"></span>
                                    </button>
                                </div>

                                <!-- Timezone*: -->
                                <div ng-if="aFile.filetype_id === 2" class="form-group required" style="margin:0;padding:0">
                                    <label class="col-md-4 control-label req">Time Zone:</label>
                                    <div class="col-md-6">
                                        <select class="form-control" name="time_zone" ng-model="datafile.time_zone" ng-options="vcm for vcm in timeZoneList" required>
                                            <option value=""></option>
                                        </select>
                                    </div>
                                    <button type="button" class="col-md-1 borderLess pull-left" tooltip-placement="right" tooltip-append-to-body="false" uib-tooltip="Date/Time will be stored in UTC.">
                                        <span class="glyphicon glyphicon-question-sign"></span>
                                    </button>
                                </div>

                                <!-- Elevation -->
                                <div ng-if="aFile.filetype_id === 2" class="form-group" style="margin:0;padding:0">
                                    <label class="col-md-4 control-label">Elevation:</label>
                                    <div class="col-md-6">
                                        <span class="radio-inline">
                                            <input type="radio" name="elevation_status" ng-model="datafile.elevation_status" value="Final" />Final
                                        </span>
                                        <span class="radio-inline">
                                            <input type="radio" name="elevation_status" ng-model="datafile.elevation_status" value="Arbitrary" />Arbitrary
                                        </span>
                                    </div>
                                </div>

                                <!--Photo Direction (photo)-->
                                <div ng-if="aFile.filetype_id === 1" class="form-group" style="margin:0;padding:0;padding-top:5px;">
                                    <label class="col-md-4 control-label" for="photo_direction">Photo Direction:</label>
                                    <div class="col-md-6">
                                        <input class="form-control" id="photo_direction" name="photo_direction" ng-model="aFile.photo_direction" type="text" />
                                    </div>
                                </div>

                                <!-- Photo Latitude (photo)-->
                                <div ng-if="aFile.filetype_id === 1" class="form-group" style="margin:0;padding:0">
                                    <label class="col-md-4 control-label" for="latitude_dd">Photo Latitude <br /> (if different):</label>
                                    <div class="col-md-6">
                                        <input class="form-control" ng-keypress="isNum($event)" name="latitude_dd" id="latitude_dd" ng-model="aFile.latitude_dd"
                                               type="text" />
                                    </div>
                                </div>

                                <!--Photo Longitude (photo)-->
                                <div ng-if="aFile.filetype_id === 1" class="form-group" style="margin:0;padding:0">
                                    <label class="col-md-4 control-label" for="longitude_dd">Photo Longitude <br /> (if different):</label>
                                    <div class="col-md-6">
                                        <input class="form-control" ng-keypress="isNum($event)" id="longitude_dd" name="longitude_dd" ng-model="aFile.longitude_dd"
                                               type="text" />
                                    </div>
                                </div>

                                <!-- Approval info -->
                                <div class="form-group" ng-if="aFile.filetype_id === 2 && aFile.file_id !== undefined">
                                    <label class="col-md-4 control-label" for="approval_id">Approval Info:</label>
                                    <div class="col-md-6" ng-if="ApprovalInfo.Member !== undefined">
                                        <span>Approved By:</span><span ng-if="ApprovalInfo.Member"> {{ApprovalInfo.Member.fname || '---'}} {{ApprovalInfo.Member.lname || '---'}}</span><br />
                                        <span>On:</span><span ng-if="ApprovalInfo.approvalDate"> {{ApprovalInfo.approvalDate | date: 'MM/dd/yyyy hh:mm a' || '---'}}</span>
                                        <button ng-if="ApprovalInfo.approvalDate" type="button" class="borderLess" tooltip-placement="right" uib-tooltip="Time displayed as local, stored in UTC.">
                                            <span class="glyphicon glyphicon-question-sign"></span>
                                        </button>
                                    </div>
                                </div>

                                <div ng-if="aFile.filetype_id === 1" class="form-group" style="margin:0;padding:0">
                                    <label class="col-md-4 control-label" for="Caption">Preview Caption:</button></label>
                                    <div class="col-md-6">
                                        <span>
                                            Photo of {{aFile.description || ' (Description HERE) '}} at {{thisSensorSite.site_description}}, {{thisSensorSite.county}}, {{thisSensorSite.state}}, {{aFile.photo_date | date: 'MM/dd/yyyy' || ' Date taken HERE '}}. Photograph by {{aSource.FULLname || ' Source Name HERE ' }}, {{agencyNameForCap || ' Agency HERE '}}.
                                        </span>
                                    </div>
                                </div>

                                <div ng-if="aFile.file_id !== undefined && aFile.filetype_id !== 8" class="form-group" style="margin:0;padding:0">
                                    <label class="col-md-4 control-label">Download File:</label>
                                    <div class="col-md-6">
                                        <a target="_blank" title="Download file" ng-href="{{serverURL}}/Files/{{aFile.file_id}}/Item">
                                            <span class="glyphicon glyphicon-download"></span>
                                        </a>
                                        <img ng-if="aFile.filetype_id === 1" style="height:80px;" ng-src="{{serverURL}}/Files/{{aFile.file_id}}/Item" />
                                    </div>
                                </div>
                                <div ng-show="!fullSenfileIsUploading">
                                    <button class="btn btn-primary" ng-if="aFile.file_id != undefined" ng-click="saveFile(DepSenFILEForm.$valid)">Save File</button>
                                    <button type="button" ng-show="(datafile.data_file_id != undefined && ApprovalInfo.approvalDate == undefined) && (userRole == 'Admin' || userRole == 'Manager')"
                                            class="btn btn-primary" ng-click="approveDF(DepSenFILEForm.$valid)">
                                        <span>Approve</span>
                                    </button>
                                    <button type="button" ng-show="(datafile.data_file_id != undefined && ApprovalInfo.approvalDate != undefined) && (userRole == 'Admin' || userRole == 'Manager')"
                                            class="btn btn-primary" ng-click="unApproveDF(DepSenFILEForm.$valid)">
                                        <span>UnApprove</span>
                                    </button>
                                    <button type="button" class="btn btn-danger" ng-if="aFile.file_id != undefined" ng-click="deleteFile()">Delete File</button>
                                    <button class="btn btn-primary" ng-if="aFile.file_id == undefined" ng-click="createFile(DepSenFILEForm.$valid)">Create File</button>
                                    <button class="btn btn-warning" type="button" ng-click="cancelFile()">Close/Cancel File</button>
                                </div>
                                <div ng-show="fullSenfileIsUploading"><img src="images/fileUpload.gif" /></div>
                            </fieldset>
                        </form>
                    </div>
                </div>
            </uib-accordion-group>

            <!-- sensor files in nwis link part-->
            <div ng-if="sensorDataNWIS" style="margin-top:5px;">
                <uib-accordion-group is-open="s.NWISFileOpen">
                    <uib-accordion-heading>
                        <i style="margin-right:10px" class="pull-left glyphicon" ng-class="{'glyphicon-chevron-down': s.NWISFileOpen, 'glyphicon-chevron-right': !s.NWISFileOpen}"></i>
                        <span ng-class="{'redText':showNWISFileForm}">NWIS Data Connection</span>
                        <button type="button" class="col-md-1 borderLess pull-right" tooltip-placement="left" tooltip-append-to-body="false" uib-tooltip-html="nwisHeaderTip">
                            <span class="glyphicon glyphicon-question-sign"></span>
                        </button>
                    </uib-accordion-heading>
                    <div class="col-md-12">
                        <div class="col-md-5"><h4>NWIS metadata for sensor</h4></div>
                        <div class="col-md-2" ng-if="!showNWISFileForm" style="margin-top:14px">
                            <button type="button" class="borderLess" ng-click="showNWISFile(0)" tooltip-placement="top" uib-tooltip="Add file metadata to this Sensor">
                                <span class="glyphicon glyphicon-plus"></span>
                            </button>
                        </div>
                        <br clear="all" />
                        <!-- list of existing files for this op -->
                        <div class="col-md-6" ng-if="sensorNWISFiles.length > 0">
                            <span ng-repeat="f in sensorNWISFiles">
                                <ul style="padding-left: 0">
                                    <li style="list-style:none;padding-bottom: 15px;">
                                        <span class="col-sm-9 borderLess" style="padding:0">
                                            <a class="btn borderLess" style="padding:0" title="{{f.file_date | date: 'MM/dd/yyyy'}} ({{f.name || f.file_id}})" ng-click="showNWISFile(f)">{{f.file_date | date: 'MM/dd/yyyy'}} ({{f.name || f.file_id}})</a>
                                        </span>
                                    </li>
                                </ul>
                            </span>
                        </div>
                        <div ng-if="showNWISFileForm">
                            <br clear="all" /><hr />
                            <form class="form-horizontal" name="NWISSenFILEForm">
                                <fieldset>
                                    <!-- File Type* -->
                                    <div class="form-group" style="margin:0;padding:0">
                                        <label class="col-md-4 control-label">File Type:</label>
                                        <div class="col-md-6" style="margin-top:14px">
                                            <span>{{NWISFile.FileType}}</span>
                                        </div>
                                    </div>

                                    <br clear="all" />

                                    <!--File URL-->
                                    <div class="form-group" style="margin:0;padding:0">
                                        <label class="col-md-4 control-label" for="name">File URL:</label>
                                        <div class="col-md-6">
                                            <input class="form-control" name="name" title="{{NWISFile.name}}" ng- ng-model="NWISFile.name" type="text" />
                                        </div>
                                        <button type="button" class="col-md-1 borderLess pull-left" tooltip-placement="bottom" tooltip-append-to-body="false" uib-tooltip="Auto generated from USGS Station ID. Correct if necessary.">
                                            <span class="glyphicon glyphicon-question-sign"></span>
                                        </button>
                                    </div>

                                    <!--Data Processed by -->
                                    <div class="form-group" style="margin:0;padding:0">
                                        <label class="col-md-4 control-label" for="processor_id">Data Process By:</label>
                                        <div class="col-md-6" style="margin-top:14px">
                                            <span>{{nwisProcessor.fname}} {{nwisProcessor.lname}}</span>
                                        </div>
                                    </div>
                                    <!-- Date Collected/Processed* (data)-->
                                    <div class="form-group required" ng-class="{'has-error':NWISSenFILEForm.collect_date.$invalid && NWISSenFILEForm.collect_date.$dirty}" style="margin:0;padding:0">
                                        <label class="col-md-4 control-label req" for="collect_date">Date Collected/Processed:</label>
                                        <div class="col-md-3 input-group" style="padding-right:14px;padding-left:14px">
                                            <input class="form-control dateInputStyle" type="date" name="dfcd" uib-datepicker-popup="MM/dd/yyyy" show-weeks="false" is-open="datepickrs.dfcd" ng-model="NWISDF.collect_date" required />
                                            <span class="input-group-btn">
                                                <button class="btn btn-default" type="button" ng-click="open($event, 'dfcd')">
                                                    <i class="glyphicon glyphicon-calendar" />
                                                </button>
                                            </span>
                                        </div>
                                    </div>

                                    <!-- Date Uploaded* -->
                                    <div class="form-group required" ng-class="{'has-error':NWISSenFILEForm.file_date.$invalid && NWISSenFILEForm.file_date.$dirty}" style="margin:0;padding:0">
                                        <label class="col-md-4 control-label req" for="file_date">Date Uploaded:</label>
                                        <div class="col-md-3 input-group" style="padding-right:14px;padding-left:14px">
                                            <input class="form-control dateInputStyle" type="date" name="fd" uib-datepicker-popup="MM/dd/yyyy" show-weeks="false" is-open="datepickrs.fd" ng-model="NWISFile.file_date" required />
                                            <span class="input-group-btn">
                                                <button class="btn btn-default" type="button" ng-click="open($event, 'fd')">
                                                    <i class="glyphicon glyphicon-calendar" />
                                                </button>
                                            </span>
                                        </div>
                                    </div>

                                    <!--Description*-->
                                    <div class="form-group required" ng-class="{'has-error':NWISSenFILEForm.description.$invalid && NWISSenFILEForm.description.$dirty}" style="margin:0;padding:0">
                                        <label class="col-md-4 control-label req" for="description">Description:</label>
                                        <div class="col-md-6">
                                            <textarea class="form-control" id="description" type="text" rows="3" placeholder="Description" ng-model="NWISFile.description" required />
                                        </div>
                                    </div>

                                    <!-- Good Data Start Time* (data) -->
                                    <div class="form-group required" ng-class="{'has-error':NWISSenFILEForm.good_start.$invalid && NWISSenFILEForm.good_start.$dirty}" style="margin:0;padding:0">
                                        <label class="col-md-4 control-label req" for="good_start" style="margin-top:4%">Good Data Start Time:</label>
                                        <div class="col-md-6">
                                            <datetimepicker ng-model="NWISDF.good_start" show-meridian="true" date-format="MM/dd/yyyy" readonly-date="false" date-options="dateOptions"
                                                            hidden-time="false" hidden-date="false" show-spinners="true" date-opened="datepickrs.dfgs" date-ng-click="open($event, 'dfgs')" required>
                                            </datetimepicker>
                                        </div>
                                        <button type="button" class="col-md-1 borderLess pull-left" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Used by the processing scripts to clip irrelavent data.">
                                            <span class="glyphicon glyphicon-question-sign"></span>
                                        </button>
                                    </div>

                                    <!-- Good Data End Time* (data)-->
                                    <div class="form-group required" ng-class="{'has-error':NWISSenFILEForm.good_end.$invalid && NWISSenFILEForm.good_end.$dirty}" style="margin:0;padding:0">
                                        <label class="col-md-4 control-label req" for="good_end" style="margin-top:4%">Good Data End Time:</label>
                                        <div class="col-md-6">
                                            <datetimepicker ng-model="NWISDF.good_end" show-meridian="true" date-format="MM/dd/yyyy" readonly-date="false" date-options="dateOptions"
                                                            hidden-time="false" hidden-date="false" show-spinners="true" date-opened="datepickrs.dfge" date-ng-click="open($event, 'dfge')" required>
                                            </datetimepicker>
                                        </div>
                                        <button type="button" class="col-md-1 borderLess pull-left" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Used by the processing scripts to clip irrelavent data.">
                                            <span class="glyphicon glyphicon-question-sign"></span>
                                        </button>
                                    </div>

                                    <!-- Timezone*: -->
                                    <div class="form-group required" style="margin:0;padding:0">
                                        <label class="col-md-4 control-label req">Time Zone:</label>
                                        <div class="col-md-6">
                                            <select class="form-control" name="time_zone" ng-model="NWISDF.time_zone" ng-options="vcm for vcm in timeZoneList" required>
                                                <option value=""></option>
                                            </select>
                                        </div>
                                        <button type="button" class="borderLess pull-left" tooltip-placement="right" tooltip-append-to-body="false" uib-tooltip="Date/Time will be stored in UTC.">
                                            <span class="glyphicon glyphicon-question-sign"></span>
                                        </button>
                                    </div>

                                    <!-- Elevation -->
                                    <div class="form-group" style="margin:0;padding:0">
                                        <label class="col-md-4 control-label">Elevation:</label>
                                        <div class="col-md-6">
                                            <span class="radio-inline">
                                                <input type="radio" name="elevation_status" ng-model="NWISDF.elevation_status" value="Final" />Final
                                            </span>
                                            <span class="radio-inline">
                                                <input type="radio" name="elevation_status" ng-model="NWISDF.elevation_status" value="Arbitrary" />Arbitrary
                                            </span>
                                        </div>
                                    </div>

                                    <button class="btn btn-primary" ng-if="NWISFile.file_id != undefined" ng-click="saveNWISFile(NWISSenFILEForm.$valid)">Save NWIS File Info</button>
                                    <button class="btn btn-danger" ng-if="NWISFile.file_id != undefined" type="button" ng-click="deleteNWISFile()">Delete NWIS File Info</button>
                                    <button class="btn btn-primary" ng-if="NWISFile.file_id == undefined" ng-click="createNWISFile(NWISSenFILEForm.$valid)">Create NWIS File Info</button>
                                    <button class="btn btn-warning" type="button" ng-click="cancelNWISFile()">Close/Cancel NWIS File Info</button>
                                </fieldset>
                            </form>
                        </div>
                    </div>
                </uib-accordion-group>
            </div>
        </uib-accordion>
    </div>
    <div class="modal-footer">
        <div class="form-group">
            <div class="col-md-12">
                <span><button type="button" class="btn btn-danger" ng-disabled="showFileForm || showNWISFileForm" ng-click="deleteS()"><span>Delete Sensor</span></button></span>
                <span><button type="button" ng-disabled="showFileForm || showNWISFileForm" class="btn btn-warning" ng-click="cancel()"><span>Close</span></button></span>
            </div>
        </div>
    </div>
</script>

<!-- MODAL for FILE create-->
<script type="text/ng-template" id="FileCreateModal.html">
    <div class="modal-header">
        <h3 class="modal-title">{{whoseFile}}<button class="close" type="button" ng-click="cancel()" aria-hidden="true" style="color:gray;">&times;</button></h3>
    </div>
    <form class="form-horizontal" name="FILEcreateForm">
        <fieldset>
            <div class="modal-body">
                <!--File Type*-->
                <div class="form-group required" ng-class="{'has-error':FILEcreateForm.filetype_id.$invalid && FILEcreateForm.filetype_id.$dirty}">
                    <label class="col-md-3 control-label req" for="filetype_id">File Type:</label>
                    <div class="col-md-6">
                        <select class="form-control" name="filetype_id" ng-model="aFile.filetype_id" ng-change="updateAgencyForCaption()" ng-options="ft.filetype_id as ft.filetype for ft in fileTypes" required>
                            <option value=""></option>
                        </select>
                    </div>
                </div>

                <!--Upload Single Image with validations*-->
                <div ng-if="aFile.file_id === undefined && aFile.filetype_id !== 8" class="form-group required">
                    <label class="col-md-3 control-label" for="FILE">Upload File:</label>
                    <div class="col-md-9">
                        <input type="file" max="500000" file-model="aFile.File" />
                        <img ngf-thumbnail="aFile.File" style="height:60px" class="thumbnail">
                    </div>
                </div>

                <br clear="all" />

                <!-- photo file upload fileType==1-->  <!-- all other file upload fileType > 2-->    <!--data file upload fileType==2 (NOT DEALT WITH IN THIS MODAL -- only in Sensor Modals) -->
                <!--File URL (link)-->
                <div ng-if="aFile.filetype_id === 8" class="form-group">
                    <label class="col-md-3 control-label" for="name">File URL:</label>
                    <div class="col-md-6">
                        <input class="form-control" name="name" ng-model="aFile.name" type="text" />
                    </div>
                    <button type="button" class="col-md-1 borderLess pull-left" tooltip-placement="bottom" tooltip-append-to-body="false" uib-tooltip="Please link to persistent URLs or digital object identifier (doi) urls.">
                        <span class="glyphicon glyphicon-question-sign"></span>
                    </button>
                </div>

                <!--Data Processed by (Data)-->
                <div ng-if="aFile.filetype_id === 2" class="form-group">
                    <label class="col-md-3 control-label" for="processor_id">Data Process By:</label>
                    <div class="col-md-6">
                        {{processor}}
                    </div>
                </div>

                <!-- Date Collected/Processed* (data) -->
                <div ng-if="aFile.filetype_id === 2" class="form-group required" ng-class="{'has-error':FILEcreateForm.collect_date.$invalid && FILEcreateForm.collect_date.$dirty}">
                    <label class="col-md-3 control-label req" for="collect_date">Date Collected/Processed:</label>
                    <div class="col-md-3 input-group" style="padding-right:14px;padding-left:14px">
                        <input class="form-control dateInputStyle" type="date" name="dfcd" uib-datepicker-popup="MM/dd/yyyy" show-weeks="false" is-open="datepickrs.dfcd" ng-model="datafile.collect_date" required />
                        <span class="input-group-btn">
                            <button class="btn btn-default" type="button" ng-click="open($event, 'dfcd')">
                                <i class="glyphicon glyphicon-calendar" />
                            </button>
                        </span>
                    </div>
                </div>

                <!--Source Name (all other)-->
                <div class="form-group required" ng-if="aFile.filetype_id === 1" ng-class="{'has-error':FILEcreateForm.FULLname.$invalid && FILEcreateForm.FULLname.$dirty}">
                    <label class="col-md-3 control-label req" for="source_id">Source Photographer:</label>
                    <div class="col-md-6">
                        <input class="form-control" name="FULLname" ng-model="aSource.FULLname" type="text" required />
                    </div>
                </div>

                <div class="form-group required" ng-if="aFile.filetype_id  > 2" ng-class="{'has-error':FILEcreateForm.FULLname.$invalid && FILEcreateForm.FULLname.$dirty}">
                    <label class="col-md-3 control-label req" for="source_id">Source Name:</label>
                    <div class="col-md-6">
                        <input class="form-control" name="FULLname" ng-model="aSource.FULLname" type="text" required />
                    </div>
                </div>

                <!--Source Agency* (photo, allOther)-->
                <div ng-if="aFile.filetype_id === 1 || aFile.filetype_id > 2" class="form-group required" ng-class="{'has-error':FILEcreateForm.agency_id.$invalid && FILEcreateForm.agency_id.$dirty}">
                    <label class="col-md-3 control-label req" for="agency_id">Source Agency:</label>
                    <div class="col-md-6">
                        <select class="form-control" name="agency_id" ng-model="aSource.agency_id" ng-change="updateAgencyForCaption()"
                                ng-options="a.agency_id as a.agency_name for a in agencies" required>
                            <option value=""></option>
                        </select>
                    </div>
                </div>

                <!-- Photo Date* (photo) -->
                <div ng-if="aFile.filetype_id === 1" class="form-group required" ng-class="{'has-error':FILEcreateForm.photo_date.$invalid && FILEcreateForm.photo_date.$dirty}">
                    <label class="col-md-3 control-label req" for="photo_date">Photo Date:</label>
                    <div class="col-md-3 input-group" style="padding-right:14px;padding-left:14px">
                        <input class="form-control dateInputStyle" type="date" name="sd" uib-datepicker-popup="MM/dd/yyyy" show-weeks="false" is-open="datepickrs.sd" ng-model="aFile.photo_date" required />
                        <span class="input-group-btn">
                            <button class="btn btn-default" type="button" ng-click="open($event, 'sd')">
                                <i class="glyphicon glyphicon-calendar" />
                            </button>
                        </span>
                    </div>
                </div>

                <!-- Date Uploaded* (photo, data, allother) -->
                <div ng-if="aFile.filetype_id > 0" class="form-group required" ng-class="{'has-error':FILEcreateForm.file_date.$invalid && FILEcreateForm.file_date.$dirty}">
                    <label class="col-md-3 control-label req" for="file_date">Date Uploaded:</label>
                    <div class="col-md-3 input-group" style="padding-right:14px;padding-left:14px">
                        <input class="form-control dateInputStyle" type="date" name="fd" uib-datepicker-popup="MM/dd/yyyy" show-weeks="false" is-open="datepickrs.fd" ng-model="aFile.file_date" required />
                        <span class="input-group-btn">
                            <button class="btn btn-default" type="button" ng-click="open($event, 'fd')">
                                <i class="glyphicon glyphicon-calendar" />
                            </button>
                        </span>
                    </div>
                </div>

                <!--Description*(photo, data, allother)-->
                <div ng-if="aFile.filetype_id > 0" class="form-group required" ng-class="{'has-error':FILEcreateForm.description.$invalid && FILEcreateForm.description.$dirty}">
                    <label class="col-md-3 control-label req" for="description">Description:</label>
                    <div class="col-md-6">
                        <textarea class="form-control" id="description" type="text" rows="3" placeholder="Description" ng-model="aFile.description" required />
                    </div>
                    <button ng-show="aFile.filetype_id == 1" type="button" class="col-md-1 borderLess pull-left" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Populates in Photo caption below.">
                        <span class="glyphicon glyphicon-question-sign"></span>
                    </button>
                </div>

                <!-- Good Data Start Time* (data) -->
                <div ng-if="aFile.filetype_id === 2" class="form-group required" ng-class="{'has-error':FILEcreateForm.good_start.$invalid && FILEcreateForm.good_start.$dirty}">
                    <label class="col-md-3 control-label req" for="good_start">Good Data Start Time:</label>
                    <div class="col-md-6">
                        <datetimepicker ng-model="datafile.good_start" show-meridian="true" date-format="MM/dd/yyyy" readonly-date="false" date-options="dateOptions"
                                        hidden-time="false" hidden-date="false" show-spinners="true" date-opened="datepickrs.dfgs" date-ng-click="open($event, 'dfgs')" required>
                        </datetimepicker>
                    </div>
                    <button type="button" class="col-md-1 borderLess pull-left" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Used by the processing scripts to clip irrelavent data.">
                        <span class="glyphicon glyphicon-question-sign"></span>
                    </button>
                </div>

                <!-- Good Data End Time* (data) -->
                <div ng-if="aFile.filetype_id === 2" class="form-group required" ng-class="{'has-error':FILEcreateForm.good_end.$invalid && FILEcreateForm.good_end.$dirty}">
                    <label class="col-md-3 control-label req" for="good_end">Good Data End Time:</label>
                    <div class="col-md-6">
                        <datetimepicker ng-model="datafile.good_end" show-meridian="true" date-format="MM/dd/yyyy" readonly-date="false" date-options="dateOptions"
                                        hidden-time="false" hidden-date="false" show-spinners="true" date-opened="datepickrs.dfge" date-ng-click="open($event, 'dfge')" required>
                        </datetimepicker>
                    </div>
                    <button type="button" class="col-md-1 borderLess pull-left" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Used by the processing scripts to clip irrelavent data.">
                        <span class="glyphicon glyphicon-question-sign"></span>
                    </button>
                </div>

                <!-- Timezone*:-->
                <div ng-if="aFile.filetype_id === 2" class="form-group required">
                    <label class="col-md-3 control-label req">Time Zone:</label>
                    <div class="col-md-6">
                        <select class="form-control" name="time_zone" ng-model="datafile.time_zone" ng-options="vcm for vcm in timeZoneList" required>
                            <option value=""></option>
                        </select>
                    </div>
                    <button type="button" class="borderLess pull-left" tooltip-placement="right" tooltip-append-to-body="false" uib-tooltip="Date/Time will be stored in UTC.">
                        <span class="glyphicon glyphicon-question-sign"></span>
                    </button>
                </div>

                <div ng-if="aFile.filetype_id === 2" class="form-group">
                    <label class="col-md-3 control-label">Elevation:</label>
                    <div class="col-md-6">
                        <span class="radio-inline">
                            <input type="radio" name="elevation_status" ng-model="datafile.elevation_status" value="Final" />Final
                        </span>
                        <span class="radio-inline">
                            <input type="radio" name="elevation_status" ng-model="datafile.elevation_status" value="Arbitrary" />Arbitrary
                        </span>
                    </div>
                </div>

                <!-- This is where Other ends, rest is for Photo -->
                <!--Photo Direction (photo)-->
                <div ng-if="aFile.filetype_id === 1" class="form-group">
                    <label class="col-md-3 control-label" for="photo_direction">Photo Direction:</label>
                    <div class="col-md-6">
                        <input class="form-control" id="photo_direction" name="photo_direction" ng-model="aFile.photo_direction" type="text" />
                    </div>
                </div>

                <!-- Photo Latitude (photo)-->
                <div ng-if="aFile.filetype_id === 1" class="form-group">
                    <label class="col-md-3 control-label" for="latitude_dd">Photo Latitude <br /> (if different):</label>
                    <div class="col-md-6">
                        <input class="form-control" ng-keypress="isNum($event)" name="latitude_dd" id="latitude_dd" ng-model="aFile.latitude_dd" type="text" />
                    </div>
                </div>
                <!--Photo Longitude (photo)-->
                <div ng-if="aFile.filetype_id === 1" class="form-group">
                    <label class="col-md-3 control-label" for="longitude_dd">Photo Longitude <br /> (if different):</label>
                    <div class="col-md-6">
                        <input class="form-control" ng-keypress="isNum($event)" id="longitude_dd" name="longitude_dd" ng-model="aFile.longitude_dd" type="text" />
                    </div>
                </div>

                <div ng-if="aFile.filetype_id === 1" class="form-group">
                    <label class="col-md-3 control-label" for="Caption">Preview Caption:</button></label>
                    <div class="col-md-6">
                        <span>
                            Photo of {{aFile.description || '(Description HERE)'}} at {{theSite.site_description}}, {{theSite.county}}, {{theSite.state}}, {{aFile.photo_date | date: 'MM/dd/yyyy' || ' Date taken HERE '}}. Photograph by {{aSource.FULLname || ' Source Name HERE ' }}, {{agencyNameForCap || ' Agency HERE '}}.
                        </span>
                    </div>
                </div>

                <div ng-if="aFile.file_id !== undefined && aFile.filetype_id !== 8" class="form-group">
                    <label class="col-md-3 control-label">Associated File:</label>
                    <div class="col-md-6">
                        <a target="_blank" title="Download File" ng-href="{{serverURL}}/Files/{{aFile.file_id}}/Item">
                            <span class="glyphicon glyphicon-download"></span>
                        </a>
                        <img ng-if="aFile.filetype_id === 1" style="height:80px;" ng-src="{{serverURL}}/Files/{{aFile.file_id}}/Item" />
                    </div>
                </div>
                <div class="form-group">
                    <div class="col-md-12 text-center">
                        <button class="btn btn-primary" ng-click="create(FILEcreateForm.$valid)"><span>Create</span></button>
                    </div>
                </div>
            </div> <!--end modal body-->

            <div class="modal-footer">
                <div ng-show="!sFileIsUploading">
                    <button class="btn btn-warning" type="button" ng-click="cancel()">Close/Cancel</button>
                </div>
                <div ng-show="sFileIsUploading"><img src="images/fileUpload.gif" /></div>
            </div>
        </fieldset>
    </form>
</script>

<!-- MODAL for FILE details/edit-->
<script type="text/ng-template" id="FILEmodal.html">
    <div class="modal-header">
        <h3 class="modal-title">{{whoseFile}} <span ng-if="aFile.is_nwis == 1">(NWIS Connection datafile)</span><button class="close" type="button" ng-click="cancel()" aria-hidden="true" style="color:gray;">&times;</button></h3>
    </div>
    <form class="form-horizontal" name="FILEForm">
        <fieldset>
            <div class="modal-body">
                <div class="form-group" ng-show="createOReditFile == 'edit'">
                    <div class="col-md-12">
                        <span><button ng-show="view.FILEval == 'detail'" type="button" class="btn btn-primary" ng-click="wannaEditFILE()"><span>Edit File</span></button></span>
                        <span><button ng-show="view.FILEval == 'edit'" class="btn btn-primary" ng-click="save(FILEForm.$valid)"><span>Save</span></button></span>
                        <span>
                            <button type="button" ng-show="(datafile.data_file_id != undefined && aFile.is_nwis !== 1 && view.FILEval == 'detail' && ApprovalInfo.approvalDate == undefined && (userRole == 'Admin' || userRole == 'Manager'))"
                                    class="btn btn-primary" ng-click="approveDF()">
                                <span>Approve</span>
                            </button>
                        </span>
                        <span>
                            <button type="button" ng-show="(datafile.data_file_id != undefined && (view.FILEval == 'detail' && ApprovalInfo.approvalDate != undefined) && (userRole == 'Admin' || userRole == 'Manager'))"
                                    class="btn btn-primary" ng-click="unApproveDF()">
                                <span>UnApprove</span>
                            </button>
                        </span>
                        <span><button ng-show="view.FILEval == 'edit'" type="button" class=" btn btn-primary" ng-click="cancelFILEEdit()"><span>Cancel</span></button></span>
                    </div>
                </div>

                <!--File Type* (detail)-->
                <div class="col-md-12" ng-if="view.FILEval == 'detail'">
                    <div class="col-md-4"><label>File Type:</label></div>
                    <div class="col-md-6"><span>{{aFile.fileType || '---'}}</span></div>
                </div>
                <!--File Type* (edit)-->
                <div class="form-group required" ng-if="view.FILEval == 'edit'" ng-class="{'has-error':FILEForm.filetype_id.$invalid && FILEForm.filetype_id.$dirty}">
                    <label class="col-md-4 control-label req" for="filetype_id">File Type:</label>
                    <div class="col-md-6">
                        <select class="form-control" name="filetype_id" ng-model="fileCopy.filetype_id" ng-change="updateAgencyForCaption()" ng-options="ft.filetype_id as ft.filetype for ft in fileTypes" required>
                            <option value=""></option>
                        </select>
                    </div>
                </div>

                <!--Upload Single Image with validations*-->
                <div ng-if="aFile.file_id === undefined && aFile.filetype_id !== 8" class="form-group required">
                    <label class="col-md-4 control-label" for="FILE">Upload File:</label>
                    <div class="col-md-9">
                        <input type="file" max="500000" file-model="aFile.File" />
                        <img ngf-thumbnail="aFile.File" style="height:60px" class="thumbnail">
                    </div>
                </div>

                <br clear="all" />

                <!-- photo file upload fileType==1-->  <!-- all other file upload fileType > 2-->    <!--data file upload fileType==2 (NOT DEALT WITH IN THIS MODAL -- only in Sensor Modals) -->
                <!--File URL (link) (detail)-->
                <div ng-if="view.FILEval == 'detail' && ((aFile.filetype_id === 8 || fileCopy.filetype_id === 8) || (aFile.is_nwis === 1 || fileCopy.is_nwis === 1))" class="col-md-12">
                    <div class="col-md-4"><label>File URL:</label></label></div>
                    <div class="col-md-6"><span>{{aFile.name || '---'}}</span></div>
                </div>

                <!--File URL (link) (edit)-->
                <div ng-if="view.FILEval == 'edit' && ((aFile.filetype_id === 8 || fileCopy.filetype_id === 8) || (aFile.is_nwis === 1 || fileCopy.is_nwis === 1))" class="form-group">
                    <label class="col-md-4 control-label" for="name">File URL:</label>
                    <div class="col-md-6">
                        <input class="form-control" title="{{fileCopy.name}}" nam name="name" ng-model="fileCopy.name" type="text" />
                    </div>
                    <button type="button" class="col-md-1 borderLess pull-left" tooltip-placement="bottom" tooltip-append-to-body="false" uib-tooltip="Please link to persistent URLs or digital object identifier (doi) urls.">
                        <span class="glyphicon glyphicon-question-sign"></span>
                    </button>
                </div>

                <!--Data Processed by (Data) (detail)-->
                <div ng-if="view.FILEval == 'detail' && (aFile.filetype_id === 2 || fileCopy.filetype_id === 2)" class="col-md-12">
                    <div class="col-md-4"><label>Data Process By:</label></div>
                    <div class="col-md-6"><span>{{processor}}</span></div>
                </div>
                <!--Data Processed by (Data) (edit)-->
                <div ng-if="view.FILEval == 'edit' && (aFile.filetype_id === 2 || fileCopy.filetype_id === 2)" class="form-group">
                    <label class="col-md-4 control-label" for="processor_id">Data Process By:</label>
                    <div class="col-md-6"><span>{{processor}}</span></div>
                </div>

                <!-- Date Collected/Processed* (data) (detail) -->
                <div ng-if="view.FILEval == 'detail' && (aFile.filetype_id === 2 || fileCopy.filetype_id === 2)" class="col-md-12">
                    <div class="col-md-4"><label>Date Collected/Processed:</label></div>
                    <div class="col-md-3 input-group" style="padding-right:14px;padding-left:14px">
                        <span>{{datafile.collect_date | date: 'MM/dd/yyyy' || '---'}}</span>
                    </div>
                </div>
                <!-- Date Collected/Processed* (data)  (edit)-->
                <div ng-if="view.FILEval == 'edit' && (aFile.filetype_id === 2 || fileCopy.filetype_id === 2)" class="form-group required" ng-class="{'has-error':FILEForm.collect_date.$invalid && FILEForm.collect_date.$dirty}">
                    <label class="col-md-4 control-label req" for="collect_date">Date Collected/Processed:</label>
                    <div class="col-md-3 input-group" style="padding-right:14px;padding-left:14px">
                        <input class="form-control dateInputStyle" type="date" name="dfcd" uib-datepicker-popup="MM/dd/yyyy" show-weeks="false" is-open="datepickrs.dfcd" ng-model="dfCopy.collect_date" required />
                        <span class="input-group-btn">
                            <button class="btn btn-default" type="button" ng-click="open($event, 'dfcd')">
                                <i class="glyphicon glyphicon-calendar" />
                            </button>
                        </span>
                    </div>
                </div>

                <!--Source Name (Photo) (detail) -->
                <div class="col-md-12" ng-if="view.FILEval == 'detail' && (aFile.filetype_id === 1 || fileCopy.filetype_id === 1)">
                    <div class="col-md-4"><label>Source Photographer:</label></div>
                    <div class="col-md-6"><span>{{aSource.FULLname || '---'}}</span></div>
                </div>
                <!--Source Name (Photo) (edit)-->
                <div class="form-group required" ng-if="view.FILEval == 'edit' && (aFile.filetype_id === 1 || fileCopy.filetype_id === 1)" ng-class="{'has-error':FILEForm.FULLname.$invalid && FILEForm.FULLname.$dirty}">
                    <label class="col-md-4 control-label req" for="source_id">Source Photographer:</label>
                    <div class="col-md-6">
                        <input class="form-control" name="FULLname" ng-model="sourceCopy.FULLname" type="text" required />
                    </div>
                </div>

                <!--Source Name (allOther) (detail)-->
                <div class="col-md-12" ng-if="view.FILEval == 'detail' && (aFile.filetype_id  > 2 || fileCopy.filetype_id  > 2)">
                    <div class="col-md-4"><label>Source Name:</label></div>
                    <div class="col-md-6"><span>{{aSource.FULLname || '---'}}</span></div>
                </div>
                <!--Source Name (allOther) (edit)-->
                <div class="form-group required" ng-if="view.FILEval == 'edit' && (aFile.filetype_id  > 2 || fileCopy.filetype_id  > 2)" ng-class="{'has-error':FILEForm.FULLname.$invalid && FILEForm.FULLname.$dirty}">
                    <label class="col-md-4 control-label req" for="source_id">Source Name:</label>
                    <div class="col-md-6">
                        <input class="form-control" name="FULLname" ng-model="sourceCopy.FULLname" type="text" required />
                    </div>
                </div>

                <!--Source Agency* (photo, allOther) (detail)-->
                <div ng-if="view.FILEval == 'detail' && ((aFile.filetype_id === 1 || aFile.filetype_id > 2) || (fileCopy.filetype_id === 1 || fileCopy.filetype_id > 2))" class="col-md-12">
                    <div class="col-md-4"><label>Source Agency:</label></div>
                    <div class="col-md-6"><span>{{aSource.agencyName || '---'}}</span></div>
                </div>
                <!--Source Agency* (photo, allOther) (edit)-->
                <div ng-if="view.FILEval == 'edit' && ((aFile.filetype_id === 1 || aFile.filetype_id > 2) || (fileCopy.filetype_id === 1 || fileCopy.filetype_id > 2))" class="form-group required" ng-class="{'has-error':FILEForm.agency_id.$invalid && FILEForm.agency_id.$dirty}">
                    <label class="col-md-4 control-label req" for="agency_id">Source Agency:</label>
                    <div class="col-md-6">
                        <select class="form-control" name="agency_id" ng-model="sourceCopy.agency_id" ng-change="updateAgencyForCaption()"
                                ng-options="a.agency_id as a.agency_name for a in agencies" required>
                            <option value=""></option>
                        </select>
                    </div>
                </div>

                <!-- Photo Date* (photo)  (detail)-->
                <div ng-if="view.FILEval == 'detail' && (aFile.filetype_id === 1 || fileCopy.filetype_id === 1)" class="col-md-12">
                    <div class="col-md-4"><label>Photo Date:</label></div>
                    <div class="col-md-3 input-group" style="padding-right:14px;padding-left:14px">
                        <span>{{aFile.photo_date | date: 'MM/dd/yyyy' || '---'}}</span>
                    </div>
                </div>
                <!-- Photo Date* (photo) (edit) -->
                <div ng-if="view.FILEval == 'edit' && (aFile.filetype_id === 1 || fileCopy.filetype_id === 1)" class="form-group required" ng-class="{'has-error':FILEForm.photo_date.$invalid && FILEForm.photo_date.$dirty}">
                    <label class="col-md-4 control-label req" for="photo_date">Photo Date:</label>
                    <div class="col-md-3 input-group" style="padding-right:14px;padding-left:14px">
                        <input class="form-control dateInputStyle" type="date" name="sd" uib-datepicker-popup="MM/dd/yyyy" show-weeks="false" is-open="datepickrs.sd" ng-model="fileCopy.photo_date" required />
                        <span class="input-group-btn">
                            <button class="btn btn-default" type="button" ng-click="open($event, 'sd')">
                                <i class="glyphicon glyphicon-calendar" />
                            </button>
                        </span>
                    </div>
                </div>

                <!-- Date Uploaded* (photo, data, allother) (detail) -->
                <div ng-if="view.FILEval == 'detail' && (aFile.filetype_id > 0 || fileCopy.filetype_id > 0)" class="col-md-12">
                    <div class="col-md-4"><label>Date Uploaded:</label></div>
                    <div class="col-md-3 input-group" style="padding-right:14px;padding-left:14px">
                        <span>{{aFile.file_date | date: 'MM/dd/yyyy' || '---'}}</span>
                    </div>
                </div>
                <!-- Date Uploaded* (photo, data, allother) (edit) -->
                <div ng-if="view.FILEval == 'edit' && (aFile.filetype_id > 0 || fileCopy.filetype_id > 0)" class="form-group required" ng-class="{'has-error':FILEForm.file_date.$invalid && FILEForm.file_date.$dirty}">
                    <label class="col-md-4 control-label req" for="file_date">Date Uploaded:</label>
                    <div class="col-md-3 input-group" style="padding-right:14px;padding-left:14px">
                        <input class="form-control dateInputStyle" type="date" name="fd" uib-datepicker-popup="MM/dd/yyyy" show-weeks="false" is-open="datepickrs.fd" ng-model="fileCopy.file_date" required />
                        <span class="input-group-btn">
                            <button class="btn btn-default" type="button" ng-click="open($event, 'fd')">
                                <i class="glyphicon glyphicon-calendar" />
                            </button>
                        </span>
                    </div>
                </div>

                <!--Description*(photo, data, allother) (detail)-->
                <div ng-if="view.FILEval == 'detail' && (aFile.filetype_id > 0 || fileCopy.filetype_id > 0)" class="col-md-12">
                    <div class="col-md-4"><label>Description:</label></div>
                    <div class="col-md-6"><span>{{aFile.description || '---'}}</span></div>
                </div>
                <!--Description*(photo, data, allother) (edit)-->
                <div ng-if="view.FILEval == 'edit' && (aFile.filetype_id > 0 || fileCopy.filetype_id > 0)" class="form-group required" ng-class="{'has-error':FILEForm.description.$invalid && FILEForm.description.$dirty}">
                    <label class="col-md-4 control-label req" for="description">Description:</label>
                    <div class="col-md-6">
                        <textarea class="form-control" id="description" type="text" rows="3" placeholder="Description" ng-model="fileCopy.description" required />
                    </div>
                </div>

                <!-- Good Data Start Time* (data) (detail) -->
                <div ng-if="view.FILEval == 'detail' && (aFile.filetype_id === 2 || fileCopy.filetype_id === 2)" class="col-md-12">
                    <div class="col-md-4"><label>Good Data Start Time:</label></div>
                    <div class="col-md-6"><span>{{datafile.good_start | date: 'MM/dd/yyyy hh:mm a' || '---'}}</span></div>
                </div>
                <!-- Good Data Start Time* (data) (edit)-->
                <div ng-if="view.FILEval == 'edit' && (aFile.filetype_id === 2 || fileCopy.filetype_id === 2)" class="form-group required" ng-class="{'has-error':FILEForm.good_start.$invalid && FILEForm.good_start.$dirty}">
                    <label class="col-md-4 control-label req" style="padding-top:4em;" for="good_start">Good Data Start Time:</label>
                    <div class="col-md-6">
                        <datetimepicker ng-model="dfCopy.good_start" show-meridian="true" date-format="MM/dd/yyyy" readonly-date="false" date-options="dateOptions"
                                        hidden-time="false" hidden-date="false" show-spinners="true" date-opened="datepickrs.dfgs" date-ng-click="open($event, 'dfgs')" required>
                        </datetimepicker>
                    </div>
                    <button style="padding-top:4em;" type="button" class="col-md-1 borderLess pull-left" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Used by the processing scripts to clip irrelavent data.">
                        <span class="glyphicon glyphicon-question-sign"></span>
                    </button>
                </div>

                <!-- Good Data End Time* (data) (detail) -->
                <div ng-if="view.FILEval == 'detail' && (aFile.filetype_id === 2 || fileCopy.filetype_id === 2)" class="col-md-12">
                    <div class="col-md-4"><label>Good Data End Time:</label></div>
                    <div class="col-md-6"><span>{{datafile.good_end | date: 'MM/dd/yyyy hh:mm a' || '---'}}</span></div>
                </div>
                <!-- Good Data End Time* (data) (edit)-->
                <div ng-if="view.FILEval == 'edit' && (aFile.filetype_id === 2 || fileCopy.filetype_id === 2)" class="form-group required" ng-class="{'has-error':FILEForm.good_end.$invalid && FILEForm.good_end.$dirty}">
                    <label class="col-md-4 control-label req" style="padding-top:4em;" for="good_end">Good Data End Time:</label>
                    <div class="col-md-6">
                        <datetimepicker ng-model="dfCopy.good_end" show-meridian="true" date-format="MM/dd/yyyy" readonly-date="false" date-options="dateOptions"
                                        hidden-time="false" hidden-date="false" show-spinners="true" date-opened="datepickrs.dfge" date-ng-click="open($event, 'dfge')" required>
                        </datetimepicker>
                    </div>
                    <button style="padding-top:4em;" type="button" class="col-md-1 borderLess pull-left" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Used by the processing scripts to clip irrelavent data.">
                        <span class="glyphicon glyphicon-question-sign"></span>
                    </button>
                </div>

                <!-- Timezone*: (detail) -->
                <div ng-if="view.FILEval == 'detail' && (aFile.filetype_id === 2 || fileCopy.filetype_id === 2)" class="col-md-12">
                    <div class="col-md-4"><label>Time Zone:</label></div>
                    <div class="col-md-6"><span>{{datafile.time_zone}}</span></div>
                </div>
                <!-- Timezone*: (edit)-->
                <div ng-if="view.FILEval == 'edit' && (aFile.filetype_id === 2 || fileCopy.filetype_id === 2)" class="form-group required">
                    <label class="col-md-4 control-label req">Time Zone:</label>
                    <div class="col-md-6">
                        <select class="form-control" name="time_zone" ng-model="dfCopy.time_zone" ng-options="vcm for vcm in timeZoneList" required>
                            <option value=""></option>
                        </select>
                    </div>
                    <button type="button" class="col-md-1 borderLess pull-left" tooltip-placement="right" tooltip-append-to-body="false" uib-tooltip="Date/Time will be stored in UTC.">
                        <span class="glyphicon glyphicon-question-sign"></span>
                    </button>
                </div>

                <!--elevation (detail)-->
                <div ng-if="view.FILEval == 'detail' && (aFile.filetype_id === 2 || fileCopy.filetype_id === 2)" class="col-md-12">
                    <div class="col-md-4"><label>Elevation:</label></div>
                    <div class="col-md-6"><span>{{datafile.elevation_status || '---'}}</span></div>
                </div>
                <!--elevation (edit)-->
                <div ng-if="view.FILEval == 'edit' && (aFile.filetype_id === 2 || fileCopy.filetype_id === 2)" class="form-group">
                    <label class="col-md-4 control-label">Elevation:</label>
                    <div class="col-md-6">
                        <span class="radio-inline">
                            <input type="radio" name="elevation_status" ng-model="dfCopy.elevation_status" value="Final" />Final
                        </span>
                        <span class="radio-inline">
                            <input type="radio" name="elevation_status" ng-model="dfCopy.elevation_status" value="Arbitrary" />Arbitrary
                        </span>
                    </div>
                </div>

                <!-- Approval info (detail)-->
                <div class="col-md-12" ng-if="view.FILEval == 'detail' && (aFile.filetype_id === 2 && aFile.file_id !== undefined && aFile.is_nwis !== 1)">
                    <div class="col-md-4"><label>Approval Info:</label></div>
                    <div class="col-md-6" ng-if="ApprovalInfo.Member !== undefined">
                        <span>Approved By:</span><span ng-if="ApprovalInfo.Member"> {{ApprovalInfo.Member.fname || '---'}} {{ApprovalInfo.Member.lname || '---'}}</span><br />
                        <span>On:</span><span ng-if="ApprovalInfo.approvalDate"> {{ApprovalInfo.approvalDate | date: 'MM/dd/yyyy hh:mm a' || '---'}}</span>
                        <button ng-if="ApprovalInfo.approvalDate" type="button" class="borderLess" tooltip-placement="right" uib-tooltip="Time displayed as local, stored in UTC.">
                            <span class="glyphicon glyphicon-question-sign"></span>
                        </button>
                    </div>
                </div>
                <!-- Approval info (edit) -->
                <div class="form-group" ng-if="view.FILEval == 'edit' && (aFile.filetype_id === 2 && aFile.file_id !== undefined && aFile.is_nwis !== 1)">
                    <label class="col-md-4 control-label" for="approval_id">Approval Info:</label>
                    <div class="col-md-6" ng-if="ApprovalInfo.Member !== undefined">
                        <span>Approved By:</span><span ng-if="ApprovalInfo.Member"> {{ApprovalInfo.Member.fname || '---'}} {{ApprovalInfo.Member.lname || '---'}}</span><br />
                        <span>On:</span><span ng-if="ApprovalInfo.approvalDate"> {{ApprovalInfo.approvalDate | date: 'MM/dd/yyyy hh:mm a' || '---'}}</span>
                        <button ng-if="ApprovalInfo.approvalDate" type="button" class="borderLess" tooltip-placement="right" uib-tooltip="Time displayed as local, stored in UTC.">
                            <span class="glyphicon glyphicon-question-sign"></span>
                        </button>
                    </div>
                </div>

                <!-- This is where Other ends, rest is for Photo -->
                <!--Photo Direction (photo) (detail)-->
                <div ng-if="view.FILEval == 'detail' && (aFile.filetype_id === 1 || fileCopy.filetype_id === 1)" class="col-md-12">
                    <div class="col-md-4"><label>Photo Direction:</label></div>
                    <div class="col-md-6"><span>{{aFile.photo_direction || '---'}}</span></div>
                </div>
                <!--Photo Direction (photo) (edit)-->
                <div ng-if="view.FILEval == 'edit' && (aFile.filetype_id === 1 || fileCopy.filetype_id === 1)" class="form-group">
                    <label class="col-md-4 control-label" for="photo_direction">Photo Direction:</label>
                    <div class="col-md-6">
                        <input class="form-control" id="photo_direction" name="photo_direction" ng-model="fileCopy.photo_direction" type="text" />
                    </div>
                </div>

                <!-- Photo Latitude (photo) (detail)-->
                <div ng-if="view.FILEval == 'detail' && (aFile.filetype_id === 1 || fileCopy.filetype_id === 1)" class="col-md-12">
                    <div class="col-md-4"><label>Photo Latitude <br /> (if different):</label></div>
                    <div class="col-md-6"><span>{{aFile.latitude_dd || '---'}}</span></div>
                </div>
                <!-- Photo Latitude (photo) (edit)-->
                <div ng-if="view.FILEval == 'edit' && (aFile.filetype_id === 1 || fileCopy.filetype_id === 1)" class="form-group">
                    <label class="col-md-4 control-label" for="latitude_dd">Photo Latitude <br /> (if different):</label>
                    <div class="col-md-6">
                        <input class="form-control" ng-keypress="isNum($event)" name="latitude_dd" id="latitude_dd" ng-model="fileCopy.latitude_dd" type="text" />
                    </div>
                </div>

                <!--Photo Longitude (photo) (detail)-->
                <div ng-if="view.FILEval == 'detail' && (aFile.filetype_id === 1 || fileCopy.filetype_id === 1)" class="col-md-12">
                    <div class="col-md-4"><label>Photo Longitude <br /> (if different):</label></div>
                    <div class="col-md-6"><span>{{aFile.longitude_dd || '---'}}</span></div>
                </div>
                <!--Photo Longitude (photo) (edit)-->
                <div ng-if="view.FILEval == 'edit' && (aFile.filetype_id === 1 || fileCopy.filetype_id === 1)" class="form-group">
                    <label class="col-md-4 control-label" for="longitude_dd">Photo Longitude <br /> (if different):</label>
                    <div class="col-md-6">
                        <input class="form-control" ng-keypress="isNum($event)" id="longitude_dd" name="longitude_dd" ng-model="fileCopy.longitude_dd" type="text" />
                    </div>
                </div>

                <!-- caption (detail)-->
                <div ng-if="view.FILEval == 'detail' && (aFile.filetype_id === 1 || fileCopy.filetype_id === 1)" class="col-md-12">
                    <div class="col-md-4"><label>Preview Caption:</label></div>
                    <div class="col-md-6">
                        <span>
                            Photo of {{aFile.description || '(Description HERE)'}} at {{theSite.site_description}}, {{theSite.county}}, {{theSite.state}}, {{aFile.photo_date | date: 'MM/dd/yyyy' || ' Date taken HERE '}}. Photograph by {{aSource.FULLname || ' Source Name HERE ' }}, {{agencyNameForCap || ' Agency HERE '}}.
                        </span>
                    </div>
                </div>
                <!-- caption (edit)-->
                <div ng-if="view.FILEval == 'edit' && (aFile.filetype_id === 1 || fileCopy.filetype_id === 1)" class="form-group">
                    <label class="col-md-4 control-label" for="Caption">Preview Caption:</button></label>
                    <div class="col-md-6">
                        <span>
                            Photo of {{fileCopy.description || '(Description HERE)'}} at {{theSite.site_description}}, {{theSite.county}}, {{theSite.state}}, {{fileCopy.photo_date | date: 'MM/dd/yyyy' || ' Date taken HERE '}}. Photograph by {{sourceCopy.FULLname || ' Source Name HERE ' }}, {{agencyNameForCap || ' Agency HERE '}}.
                        </span>
                    </div>
                </div>

                <!-- associated files (detail)-->
                <div ng-if="view.FILEval == 'detail' && ((aFile.file_id !== undefined && aFile.filetype_id !== 8 && aFile.is_nwis !== 1) || (fileCopy.file_id !== undefined && fileCopy.filetype_id !== 8 && fileCopy.is_nwis !== 1))" class="col-md-12">
                    <div class="col-md-4"><label>Associated File:</label></div>
                    <div class="col-md-6">
                        <span>
                            <a target="_blank" title="Download File" ng-href="{{serverURL}}/Files/{{aFile.file_id}}/Item">
                                <span class="glyphicon glyphicon-download"></span>
                            </a>
                            <img ng-if="aFile.filetype_id === 1" style="height:80px;" ng-src="{{serverURL}}/Files/{{aFile.file_id}}/Item" />
                        </span>
                    </div>
                </div>
                <!-- associated files (edit)-->
                <div ng-if="view.FILEval == 'edit' && ((aFile.file_id !== undefined && aFile.filetype_id !== 8 && aFile.is_nwis !== 1) || (fileCopy.file_id !== undefined && fileCopy.filetype_id !== 8 && fileCopy.is_nwis !== 1))" class="form-group">
                    <label class="col-md-4 control-label">Associated File:</label>
                    <div class="col-md-6">
                        <span>
                            <a target="_blank" title="Download File" ng-href="{{serverURL}}/Files/{{fileCopy.file_id}}/Item">
                                <span class="glyphicon glyphicon-download"></span>
                            </a>
                            <img ng-if="fileCopy.filetype_id === 1" style="height:80px;" ng-src="{{serverURL}}/Files/{{fileCopy.file_id}}/Item" />
                        </span>
                    </div>
                </div>
                <div class="form-group" ng-show="createOReditFile == 'create'">
                    <div class="col-md-12 text-center">
                        <button class="btn btn-primary" ng-click="create(FILEForm.$valid)"><span>Create</span></button>
                    </div>
                </div>
            </div> <!--end modal body-->
            <br clear="all" />
            <div class="modal-footer">
                <div ng-show="!sFileIsUploading">
                    <button type="button" class="btn btn-danger" ng-if="aFile.file_id != undefined" ng-click="deleteFile()">Delete</button>
                    <button class="btn btn-warning" type="button" ng-click="cancel()">Close/Cancel</button>
                </div>
                <div ng-show="sFileIsUploading"><img src="images/fileUpload.gif" /></div>
            </div>
        </fieldset>
    </form>
</script>

<style type="text/css">
    .needRetrieve {
        color: red;
    }


    .chart div {
        width: 0;
        transition: all 1s ease-out;
        -moz-transition: all 1s ease-out;
        -webkit-transition: all 1s ease-out;
        font: 10px sans-serif;
        background-color: steelblue;
        text-align: right;
        padding: 3px;
        margin: 5px;
        color: white;
        box-shadow: 2px 2px 2px #666;
    }
</style>
<!-- MODAL for PEAK Create/edit-->
<script type="text/ng-template" id="PEAKmodal.html">
    <div class="modal-header">
        <h3 class="modal-title">Peak Summary<button class="close" type="button" ng-click="cancel()" aria-hidden="true" style="color:gray;">&times;</button></h3>
    </div>
    <form class="form-horizontal" name="peakForm" role="form">
        <fieldset>
            <div class="modal-body">
                <!-- Start SENSORs and HWMs used for Peak -->
                <label class="col-md-4 text-center">Select Data used for Interpretation</label>
                <!-- HWM list-->
                <div class="col-md-9" ng-repeat="h in eventSiteHWMs">
                    <input type="checkbox" class="col-sm-1 pull-left" ng-model="h.selected" ng-click="addHWM(h)" />
                    <span class="col-md-7">
                        HWM {{h.hwm_id}} - {{h.elev_ft || '--'}} ft
                    </span>
                    <button type="button" class="borderLess" tooltip-placement="top" uib-tooltip="Show Details" ng-click="showHWMDetails(h)"><span class="glyphicon glyphicon-info-sign"></span></button>
                    <button ng-if="h.elev_ft" type="button" class="borderLess" tooltip-placement="top" uib-tooltip="Set as Primary" ng-click="primaryHWM(h)"><span class="glyphicon glyphicon-check"></span></button>
                    <button ng-if="!h.elev_ft" type="button" class="borderLess" tooltip-placement="top" uib-tooltip="Incomplete" ng-click="showIncompleteHWMInfo()"><span class="glyphicon glyphicon-alert"></span></button>
                </div>
                <!-- Sensor list -->
                <div class="col-md-9" ng-repeat="s in eventSiteSensors">
                    <span class="col-sm-1"> </span>
                    <span class="col-md-7">
                        {{s.deploymentType || s.sensorType}} Sensor
                    </span>
                    <button type="button" class="borderLess" tooltip-placement="top" uib-tooltip="Show Details" ng-click="showSensorDetails(s)"><span class="glyphicon glyphicon-info-sign"></span></button>
                    <button ng-if="s.NeedDF" type="button" class="borderLess" tooltip-placement="top" uib-tooltip="Incomplete" ng-click="showIncompleteDFInfo()"><span class="glyphicon glyphicon-alert"></span></button>
                    <button ng-if="!s.isRetrieved" type="button" class="borderLess" tooltip-placement="top" uib-tooltip="Needs to be Retrieved" ng-click="showRetrieveInfo()"><span class="needRetrieve glyphicon glyphicon-alert"></span></button>
                    <div ng-repeat="f in s.files | where:{filetype_id: 2}">
                        <span class="col-sm-1"> </span>
                        <input type="checkbox" class="pull-left col-sm-1" ng-model="f.selected" ng-click="addDataFile(f)" />
                        <span class="col-md-6">{{f.name || '---'}}</span>
                        <button type="button" class="borderLess" tooltip-placement="top" uib-tooltip="Show Details" ng-click="showDataFileDetails(f)"><span class="glyphicon glyphicon-info-sign"></span></button>
                        <button type="button" class="borderLess" tooltip-placement="top" uib-tooltip="Set as Primary" ng-click="primaryDataFile(f)"><span class="glyphicon glyphicon-check"></span></button>
                    </div>
                </div>

                <br clear="all" />

                <!-- hwm box of meta data and files -->
                <div style="border:solid 1px black;padding-bottom:10px;" class="col-md-12" ng-if="hwmDetail">
                    <!-- only show if they click showHWMDetails() above -->
                    <label>HWM {{HWMBox.hwm_id}} Details</label><button class="close" type="button" ng-click="closeDetail()" aria-hidden="true" style="color:gray;">&times;</button>
                    <ul>
                        <li style="list-style:none">Location Description: {{HWMBox.HWM_location_description || '--'}}</li>
                        <li style="list-style:none">Bank: {{HWMBox.bank}}</li>
                        <li style="list-style:none">Flag Date: {{HWMBox.flag_date | date:'MM/dd/yyyy'}}</li>
                        <li style="list-style:none">Elevation: {{HWMBox.elev_ft}} ft</li>
                        <li style="list-style:none">Elevation above ground: {{HWMBox.height_above_gnd}} ft</li>
                        <li style="list-style:none">Quality: {{HWMBox.hwm_quality}}</li>
                        <li style="list-style:none">Type: {{HWMBox.hwm_type}}</li>
                        <li style="list-style:none">Stillwater: {{HWMBox.stillwater}}</li>
                    </ul><br clear="all" />
                    <div class="col-md-12" ng-if="HWMBox.files.length > 0">
                        <label>HWM Files</label>
                        <span ng-repeat="f in HWMBox.files">
                            <ul style="padding-left: 0">
                                <li style="list-style:none;padding-bottom: 15px;">
                                    <span class="col-sm-9 borderLess" style="padding:0">
                                        <a class="btn borderLess" style="padding:0" target="_blank" class="btn btn-primary" ng-href="{{serverURL}}/Files/{{f.file_id}}/Item">
                                            {{f.file_date | date: 'MM/dd/yyyy'}} ({{f.name || f.file_id}})
                                        </a>
                                    </span>
                                </li>
                            </ul>
                        </span>
                    </div>
                    <!-- carousel of photo files -->
                    <div class="col-md-6" ng-if="HWMBox.files.length > 0" style="height:120px;">
                        <uib-carousel interval="4000">
                            <uib-slide ng-repeat="f in HWMBox.files | where:{filetype_id:1}">
                                <img ng-click="showImageModal(f.file_id)" ng-src="{{serverURL}}/Files/{{f.file_id}}/Item" />
                                <div class="carousel-caption">
                                    <p>{{f.name || f.file_id}}</p>
                                </div>
                            </uib-slide>
                        </uib-carousel>
                    </div>
                </div>
                <!-- sensor box of meta data and files -->
                <div style="border:solid 1px black;padding-bottom:10px" class="col-md-12" ng-if="sensorDetail">
                    <!-- only show if they click showSensorDetails() above -->
                    <label>{{SensorBox.deploymentType || SensorBox.sensorType}} Sensor Details</label><button class="close" type="button" ng-click="closeDetail()" aria-hidden="true" style="color:gray;">&times;</button>
                    <ul>
                        <li style="list-style:none">Sensor Type: {{SensorBox.sensorType}}</li>
                        <li style="list-style:none">Deployment Type: {{SensorBox.deploymentType || '--'}}</li>
                        <li style="list-style:none">Retrieved on: {{SensorBox.instrument_status[0].time_stamp | date: 'MM/dd/yyyy hh:mm a'}}</li>
                        <li style="list-style:none">Collection Condition: {{SensorBox.CollectCondition || '--'}}</li>
                        <li style="list-style:none">Serial Number: {{SensorBox.serial_number || '--'}}</li>
                        <li style="list-style:none">Location Description: {{SensorBox.location_description || '--'}}</li>
                        <li style="list-style:none">Sensor Brand: {{SensorBox.sensorBrand || '--'}}</li>
                    </ul><br clear="all" />
                    <div class="col-md-12">
                        <label>Sensor Files</label>
                        <div ng-if="SensorBox.files.length > 0">
                            <span ng-repeat="f in SensorBox.files">
                                <ul style="padding-left: 0">
                                    <li style="list-style:none;padding-bottom: 15px;">
                                        <span class="col-sm-9 borderLess" style="padding:0">
                                            <a class="btn borderLess" style="padding:0" target="_blank" class="btn btn-primary" ng-href="{{serverURL}}/Files/{{f.file_id}}/Item">
                                                {{f.file_date | date: 'MM/dd/yyyy'}} ({{f.name || f.file_id}})
                                            </a>
                                        </span>
                                    </li>
                                </ul>
                            </span>
                        </div>
                        <div ng-if="SensorBox.files.length == 0">
                            <span>No files</span>
                        </div>
                        <!-- carousel of photo files-->
                        <div class="col-md-6" ng-if="SensorBox.files.length > 0" style="height:120px;">
                            <uib-carousel interval="4000">
                                <uib-slide ng-repeat="f in SensorBox.files | where:{filetype_id:1}">
                                    <img ng-click="showImageModal(f.file_id)" ng-src="{{serverURL}}/Files/{{f.file_id}}/Item" />
                                    <div class="carousel-caption">
                                        <p>{{f.name || f.file_id}}</p>
                                    </div>
                                </uib-slide>
                            </uib-carousel>
                        </div>
                    </div>

                </div>
                <!-- datafile box of meta data and datafiles -->
                <div style="border:solid 1px black;padding-bottom:10px" class="col-md-12" ng-if="dataFileDetail">
                    <!-- only show if they click showDataFileDetails() above -->
                    <label>Data File {{DFBox.filePath}} Details</label><button class="close" type="button" ng-click="closeDetail()" aria-hidden="true" style="color:gray;">&times;</button>
                    <ul>
                        <li style="list-style:none">Description: {{DFBox.fileDesc || '--'}}</li>
                        <li style="list-style:none">Collected on: {{DFBox.collect_date | date: 'MM/dd/yyyy hh:mm a'}} UTC</li>
                        <li style="list-style:none">Good Start: {{DFBox.good_start | date: 'MM/dd/yyyy hh:mm a'}} UTC</li>
                        <li style="list-style:none">Good End:{{DFBox.good_end | date: 'MM/dd/yyyy hh:mm a'}} UTC</li>
                        <li style="list-style:none">Processed By: {{DFBox.processedBy.fname}} {{DFBox.processedBy.lname}}</li>
                        <li style="list-style:none">Elevation Status: {{DFBox.elevation_status}}</li>
                    </ul><br clear="all" />
                    <div class="col-md-12">
                        <label>File</label><br clear="all" />
                        <!-- TODO :: IF this is an NWIS file, show link to go see the data instead of the link to download -->
                        <span ng-if="!DFBox.nwisFile" class="col-sm-9 borderLess" style="padding:0">
                            <a class="btn borderLess" style="padding:0" target="_blank" class="btn btn-primary" ng-href="{{serverURL}}/Files/{{DFBox.fileID}}/Item">
                                {{DFBox.collect_date | date: 'MM/dd/yyyy'}} ({{DFBox.filePath}})
                            </a>
                        </span>
                        <span ng-if="DFBox.nwisFile" class="col-sm-9 borderLess" style="padding:0">
                            <a class="btn borderLess" style="padding:0" target="_blank" class="btn btn-primary" ng-href="{{DFBox.fileURL}}">{{DFBox.fileURL}}</a>
                        </span>
                    </div>
                </div>
                <!--</div>
                </div>
                </div>-->
                <!-- End SENSORs and HWMs used for Peak -->


                <br clear="all" />

                <!-- Peak Calculation Notes: -->
                <div class="form-group">
                    <label class="col-md-4 control-label" for="calc_notes">Peak Calculation Notes:</label>
                    <div class="col-md-5">
                        <textarea class="form-control" name="calc_notes" type=" text" rows="3" placeholder="Please document the reason this Peak was chosen for this event." ng-model="aPeak.calc_notes" />
                    </div>
                    <button type="button" class="col-md-2 borderLess" tooltip-placement="top" uib-tooltip="Please document the reason this Peak was chosen for this event.">
                        <span class="glyphicon glyphicon-question-sign"></span>
                    </button>
                </div>
                <br clear="all" />

                <!--Peak creator-->
                <div class="form-group">
                    <label class="col-md-4 control-label" for="member_id">Peak Creator:</label>
                    <div class="col-md-5" style="margin-top:13px">
                        <span>{{PeakCreator.fname}} {{PeakCreator.lname}}</span>
                    </div>
                </div>

                <!-- Peak Date: * -->
                <div class="form-group required" ng-class="{'has-error':peakForm.peak_date.date.$invalid && peakForm.peak_date.date.$dirty}">
                    <label class="col-md-4 control-label req" for="peak_date.date">Peak Date:</label>
                    <div class="col-md-5">
                        <datetimepicker hour-step="1" minute-step="1" ng-model="aPeak.peak_date.date" show-meridian="true"
                                        date-format="MM/dd/yyyy" readonly-date="false" readonly-time="false" date-options="dateOptions"
                                        hidden-time="true" hidden-date="false" show-spinners="true" required>
                        </datetimepicker>
                    </div>
                    <div class="col-md-1">
                        <span tooltip-placement="right" uib-tooltip="Date Estimated?">
                            <input type="checkbox" name="is_peak_estimated" ng-model="aPeak.is_peak_estimated" ng-true-value="1" ng-false-value="0" />
                        </span>
                    </div>
                </div>

                <!-- Peak Time: * -->
                <div class="form-group required" ng-class="{'has-error':peakForm.peak_date.time.$invalid && peakForm.peak_date.time.$dirty}">
                    <label class="col-md-4 control-label req" style="margin-top:4%" for="peak_time.time">Peak Time:</label>
                    <div class="col-md-5">
                        <datetimepicker hour-step="1" minute-step="1" ng-model="aPeak.peak_date.time" show-meridian="true"
                                        date-format="MM/dd/yyyy" readonly-date="false" readonly-time="false" date-options="dateOptions"
                                        hidden-time="false" hidden-date="true" show-spinners="true" required>
                        </datetimepicker>
                    </div>
                    <div class="col-md-1" style="margin-top:4%">
                        <span tooltip-placement="right" uib-tooltip="Time Estimated?">
                            <input type="checkbox" name="is_peak_time_estimated" ng-model="aPeak.is_peak_time_estimated" ng-true-value="1" ng-false-value="0" />
                        </span>
                    </div>
                </div>

                <!-- Time Zone:* -->
                <div class="form-group required">
                    <label class="col-md-4 control-label" for="time_zone">Peak Recorded In:</label>
                    <div class="col-md-5">
                        <select class="form-control" name="time_zone" ng-model="aPeak.time_zone"
                                ng-options="vcm for vcm in timeZoneList" required>
                            <option value=""></option>
                        </select>
                    </div>
                    <button type="button" class="col-md-2 borderLess" tooltip-placement="top" uib-tooltip="Date/Time will be stored in UTC.">
                        <span class="glyphicon glyphicon-question-sign"></span>
                    </button>
                </div>

                <!-- Peak Stage-->
                <div class="form-group">
                    <label class="col-md-4 control-label" for="peak_stage">Peak Stage (elevation ft):</label>
                    <div class="col-md-5">
                        <input class="form-control" ng-keypress="isNum($event)" name="peak_stage" ng-model="aPeak.peak_stage" type="text" />
                    </div>
                    <div class="col-md-1">
                        <span tooltip-placement="right" uib-tooltip="Peak Stage Estimated?">
                            <input type="checkbox" name="is_peak_stage_estimated" ng-model="aPeak.is_peak_stage_estimated" ng-true-value="1" ng-false-value="0" />
                        </span>
                    </div>
                </div>

                <!-- Vertical Datum: -->
                <div class="form-group" ng-class="{'required': aPeak.peak_stage}">
                    <label class="col-md-4 control-label" ng-class="{'req': aPeak.peak_stage}" for="vdatum_id">Vertical Datum:</label>
                    <div class="col-md-5">
                        <select class="form-control" name="vdatum_id" ng-model="aPeak.vdatum_id"
                                ng-options="vd.datum_id as vd.datum_abbreviation for vd in VDatumsList" ng-required="aPeak.peak_stage">
                            <option value=""></option>
                        </select>
                    </div>
                    <button ng-show="aPeak.peak_stage" type="button" class="col-md-2 borderLess" tooltip-placement="top" tooltip-append-to-body="false" uib-tooltip="Vertical Datum is required if Peak Stage Elevation is populated.">
                        <span class="glyphicon glyphicon-question-sign"></span>
                    </button>
                </div>

                <!-- Height Above Ground (ft)-->
                <div class="form-group">
                    <label class="col-md-4 control-label" for="height_above_gnd">Height Above Ground <br />(depth of water in ft):</label>
                    <div class="col-md-5">
                        <input class="form-control" ng-keypress="isNum($event)" name="height_above_gnd" ng-model="aPeak.height_above_gnd" type="text" />
                    </div>
                    <div class="col-md-1">
                        <span tooltip-placement="right" uib-tooltip="HAG Estimated?">
                            <input type="checkbox" name="is_hag_estimated" ng-model="aPeak.is_hag_estimated" ng-true-value="1" ng-false-value="0" />
                        </span>
                    </div>
                </div>

                <div class="panel panel-default">
                    <div class="panel-body">
                        <div class="col-md-8 col-md-offset-4">
                            These fields shall be filled out pursuant to sw13.01
                            <br />
                            Click this <a target="_blank" href="http://water.usgs.gov/admin/memo/SW/sw13.01.pdf">link</a> for more information.
                        </div>
                        <br clear="all" />
                        <!-- Peak Discharge-->
                        <div class="form-group">
                            <label class="col-md-4 control-label" for="peak_discharge">Peak Discharge:</label>
                            <div class="col-md-5">
                                <input class="form-control" ng-keypress="isNum($event)" name="peak_discharge" ng-model="aPeak.peak_discharge" type="text" />
                            </div>
                            <div class="col-md-1">
                                <span tooltip-placement="right" uib-tooltip="Peak Discharge Estimated?">
                                    <input type="checkbox" name="is_peak_discharge_estimated" ng-model="aPeak.is_peak_discharge_estimated" ng-true-value="1" ng-false-value="0" />
                                </span>
                            </div>
                        </div>

                        <!--AEP: -->
                        <div class="form-group">
                            <label class="col-md-4 control-label" for="aep">AEP:</label>
                            <div class="col-md-5">
                                <input class="form-control" ng-keypress="isNum($event)" name="aep" ng-model="aPeak.aep" type="text" />
                            </div>
                        </div>

                        <!--AEP Confidence Interval (lower limit): -->
                        <div class="form-group">
                            <label class="col-md-4 control-label" for="aep_lowci">AEP Confidence Interval<br />(lower limit):</label>
                            <div class="col-md-5">
                                <input class="form-control" ng-keypress="isNum($event)" name="aep_lowci" ng-model="aPeak.aep_lowci" type="text" />
                            </div>
                        </div>

                        <!--AEP Confidence Interval (upper limit): -->
                        <div class="form-group">
                            <label class="col-md-4 control-label" for="aep_upperci">AEP Confidence Interval<br />(upper limit):</label>
                            <div class="col-md-5">
                                <input class="form-control" ng-keypress="isNum($event)" name="aep_upperci" ng-model="aPeak.aep_upperci" type="text" />
                            </div>
                        </div>

                        <!--AEP Confidence Interval (percentage of limits): -->
                        <div class="form-group">
                            <label class="col-md-4 control-label" for="aep_range">AEP Confidence Interval<br />(percentage of limits):</label>
                            <div class="col-md-5">
                                <input class="form-control" ng-keypress="isNum($event)" name="aep_range" ng-model="aPeak.aep_range" type="text" />
                            </div>
                        </div>
                    </div>
                </div>


            </div><!-- end modal-body-->
            <div class="modal-footer">
                <button class="btn btn-primary" ng-if="aPeak.peak_summary_id != undefined" ng-click="savePeak(peakForm.$valid)">Save</button>
                <button class="btn btn-primary" ng-if="aPeak.peak_summary_id == undefined" ng-click="createPeak(peakForm.$valid)">Create</button>
                <button type="button" class="btn btn-danger" ng-if="loggedInRole == 'Admin' && aPeak.peak_summary_id !== undefined" ng-click="deletePeak()">Delete</button>
                <button type="button" class="btn btn-warning" ng-click="cancel()">Cancel</button>
            </div>
        </fieldset>
    </form>
</script>
